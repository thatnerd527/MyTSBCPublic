!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver((e=>{for(const n of e)if("childList"===n.type)for(const e of n.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)})).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();class e extends Error{constructor(t){super("Referenced value read before it was resolved."),this.ref=t,Object.setPrototypeOf(this,e.prototype)}}class t extends Error{constructor(e){super("Attempting to resolve an already-resolved reference."),this.ref=e,Object.setPrototypeOf(this,t.prototype)}}class n{constructor(){this._resolved=!1}get resolved(){return this.isResolved()}isResolved(){return this._resolved}get $(){if(!this.isResolved())throw new e(this);return this._$}resolve(e){if(this.isResolved())throw new t(this);this._$=e,this._resolved=!0}}let i=class{constructor(){this._renderer=new n}plug(e){this._renderer.resolve(e)}renderer(){return this._renderer.$}};function r(e){return!!e.plugins&&Array.isArray(e.plugins)}function s(e){return!!e.postRender&&"function"==typeof e.postRender}i.PriorityMax=1,i.PriorityFallback=0;class a{constructor(...e){this._appendPlugins=[],this._createPlugins=[],this._propPlugins=[],this._contentPlugins=[],this._postCreatePlugins=[],this._postRenderPlugins=[],this._factories=e}_buildPlugins(){return this._plugins||(this._plugins=this._factories.map((e=>e())).sort(((e,t)=>t.priority()-e.priority())),this._plugins.forEach((e=>{e.plug(this),function(e){return!!e.append&&"function"==typeof e.append}(e)&&this._appendPlugins.push(e),function(e){return!!e.setContent&&"function"==typeof e.setContent}(e)&&this._contentPlugins.push(e),function(e){return!!e.setProp&&"function"==typeof e.setProp}(e)&&this._propPlugins.push(e),function(e){return!!e.create&&"function"==typeof e.create}(e)&&this._createPlugins.push(e),function(e){return!!e.postCreate&&"function"==typeof e.postCreate}(e)&&this._postCreatePlugins.push(e),s(e)&&this._postRenderPlugins.push(e),function(e){return!!e.leaf&&"function"==typeof e.leaf}(e)&&!this._leafPlugin&&(this._leafPlugin=e),function(e){return!!e.fragment&&"function"==typeof e.fragment}(e)&&!this._fragmentPlugin&&(this._fragmentPlugin=e)}))),this}get plugins(){return this._buildPlugins()&&this._plugins}get appendPlugins(){return this._buildPlugins()&&this._appendPlugins}get contentPlugins(){return this._buildPlugins()&&this._contentPlugins}get propPlugins(){return this._buildPlugins()&&this._propPlugins}get createPlugins(){return this._buildPlugins()&&this._createPlugins}get postCreatePlugins(){return this._buildPlugins()&&this._postCreatePlugins}get postRenderPlugins(){return this._buildPlugins()&&this._postRenderPlugins}get leafPlugin(){return this._buildPlugins()&&this._leafPlugin}get fragmentPlugin(){return this._buildPlugins()&&this._fragmentPlugin}plug(...e){return this.clone(...this._factories,...e)}append(e,t){this.appendPlugins.some((n=>n.append(e,t)))||this.fallbackAppend(e,t)}setProp(e,t,n){this.propPlugins.some((i=>i.setProp(e,t,n)))||this.fallbackSetProp(e,t,n)}setContent(e,t){this.contentPlugins.some((n=>n.setContent(e,t)))||this.fallbackSetContent(e,t)}get fragment(){const e=this.fragmentPlugin;return e?e.fragment():this.fallbackFragment()}leaf(){const e=this.leafPlugin;return e?e.leaf():this.fallbackLeaf()}create(e,t,...n){let i;for(const r of this.createPlugins)if(i=r.create(e,t,...n),i)break;return i||(i=this.fallbackCreate(e,t),t&&Object.entries(t).forEach((([e,t])=>this.setProp(i,e,t))),n.forEach((e=>this.append(e,i)))),this.postCreatePlugins.forEach((e=>e.postCreate(i))),i}render(e){if("function"==typeof e)return this.render(e.apply(void 0,[this]));const t=this,n=this.postRender(e);return{after(i){t.renderAfter(e,i),n()},before(i){t.renderBefore(e,i),n()},on(i){t.renderOn(e,i),n()},target:e}}postRender(e){return()=>this.postRenderPlugins.forEach((t=>t.postRender(e)))}}class o extends i{setProp(e,t,n){return"_content"===t&&(this.renderer().setContent(e,n),!0)}priority(){return i.PriorityFallback}}class l extends i{setProp(e,t,i){return"_ref"===t&&i instanceof n&&(i.resolve(e),!0)}priority(){return i.PriorityFallback}}class c extends i{}class u extends i{constructor(...e){super(),this.processors=e}plug(e){super.plug(e),this.processors.forEach((e=>e.plug(this.renderer()))),r(e)&&e.plugins.forEach((e=>{e instanceof c&&this.processors.push(e)})),this.processors=this.processors.sort(((e,t)=>e.priority()-t.priority()))}create(e,t,...n){const i={tag:e,props:t||{},children:n};if(this.match(i)){let e={};const t=[];this.processors.forEach((n=>n.process((t=>e=Object.assign(Object.assign({},e),t)),(e=>t.push(e)),i)));const n=this.createComponent(i,e);return t.reverse().forEach((e=>e(n))),n}}}class d extends u{createComponent(e,t){return e.tag.apply(t,[e.props,this.renderer(),e.children])}match(e){return"function"==typeof e.tag}priority(){return u.PriorityFallback}}class h extends c{process(e,t){const n=this.renderer(),i=[];e({onBind:e=>i.push({bind:e}),onClear:e=>i.push({clear:e})}),t((e=>{i.forEach((t=>n.hook(e,t)))}))}priority(){return c.PriorityFallback}}function p(e,t=!1){const n=e;return e.nodeType===e.DOCUMENT_FRAGMENT_NODE?function(e,t){var n;let i=function(e){return e.lifecycleMarker}(e);if(i)return p(i,t);if(t)return i=null===(n=e.ownerDocument)||void 0===n?void 0:n.createTextNode(""),f(e,i),p(i,!0)}(e,t):n.lifecycle?n.lifecycle:t?(n.lifecycle={bound:!1},n.lifecycle):void 0}function f(e,t){e.lifecycleMarker=t,e.contains(t)||e.appendChild(t)}function m(e){const t=p(e);if(t){if(t.cleared)return;if(t.cleared=!0,t.clears){for(let e=0,n=t.clears[e];e<t.clears.length;n=t.clears[++e])n();t.clears=void 0}}const n=e.childNodes;for(let i=0,r=n.item(i);i<n.length;r=n.item(++i))m(r)}function g(e){const t=p(e);if(t){if(t.bound)return;if(t.bound=!0,t.binds)for(let e=0,n=t.binds[e];e<t.binds.length;n=t.binds[++e])n();t.binds=void 0}const n=e.childNodes;for(let i=0,r=n.item(i);i<n.length;r=n.item(++i))g(r)}function y(e){if("INPUT"===e.nodeName)return"number"===e.type?parseFloat(e.value):"checkbox"===e.type||"radio"===e.type?e.checked:e.value;if("SELECT"===e.nodeName){const t=e,n=Array.from(t.selectedOptions).map((e=>function(e){return e._value}(e)||e.value||e.text));return t.multiple?n:n[0]}return e.value}class _ extends c{process(e,t){let i;e({setLifeCycleMarker:e=>i=e}),t((e=>{e.nodeType===e.DOCUMENT_FRAGMENT_NODE&&i&&f(e,i instanceof n?i.$:i)}))}priority(){return c.PriorityFallback+(c.PriorityMax-c.PriorityFallback)/100}}class v extends Error{constructor(e){super(`Given tag is not recognized: ${e}`)}}class b extends a{constructor(e=window,...t){super(..."function"==typeof e?[e,...t]:t),this.dom=e&&"function"!=typeof e?e:window}get document(){return this.dom.document}fallbackAppend(e,t){e instanceof this.dom.Node?t.appendChild(e):Array.isArray(e)?e.forEach((e=>this.append(e,t))):t.appendChild(this.document.createTextNode(`${e}`))}fallbackSetProp(e,t,n){e instanceof this.dom.HTMLElement&&("boolean"==typeof n?n?e.setAttribute(t,""):e.removeAttribute(t):e.setAttribute(t,`${n}`))}fallbackSetContent(e,t){e instanceof this.dom.HTMLElement?e.innerHTML=`${t}`:e.textContent=`${t}`}fallbackFragment(){return this.document.createDocumentFragment()}fallbackLeaf(){return this.document.createTextNode("")}fallbackCreate(e,t){if(!(e instanceof this.dom.Node||"string"==typeof e))throw new v(e);return e instanceof this.dom.Node?e:t&&t.xmlns?this.document.createElementNS(`${t.xmlns}`,e):this.document.createElement(e)}renderOn(e,t){t.appendChild(e)}renderAfter(e,t){t.parentNode&&t.parentNode.insertBefore(e,t.nextSibling)}renderBefore(e,t){t.parentNode&&t.parentNode.insertBefore(e,t)}postRender(e){const t=this.plugins.filter(s);if(e instanceof this.dom.DocumentFragment){const t=Array.from(e.childNodes);return()=>t.forEach((e=>{this.postRender(e)()}))}return()=>t.forEach((t=>t.postRender(e)))}remove(e){var t;null===(t=e.parentNode)||void 0===t||t.removeChild(e)}clone(...e){return new b(this.dom,...e)}}class T extends b{hook(e,t){!function(e,t){const n=p(t,!0);e.bind&&(n.binds||(n.binds=[])).push(e.bind),e.clear&&(n.clears||(n.clears=[])).push(e.clear)}(t,e)}postRender(e){return e instanceof this.dom.DocumentFragment?super.postRender(e):()=>{this.document.contains(e)&&g(e),super.postRender(e)()}}plug(...e){return super.plug(...e)}clone(...e){return new T(this.dom,...e)}remove(e,t){super.remove(e),t||m(e)}}function E(e){return!!e.addClass&&"function"==typeof e.addClass}function w(e){return!!e.addClassToggle&&"function"==typeof e.addClassToggle}class S extends i{plug(e){super.plug(e),r(e)&&(this.addClassPlugins=e.plugins.filter(E),this.toggleClassPlugins=e.plugins.filter(w))}priority(){return i.PriorityFallback}setProp(e,t,n){if("class"===t){if(Array.isArray(n))return n.forEach((t=>{let n="";const i=t=>{e.classList.contains(n)&&e.classList.remove(n),e.classList.add(n=t)};this.addClassPlugins&&this.addClassPlugins.some((n=>E(n)&&n.addClass(e,t,i)))||("string"==typeof t?e.classList.add(t):this.setToggleMap(t,e))})),!0;if((null==n?void 0:n.constructor)===Object)return this.setToggleMap(n,e),!0}return!1}setToggleMap(e,t){Object.entries(e).forEach((([e,n])=>{this.toggleClassPlugins&&this.toggleClassPlugins.some((i=>w(i)&&i.addClassToggle(t,e,n,(n=>{n?t.classList.add(e):t.classList.remove(e)}))))||(n?t.classList.add(e):t.classList.remove(e))}))}}class C extends i{priority(){return i.PriorityFallback}setProp(e,t,n){if(t.startsWith("on")&&"function"==typeof n){const i=t.substr(2).toLowerCase();return e.addEventListener(i,n),!0}return!1}}class I extends i{priority(){return i.PriorityFallback}setProp(e,t,n){if("_state"===t&&("INPUT"===e.nodeName||"TEXTAREA"===e.nodeName||"SELECT"===e.nodeName)&&"function"==typeof n){const t=this.renderer();return t.hook(e,{bind(){if("INPUT"===e.nodeName&&"radio"===e.type&&e.name){const i=e;(i.form||t.document).querySelectorAll(`input[name="${i.name}"]`).forEach((e=>{e.form===i.form&&e.addEventListener("input",(()=>n(y(i))))}))}else e.addEventListener("input",(()=>n(y(e))));n(y(e))}}),!0}return!1}}class x extends i{priority(){return i.PriorityFallback}setProp(e,t,n){return"_value"===t&&"OPTION"===e.nodeName&&(function(e,t){e._value=t}(e,n),!0)}}function k(e){return!!e.setStyle&&"function"==typeof e.setStyle}class A extends i{plug(e){super.plug(e),r(e)&&(this.stylePlugins=e.plugins.filter(k))}priority(){return i.PriorityFallback}setProp(e,t,n){return"style"===t&&(null==n?void 0:n.constructor)===Object&&(Object.entries(n).forEach((([t,n])=>{this.stylePlugins&&this.stylePlugins.some((i=>k(i)&&i.setStyle(e,t,n,(n=>this.setStyle(e,t,n)))))||this.setStyle(e,t,n)})),!0)}format(e,t){const n=e.split(".");return{key:n[0],val:t,unit:n[1]||""}}setStyle(e,t,n){if("transform"===t&&"object"==typeof n)e.style.transform=Object.entries(n).map((e=>this.format(...e))).map((({key:e,val:t,unit:n})=>`${e}(${t}${n})`)).join(" ");else if("transition"===t&&"object"==typeof n)e.style.transition=Object.entries(n).map((e=>this.format(...e))).map((({key:e,val:t,unit:n})=>`${e} ${t}${n}`)).join(", ");else{const{key:i,val:r,unit:s}=this.format(t,`${n}`);e.style[i]=`${r}${s}`}}}const O=!1,P="${JSCORE_VERSION}",L=function(e,t){if(!e)throw N(t)},N=function(e){return new Error("Firebase Database ("+P+") INTERNAL ASSERT FAILED: "+e)},D=function(e){const t=[];let n=0;for(let i=0;i<e.length;i++){let r=e.charCodeAt(i);r<128?t[n++]=r:r<2048?(t[n++]=r>>6|192,t[n++]=63&r|128):55296==(64512&r)&&i+1<e.length&&56320==(64512&e.charCodeAt(i+1))?(r=65536+((1023&r)<<10)+(1023&e.charCodeAt(++i)),t[n++]=r>>18|240,t[n++]=r>>12&63|128,t[n++]=r>>6&63|128,t[n++]=63&r|128):(t[n++]=r>>12|224,t[n++]=r>>6&63|128,t[n++]=63&r|128)}return t},R={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let r=0;r<e.length;r+=3){const t=e[r],s=r+1<e.length,a=s?e[r+1]:0,o=r+2<e.length,l=o?e[r+2]:0,c=t>>2,u=(3&t)<<4|a>>4;let d=(15&a)<<2|l>>6,h=63&l;o||(h=64,s||(d=64)),i.push(n[c],n[u],n[d],n[h])}return i.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(D(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){const t=[];let n=0,i=0;for(;n<e.length;){const r=e[n++];if(r<128)t[i++]=String.fromCharCode(r);else if(r>191&&r<224){const s=e[n++];t[i++]=String.fromCharCode((31&r)<<6|63&s)}else if(r>239&&r<365){const s=((7&r)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[i++]=String.fromCharCode(55296+(s>>10)),t[i++]=String.fromCharCode(56320+(1023&s))}else{const s=e[n++],a=e[n++];t[i++]=String.fromCharCode((15&r)<<12|(63&s)<<6|63&a)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let r=0;r<e.length;){const t=n[e.charAt(r++)],s=r<e.length?n[e.charAt(r)]:0;++r;const a=r<e.length?n[e.charAt(r)]:64;++r;const o=r<e.length?n[e.charAt(r)]:64;if(++r,null==t||null==s||null==a||null==o)throw new M;const l=t<<2|s>>4;if(i.push(l),64!==a){const e=s<<4&240|a>>2;if(i.push(e),64!==o){const e=a<<6&192|o;i.push(e)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class M extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const F=function(e){const t=D(e);return R.encodeByteArray(t,!0)},U=function(e){return F(e).replace(/\./g,"")},B=function(e){try{return R.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};function j(e){return q(void 0,e)}function q(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:return new Date(t.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(const n in t)t.hasOwnProperty(n)&&H(n)&&(e[n]=q(e[n],t[n]));return e}function H(e){return"__proto__"!==e}const V=()=>function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if("undefined"!=typeof global)return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__,$=()=>{try{return V()||(()=>{if("undefined"==typeof process||void 0===process.env)return;const e={}.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0})()||(()=>{if("undefined"==typeof document)return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(n){return}const t=e&&B(e[1]);return t&&JSON.parse(t)})()}catch(e){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${e}`)}},W=e=>{var t,n;return null===(n=null===(t=$())||void 0===t?void 0:t.emulatorHosts)||void 0===n?void 0:n[e]},z=e=>{const t=W(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const i=parseInt(t.substring(n+1),10);return"["===t[0]?[t.substring(1,n-1),i]:[t.substring(0,n),i]},G=()=>{var e;return null===(e=$())||void 0===e?void 0:e.config},K=e=>{var t;return null===(t=$())||void 0===t?void 0:t[`_${e}`]};class X{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),"function"==typeof e&&(this.promise.catch((()=>{})),1===e.length?e(t):e(t,n))}}}function Y(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function Q(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Y())}function J(){const e="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof e&&void 0!==e.id}function Z(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function ee(){return!0===O}function te(){try{return"object"==typeof indexedDB}catch(e){return!1}}function ne(){return new Promise(((e,t)=>{try{let n=!0;const i="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(i);r.onsuccess=()=>{r.result.close(),n||self.indexedDB.deleteDatabase(i),e(!0)},r.onupgradeneeded=()=>{n=!1},r.onerror=()=>{var e;t((null===(e=r.error)||void 0===e?void 0:e.message)||"")}}catch(error){t(error)}}))}class ie extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,ie.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,re.prototype.create)}}class re{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e,...t){const n=t[0]||{},i=`${this.service}/${e}`,r=this.errors[e],s=r?function(e,t){return e.replace(se,((e,n)=>{const i=t[n];return null!=i?String(i):`<${n}?>`}))}(r,n):"Error",a=`${this.serviceName}: ${s} (${i}).`;return new ie(i,a,n)}}const se=/\{\$([^}]+)}/g;function ae(e){return JSON.parse(e)}function oe(e){return JSON.stringify(e)}const le=function(e){let t={},n={},i={},r="";try{const s=e.split(".");t=ae(B(s[0])||""),n=ae(B(s[1])||""),r=s[2],i=n.d||{},delete n.d}catch(s){}return{header:t,claims:n,data:i,signature:r}};function ce(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function ue(e,t){return Object.prototype.hasOwnProperty.call(e,t)?e[t]:void 0}function de(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function he(e,t,n){const i={};for(const r in e)Object.prototype.hasOwnProperty.call(e,r)&&(i[r]=t.call(n,e[r],r,e));return i}function pe(e,t){if(e===t)return!0;const n=Object.keys(e),i=Object.keys(t);for(const r of n){if(!i.includes(r))return!1;const n=e[r],s=t[r];if(fe(n)&&fe(s)){if(!pe(n,s))return!1}else if(n!==s)return!1}for(const r of i)if(!n.includes(r))return!1;return!0}function fe(e){return null!==e&&"object"==typeof e}function me(e){const t=[];for(const[n,i]of Object.entries(e))Array.isArray(i)?i.forEach((e=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))})):t.push(encodeURIComponent(n)+"="+encodeURIComponent(i));return t.length?"&"+t.join("&"):""}function ge(e){const t={};return e.replace(/^\?/,"").split("&").forEach((e=>{if(e){const[n,i]=e.split("=");t[decodeURIComponent(n)]=decodeURIComponent(i)}})),t}function ye(e){const t=e.indexOf("?");if(!t)return"";const n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}class _e{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,t){t||(t=0);const n=this.W_;if("string"==typeof e)for(let u=0;u<16;u++)n[u]=e.charCodeAt(t)<<24|e.charCodeAt(t+1)<<16|e.charCodeAt(t+2)<<8|e.charCodeAt(t+3),t+=4;else for(let u=0;u<16;u++)n[u]=e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3],t+=4;for(let u=16;u<80;u++){const e=n[u-3]^n[u-8]^n[u-14]^n[u-16];n[u]=4294967295&(e<<1|e>>>31)}let i,r,s=this.chain_[0],a=this.chain_[1],o=this.chain_[2],l=this.chain_[3],c=this.chain_[4];for(let u=0;u<80;u++){u<40?u<20?(i=l^a&(o^l),r=1518500249):(i=a^o^l,r=1859775393):u<60?(i=a&o|l&(a|o),r=2400959708):(i=a^o^l,r=3395469782);const e=(s<<5|s>>>27)+i+c+r+n[u]&4294967295;c=l,l=o,o=4294967295&(a<<30|a>>>2),a=s,s=e}this.chain_[0]=this.chain_[0]+s&4294967295,this.chain_[1]=this.chain_[1]+a&4294967295,this.chain_[2]=this.chain_[2]+o&4294967295,this.chain_[3]=this.chain_[3]+l&4294967295,this.chain_[4]=this.chain_[4]+c&4294967295}update(e,t){if(null==e)return;void 0===t&&(t=e.length);const n=t-this.blockSize;let i=0;const r=this.buf_;let s=this.inbuf_;for(;i<t;){if(0===s)for(;i<=n;)this.compress_(e,i),i+=this.blockSize;if("string"==typeof e){for(;i<t;)if(r[s]=e.charCodeAt(i),++s,++i,s===this.blockSize){this.compress_(r),s=0;break}}else for(;i<t;)if(r[s]=e[i],++s,++i,s===this.blockSize){this.compress_(r),s=0;break}}this.inbuf_=s,this.total_+=t}digest(){const e=[];let t=8*this.total_;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let i=this.blockSize-1;i>=56;i--)this.buf_[i]=255&t,t/=256;this.compress_(this.buf_);let n=0;for(let i=0;i<5;i++)for(let t=24;t>=0;t-=8)e[n]=this.chain_[i]>>t&255,++n;return e}}class ve{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then((()=>{e(this)})).catch((e=>{this.error(e)}))}next(e){this.forEachObserver((t=>{t.next(e)}))}error(e){this.forEachObserver((t=>{t.error(e)})),this.close(e)}complete(){this.forEachObserver((e=>{e.complete()})),this.close()}subscribe(e,t,n){let i;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");i=function(e,t){if("object"!=typeof e||null===e)return!1;for(const n of t)if(n in e&&"function"==typeof e[n])return!0;return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n},void 0===i.next&&(i.next=be),void 0===i.error&&(i.error=be),void 0===i.complete&&(i.complete=be);const r=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch(e){}})),this.observers.push(i),r}unsubscribeOne(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then((()=>{if(void 0!==this.observers&&void 0!==this.observers[e])try{t(this.observers[e])}catch(n){"undefined"!=typeof console&&console.error&&console.error(n)}}))}close(e){this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then((()=>{this.observers=void 0,this.onNoObservers=void 0})))}}function be(){}function Te(e,t){return`${e} failed: ${t} argument `}const Ee=function(e){let t=0;for(let n=0;n<e.length;n++){const i=e.charCodeAt(n);i<128?t++:i<2048?t+=2:i>=55296&&i<=56319?(t+=4,n++):t+=3}return t},we=1e3,Se=2,Ce=144e5,Ie=.5;function xe(e,t=we,n=Se){const i=t*Math.pow(n,e),r=Math.round(Ie*i*(Math.random()-.5)*2);return Math.min(Ce,i+r)}function ke(e){return e&&e._delegate?e._delegate:e}let Ae=class{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};const Oe="[DEFAULT]";class Pe{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const e=new X;if(this.instancesDeferred.set(t,e),this.isInitialized(t)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:t});n&&e.resolve(n)}catch(n){}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const n=this.normalizeInstanceIdentifier(null==e?void 0:e.identifier),i=null!==(t=null==e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(i)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(r){if(i)return null;throw r}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:Oe})}catch(t){}for(const[e,n]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(e);try{const e=this.getOrInitializeService({instanceIdentifier:i});n.resolve(e)}catch(t){}}}}clearInstance(e=Oe){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter((e=>"INTERNAL"in e)).map((e=>e.INTERNAL.delete())),...e.filter((e=>"_delete"in e)).map((e=>e._delete()))])}isComponentSet(){return null!=this.component}isInitialized(e=Oe){return this.instances.has(e)}getOptions(e=Oe){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[r,s]of this.instancesDeferred.entries()){n===this.normalizeInstanceIdentifier(r)&&s.resolve(i)}return i}onInit(e,t){var n;const i=this.normalizeInstanceIdentifier(t),r=null!==(n=this.onInitCallbacks.get(i))&&void 0!==n?n:new Set;r.add(e),this.onInitCallbacks.set(i,r);const s=this.instances.get(i);return s&&e(s,i),()=>{r.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const i of n)try{i(e,t)}catch(V_){}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let n=this.instances.get(e);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:(i=e,i===Oe?void 0:i),options:t}),this.instances.set(e,n),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(n,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,n)}catch(V_){}var i;return n||null}normalizeInstanceIdentifier(e=Oe){return this.component?this.component.multipleInstances?e:Oe:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class Le{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new Pe(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}var Ne;!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(Ne||(Ne={}));const De={debug:Ne.DEBUG,verbose:Ne.VERBOSE,info:Ne.INFO,warn:Ne.WARN,error:Ne.ERROR,silent:Ne.SILENT},Re=Ne.INFO,Me={[Ne.DEBUG]:"log",[Ne.VERBOSE]:"log",[Ne.INFO]:"info",[Ne.WARN]:"warn",[Ne.ERROR]:"error"},Fe=(e,t,...n)=>{if(t<e.logLevel)return;const i=(new Date).toISOString(),r=Me[t];if(!r)throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`);console[r](`[${i}]  ${e.name}:`,...n)};class Ue{constructor(e){this.name=e,this._logLevel=Re,this._logHandler=Fe,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ne))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel="string"==typeof e?De[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!=typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ne.DEBUG,...e),this._logHandler(this,Ne.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ne.VERBOSE,...e),this._logHandler(this,Ne.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ne.INFO,...e),this._logHandler(this,Ne.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ne.WARN,...e),this._logHandler(this,Ne.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ne.ERROR,...e),this._logHandler(this,Ne.ERROR,...e)}}const Be=(e,t)=>t.some((t=>e instanceof t));let je,qe;const He=new WeakMap,Ve=new WeakMap,$e=new WeakMap,We=new WeakMap,ze=new WeakMap;let Ge={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return Ve.get(e);if("objectStoreNames"===t)return e.objectStoreNames||$e.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Ye(e[t])},set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function Ke(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(qe||(qe=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(...t){return e.apply(Qe(this),t),Ye(He.get(this))}:function(...t){return Ye(e.apply(Qe(this),t))}:function(t,...n){const i=e.call(Qe(this),t,...n);return $e.set(i,t.sort?t.sort():[t]),Ye(i)}}function Xe(e){return"function"==typeof e?Ke(e):(e instanceof IDBTransaction&&function(e){if(Ve.has(e))return;const t=new Promise(((t,n)=>{const i=()=>{e.removeEventListener("complete",r),e.removeEventListener("error",s),e.removeEventListener("abort",s)},r=()=>{t(),i()},s=()=>{n(e.error||new DOMException("AbortError","AbortError")),i()};e.addEventListener("complete",r),e.addEventListener("error",s),e.addEventListener("abort",s)}));Ve.set(e,t)}(e),Be(e,je||(je=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction]))?new Proxy(e,Ge):e)}function Ye(e){if(e instanceof IDBRequest)return function(e){const t=new Promise(((t,n)=>{const i=()=>{e.removeEventListener("success",r),e.removeEventListener("error",s)},r=()=>{t(Ye(e.result)),i()},s=()=>{n(e.error),i()};e.addEventListener("success",r),e.addEventListener("error",s)}));return t.then((t=>{t instanceof IDBCursor&&He.set(t,e)})).catch((()=>{})),ze.set(t,e),t}(e);if(We.has(e))return We.get(e);const t=Xe(e);return t!==e&&(We.set(e,t),ze.set(t,e)),t}const Qe=e=>ze.get(e);const Je=["get","getKey","getAll","getAllKeys","count"],Ze=["put","add","delete","clear"],et=new Map;function tt(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!=typeof t)return;if(et.get(t))return et.get(t);const n=t.replace(/FromIndex$/,""),i=t!==n,r=Ze.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!r&&!Je.includes(n))return;const s=async function(e,...t){const s=this.transaction(e,r?"readwrite":"readonly");let a=s.store;return i&&(a=a.index(t.shift())),(await Promise.all([a[n](...t),r&&s.done]))[0]};return et.set(t,s),s}Ge=(e=>({...e,get:(t,n,i)=>tt(t,n)||e.get(t,n,i),has:(t,n)=>!!tt(t,n)||e.has(t,n)}))(Ge);class nt{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map((e=>{if(function(e){const t=e.getComponent();return"VERSION"===(null==t?void 0:t.type)}(e)){const t=e.getImmediate();return`${t.library}/${t.version}`}return null})).filter((e=>e)).join(" ")}}const it="@firebase/app",rt="0.9.12",st=new Ue("@firebase/app"),at="[DEFAULT]",ot={[it]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},lt=new Map,ct=new Map;function ut(e,t){try{e.container.addComponent(t)}catch(n){st.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,n)}}function dt(e){const t=e.name;if(ct.has(t))return st.debug(`There were multiple attempts to register component ${t}.`),!1;ct.set(t,e);for(const n of lt.values())ut(n,e);return!0}function ht(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}const pt=new re("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class ft{constructor(e,t,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new Ae("app",(()=>this),"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw pt.create("app-deleted",{appName:this._name})}}const mt="9.22.2";function gt(e,t={}){let n=e;if("object"!=typeof t){t={name:t}}const i=Object.assign({name:at,automaticDataCollectionEnabled:!1},t),r=i.name;if("string"!=typeof r||!r)throw pt.create("bad-app-name",{appName:String(r)});if(n||(n=G()),!n)throw pt.create("no-options");const s=lt.get(r);if(s){if(pe(n,s.options)&&pe(i,s.config))return s;throw pt.create("duplicate-app",{appName:r})}const a=new Le(r);for(const l of ct.values())a.addComponent(l);const o=new ft(n,i,a);return lt.set(r,o),o}function yt(e=at){const t=lt.get(e);if(!t&&e===at&&G())return gt();if(!t)throw pt.create("no-app",{appName:e});return t}function _t(e,t,n){var i;let r=null!==(i=ot[e])&&void 0!==i?i:e;n&&(r+=`-${n}`);const s=r.match(/\s|\//),a=t.match(/\s|\//);if(s||a){const e=[`Unable to register library "${r}" with version "${t}":`];return s&&e.push(`library name "${r}" contains illegal characters (whitespace or "/")`),s&&a&&e.push("and"),a&&e.push(`version name "${t}" contains illegal characters (whitespace or "/")`),void st.warn(e.join(" "))}dt(new Ae(`${r}-version`,(()=>({library:r,version:t})),"VERSION"))}const vt="firebase-heartbeat-database",bt=1,Tt="firebase-heartbeat-store";let Et=null;function wt(){return Et||(Et=function(e,t,{blocked:n,upgrade:i,blocking:r,terminated:s}={}){const a=indexedDB.open(e,t),o=Ye(a);return i&&a.addEventListener("upgradeneeded",(e=>{i(Ye(a.result),e.oldVersion,e.newVersion,Ye(a.transaction),e)})),n&&a.addEventListener("blocked",(e=>n(e.oldVersion,e.newVersion,e))),o.then((e=>{s&&e.addEventListener("close",(()=>s())),r&&e.addEventListener("versionchange",(e=>r(e.oldVersion,e.newVersion,e)))})).catch((()=>{})),o}(vt,bt,{upgrade:(e,t)=>{if(0===t)e.createObjectStore(Tt)}}).catch((e=>{throw pt.create("idb-open",{originalErrorMessage:e.message})}))),Et}async function St(e,t){try{const n=(await wt()).transaction(Tt,"readwrite"),i=n.objectStore(Tt);await i.put(t,Ct(e)),await n.done}catch(n){if(n instanceof ie)st.warn(n.message);else{const e=pt.create("idb-set",{originalErrorMessage:null==n?void 0:n.message});st.warn(e.message)}}}function Ct(e){return`${e.name}!${e.options.appId}`}class It{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new kt(t),this._heartbeatsCachePromise=this._storage.read().then((e=>(this._heartbeatsCache=e,e)))}async triggerHeartbeat(){const e=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),t=xt();if(null===this._heartbeatsCache&&(this._heartbeatsCache=await this._heartbeatsCachePromise),this._heartbeatsCache.lastSentHeartbeatDate!==t&&!this._heartbeatsCache.heartbeats.some((e=>e.date===t)))return this._heartbeatsCache.heartbeats.push({date:t,agent:e}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter((e=>{const t=new Date(e.date).valueOf();return Date.now()-t<=2592e6})),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null===this._heartbeatsCache||0===this._heartbeatsCache.heartbeats.length)return"";const e=xt(),{heartbeatsToSend:t,unsentEntries:n}=function(e,t=1024){const n=[];let i=e.slice();for(const r of e){const e=n.find((e=>e.agent===r.agent));if(e){if(e.dates.push(r.date),At(n)>t){e.dates.pop();break}}else if(n.push({agent:r.agent,dates:[r.date]}),At(n)>t){n.pop();break}i=i.slice(1)}return{heartbeatsToSend:n,unsentEntries:i}}(this._heartbeatsCache.heartbeats),i=U(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,n.length>0?(this._heartbeatsCache.heartbeats=n,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}}function xt(){return(new Date).toISOString().substring(0,10)}class kt{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!te()&&ne().then((()=>!0)).catch((()=>!1))}async read(){if(await this._canUseIndexedDBPromise){return await async function(e){try{const t=await wt();return await t.transaction(Tt).objectStore(Tt).get(Ct(e))}catch(t){if(t instanceof ie)st.warn(t.message);else{const e=pt.create("idb-get",{originalErrorMessage:null==t?void 0:t.message});st.warn(e.message)}}}(this.app)||{heartbeats:[]}}return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return St(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}}async add(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return St(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}}}function At(e){return U(JSON.stringify({version:2,heartbeats:e})).length}var Ot;Ot="",dt(new Ae("platform-logger",(e=>new nt(e)),"PRIVATE")),dt(new Ae("heartbeat",(e=>new It(e)),"PRIVATE")),_t(it,rt,Ot),_t(it,rt,"esm2017"),_t("fire-js","");_t("firebase","9.22.2","app");const Pt=(e,t)=>t.some((t=>e instanceof t));let Lt,Nt;const Dt=new WeakMap,Rt=new WeakMap,Mt=new WeakMap,Ft=new WeakMap,Ut=new WeakMap;let Bt={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return Rt.get(e);if("objectStoreNames"===t)return e.objectStoreNames||Mt.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Ht(e[t])},set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function jt(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(Nt||(Nt=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(...t){return e.apply(Vt(this),t),Ht(Dt.get(this))}:function(...t){return Ht(e.apply(Vt(this),t))}:function(t,...n){const i=e.call(Vt(this),t,...n);return Mt.set(i,t.sort?t.sort():[t]),Ht(i)}}function qt(e){return"function"==typeof e?jt(e):(e instanceof IDBTransaction&&function(e){if(Rt.has(e))return;const t=new Promise(((t,n)=>{const i=()=>{e.removeEventListener("complete",r),e.removeEventListener("error",s),e.removeEventListener("abort",s)},r=()=>{t(),i()},s=()=>{n(e.error||new DOMException("AbortError","AbortError")),i()};e.addEventListener("complete",r),e.addEventListener("error",s),e.addEventListener("abort",s)}));Rt.set(e,t)}(e),Pt(e,Lt||(Lt=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction]))?new Proxy(e,Bt):e)}function Ht(e){if(e instanceof IDBRequest)return function(e){const t=new Promise(((t,n)=>{const i=()=>{e.removeEventListener("success",r),e.removeEventListener("error",s)},r=()=>{t(Ht(e.result)),i()},s=()=>{n(e.error),i()};e.addEventListener("success",r),e.addEventListener("error",s)}));return t.then((t=>{t instanceof IDBCursor&&Dt.set(t,e)})).catch((()=>{})),Ut.set(t,e),t}(e);if(Ft.has(e))return Ft.get(e);const t=qt(e);return t!==e&&(Ft.set(e,t),Ut.set(t,e)),t}const Vt=e=>Ut.get(e);const $t=["get","getKey","getAll","getAllKeys","count"],Wt=["put","add","delete","clear"],zt=new Map;function Gt(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!=typeof t)return;if(zt.get(t))return zt.get(t);const n=t.replace(/FromIndex$/,""),i=t!==n,r=Wt.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!r&&!$t.includes(n))return;const s=async function(e,...t){const s=this.transaction(e,r?"readwrite":"readonly");let a=s.store;return i&&(a=a.index(t.shift())),(await Promise.all([a[n](...t),r&&s.done]))[0]};return zt.set(t,s),s}!function(e){Bt=e(Bt)}((e=>({...e,get:(t,n,i)=>Gt(t,n)||e.get(t,n,i),has:(t,n)=>!!Gt(t,n)||e.has(t,n)})));const Kt="@firebase/installations",Xt="0.6.4",Yt=1e4,Qt=`w:${Xt}`,Jt="FIS_v2",Zt="https://firebaseinstallations.googleapis.com/v1",en=36e5,tn=new re("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function nn(e){return e instanceof ie&&e.code.includes("request-failed")}function rn({projectId:e}){return`${Zt}/projects/${e}/installations`}function sn(e){return{token:e.token,requestStatus:2,expiresIn:(t=e.expiresIn,Number(t.replace("s","000"))),creationTime:Date.now()};var t}async function an(e,t){const n=(await t.json()).error;return tn.create("request-failed",{requestName:e,serverCode:n.code,serverMessage:n.message,serverStatus:n.status})}function on({apiKey:e}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":e})}function ln(e,{refreshToken:t}){const n=on(e);return n.append("Authorization",function(e){return`${Jt} ${e}`}(t)),n}async function cn(e){const t=await e();return t.status>=500&&t.status<600?e():t}function un(e){return new Promise((t=>{setTimeout(t,e)}))}const dn=/^[cdef][\w-]{21}$/,hn="";function pn(){try{const e=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(e),e[0]=112+e[0]%16;const t=function(e){const t=(n=e,btoa(String.fromCharCode(...n)).replace(/\+/g,"-").replace(/\//g,"_"));var n;return t.substr(0,22)}(e);return dn.test(t)?t:hn}catch(V_){return hn}}function fn(e){return`${e.appName}!${e.appId}`}const mn=new Map;function gn(e,t){const n=fn(e);yn(n,t),function(e,t){const n=function(){!_n&&"BroadcastChannel"in self&&(_n=new BroadcastChannel("[Firebase] FID Change"),_n.onmessage=e=>{yn(e.data.key,e.data.fid)});return _n}();n&&n.postMessage({key:e,fid:t});0===mn.size&&_n&&(_n.close(),_n=null)}(n,t)}function yn(e,t){const n=mn.get(e);if(n)for(const i of n)i(t)}let _n=null;const vn="firebase-installations-database",bn=1,Tn="firebase-installations-store";let En=null;function wn(){return En||(En=function(e,t,{blocked:n,upgrade:i,blocking:r,terminated:s}={}){const a=indexedDB.open(e,t),o=Ht(a);return i&&a.addEventListener("upgradeneeded",(e=>{i(Ht(a.result),e.oldVersion,e.newVersion,Ht(a.transaction))})),n&&a.addEventListener("blocked",(()=>n())),o.then((e=>{s&&e.addEventListener("close",(()=>s())),r&&e.addEventListener("versionchange",(()=>r()))})).catch((()=>{})),o}(vn,bn,{upgrade:(e,t)=>{if(0===t)e.createObjectStore(Tn)}})),En}async function Sn(e,t){const n=fn(e),i=(await wn()).transaction(Tn,"readwrite"),r=i.objectStore(Tn),s=await r.get(n);return await r.put(t,n),await i.done,s&&s.fid===t.fid||gn(e,t.fid),t}async function Cn(e){const t=fn(e),n=(await wn()).transaction(Tn,"readwrite");await n.objectStore(Tn).delete(t),await n.done}async function In(e,t){const n=fn(e),i=(await wn()).transaction(Tn,"readwrite"),r=i.objectStore(Tn),s=await r.get(n),a=t(s);return void 0===a?await r.delete(n):await r.put(a,n),await i.done,!a||s&&s.fid===a.fid||gn(e,a.fid),a}async function xn(e){let t;const n=await In(e.appConfig,(n=>{const i=function(e){const t=e||{fid:pn(),registrationStatus:0};return On(t)}(n),r=function(e,t){if(0===t.registrationStatus){if(!navigator.onLine){return{installationEntry:t,registrationPromise:Promise.reject(tn.create("app-offline"))}}const n={fid:t.fid,registrationStatus:1,registrationTime:Date.now()},i=async function(e,t){try{const n=await async function({appConfig:e,heartbeatServiceProvider:t},{fid:n}){const i=rn(e),r=on(e),s=t.getImmediate({optional:!0});if(s){const e=await s.getHeartbeatsHeader();e&&r.append("x-firebase-client",e)}const a={fid:n,authVersion:Jt,appId:e.appId,sdkVersion:Qt},o={method:"POST",headers:r,body:JSON.stringify(a)},l=await cn((()=>fetch(i,o)));if(l.ok){const e=await l.json();return{fid:e.fid||n,registrationStatus:2,refreshToken:e.refreshToken,authToken:sn(e.authToken)}}throw await an("Create Installation",l)}(e,t);return Sn(e.appConfig,n)}catch(n){throw nn(n)&&409===n.customData.serverCode?await Cn(e.appConfig):await Sn(e.appConfig,{fid:t.fid,registrationStatus:0}),n}}(e,n);return{installationEntry:n,registrationPromise:i}}return 1===t.registrationStatus?{installationEntry:t,registrationPromise:kn(e)}:{installationEntry:t}}(e,i);return t=r.registrationPromise,r.installationEntry}));return n.fid===hn?{installationEntry:await t}:{installationEntry:n,registrationPromise:t}}async function kn(e){let t=await An(e.appConfig);for(;1===t.registrationStatus;)await un(100),t=await An(e.appConfig);if(0===t.registrationStatus){const{installationEntry:t,registrationPromise:n}=await xn(e);return n||t}return t}function An(e){return In(e,(e=>{if(!e)throw tn.create("installation-not-found");return On(e)}))}function On(e){return 1===(t=e).registrationStatus&&t.registrationTime+Yt<Date.now()?{fid:e.fid,registrationStatus:0}:e;var t}async function Pn({appConfig:e,heartbeatServiceProvider:t},n){const i=function(e,{fid:t}){return`${rn(e)}/${t}/authTokens:generate`}(e,n),r=ln(e,n),s=t.getImmediate({optional:!0});if(s){const e=await s.getHeartbeatsHeader();e&&r.append("x-firebase-client",e)}const a={installation:{sdkVersion:Qt,appId:e.appId}},o={method:"POST",headers:r,body:JSON.stringify(a)},l=await cn((()=>fetch(i,o)));if(l.ok){return sn(await l.json())}throw await an("Generate Auth Token",l)}async function Ln(e,t=!1){let n;const i=await In(e.appConfig,(i=>{if(!Dn(i))throw tn.create("not-registered");const r=i.authToken;if(!t&&function(e){return 2===e.requestStatus&&!function(e){const t=Date.now();return t<e.creationTime||e.creationTime+e.expiresIn<t+en}(e)}(r))return i;if(1===r.requestStatus)return n=async function(e,t){let n=await Nn(e.appConfig);for(;1===n.authToken.requestStatus;)await un(100),n=await Nn(e.appConfig);const i=n.authToken;return 0===i.requestStatus?Ln(e,t):i}(e,t),i;{if(!navigator.onLine)throw tn.create("app-offline");const t=function(e){const t={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},e),{authToken:t})}(i);return n=async function(e,t){try{const n=await Pn(e,t),i=Object.assign(Object.assign({},t),{authToken:n});return await Sn(e.appConfig,i),n}catch(n){if(!nn(n)||401!==n.customData.serverCode&&404!==n.customData.serverCode){const n=Object.assign(Object.assign({},t),{authToken:{requestStatus:0}});await Sn(e.appConfig,n)}else await Cn(e.appConfig);throw n}}(e,t),t}}));return n?await n:i.authToken}function Nn(e){return In(e,(e=>{if(!Dn(e))throw tn.create("not-registered");const t=e.authToken;return 1===(n=t).requestStatus&&n.requestTime+Yt<Date.now()?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e;var n}))}function Dn(e){return void 0!==e&&2===e.registrationStatus}async function Rn(e,t=!1){const n=e;await async function(e){const{registrationPromise:t}=await xn(e);t&&await t}(n);return(await Ln(n,t)).token}function Mn(e){return tn.create("missing-app-config-values",{valueName:e})}const Fn="installations",Un=e=>{const t=ht(e.getProvider("app").getImmediate(),Fn).getImmediate();return{getId:()=>async function(e){const t=e,{installationEntry:n,registrationPromise:i}=await xn(t);return i?i.catch(console.error):Ln(t).catch(console.error),n.fid}(t),getToken:e=>Rn(t,e)}};dt(new Ae(Fn,(e=>{const t=e.getProvider("app").getImmediate(),n=function(e){if(!e||!e.options)throw Mn("App Configuration");if(!e.name)throw Mn("App Name");const t=["projectId","apiKey","appId"];for(const n of t)if(!e.options[n])throw Mn(n);return{appName:e.name,projectId:e.options.projectId,apiKey:e.options.apiKey,appId:e.options.appId}}(t);return{app:t,appConfig:n,heartbeatServiceProvider:ht(t,"heartbeat"),_delete:()=>Promise.resolve()}}),"PUBLIC")),dt(new Ae("installations-internal",Un,"PRIVATE")),_t(Kt,Xt),_t(Kt,Xt,"esm2017");const Bn="analytics",jn="firebase_id",qn="origin",Hn=6e4,Vn="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",$n="https://www.googletagmanager.com/gtag/js",Wn=new Ue("@firebase/analytics"),zn=new re("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."});function Gn(e){if(!e.startsWith($n)){const t=zn.create("invalid-gtag-resource",{gtagURL:e});return Wn.warn(t.message),""}return e}function Kn(e){return Promise.all(e.map((e=>e.catch((e=>e)))))}function Xn(e,t){const n=function(e,t){let n;return window.trustedTypes&&(n=window.trustedTypes.createPolicy(e,t)),n}("firebase-js-sdk-policy",{createScriptURL:Gn}),i=document.createElement("script"),r=`${$n}?l=${e}&id=${t}`;i.src=n?null==n?void 0:n.createScriptURL(r):r,i.async=!0,document.head.appendChild(i)}function Yn(e,t,n,i){return async function(r,...s){try{if("event"===r){const[i,r]=s;await async function(e,t,n,i,r){try{let s=[];if(r&&r.send_to){let e=r.send_to;Array.isArray(e)||(e=[e]);const i=await Kn(n);for(const n of e){const e=i.find((e=>e.measurementId===n)),r=e&&t[e.appId];if(!r){s=[];break}s.push(r)}}0===s.length&&(s=Object.values(t)),await Promise.all(s),e("event",i,r||{})}catch(s){Wn.error(s)}}(e,t,n,i,r)}else if("config"===r){const[r,a]=s;await async function(e,t,n,i,r,s){const a=i[r];try{if(a)await t[a];else{const e=(await Kn(n)).find((e=>e.measurementId===r));e&&await t[e.appId]}}catch(o){Wn.error(o)}e("config",r,s)}(e,t,n,i,r,a)}else if("consent"===r){const[t]=s;e("consent","update",t)}else if("get"===r){const[t,n,i]=s;e("get",t,n,i)}else if("set"===r){const[t]=s;e("set",t)}else e(r,...s)}catch(a){Wn.error(a)}}}const Qn=30;const Jn=new class{constructor(e={},t=1e3){this.throttleMetadata=e,this.intervalMillis=t}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,t){this.throttleMetadata[e]=t}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}};function Zn(e){return new Headers({Accept:"application/json","x-goog-api-key":e})}async function ei(e,t=Jn,n){const{appId:i,apiKey:r,measurementId:s}=e.options;if(!i)throw zn.create("no-app-id");if(!r){if(s)return{measurementId:s,appId:i};throw zn.create("no-api-key")}const a=t.getThrottleMetadata(i)||{backoffCount:0,throttleEndTimeMillis:Date.now()},o=new ni;return setTimeout((async()=>{o.abort()}),void 0!==n?n:Hn),ti({appId:i,apiKey:r,measurementId:s},a,o,t)}async function ti(e,{throttleEndTimeMillis:t,backoffCount:n},i,r=Jn){var s;const{appId:a,measurementId:o}=e;try{await function(e,t){return new Promise(((n,i)=>{const r=Math.max(t-Date.now(),0),s=setTimeout(n,r);e.addEventListener((()=>{clearTimeout(s),i(zn.create("fetch-throttle",{throttleEndTimeMillis:t}))}))}))}(i,t)}catch(l){if(o)return Wn.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${o} provided in the "measurementId" field in the local Firebase config. [${null==l?void 0:l.message}]`),{appId:a,measurementId:o};throw l}try{const t=await async function(e){var t;const{appId:n,apiKey:i}=e,r={method:"GET",headers:Zn(i)},s=Vn.replace("{app-id}",n),a=await fetch(s,r);if(200!==a.status&&304!==a.status){let e="";try{const n=await a.json();(null===(t=n.error)||void 0===t?void 0:t.message)&&(e=n.error.message)}catch(o){}throw zn.create("config-fetch-failed",{httpStatus:a.status,responseMessage:e})}return a.json()}(e);return r.deleteThrottleMetadata(a),t}catch(l){const t=l;if(!function(e){if(!(e instanceof ie&&e.customData))return!1;const t=Number(e.customData.httpStatus);return 429===t||500===t||503===t||504===t}(t)){if(r.deleteThrottleMetadata(a),o)return Wn.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${o} provided in the "measurementId" field in the local Firebase config. [${null==t?void 0:t.message}]`),{appId:a,measurementId:o};throw l}const c=503===Number(null===(s=null==t?void 0:t.customData)||void 0===s?void 0:s.httpStatus)?xe(n,r.intervalMillis,Qn):xe(n,r.intervalMillis),u={throttleEndTimeMillis:Date.now()+c,backoffCount:n+1};return r.setThrottleMetadata(a,u),Wn.debug(`Calling attemptFetch again in ${c} millis`),ti(e,u,i,r)}}class ni{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach((e=>e()))}}async function ii(e,t,n,i,r,s,a){var o;const l=ei(e);l.then((t=>{n[t.measurementId]=t.appId,e.options.measurementId&&t.measurementId!==e.options.measurementId&&Wn.warn(`The measurement ID in the local Firebase config (${e.options.measurementId}) does not match the measurement ID fetched from the server (${t.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)})).catch((e=>Wn.error(e))),t.push(l);const c=async function(){if(!te())return Wn.warn(zn.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{await ne()}catch(e){return Wn.warn(zn.create("indexeddb-unavailable",{errorInfo:null==e?void 0:e.toString()}).message),!1}return!0}().then((e=>e?i.getId():void 0)),[u,d]=await Promise.all([l,c]);(function(e){const t=window.document.getElementsByTagName("script");for(const n of Object.values(t))if(n.src&&n.src.includes($n)&&n.src.includes(e))return n;return null})(s)||Xn(s,u.measurementId),r("js",new Date);const h=null!==(o=null==a?void 0:a.config)&&void 0!==o?o:{};return h[qn]="firebase",h.update=!0,null!=d&&(h[jn]=d),r("config",u.measurementId,h),u.measurementId}class ri{constructor(e){this.app=e}_delete(){return delete si[this.app.options.appId],Promise.resolve()}}let si={},ai=[];const oi={};let li,ci,ui="dataLayer",di="gtag",hi=!1;function pi(){const e=[];if(J()&&e.push("This is a browser extension environment."),"undefined"!=typeof navigator&&navigator.cookieEnabled||e.push("Cookies are not available."),e.length>0){const t=e.map(((e,t)=>`(${t+1}) ${e}`)).join(" "),n=zn.create("invalid-analytics-context",{errorInfo:t});Wn.warn(n.message)}}function fi(e,t,n){pi();const i=e.options.appId;if(!i)throw zn.create("no-app-id");if(!e.options.apiKey){if(!e.options.measurementId)throw zn.create("no-api-key");Wn.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${e.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=si[i])throw zn.create("already-exists",{id:i});if(!hi){!function(e){let t=[];Array.isArray(window[e])?t=window[e]:window[e]=t}(ui);const{wrappedGtag:e,gtagCore:t}=function(e,t,n,i,r){let s=function(...e){window[i].push(arguments)};return window[r]&&"function"==typeof window[r]&&(s=window[r]),window[r]=Yn(s,e,t,n),{gtagCore:s,wrappedGtag:window[r]}}(si,ai,oi,ui,di);ci=e,li=t,hi=!0}si[i]=ii(e,ai,oi,t,li,ui,n);return new ri(e)}function mi(e=yt()){const t=ht(e=ke(e),Bn);return t.isInitialized()?t.getImmediate():function(e,t={}){const n=ht(e,Bn);if(n.isInitialized()){const e=n.getImmediate();if(pe(t,n.getOptions()))return e;throw zn.create("already-initialized")}const i=n.initialize({options:t});return i}(e)}function gi(e,t,n,i){e=ke(e),async function(e,t,n,i,r){if(r&&r.global)e("event",n,i);else{const r=await t;e("event",n,Object.assign(Object.assign({},i),{send_to:r}))}}(ci,si[e.app.options.appId],t,n,i).catch((e=>Wn.error(e)))}const yi="@firebase/analytics",_i="0.10.0";dt(new Ae(Bn,((e,{options:t})=>fi(e.getProvider("app").getImmediate(),e.getProvider("installations-internal").getImmediate(),t)),"PUBLIC")),dt(new Ae("analytics-internal",(function(e){try{const t=e.getProvider(Bn).getImmediate();return{logEvent:(e,n,i)=>gi(t,e,n,i)}}catch(t){throw zn.create("interop-component-reg-failed",{reason:t})}}),"PRIVATE")),_t(yi,_i),_t(yi,_i,"esm2017");const vi="@firebase/database",bi="0.14.4";let Ti="";function Ei(e){Ti=e}class wi{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),oe(t))}get(e){const t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:ae(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}class Si{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t}get(e){return ce(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}const Ci=function(e){try{if("undefined"!=typeof window&&void 0!==window[e]){const t=window[e];return t.setItem("firebase:sentinel","cache"),t.removeItem("firebase:sentinel"),new wi(t)}}catch(t){}return new Si},Ii=Ci("localStorage"),xi=Ci("sessionStorage"),ki=new Ue("@firebase/database"),Ai=function(){let e=1;return function(){return e++}}(),Oi=function(e){const t=function(e){const t=[];let n=0;for(let i=0;i<e.length;i++){let r=e.charCodeAt(i);if(r>=55296&&r<=56319){const t=r-55296;i++,L(i<e.length,"Surrogate pair missing trail surrogate."),r=65536+(t<<10)+(e.charCodeAt(i)-56320)}r<128?t[n++]=r:r<2048?(t[n++]=r>>6|192,t[n++]=63&r|128):r<65536?(t[n++]=r>>12|224,t[n++]=r>>6&63|128,t[n++]=63&r|128):(t[n++]=r>>18|240,t[n++]=r>>12&63|128,t[n++]=r>>6&63|128,t[n++]=63&r|128)}return t}(e),n=new _e;n.update(t);const i=n.digest();return R.encodeByteArray(i)},Pi=function(...e){let t="";for(let n=0;n<e.length;n++){const i=e[n];Array.isArray(i)||i&&"object"==typeof i&&"number"==typeof i.length?t+=Pi.apply(null,i):t+="object"==typeof i?oe(i):i,t+=" "}return t};let Li=null,Ni=!0;const Di=function(e,t){L(!t||!0===e||!1===e,"Can't turn on custom loggers persistently."),!0===e?(ki.logLevel=Ne.VERBOSE,Li=ki.log.bind(ki),t&&xi.set("logging_enabled",!0)):"function"==typeof e?Li=e:(Li=null,xi.remove("logging_enabled"))},Ri=function(...e){if(!0===Ni&&(Ni=!1,null===Li&&!0===xi.get("logging_enabled")&&Di(!0)),Li){const t=Pi.apply(null,e);Li(t)}},Mi=function(e){return function(...t){Ri(e,...t)}},Fi=function(...e){const t="FIREBASE INTERNAL ERROR: "+Pi(...e);ki.error(t)},Ui=function(...e){const t=`FIREBASE FATAL ERROR: ${Pi(...e)}`;throw ki.error(t),new Error(t)},Bi=function(...e){const t="FIREBASE WARNING: "+Pi(...e);ki.warn(t)},ji=function(e){return"number"==typeof e&&(e!=e||e===Number.POSITIVE_INFINITY||e===Number.NEGATIVE_INFINITY)},qi="[MIN_NAME]",Hi="[MAX_NAME]",Vi=function(e,t){if(e===t)return 0;if(e===qi||t===Hi)return-1;if(t===qi||e===Hi)return 1;{const n=Qi(e),i=Qi(t);return null!==n?null!==i?n-i==0?e.length-t.length:n-i:-1:null!==i?1:e<t?-1:1}},$i=function(e,t){return e===t?0:e<t?-1:1},Wi=function(e,t){if(t&&e in t)return t[e];throw new Error("Missing required key ("+e+") in object: "+oe(t))},zi=function(e){if("object"!=typeof e||null===e)return oe(e);const t=[];for(const i in e)t.push(i);t.sort();let n="{";for(let i=0;i<t.length;i++)0!==i&&(n+=","),n+=oe(t[i]),n+=":",n+=zi(e[t[i]]);return n+="}",n},Gi=function(e,t){const n=e.length;if(n<=t)return[e];const i=[];for(let r=0;r<n;r+=t)r+t>n?i.push(e.substring(r,n)):i.push(e.substring(r,r+t));return i};function Ki(e,t){for(const n in e)e.hasOwnProperty(n)&&t(n,e[n])}const Xi=function(e){L(!ji(e),"Invalid JSON number");const t=1023;let n,i,r,s,a;0===e?(i=0,r=0,n=1/e==-1/0?1:0):(n=e<0,(e=Math.abs(e))>=Math.pow(2,-1022)?(s=Math.min(Math.floor(Math.log(e)/Math.LN2),t),i=s+t,r=Math.round(e*Math.pow(2,52-s)-Math.pow(2,52))):(i=0,r=Math.round(e/Math.pow(2,-1074))));const o=[];for(a=52;a;a-=1)o.push(r%2?1:0),r=Math.floor(r/2);for(a=11;a;a-=1)o.push(i%2?1:0),i=Math.floor(i/2);o.push(n?1:0),o.reverse();const l=o.join("");let c="";for(a=0;a<64;a+=8){let e=parseInt(l.substr(a,8),2).toString(16);1===e.length&&(e="0"+e),c+=e}return c.toLowerCase()};const Yi=new RegExp("^-?(0*)\\d{1,10}$"),Qi=function(e){if(Yi.test(e)){const t=Number(e);if(t>=-2147483648&&t<=2147483647)return t}return null},Ji=function(e){try{e()}catch(t){setTimeout((()=>{const e=t.stack||"";throw Bi("Exception was thrown by user callback.",e),t}),Math.floor(0))}},Zi=function(e,t){const n=setTimeout(e,t);return"number"==typeof n&&"undefined"!=typeof Deno&&Deno.unrefTimer?Deno.unrefTimer(n):"object"==typeof n&&n.unref&&n.unref(),n};class er{constructor(e,t){this.appName_=e,this.appCheckProvider=t,this.appCheck=null==t?void 0:t.getImmediate({optional:!0}),this.appCheck||null==t||t.get().then((e=>this.appCheck=e))}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise(((t,n)=>{setTimeout((()=>{this.appCheck?this.getToken(e).then(t,n):t(null)}),0)}))}addTokenChangeListener(e){var t;null===(t=this.appCheckProvider)||void 0===t||t.get().then((t=>t.addTokenListener(e)))}notifyForInvalidToken(){Bi(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class tr{constructor(e,t,n){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=n,this.auth_=null,this.auth_=n.getImmediate({optional:!0}),this.auth_||n.onInit((e=>this.auth_=e))}getToken(e){return this.auth_?this.auth_.getToken(e).catch((e=>e&&"auth/token-not-initialized"===e.code?(Ri("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(e))):new Promise(((t,n)=>{setTimeout((()=>{this.auth_?this.getToken(e).then(t,n):t(null)}),0)}))}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then((t=>t.addAuthTokenListener(e)))}removeTokenChangeListener(e){this.authProvider_.get().then((t=>t.removeAuthTokenListener(e)))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Bi(e)}}class nr{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}nr.OWNER="owner";const ir=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,rr="ac",sr="websocket",ar="long_polling";class or{constructor(e,t,n,i,r=!1,s="",a=!1,o=!1){this.secure=t,this.namespace=n,this.webSocketOnly=i,this.nodeAdmin=r,this.persistenceKey=s,this.includeNamespaceInQueryParams=a,this.isUsingEmulator=o,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Ii.get("host:"+e)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&Ii.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){const e=this.secure?"https://":"http://",t=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${t}`}}function lr(e,t,n){let i;if(L("string"==typeof t,"typeof type must == string"),L("object"==typeof n,"typeof params must == object"),t===sr)i=(e.secure?"wss://":"ws://")+e.internalHost+"/.ws?";else{if(t!==ar)throw new Error("Unknown connection type: "+t);i=(e.secure?"https://":"http://")+e.internalHost+"/.lp?"}(function(e){return e.host!==e.internalHost||e.isCustomHost()||e.includeNamespaceInQueryParams})(e)&&(n.ns=e.namespace);const r=[];return Ki(n,((e,t)=>{r.push(e+"="+t)})),i+r.join("&")}class cr{constructor(){this.counters_={}}incrementCounter(e,t=1){ce(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return j(this.counters_)}}const ur={},dr={};function hr(e){const t=e.toString();return ur[t]||(ur[t]=new cr),ur[t]}class pr{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){const e=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let t=0;t<e.length;++t)e[t]&&Ji((()=>{this.onMessage_(e[t])}));if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}const fr="start";class mr{constructor(e,t,n,i,r,s,a){this.connId=e,this.repoInfo=t,this.applicationId=n,this.appCheckToken=i,this.authToken=r,this.transportSessionId=s,this.lastSessionId=a,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=Mi(e),this.stats_=hr(t),this.urlFn=e=>(this.appCheckToken&&(e[rr]=this.appCheckToken),lr(t,ar,e))}open(e,t){this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new pr(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout((()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null}),Math.floor(3e4)),function(e){if("complete"===document.readyState)e();else{let t=!1;const n=function(){document.body?t||(t=!0,e()):setTimeout(n,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",(()=>{"complete"===document.readyState&&n()})),window.attachEvent("onload",n))}}((()=>{if(this.isClosed_)return;this.scriptTagHolder=new gr(((...e)=>{const[t,n,i,r,s]=e;if(this.incrementIncomingBytes_(e),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,t===fr)this.id=n,this.password=i;else{if("close"!==t)throw new Error("Unrecognized command received: "+t);n?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(n,(()=>{this.onClosed_()}))):this.onClosed_()}}),((...e)=>{const[t,n]=e;this.incrementIncomingBytes_(e),this.myPacketOrderer.handleResponse(t,n)}),(()=>{this.onClosed_()}),this.urlFn);const e={};e[fr]="t",e.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(e.cb=this.scriptTagHolder.uniqueCallbackIdentifier),e.v="5",this.transportSessionId&&(e.s=this.transportSessionId),this.lastSessionId&&(e.ls=this.lastSessionId),this.applicationId&&(e.p=this.applicationId),this.appCheckToken&&(e[rr]=this.appCheckToken),"undefined"!=typeof location&&location.hostname&&ir.test(location.hostname)&&(e.r="f");const t=this.urlFn(e);this.log_("Connecting via long-poll to "+t),this.scriptTagHolder.addTag(t,(()=>{}))}))}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){mr.forceAllow_=!0}static forceDisallow(){mr.forceDisallow_=!0}static isAvailable(){return!!mr.forceAllow_||!(mr.forceDisallow_||"undefined"==typeof document||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI)}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const t=oe(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const n=F(t),i=Gi(n,1840);for(let r=0;r<i.length;r++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[r]),this.curSegmentNum++}addDisconnectPingFrame(e,t){this.myDisconnFrame=document.createElement("iframe");const n={dframe:"t"};n.id=e,n.pw=t,this.myDisconnFrame.src=this.urlFn(n),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const t=oe(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}class gr{constructor(e,t,n,i){this.onDisconnect=n,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=Ai(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=t,this.myIFrame=gr.createIFrame_();let n="";if(this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11)){n='<script>document.domain="'+document.domain+'";<\/script>'}const i="<html><body>"+n+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(i),this.myIFrame.doc.close()}catch(r){Ri("frame writing exception"),r.stack&&Ri(r.stack),Ri(r)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||Ri("No IE domain setting required")}catch(t){const n=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+n+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout((()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)}),Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;let t=this.urlFn(e),n="",i=0;for(;this.pendingSegs.length>0;){if(!(this.pendingSegs[0].d.length+30+n.length<=1870))break;{const e=this.pendingSegs.shift();n=n+"&seg"+i+"="+e.seg+"&ts"+i+"="+e.ts+"&d"+i+"="+e.d,i++}}return t+=n,this.addLongPollTag_(t,this.currentSerial),!0}return!1}enqueueSegment(e,t,n){this.pendingSegs.push({seg:e,ts:t,d:n}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);const n=()=>{this.outstandingRequests.delete(t),this.newRequest_()},i=setTimeout(n,Math.floor(25e3));this.addTag(e,(()=>{clearTimeout(i),n()}))}addTag(e,t){setTimeout((()=>{try{if(!this.sendNewPolls)return;const n=this.myIFrame.doc.createElement("script");n.type="text/javascript",n.async=!0,n.src=e,n.onload=n.onreadystatechange=function(){const e=n.readyState;e&&"loaded"!==e&&"complete"!==e||(n.onload=n.onreadystatechange=null,n.parentNode&&n.parentNode.removeChild(n),t())},n.onerror=()=>{Ri("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(n)}catch(n){}}),Math.floor(1))}}let yr=null;"undefined"!=typeof MozWebSocket?yr=MozWebSocket:"undefined"!=typeof WebSocket&&(yr=WebSocket);class _r{constructor(e,t,n,i,r,s,a){this.connId=e,this.applicationId=n,this.appCheckToken=i,this.authToken=r,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=Mi(this.connId),this.stats_=hr(t),this.connURL=_r.connectionURL_(t,s,a,i,n),this.nodeAdmin=t.nodeAdmin}static connectionURL_(e,t,n,i,r){const s={v:"5"};return"undefined"!=typeof location&&location.hostname&&ir.test(location.hostname)&&(s.r="f"),t&&(s.s=t),n&&(s.ls=n),i&&(s[rr]=i),r&&(s.p=r),lr(e,sr,s)}open(e,t){this.onDisconnect=t,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Ii.set("previous_websocket_failure",!0);try{let e;ee(),this.mySock=new yr(this.connURL,[],e)}catch(n){this.log_("Error instantiating WebSocket.");const e=n.message||n.data;return e&&this.log_(e),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=e=>{this.handleIncomingFrame(e)},this.mySock.onerror=e=>{this.log_("WebSocket error.  Closing connection.");const t=e.message||e.data;t&&this.log_(t),this.onClosed_()}}start(){}static forceDisallow(){_r.forceDisallow_=!0}static isAvailable(){let e=!1;if("undefined"!=typeof navigator&&navigator.userAgent){const t=/Android ([0-9]{0,}\.[0-9]{0,})/,n=navigator.userAgent.match(t);n&&n.length>1&&parseFloat(n[1])<4.4&&(e=!0)}return!e&&null!==yr&&!_r.forceDisallow_}static previouslyFailed(){return Ii.isInMemoryStorage||!0===Ii.get("previous_websocket_failure")}markConnectionHealthy(){Ii.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const e=this.frames.join("");this.frames=null;const t=ae(e);this.onMessage(t)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if(L(null===this.frames,"We already have a frame buffer"),e.length<=6){const t=Number(e);if(!isNaN(t))return this.handleNewFrameCount_(t),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(null===this.mySock)return;const t=e.data;if(this.bytesReceived+=t.length,this.stats_.incrementCounter("bytes_received",t.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(t);else{const e=this.extractFrameCount_(t);null!==e&&this.appendFrame_(e)}}send(e){this.resetKeepAlive();const t=oe(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const n=Gi(t,16384);n.length>1&&this.sendString_(String(n.length));for(let i=0;i<n.length;i++)this.sendString_(n[i])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval((()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()}),Math.floor(45e3))}sendString_(e){try{this.mySock.send(e)}catch(t){this.log_("Exception thrown from WebSocket.send():",t.message||t.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}_r.responsesRequiredToBeHealthy=2,_r.healthyTimeout=3e4;class vr{constructor(e){this.initTransports_(e)}static get ALL_TRANSPORTS(){return[mr,_r]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(e){const t=_r&&_r.isAvailable();let n=t&&!_r.previouslyFailed();if(e.webSocketOnly&&(t||Bi("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),n=!0),n)this.transports_=[_r];else{const e=this.transports_=[];for(const t of vr.ALL_TRANSPORTS)t&&t.isAvailable()&&e.push(t);vr.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}vr.globalTransportInitialized_=!1;class br{constructor(e,t,n,i,r,s,a,o,l,c){this.id=e,this.repoInfo_=t,this.applicationId_=n,this.appCheckToken_=i,this.authToken_=r,this.onMessage_=s,this.onReady_=a,this.onDisconnect_=o,this.onKill_=l,this.lastSessionId=c,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=Mi("c:"+this.id+":"),this.transportManager_=new vr(t),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.conn_),n=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout((()=>{this.conn_&&this.conn_.open(t,n)}),Math.floor(0));const i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=Zi((()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))}),Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{2!==this.state_&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){const t={t:"d",d:e};this.sendData_(t)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if("t"in e){const t=e.t;"a"===t?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),this.tx_!==this.secondaryConn_&&this.rx_!==this.secondaryConn_||this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const t=Wi("t",e),n=Wi("d",e);if("c"===t)this.onSecondaryControl_(n);else{if("d"!==t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(n)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const t=Wi("t",e),n=Wi("d",e);"c"===t?this.onControl_(n):"d"===t&&this.onDataMessage_(n)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const t=Wi("t",e);if("d"in e){const n=e.d;if("h"===t){const e=Object.assign({},n);this.repoInfo_.isUsingEmulator&&(e.h=this.repoInfo_.host),this.onHandshake_(e)}else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let e=0;e<this.pendingDataMessages.length;++e)this.onDataMessage_(this.pendingDataMessages[e]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(n):"r"===t?this.onReset_(n):"e"===t?Fi("Server Error: "+n):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):Fi("Unknown control packet command: "+t)}}onHandshake_(e){const t=e.ts,n=e.v,i=e.h;this.sessionId=e.s,this.repoInfo_.host=i,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),"5"!==n&&Bi("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.secondaryConn_),n=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,n),Zi((()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())}),Math.floor(6e4))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Zi((()=>{this.sendPingOnPrimaryIfNecessary_()}),Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){this.isHealthy_||1!==this.state_||(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,this.tx_!==e&&this.rx_!==e||this.close()}onConnectionLost_(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Ii.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class Tr{put(e,t,n,i){}merge(e,t,n,i){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,n){}onDisconnectMerge(e,t,n){}onDisconnectCancel(e,t){}reportStats(e){}}class Er{constructor(e){this.allowedEvents_=e,this.listeners_={},L(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...t){if(Array.isArray(this.listeners_[e])){const n=[...this.listeners_[e]];for(let e=0;e<n.length;e++)n[e].callback.apply(n[e].context,t)}}on(e,t,n){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:n});const i=this.getInitialEvent(e);i&&t.apply(n,i)}off(e,t,n){this.validateEventType_(e);const i=this.listeners_[e]||[];for(let r=0;r<i.length;r++)if(i[r].callback===t&&(!n||n===i[r].context))return void i.splice(r,1)}validateEventType_(e){L(this.allowedEvents_.find((t=>t===e)),"Unknown event: "+e)}}class wr extends Er{constructor(){super(["online"]),this.online_=!0,"undefined"==typeof window||void 0===window.addEventListener||Q()||(window.addEventListener("online",(()=>{this.online_||(this.online_=!0,this.trigger("online",!0))}),!1),window.addEventListener("offline",(()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))}),!1))}static getInstance(){return new wr}getInitialEvent(e){return L("online"===e,"Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}const Sr=32,Cr=768;class Ir{constructor(e,t){if(void 0===t){this.pieces_=e.split("/");let t=0;for(let e=0;e<this.pieces_.length;e++)this.pieces_[e].length>0&&(this.pieces_[t]=this.pieces_[e],t++);this.pieces_.length=t,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"}}function xr(){return new Ir("")}function kr(e){return e.pieceNum_>=e.pieces_.length?null:e.pieces_[e.pieceNum_]}function Ar(e){return e.pieces_.length-e.pieceNum_}function Or(e){let t=e.pieceNum_;return t<e.pieces_.length&&t++,new Ir(e.pieces_,t)}function Pr(e){return e.pieceNum_<e.pieces_.length?e.pieces_[e.pieces_.length-1]:null}function Lr(e,t=0){return e.pieces_.slice(e.pieceNum_+t)}function Nr(e){if(e.pieceNum_>=e.pieces_.length)return null;const t=[];for(let n=e.pieceNum_;n<e.pieces_.length-1;n++)t.push(e.pieces_[n]);return new Ir(t,0)}function Dr(e,t){const n=[];for(let i=e.pieceNum_;i<e.pieces_.length;i++)n.push(e.pieces_[i]);if(t instanceof Ir)for(let i=t.pieceNum_;i<t.pieces_.length;i++)n.push(t.pieces_[i]);else{const e=t.split("/");for(let t=0;t<e.length;t++)e[t].length>0&&n.push(e[t])}return new Ir(n,0)}function Rr(e){return e.pieceNum_>=e.pieces_.length}function Mr(e,t){const n=kr(e),i=kr(t);if(null===n)return t;if(n===i)return Mr(Or(e),Or(t));throw new Error("INTERNAL ERROR: innerPath ("+t+") is not within outerPath ("+e+")")}function Fr(e,t){const n=Lr(e,0),i=Lr(t,0);for(let r=0;r<n.length&&r<i.length;r++){const e=Vi(n[r],i[r]);if(0!==e)return e}return n.length===i.length?0:n.length<i.length?-1:1}function Ur(e,t){if(Ar(e)!==Ar(t))return!1;for(let n=e.pieceNum_,i=t.pieceNum_;n<=e.pieces_.length;n++,i++)if(e.pieces_[n]!==t.pieces_[i])return!1;return!0}function Br(e,t){let n=e.pieceNum_,i=t.pieceNum_;if(Ar(e)>Ar(t))return!1;for(;n<e.pieces_.length;){if(e.pieces_[n]!==t.pieces_[i])return!1;++n,++i}return!0}class jr{constructor(e,t){this.errorPrefix_=t,this.parts_=Lr(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let n=0;n<this.parts_.length;n++)this.byteLength_+=Ee(this.parts_[n]);qr(this)}}function qr(e){if(e.byteLength_>Cr)throw new Error(e.errorPrefix_+"has a key path longer than "+Cr+" bytes ("+e.byteLength_+").");if(e.parts_.length>Sr)throw new Error(e.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+Sr+") or object contains a cycle "+Hr(e))}function Hr(e){return 0===e.parts_.length?"":"in property '"+e.parts_.join(".")+"'"}class Vr extends Er{constructor(){let e,t;super(["visible"]),"undefined"!=typeof document&&void 0!==document.addEventListener&&(void 0!==document.hidden?(t="visibilitychange",e="hidden"):void 0!==document.mozHidden?(t="mozvisibilitychange",e="mozHidden"):void 0!==document.msHidden?(t="msvisibilitychange",e="msHidden"):void 0!==document.webkitHidden&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,(()=>{const t=!document[e];t!==this.visible_&&(this.visible_=t,this.trigger("visible",t))}),!1)}static getInstance(){return new Vr}getInitialEvent(e){return L("visible"===e,"Unknown event type: "+e),[this.visible_]}}const $r=1e3;class Wr extends Tr{constructor(e,t,n,i,r,s,a,o){if(super(),this.repoInfo_=e,this.applicationId_=t,this.onDataUpdate_=n,this.onConnectStatus_=i,this.onServerInfoUpdate_=r,this.authTokenProvider_=s,this.appCheckTokenProvider_=a,this.authOverride_=o,this.id=Wr.nextPersistentConnectionId_++,this.log_=Mi("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=$r,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,o&&!ee())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");Vr.getInstance().on("visible",this.onVisible_,this),-1===e.host.indexOf("fblocal")&&wr.getInstance().on("online",this.onOnline_,this)}sendRequest(e,t,n){const i=++this.requestNumber_,r={r:i,a:e,b:t};this.log_(oe(r)),L(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(r),n&&(this.requestCBHash_[i]=n)}get(e){this.initConnection_();const t=new X,n={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:e=>{const n=e.d;"ok"===e.s?t.resolve(n):t.reject(n)}};this.outstandingGets_.push(n),this.outstandingGetCount_++;const i=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(i),t.promise}listen(e,t,n,i){this.initConnection_();const r=e._queryIdentifier,s=e._path.toString();this.log_("Listen called for "+s+" "+r),this.listens.has(s)||this.listens.set(s,new Map),L(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),L(!this.listens.get(s).has(r),"listen() called twice for same path/queryId.");const a={onComplete:i,hashFn:t,query:e,tag:n};this.listens.get(s).set(r,a),this.connected_&&this.sendListen_(a)}sendGet_(e){const t=this.outstandingGets_[e];this.sendRequest("g",t.request,(n=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),t.onComplete&&t.onComplete(n)}))}sendListen_(e){const t=e.query,n=t._path.toString(),i=t._queryIdentifier;this.log_("Listen on "+n+" for "+i);const r={p:n};e.tag&&(r.q=t._queryObject,r.t=e.tag),r.h=e.hashFn(),this.sendRequest("q",r,(r=>{const s=r.d,a=r.s;Wr.warnOnListenWarnings_(s,t);(this.listens.get(n)&&this.listens.get(n).get(i))===e&&(this.log_("listen response",r),"ok"!==a&&this.removeListen_(n,i),e.onComplete&&e.onComplete(a,s))}))}static warnOnListenWarnings_(e,t){if(e&&"object"==typeof e&&ce(e,"w")){const n=ue(e,"w");if(Array.isArray(n)&&~n.indexOf("no_index")){const e='".indexOn": "'+t._queryParams.getIndex().toString()+'"',n=t._path.toString();Bi(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${e} at ${n} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},(()=>{})),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&40===e.length||function(e){const t=le(e).claims;return"object"==typeof t&&!0===t.admin}(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},(()=>{}))}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,t=function(e){const t=le(e).claims;return!!t&&"object"==typeof t&&t.hasOwnProperty("iat")}(e)?"auth":"gauth",n={cred:e};null===this.authOverride_?n.noauth=!0:"object"==typeof this.authOverride_&&(n.authvar=this.authOverride_),this.sendRequest(t,n,(t=>{const n=t.s,i=t.d||"error";this.authToken_===e&&("ok"===n?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(n,i))}))}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},(e=>{const t=e.s,n=e.d||"error";"ok"===t?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(t,n)}))}unlisten(e,t){const n=e._path.toString(),i=e._queryIdentifier;this.log_("Unlisten called for "+n+" "+i),L(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query");this.removeListen_(n,i)&&this.connected_&&this.sendUnlisten_(n,i,e._queryObject,t)}sendUnlisten_(e,t,n,i){this.log_("Unlisten on "+e+" for "+t);const r={p:e};i&&(r.q=n,r.t=i),this.sendRequest("n",r)}onDisconnectPut(e,t,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,t,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:t,onComplete:n})}onDisconnectMerge(e,t,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,t,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:t,onComplete:n})}onDisconnectCancel(e,t){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,t):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:t})}sendOnDisconnect_(e,t,n,i){const r={p:t,d:n};this.log_("onDisconnect "+e,r),this.sendRequest(e,r,(e=>{i&&setTimeout((()=>{i(e.s,e.d)}),Math.floor(0))}))}put(e,t,n,i){this.putInternal("p",e,t,n,i)}merge(e,t,n,i){this.putInternal("m",e,t,n,i)}putInternal(e,t,n,i,r){this.initConnection_();const s={p:t,d:n};void 0!==r&&(s.h=r),this.outstandingPuts_.push({action:e,request:s,onComplete:i}),this.outstandingPutCount_++;const a=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(a):this.log_("Buffering put: "+t)}sendPut_(e){const t=this.outstandingPuts_[e].action,n=this.outstandingPuts_[e].request,i=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(t,n,(n=>{this.log_(t+" response",n),delete this.outstandingPuts_[e],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),i&&i(n.s,n.d)}))}reportStats(e){if(this.connected_){const t={c:e};this.log_("reportStats",t),this.sendRequest("s",t,(e=>{if("ok"!==e.s){const t=e.d;this.log_("reportStats","Error sending stats: "+t)}}))}}onDataMessage_(e){if("r"in e){this.log_("from server: "+oe(e));const t=e.r,n=this.requestCBHash_[t];n&&(delete this.requestCBHash_[t],n(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,t){this.log_("handleServerMessage",e,t),"d"===e?this.onDataUpdate_(t.p,t.d,!1,t.t):"m"===e?this.onDataUpdate_(t.p,t.d,!0,t.t):"c"===e?this.onListenRevoked_(t.p,t.q):"ac"===e?this.onAuthRevoked_(t.s,t.d):"apc"===e?this.onAppCheckRevoked_(t.s,t.d):"sd"===e?this.onSecurityDebugPacket_(t):Fi("Unrecognized action received from server: "+oe(e)+"\nAre you using the latest client?")}onReady_(e,t){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(e),this.lastSessionId=t,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){L(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout((()=>{this.establishConnectionTimer_=null,this.establishConnection_()}),Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=$r,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=$r,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){if(this.visible_){if(this.lastConnectionEstablishedTime_){(new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=$r),this.lastConnectionEstablishedTime_=null}}else this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime();const e=(new Date).getTime()-this.lastConnectionAttemptTime_;let t=Math.max(0,this.reconnectDelay_-e);t=Math.random()*t,this.log_("Trying to reconnect in "+t+"ms"),this.scheduleConnect_(t),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=(new Date).getTime(),this.lastConnectionEstablishedTime_=null;const e=this.onDataMessage_.bind(this),t=this.onReady_.bind(this),n=this.onRealtimeDisconnect_.bind(this),i=this.id+":"+Wr.nextConnectionId_++,r=this.lastSessionId;let s=!1,a=null;const o=function(){a?a.close():(s=!0,n())},l=function(e){L(a,"sendRequest call when we're not connected not allowed."),a.sendRequest(e)};this.realtime_={close:o,sendRequest:l};const c=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[o,l]=await Promise.all([this.authTokenProvider_.getToken(c),this.appCheckTokenProvider_.getToken(c)]);s?Ri("getToken() completed but was canceled"):(Ri("getToken() completed. Creating connection."),this.authToken_=o&&o.accessToken,this.appCheckToken_=l&&l.token,a=new br(i,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,e,t,n,(e=>{Bi(e+" ("+this.repoInfo_.toString()+")"),this.interrupt("server_kill")}),r))}catch(error){this.log_("Failed to get token: "+error),s||(this.repoInfo_.nodeAdmin&&Bi(error),o())}}}interrupt(e){Ri("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){Ri("Resuming connection for reason: "+e),delete this.interruptReasons_[e],de(this.interruptReasons_)&&(this.reconnectDelay_=$r,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const t=e-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:t})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const t=this.outstandingPuts_[e];t&&"h"in t.request&&t.queued&&(t.onComplete&&t.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(e,t){let n;n=t?t.map((e=>zi(e))).join("$"):"default";const i=this.removeListen_(e,n);i&&i.onComplete&&i.onComplete("permission_denied")}removeListen_(e,t){const n=new Ir(e).toString();let i;if(this.listens.has(n)){const e=this.listens.get(n);i=e.get(t),e.delete(t),0===e.size&&this.listens.delete(n)}else i=void 0;return i}onAuthRevoked_(e,t){Ri("Auth token revoked: "+e+"/"+t),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),"invalid_token"!==e&&"permission_denied"!==e||(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,t){Ri("App check token revoked: "+e+"/"+t),this.appCheckToken_=null,this.forceTokenRefresh_=!0,"invalid_token"!==e&&"permission_denied"!==e||(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const t of e.values())this.sendListen_(t);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};e["sdk.js."+Ti.replace(/\./g,"-")]=1,Q()?e["framework.cordova"]=1:Z()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=wr.getInstance().currentlyOnline();return de(this.interruptReasons_)&&e}}Wr.nextPersistentConnectionId_=0,Wr.nextConnectionId_=0;class zr{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new zr(e,t)}}class Gr{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){const n=new zr(qi,e),i=new zr(qi,t);return 0!==this.compare(n,i)}minPost(){return zr.MIN}}let Kr;class Xr extends Gr{static get __EMPTY_NODE(){return Kr}static set __EMPTY_NODE(e){Kr=e}compare(e,t){return Vi(e.name,t.name)}isDefinedOn(e){throw N("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return zr.MIN}maxPost(){return new zr(Hi,Kr)}makePost(e,t){return L("string"==typeof e,"KeyIndex indexValue must always be a string."),new zr(e,Kr)}toString(){return".key"}}const Yr=new Xr;class Qr{constructor(e,t,n,i,r=null){this.isReverse_=i,this.resultGenerator_=r,this.nodeStack_=[];let s=1;for(;!e.isEmpty();)if(s=t?n(e.key,t):1,i&&(s*=-1),s<0)e=this.isReverse_?e.left:e.right;else{if(0===s){this.nodeStack_.push(e);break}this.nodeStack_.push(e),e=this.isReverse_?e.right:e.left}}getNext(){if(0===this.nodeStack_.length)return null;let e,t=this.nodeStack_.pop();if(e=this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value},this.isReverse_)for(t=t.left;!t.isEmpty();)this.nodeStack_.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack_.push(t),t=t.left;return e}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}class Jr{constructor(e,t,n,i,r){this.key=e,this.value=t,this.color=null!=n?n:Jr.RED,this.left=null!=i?i:Zr.EMPTY_NODE,this.right=null!=r?r:Zr.EMPTY_NODE}copy(e,t,n,i,r){return new Jr(null!=e?e:this.key,null!=t?t:this.value,null!=n?n:this.color,null!=i?i:this.left,null!=r?r:this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let i=this;const r=n(e,i.key);return i=r<0?i.copy(null,null,null,i.left.insert(e,t,n),null):0===r?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,n)),i.fixUp_()}removeMin_(){if(this.left.isEmpty())return Zr.EMPTY_NODE;let e=this;return e.left.isRed_()||e.left.left.isRed_()||(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,t){let n,i;if(n=this,t(e,n.key)<0)n.left.isEmpty()||n.left.isRed_()||n.left.left.isRed_()||(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.remove(e,t),null);else{if(n.left.isRed_()&&(n=n.rotateRight_()),n.right.isEmpty()||n.right.isRed_()||n.right.left.isRed_()||(n=n.moveRedRight_()),0===t(e,n.key)){if(n.right.isEmpty())return Zr.EMPTY_NODE;i=n.right.min_(),n=n.copy(i.key,i.value,null,null,n.right.removeMin_())}n=n.copy(null,null,null,null,n.right.remove(e,t))}return n.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,Jr.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,Jr.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}Jr.RED=!0,Jr.BLACK=!1;class Zr{constructor(e,t=Zr.EMPTY_NODE){this.comparator_=e,this.root_=t}insert(e,t){return new Zr(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,Jr.BLACK,null,null))}remove(e){return new Zr(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,Jr.BLACK,null,null))}get(e){let t,n=this.root_;for(;!n.isEmpty();){if(t=this.comparator_(e,n.key),0===t)return n.value;t<0?n=n.left:t>0&&(n=n.right)}return null}getPredecessorKey(e){let t,n=this.root_,i=null;for(;!n.isEmpty();){if(t=this.comparator_(e,n.key),0===t){if(n.left.isEmpty())return i?i.key:null;for(n=n.left;!n.right.isEmpty();)n=n.right;return n.key}t<0?n=n.left:t>0&&(i=n,n=n.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new Qr(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new Qr(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new Qr(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new Qr(this.root_,null,this.comparator_,!0,e)}}function es(e,t){return Vi(e.name,t.name)}function ts(e,t){return Vi(e,t)}let ns;Zr.EMPTY_NODE=new class{copy(e,t,n,i,r){return this}insert(e,t,n){return new Jr(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const is=function(e){return"number"==typeof e?"number:"+Xi(e):"string:"+e},rs=function(e){if(e.isLeafNode()){const t=e.val();L("string"==typeof t||"number"==typeof t||"object"==typeof t&&ce(t,".sv"),"Priority must be a string or number.")}else L(e===ns||e.isEmpty(),"priority of unexpected type.");L(e===ns||e.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let ss,as,os;class ls{constructor(e,t=ls.__childrenNodeConstructor.EMPTY_NODE){this.value_=e,this.priorityNode_=t,this.lazyHash_=null,L(void 0!==this.value_&&null!==this.value_,"LeafNode shouldn't be created with null/undefined value."),rs(this.priorityNode_)}static set __childrenNodeConstructor(e){ss=e}static get __childrenNodeConstructor(){return ss}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new ls(this.value_,e)}getImmediateChild(e){return".priority"===e?this.priorityNode_:ls.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return Rr(e)?this:".priority"===kr(e)?this.priorityNode_:ls.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,t){return null}updateImmediateChild(e,t){return".priority"===e?this.updatePriority(t):t.isEmpty()&&".priority"!==e?this:ls.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,t).updatePriority(this.priorityNode_)}updateChild(e,t){const n=kr(e);return null===n?t:t.isEmpty()&&".priority"!==n?this:(L(".priority"!==n||1===Ar(e),".priority must be the last token in a path"),this.updateImmediateChild(n,ls.__childrenNodeConstructor.EMPTY_NODE.updateChild(Or(e),t)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,t){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+is(this.priorityNode_.val())+":");const t=typeof this.value_;e+=t+":",e+="number"===t?Xi(this.value_):this.value_,this.lazyHash_=Oi(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===ls.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof ls.__childrenNodeConstructor?-1:(L(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const t=typeof e.value_,n=typeof this.value_,i=ls.VALUE_TYPE_ORDER.indexOf(t),r=ls.VALUE_TYPE_ORDER.indexOf(n);return L(i>=0,"Unknown leaf type: "+t),L(r>=0,"Unknown leaf type: "+n),i===r?"object"===n?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:r-i}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const t=e;return this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_)}return!1}}ls.VALUE_TYPE_ORDER=["object","boolean","number","string"];const cs=new class extends Gr{compare(e,t){const n=e.node.getPriority(),i=t.node.getPriority(),r=n.compareTo(i);return 0===r?Vi(e.name,t.name):r}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return zr.MIN}maxPost(){return new zr(Hi,new ls("[PRIORITY-POST]",os))}makePost(e,t){const n=as(e);return new zr(t,new ls("[PRIORITY-POST]",n))}toString(){return".priority"}},us=Math.log(2);class ds{constructor(e){var t;this.count=(t=e+1,parseInt(Math.log(t)/us,10)),this.current_=this.count-1;const n=(i=this.count,parseInt(Array(i+1).join("1"),2));var i;this.bits_=e+1&n}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const hs=function(e,t,n,i){e.sort(t);const r=function(t,i){const s=i-t;let a,o;if(0===s)return null;if(1===s)return a=e[t],o=n?n(a):a,new Jr(o,a.node,Jr.BLACK,null,null);{const l=parseInt(s/2,10)+t,c=r(t,l),u=r(l+1,i);return a=e[l],o=n?n(a):a,new Jr(o,a.node,Jr.BLACK,c,u)}},s=function(t){let i=null,s=null,a=e.length;const o=function(t,i){const s=a-t,o=a;a-=t;const c=r(s+1,o),u=e[s],d=n?n(u):u;l(new Jr(d,u.node,i,null,c))},l=function(e){i?(i.left=e,i=e):(s=e,i=e)};for(let e=0;e<t.count;++e){const n=t.nextBitIsOne(),i=Math.pow(2,t.count-(e+1));n?o(i,Jr.BLACK):(o(i,Jr.BLACK),o(i,Jr.RED))}return s}(new ds(e.length));return new Zr(i||t,s)};let ps;const fs={};class ms{constructor(e,t){this.indexes_=e,this.indexSet_=t}static get Default(){return L(fs&&cs,"ChildrenNode.ts has not been loaded"),ps=ps||new ms({".priority":fs},{".priority":cs}),ps}get(e){const t=ue(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof Zr?t:null}hasIndex(e){return ce(this.indexSet_,e.toString())}addIndex(e,t){L(e!==Yr,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const n=[];let i=!1;const r=t.getIterator(zr.Wrap);let s,a=r.getNext();for(;a;)i=i||e.isDefinedOn(a.node),n.push(a),a=r.getNext();s=i?hs(n,e.getCompare()):fs;const o=e.toString(),l=Object.assign({},this.indexSet_);l[o]=e;const c=Object.assign({},this.indexes_);return c[o]=s,new ms(c,l)}addToIndexes(e,t){const n=he(this.indexes_,((n,i)=>{const r=ue(this.indexSet_,i);if(L(r,"Missing index implementation for "+i),n===fs){if(r.isDefinedOn(e.node)){const n=[],i=t.getIterator(zr.Wrap);let s=i.getNext();for(;s;)s.name!==e.name&&n.push(s),s=i.getNext();return n.push(e),hs(n,r.getCompare())}return fs}{const i=t.get(e.name);let r=n;return i&&(r=r.remove(new zr(e.name,i))),r.insert(e,e.node)}}));return new ms(n,this.indexSet_)}removeFromIndexes(e,t){const n=he(this.indexes_,(n=>{if(n===fs)return n;{const i=t.get(e.name);return i?n.remove(new zr(e.name,i)):n}}));return new ms(n,this.indexSet_)}}let gs;class ys{constructor(e,t,n){this.children_=e,this.priorityNode_=t,this.indexMap_=n,this.lazyHash_=null,this.priorityNode_&&rs(this.priorityNode_),this.children_.isEmpty()&&L(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return gs||(gs=new ys(new Zr(ts),null,ms.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||gs}updatePriority(e){return this.children_.isEmpty()?this:new ys(this.children_,e,this.indexMap_)}getImmediateChild(e){if(".priority"===e)return this.getPriority();{const t=this.children_.get(e);return null===t?gs:t}}getChild(e){const t=kr(e);return null===t?this:this.getImmediateChild(t).getChild(Or(e))}hasChild(e){return null!==this.children_.get(e)}updateImmediateChild(e,t){if(L(t,"We should always be passing snapshot nodes"),".priority"===e)return this.updatePriority(t);{const n=new zr(e,t);let i,r;t.isEmpty()?(i=this.children_.remove(e),r=this.indexMap_.removeFromIndexes(n,this.children_)):(i=this.children_.insert(e,t),r=this.indexMap_.addToIndexes(n,this.children_));const s=i.isEmpty()?gs:this.priorityNode_;return new ys(i,s,r)}}updateChild(e,t){const n=kr(e);if(null===n)return t;{L(".priority"!==kr(e)||1===Ar(e),".priority must be the last token in a path");const i=this.getImmediateChild(n).updateChild(Or(e),t);return this.updateImmediateChild(n,i)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const t={};let n=0,i=0,r=!0;if(this.forEachChild(cs,((s,a)=>{t[s]=a.val(e),n++,r&&ys.INTEGER_REGEXP_.test(s)?i=Math.max(i,Number(s)):r=!1})),!e&&r&&i<2*n){const e=[];for(const n in t)e[n]=t[n];return e}return e&&!this.getPriority().isEmpty()&&(t[".priority"]=this.getPriority().val()),t}hash(){if(null===this.lazyHash_){let e="";this.getPriority().isEmpty()||(e+="priority:"+is(this.getPriority().val())+":"),this.forEachChild(cs,((t,n)=>{const i=n.hash();""!==i&&(e+=":"+t+":"+i)})),this.lazyHash_=""===e?"":Oi(e)}return this.lazyHash_}getPredecessorChildName(e,t,n){const i=this.resolveIndex_(n);if(i){const n=i.getPredecessorKey(new zr(e,t));return n?n.name:null}return this.children_.getPredecessorKey(e)}getFirstChildName(e){const t=this.resolveIndex_(e);if(t){const e=t.minKey();return e&&e.name}return this.children_.minKey()}getFirstChild(e){const t=this.getFirstChildName(e);return t?new zr(t,this.children_.get(t)):null}getLastChildName(e){const t=this.resolveIndex_(e);if(t){const e=t.maxKey();return e&&e.name}return this.children_.maxKey()}getLastChild(e){const t=this.getLastChildName(e);return t?new zr(t,this.children_.get(t)):null}forEachChild(e,t){const n=this.resolveIndex_(e);return n?n.inorderTraversal((e=>t(e.name,e.node))):this.children_.inorderTraversal(t)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,t){const n=this.resolveIndex_(t);if(n)return n.getIteratorFrom(e,(e=>e));{const n=this.children_.getIteratorFrom(e.name,zr.Wrap);let i=n.peek();for(;null!=i&&t.compare(i,e)<0;)n.getNext(),i=n.peek();return n}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,t){const n=this.resolveIndex_(t);if(n)return n.getReverseIteratorFrom(e,(e=>e));{const n=this.children_.getReverseIteratorFrom(e.name,zr.Wrap);let i=n.peek();for(;null!=i&&t.compare(i,e)>0;)n.getNext(),i=n.peek();return n}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===_s?-1:0}withIndex(e){if(e===Yr||this.indexMap_.hasIndex(e))return this;{const t=this.indexMap_.addIndex(e,this.children_);return new ys(this.children_,this.priorityNode_,t)}}isIndexed(e){return e===Yr||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const t=e;if(this.getPriority().equals(t.getPriority())){if(this.children_.count()===t.children_.count()){const e=this.getIterator(cs),n=t.getIterator(cs);let i=e.getNext(),r=n.getNext();for(;i&&r;){if(i.name!==r.name||!i.node.equals(r.node))return!1;i=e.getNext(),r=n.getNext()}return null===i&&null===r}return!1}return!1}}resolveIndex_(e){return e===Yr?null:this.indexMap_.get(e.toString())}}ys.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;const _s=new class extends ys{constructor(){super(new Zr(ts),ys.EMPTY_NODE,ms.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return ys.EMPTY_NODE}isEmpty(){return!1}};Object.defineProperties(zr,{MIN:{value:new zr(qi,ys.EMPTY_NODE)},MAX:{value:new zr(Hi,_s)}}),Xr.__EMPTY_NODE=ys.EMPTY_NODE,ls.__childrenNodeConstructor=ys,ns=_s,function(e){os=e}(_s);const vs=!0;function bs(e,t=null){if(null===e)return ys.EMPTY_NODE;if("object"==typeof e&&".priority"in e&&(t=e[".priority"]),L(null===t||"string"==typeof t||"number"==typeof t||"object"==typeof t&&".sv"in t,"Invalid priority type found: "+typeof t),"object"==typeof e&&".value"in e&&null!==e[".value"]&&(e=e[".value"]),"object"!=typeof e||".sv"in e){return new ls(e,bs(t))}if(e instanceof Array||!vs){let n=ys.EMPTY_NODE;return Ki(e,((t,i)=>{if(ce(e,t)&&"."!==t.substring(0,1)){const e=bs(i);!e.isLeafNode()&&e.isEmpty()||(n=n.updateImmediateChild(t,e))}})),n.updatePriority(bs(t))}{const n=[];let i=!1;if(Ki(e,((e,t)=>{if("."!==e.substring(0,1)){const r=bs(t);r.isEmpty()||(i=i||!r.getPriority().isEmpty(),n.push(new zr(e,r)))}})),0===n.length)return ys.EMPTY_NODE;const r=hs(n,es,(e=>e.name),ts);if(i){const e=hs(n,cs.getCompare());return new ys(r,bs(t),new ms({".priority":e},{".priority":cs}))}return new ys(r,bs(t),ms.Default)}}!function(e){as=e}(bs);class Ts extends Gr{constructor(e){super(),this.indexPath_=e,L(!Rr(e)&&".priority"!==kr(e),"Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){const n=this.extractChild(e.node),i=this.extractChild(t.node),r=n.compareTo(i);return 0===r?Vi(e.name,t.name):r}makePost(e,t){const n=bs(e),i=ys.EMPTY_NODE.updateChild(this.indexPath_,n);return new zr(t,i)}maxPost(){const e=ys.EMPTY_NODE.updateChild(this.indexPath_,_s);return new zr(Hi,e)}toString(){return Lr(this.indexPath_,0).join("/")}}const Es=new class extends Gr{compare(e,t){const n=e.node.compareTo(t.node);return 0===n?Vi(e.name,t.name):n}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return zr.MIN}maxPost(){return zr.MAX}makePost(e,t){const n=bs(e);return new zr(t,n)}toString(){return".value"}};function ws(e){return{type:"value",snapshotNode:e}}function Ss(e,t){return{type:"child_added",snapshotNode:t,childName:e}}function Cs(e,t){return{type:"child_removed",snapshotNode:t,childName:e}}function Is(e,t,n){return{type:"child_changed",snapshotNode:t,childName:e,oldSnap:n}}class xs{constructor(e){this.index_=e}updateChild(e,t,n,i,r,s){L(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const a=e.getImmediateChild(t);return a.getChild(i).equals(n.getChild(i))&&a.isEmpty()===n.isEmpty()?e:(null!=s&&(n.isEmpty()?e.hasChild(t)?s.trackChildChange(Cs(t,a)):L(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):a.isEmpty()?s.trackChildChange(Ss(t,n)):s.trackChildChange(Is(t,n,a))),e.isLeafNode()&&n.isEmpty()?e:e.updateImmediateChild(t,n).withIndex(this.index_))}updateFullNode(e,t,n){return null!=n&&(e.isLeafNode()||e.forEachChild(cs,((e,i)=>{t.hasChild(e)||n.trackChildChange(Cs(e,i))})),t.isLeafNode()||t.forEachChild(cs,((t,i)=>{if(e.hasChild(t)){const r=e.getImmediateChild(t);r.equals(i)||n.trackChildChange(Is(t,i,r))}else n.trackChildChange(Ss(t,i))}))),t.withIndex(this.index_)}updatePriority(e,t){return e.isEmpty()?ys.EMPTY_NODE:e.updatePriority(t)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class ks{constructor(e){this.indexedFilter_=new xs(e.getIndex()),this.index_=e.getIndex(),this.startPost_=ks.getStartPost_(e),this.endPost_=ks.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){const t=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,n=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return t&&n}updateChild(e,t,n,i,r,s){return this.matches(new zr(t,n))||(n=ys.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,n,i,r,s)}updateFullNode(e,t,n){t.isLeafNode()&&(t=ys.EMPTY_NODE);let i=t.withIndex(this.index_);i=i.updatePriority(ys.EMPTY_NODE);const r=this;return t.forEachChild(cs,((e,t)=>{r.matches(new zr(e,t))||(i=i.updateImmediateChild(e,ys.EMPTY_NODE))})),this.indexedFilter_.updateFullNode(e,i,n)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const t=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),t)}return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const t=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),t)}return e.getIndex().maxPost()}}class As{constructor(e){this.withinDirectionalStart=e=>this.reverse_?this.withinEndPost(e):this.withinStartPost(e),this.withinDirectionalEnd=e=>this.reverse_?this.withinStartPost(e):this.withinEndPost(e),this.withinStartPost=e=>{const t=this.index_.compare(this.rangedFilter_.getStartPost(),e);return this.startIsInclusive_?t<=0:t<0},this.withinEndPost=e=>{const t=this.index_.compare(e,this.rangedFilter_.getEndPost());return this.endIsInclusive_?t<=0:t<0},this.rangedFilter_=new ks(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,t,n,i,r,s){return this.rangedFilter_.matches(new zr(t,n))||(n=ys.EMPTY_NODE),e.getImmediateChild(t).equals(n)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,n,i,r,s):this.fullLimitUpdateChild_(e,t,n,r,s)}updateFullNode(e,t,n){let i;if(t.isLeafNode()||t.isEmpty())i=ys.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<t.numChildren()&&t.isIndexed(this.index_)){let e;i=ys.EMPTY_NODE.withIndex(this.index_),e=this.reverse_?t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let n=0;for(;e.hasNext()&&n<this.limit_;){const t=e.getNext();if(this.withinDirectionalStart(t)){if(!this.withinDirectionalEnd(t))break;i=i.updateImmediateChild(t.name,t.node),n++}}}else{let e;i=t.withIndex(this.index_),i=i.updatePriority(ys.EMPTY_NODE),e=this.reverse_?i.getReverseIterator(this.index_):i.getIterator(this.index_);let n=0;for(;e.hasNext();){const t=e.getNext();n<this.limit_&&this.withinDirectionalStart(t)&&this.withinDirectionalEnd(t)?n++:i=i.updateImmediateChild(t.name,ys.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,i,n)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,t,n,i,r){let s;if(this.reverse_){const e=this.index_.getCompare();s=(t,n)=>e(n,t)}else s=this.index_.getCompare();const a=e;L(a.numChildren()===this.limit_,"");const o=new zr(t,n),l=this.reverse_?a.getFirstChild(this.index_):a.getLastChild(this.index_),c=this.rangedFilter_.matches(o);if(a.hasChild(t)){const e=a.getImmediateChild(t);let u=i.getChildAfterChild(this.index_,l,this.reverse_);for(;null!=u&&(u.name===t||a.hasChild(u.name));)u=i.getChildAfterChild(this.index_,u,this.reverse_);const d=null==u?1:s(u,o);if(c&&!n.isEmpty()&&d>=0)return null!=r&&r.trackChildChange(Is(t,n,e)),a.updateImmediateChild(t,n);{null!=r&&r.trackChildChange(Cs(t,e));const n=a.updateImmediateChild(t,ys.EMPTY_NODE);return null!=u&&this.rangedFilter_.matches(u)?(null!=r&&r.trackChildChange(Ss(u.name,u.node)),n.updateImmediateChild(u.name,u.node)):n}}return n.isEmpty()?e:c&&s(l,o)>=0?(null!=r&&(r.trackChildChange(Cs(l.name,l.node)),r.trackChildChange(Ss(t,n))),a.updateImmediateChild(t,n).updateImmediateChild(l.name,ys.EMPTY_NODE)):e}}class Os{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=cs}hasStart(){return this.startSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return L(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return L(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:qi}hasEnd(){return this.endSet_}getIndexEndValue(){return L(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return L(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Hi}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return L(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===cs}copy(){const e=new Os;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function Ps(e,t,n){const i=e.copy();return i.startSet_=!0,void 0===t&&(t=null),i.indexStartValue_=t,null!=n?(i.startNameSet_=!0,i.indexStartName_=n):(i.startNameSet_=!1,i.indexStartName_=""),i}function Ls(e,t,n){const i=e.copy();return i.endSet_=!0,void 0===t&&(t=null),i.indexEndValue_=t,void 0!==n?(i.endNameSet_=!0,i.indexEndName_=n):(i.endNameSet_=!1,i.indexEndName_=""),i}function Ns(e,t){const n=e.copy();return n.index_=t,n}function Ds(e){const t={};if(e.isDefault())return t;let n;if(e.index_===cs?n="$priority":e.index_===Es?n="$value":e.index_===Yr?n="$key":(L(e.index_ instanceof Ts,"Unrecognized index type!"),n=e.index_.toString()),t.orderBy=oe(n),e.startSet_){const n=e.startAfterSet_?"startAfter":"startAt";t[n]=oe(e.indexStartValue_),e.startNameSet_&&(t[n]+=","+oe(e.indexStartName_))}if(e.endSet_){const n=e.endBeforeSet_?"endBefore":"endAt";t[n]=oe(e.indexEndValue_),e.endNameSet_&&(t[n]+=","+oe(e.indexEndName_))}return e.limitSet_&&(e.isViewFromLeft()?t.limitToFirst=e.limit_:t.limitToLast=e.limit_),t}function Rs(e){const t={};if(e.startSet_&&(t.sp=e.indexStartValue_,e.startNameSet_&&(t.sn=e.indexStartName_),t.sin=!e.startAfterSet_),e.endSet_&&(t.ep=e.indexEndValue_,e.endNameSet_&&(t.en=e.indexEndName_),t.ein=!e.endBeforeSet_),e.limitSet_){t.l=e.limit_;let n=e.viewFrom_;""===n&&(n=e.isViewFromLeft()?"l":"r"),t.vf=n}return e.index_!==cs&&(t.i=e.index_.toString()),t}class Ms extends Tr{constructor(e,t,n,i){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=n,this.appCheckTokenProvider_=i,this.log_=Mi("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,t){return void 0!==t?"tag$"+t:(L(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,t,n,i){const r=e._path.toString();this.log_("Listen called for "+r+" "+e._queryIdentifier);const s=Ms.getListenId_(e,n),a={};this.listens_[s]=a;const o=Ds(e._queryParams);this.restRequest_(r+".json",o,((e,t)=>{let o=t;if(404===e&&(o=null,e=null),null===e&&this.onDataUpdate_(r,o,!1,n),ue(this.listens_,s)===a){let t;t=e?401===e?"permission_denied":"rest_error:"+e:"ok",i(t,null)}}))}unlisten(e,t){const n=Ms.getListenId_(e,t);delete this.listens_[n]}get(e){const t=Ds(e._queryParams),n=e._path.toString(),i=new X;return this.restRequest_(n+".json",t,((e,t)=>{let r=t;404===e&&(r=null,e=null),null===e?(this.onDataUpdate_(n,r,!1,null),i.resolve(r)):i.reject(new Error(r))})),i.promise}refreshAuthToken(e){}restRequest_(e,t={},n){return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then((([i,r])=>{i&&i.accessToken&&(t.auth=i.accessToken),r&&r.token&&(t.ac=r.token);const s=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+me(t);this.log_("Sending REST request for "+s);const a=new XMLHttpRequest;a.onreadystatechange=()=>{if(n&&4===a.readyState){this.log_("REST Response for "+s+" received. status:",a.status,"response:",a.responseText);let t=null;if(a.status>=200&&a.status<300){try{t=ae(a.responseText)}catch(e){Bi("Failed to parse JSON response for "+s+": "+a.responseText)}n(null,t)}else 401!==a.status&&404!==a.status&&Bi("Got unsuccessful REST response for "+s+" Status: "+a.status),n(a.status);n=null}},a.open("GET",s,!0),a.send()}))}}class Fs{constructor(){this.rootNode_=ys.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}function Us(){return{value:null,children:new Map}}function Bs(e,t,n){if(Rr(t))e.value=n,e.children.clear();else if(null!==e.value)e.value=e.value.updateChild(t,n);else{const i=kr(t);e.children.has(i)||e.children.set(i,Us());Bs(e.children.get(i),t=Or(t),n)}}function js(e,t){if(Rr(t))return e.value=null,e.children.clear(),!0;if(null!==e.value){if(e.value.isLeafNode())return!1;{const n=e.value;return e.value=null,n.forEachChild(cs,((t,n)=>{Bs(e,new Ir(t),n)})),js(e,t)}}if(e.children.size>0){const n=kr(t);if(t=Or(t),e.children.has(n)){js(e.children.get(n),t)&&e.children.delete(n)}return 0===e.children.size}return!0}function qs(e,t,n){null!==e.value?n(t,e.value):function(e,t){e.children.forEach(((e,n)=>{t(n,e)}))}(e,((e,i)=>{qs(i,new Ir(t.toString()+"/"+e),n)}))}class Hs{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),t=Object.assign({},e);return this.last_&&Ki(this.last_,((e,n)=>{t[e]=t[e]-n})),this.last_=e,t}}class Vs{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new Hs(e);const n=1e4+2e4*Math.random();Zi(this.reportStats_.bind(this),Math.floor(n))}reportStats_(){const e=this.statsListener_.get(),t={};let n=!1;Ki(e,((e,i)=>{i>0&&ce(this.statsToReport_,e)&&(t[e]=i,n=!0)})),n&&this.server_.reportStats(t),Zi(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var $s;function Ws(e){return{fromUser:!1,fromServer:!0,queryId:e,tagged:!0}}!function(e){e[e.OVERWRITE=0]="OVERWRITE",e[e.MERGE=1]="MERGE",e[e.ACK_USER_WRITE=2]="ACK_USER_WRITE",e[e.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"}($s||($s={}));class zs{constructor(e,t,n){this.path=e,this.affectedTree=t,this.revert=n,this.type=$s.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(e){if(Rr(this.path)){if(null!=this.affectedTree.value)return L(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const t=this.affectedTree.subtree(new Ir(e));return new zs(xr(),t,this.revert)}}return L(kr(this.path)===e,"operationForChild called for unrelated child."),new zs(Or(this.path),this.affectedTree,this.revert)}}class Gs{constructor(e,t){this.source=e,this.path=t,this.type=$s.LISTEN_COMPLETE}operationForChild(e){return Rr(this.path)?new Gs(this.source,xr()):new Gs(this.source,Or(this.path))}}class Ks{constructor(e,t,n){this.source=e,this.path=t,this.snap=n,this.type=$s.OVERWRITE}operationForChild(e){return Rr(this.path)?new Ks(this.source,xr(),this.snap.getImmediateChild(e)):new Ks(this.source,Or(this.path),this.snap)}}class Xs{constructor(e,t,n){this.source=e,this.path=t,this.children=n,this.type=$s.MERGE}operationForChild(e){if(Rr(this.path)){const t=this.children.subtree(new Ir(e));return t.isEmpty()?null:t.value?new Ks(this.source,xr(),t.value):new Xs(this.source,xr(),t)}return L(kr(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new Xs(this.source,Or(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class Ys{constructor(e,t,n){this.node_=e,this.fullyInitialized_=t,this.filtered_=n}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(Rr(e))return this.isFullyInitialized()&&!this.filtered_;const t=kr(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}class Qs{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function Js(e,t,n,i,r,s){const a=i.filter((e=>e.type===n));a.sort(((t,n)=>function(e,t,n){if(null==t.childName||null==n.childName)throw N("Should only compare child_ events.");const i=new zr(t.childName,t.snapshotNode),r=new zr(n.childName,n.snapshotNode);return e.index_.compare(i,r)}(e,t,n))),a.forEach((n=>{const i=function(e,t,n){return"value"===t.type||"child_removed"===t.type||(t.prevName=n.getPredecessorChildName(t.childName,t.snapshotNode,e.index_)),t}(e,n,s);r.forEach((r=>{r.respondsTo(n.type)&&t.push(r.createEvent(i,e.query_))}))}))}function Zs(e,t){return{eventCache:e,serverCache:t}}function ea(e,t,n,i){return Zs(new Ys(t,n,i),e.serverCache)}function ta(e,t,n,i){return Zs(e.eventCache,new Ys(t,n,i))}function na(e){return e.eventCache.isFullyInitialized()?e.eventCache.getNode():null}function ia(e){return e.serverCache.isFullyInitialized()?e.serverCache.getNode():null}let ra;class sa{constructor(e,t=(()=>(ra||(ra=new Zr($i)),ra))()){this.value=e,this.children=t}static fromObject(e){let t=new sa(null);return Ki(e,((e,n)=>{t=t.set(new Ir(e),n)})),t}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(null!=this.value&&t(this.value))return{path:xr(),value:this.value};if(Rr(e))return null;{const n=kr(e),i=this.children.get(n);if(null!==i){const r=i.findRootMostMatchingPathAndValue(Or(e),t);if(null!=r){return{path:Dr(new Ir(n),r.path),value:r.value}}return null}return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,(()=>!0))}subtree(e){if(Rr(e))return this;{const t=kr(e),n=this.children.get(t);return null!==n?n.subtree(Or(e)):new sa(null)}}set(e,t){if(Rr(e))return new sa(t,this.children);{const n=kr(e),i=(this.children.get(n)||new sa(null)).set(Or(e),t),r=this.children.insert(n,i);return new sa(this.value,r)}}remove(e){if(Rr(e))return this.children.isEmpty()?new sa(null):new sa(null,this.children);{const t=kr(e),n=this.children.get(t);if(n){const i=n.remove(Or(e));let r;return r=i.isEmpty()?this.children.remove(t):this.children.insert(t,i),null===this.value&&r.isEmpty()?new sa(null):new sa(this.value,r)}return this}}get(e){if(Rr(e))return this.value;{const t=kr(e),n=this.children.get(t);return n?n.get(Or(e)):null}}setTree(e,t){if(Rr(e))return t;{const n=kr(e),i=(this.children.get(n)||new sa(null)).setTree(Or(e),t);let r;return r=i.isEmpty()?this.children.remove(n):this.children.insert(n,i),new sa(this.value,r)}}fold(e){return this.fold_(xr(),e)}fold_(e,t){const n={};return this.children.inorderTraversal(((i,r)=>{n[i]=r.fold_(Dr(e,i),t)})),t(e,this.value,n)}findOnPath(e,t){return this.findOnPath_(e,xr(),t)}findOnPath_(e,t,n){const i=!!this.value&&n(t,this.value);if(i)return i;if(Rr(e))return null;{const i=kr(e),r=this.children.get(i);return r?r.findOnPath_(Or(e),Dr(t,i),n):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,xr(),t)}foreachOnPath_(e,t,n){if(Rr(e))return this;{this.value&&n(t,this.value);const i=kr(e),r=this.children.get(i);return r?r.foreachOnPath_(Or(e),Dr(t,i),n):new sa(null)}}foreach(e){this.foreach_(xr(),e)}foreach_(e,t){this.children.inorderTraversal(((n,i)=>{i.foreach_(Dr(e,n),t)})),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal(((t,n)=>{n.value&&e(t,n.value)}))}}class aa{constructor(e){this.writeTree_=e}static empty(){return new aa(new sa(null))}}function oa(e,t,n){if(Rr(t))return new aa(new sa(n));{const i=e.writeTree_.findRootMostValueAndPath(t);if(null!=i){const r=i.path;let s=i.value;const a=Mr(r,t);return s=s.updateChild(a,n),new aa(e.writeTree_.set(r,s))}{const i=new sa(n),r=e.writeTree_.setTree(t,i);return new aa(r)}}}function la(e,t,n){let i=e;return Ki(n,((e,n)=>{i=oa(i,Dr(t,e),n)})),i}function ca(e,t){if(Rr(t))return aa.empty();{const n=e.writeTree_.setTree(t,new sa(null));return new aa(n)}}function ua(e,t){return null!=da(e,t)}function da(e,t){const n=e.writeTree_.findRootMostValueAndPath(t);return null!=n?e.writeTree_.get(n.path).getChild(Mr(n.path,t)):null}function ha(e){const t=[],n=e.writeTree_.value;return null!=n?n.isLeafNode()||n.forEachChild(cs,((e,n)=>{t.push(new zr(e,n))})):e.writeTree_.children.inorderTraversal(((e,n)=>{null!=n.value&&t.push(new zr(e,n.value))})),t}function pa(e,t){if(Rr(t))return e;{const n=da(e,t);return new aa(null!=n?new sa(n):e.writeTree_.subtree(t))}}function fa(e){return e.writeTree_.isEmpty()}function ma(e,t){return ga(xr(),e.writeTree_,t)}function ga(e,t,n){if(null!=t.value)return n.updateChild(e,t.value);{let i=null;return t.children.inorderTraversal(((t,r)=>{".priority"===t?(L(null!==r.value,"Priority writes must always be leaf nodes"),i=r.value):n=ga(Dr(e,t),r,n)})),n.getChild(e).isEmpty()||null===i||(n=n.updateChild(Dr(e,".priority"),i)),n}}function ya(e,t){return Oa(t,e)}function _a(e,t){const n=e.allWrites.findIndex((e=>e.writeId===t));L(n>=0,"removeWrite called with nonexistent writeId.");const i=e.allWrites[n];e.allWrites.splice(n,1);let r=i.visible,s=!1,a=e.allWrites.length-1;for(;r&&a>=0;){const t=e.allWrites[a];t.visible&&(a>=n&&va(t,i.path)?r=!1:Br(i.path,t.path)&&(s=!0)),a--}if(r){if(s)return function(e){e.visibleWrites=Ta(e.allWrites,ba,xr()),e.allWrites.length>0?e.lastWriteId=e.allWrites[e.allWrites.length-1].writeId:e.lastWriteId=-1}(e),!0;if(i.snap)e.visibleWrites=ca(e.visibleWrites,i.path);else{Ki(i.children,(t=>{e.visibleWrites=ca(e.visibleWrites,Dr(i.path,t))}))}return!0}return!1}function va(e,t){if(e.snap)return Br(e.path,t);for(const n in e.children)if(e.children.hasOwnProperty(n)&&Br(Dr(e.path,n),t))return!0;return!1}function ba(e){return e.visible}function Ta(e,t,n){let i=aa.empty();for(let r=0;r<e.length;++r){const s=e[r];if(t(s)){const e=s.path;let t;if(s.snap)Br(n,e)?(t=Mr(n,e),i=oa(i,t,s.snap)):Br(e,n)&&(t=Mr(e,n),i=oa(i,xr(),s.snap.getChild(t)));else{if(!s.children)throw N("WriteRecord should have .snap or .children");if(Br(n,e))t=Mr(n,e),i=la(i,t,s.children);else if(Br(e,n))if(t=Mr(e,n),Rr(t))i=la(i,xr(),s.children);else{const e=ue(s.children,kr(t));if(e){const n=e.getChild(Or(t));i=oa(i,xr(),n)}}}}}return i}function Ea(e,t,n,i,r){if(i||r){const s=pa(e.visibleWrites,t);if(!r&&fa(s))return n;if(r||null!=n||ua(s,xr())){const s=function(e){return(e.visible||r)&&(!i||!~i.indexOf(e.writeId))&&(Br(e.path,t)||Br(t,e.path))};return ma(Ta(e.allWrites,s,t),n||ys.EMPTY_NODE)}return null}{const i=da(e.visibleWrites,t);if(null!=i)return i;{const i=pa(e.visibleWrites,t);if(fa(i))return n;if(null!=n||ua(i,xr())){return ma(i,n||ys.EMPTY_NODE)}return null}}}function wa(e,t,n,i){return Ea(e.writeTree,e.treePath,t,n,i)}function Sa(e,t){return function(e,t,n){let i=ys.EMPTY_NODE;const r=da(e.visibleWrites,t);if(r)return r.isLeafNode()||r.forEachChild(cs,((e,t)=>{i=i.updateImmediateChild(e,t)})),i;if(n){const r=pa(e.visibleWrites,t);return n.forEachChild(cs,((e,t)=>{const n=ma(pa(r,new Ir(e)),t);i=i.updateImmediateChild(e,n)})),ha(r).forEach((e=>{i=i.updateImmediateChild(e.name,e.node)})),i}return ha(pa(e.visibleWrites,t)).forEach((e=>{i=i.updateImmediateChild(e.name,e.node)})),i}(e.writeTree,e.treePath,t)}function Ca(e,t,n,i){return function(e,t,n,i,r){L(i||r,"Either existingEventSnap or existingServerSnap must exist");const s=Dr(t,n);if(ua(e.visibleWrites,s))return null;{const t=pa(e.visibleWrites,s);return fa(t)?r.getChild(n):ma(t,r.getChild(n))}}(e.writeTree,e.treePath,t,n,i)}function Ia(e,t){return function(e,t){return da(e.visibleWrites,t)}(e.writeTree,Dr(e.treePath,t))}function xa(e,t,n,i,r,s){return function(e,t,n,i,r,s,a){let o;const l=pa(e.visibleWrites,t),c=da(l,xr());if(null!=c)o=c;else{if(null==n)return[];o=ma(l,n)}if(o=o.withIndex(a),o.isEmpty()||o.isLeafNode())return[];{const e=[],t=a.getCompare(),n=s?o.getReverseIteratorFrom(i,a):o.getIteratorFrom(i,a);let l=n.getNext();for(;l&&e.length<r;)0!==t(l,i)&&e.push(l),l=n.getNext();return e}}(e.writeTree,e.treePath,t,n,i,r,s)}function ka(e,t,n){return function(e,t,n,i){const r=Dr(t,n),s=da(e.visibleWrites,r);if(null!=s)return s;if(i.isCompleteForChild(n))return ma(pa(e.visibleWrites,r),i.getNode().getImmediateChild(n));return null}(e.writeTree,e.treePath,t,n)}function Aa(e,t){return Oa(Dr(e.treePath,t),e.writeTree)}function Oa(e,t){return{treePath:e,writeTree:t}}class Pa{constructor(){this.changeMap=new Map}trackChildChange(e){const t=e.type,n=e.childName;L("child_added"===t||"child_changed"===t||"child_removed"===t,"Only child changes supported for tracking"),L(".priority"!==n,"Only non-priority child changes can be tracked.");const i=this.changeMap.get(n);if(i){const r=i.type;if("child_added"===t&&"child_removed"===r)this.changeMap.set(n,Is(n,e.snapshotNode,i.snapshotNode));else if("child_removed"===t&&"child_added"===r)this.changeMap.delete(n);else if("child_removed"===t&&"child_changed"===r)this.changeMap.set(n,Cs(n,i.oldSnap));else if("child_changed"===t&&"child_added"===r)this.changeMap.set(n,Ss(n,e.snapshotNode));else{if("child_changed"!==t||"child_changed"!==r)throw N("Illegal combination of changes: "+e+" occurred after "+i);this.changeMap.set(n,Is(n,e.snapshotNode,i.oldSnap))}}else this.changeMap.set(n,e)}getChanges(){return Array.from(this.changeMap.values())}}const La=new class{getCompleteChild(e){return null}getChildAfterChild(e,t,n){return null}};class Na{constructor(e,t,n=null){this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=n}getCompleteChild(e){const t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{const t=null!=this.optCompleteServerCache_?new Ys(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return ka(this.writes_,e,t)}}getChildAfterChild(e,t,n){const i=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:ia(this.viewCache_),r=xa(this.writes_,i,t,1,n,e);return 0===r.length?null:r[0]}}function Da(e,t,n,i,r){const s=new Pa;let a,o;if(n.type===$s.OVERWRITE){const l=n;l.source.fromUser?a=Fa(e,t,l.path,l.snap,i,r,s):(L(l.source.fromServer,"Unknown source."),o=l.source.tagged||t.serverCache.isFiltered()&&!Rr(l.path),a=Ma(e,t,l.path,l.snap,i,r,o,s))}else if(n.type===$s.MERGE){const l=n;l.source.fromUser?a=function(e,t,n,i,r,s,a){let o=t;return i.foreach(((i,l)=>{const c=Dr(n,i);Ua(t,kr(c))&&(o=Fa(e,o,c,l,r,s,a))})),i.foreach(((i,l)=>{const c=Dr(n,i);Ua(t,kr(c))||(o=Fa(e,o,c,l,r,s,a))})),o}(e,t,l.path,l.children,i,r,s):(L(l.source.fromServer,"Unknown source."),o=l.source.tagged||t.serverCache.isFiltered(),a=ja(e,t,l.path,l.children,i,r,o,s))}else if(n.type===$s.ACK_USER_WRITE){const o=n;a=o.revert?function(e,t,n,i,r,s){let a;if(null!=Ia(i,n))return t;{const o=new Na(i,t,r),l=t.eventCache.getNode();let c;if(Rr(n)||".priority"===kr(n)){let n;if(t.serverCache.isFullyInitialized())n=wa(i,ia(t));else{const e=t.serverCache.getNode();L(e instanceof ys,"serverChildren would be complete if leaf node"),n=Sa(i,e)}c=e.filter.updateFullNode(l,n,s)}else{const r=kr(n);let u=ka(i,r,t.serverCache);null==u&&t.serverCache.isCompleteForChild(r)&&(u=l.getImmediateChild(r)),c=null!=u?e.filter.updateChild(l,r,u,Or(n),o,s):t.eventCache.getNode().hasChild(r)?e.filter.updateChild(l,r,ys.EMPTY_NODE,Or(n),o,s):l,c.isEmpty()&&t.serverCache.isFullyInitialized()&&(a=wa(i,ia(t)),a.isLeafNode()&&(c=e.filter.updateFullNode(c,a,s)))}return a=t.serverCache.isFullyInitialized()||null!=Ia(i,xr()),ea(t,c,a,e.filter.filtersNodes())}}(e,t,o.path,i,r,s):function(e,t,n,i,r,s,a){if(null!=Ia(r,n))return t;const o=t.serverCache.isFiltered(),l=t.serverCache;if(null!=i.value){if(Rr(n)&&l.isFullyInitialized()||l.isCompleteForPath(n))return Ma(e,t,n,l.getNode().getChild(n),r,s,o,a);if(Rr(n)){let i=new sa(null);return l.getNode().forEachChild(Yr,((e,t)=>{i=i.set(new Ir(e),t)})),ja(e,t,n,i,r,s,o,a)}return t}{let c=new sa(null);return i.foreach(((e,t)=>{const i=Dr(n,e);l.isCompleteForPath(i)&&(c=c.set(e,l.getNode().getChild(i)))})),ja(e,t,n,c,r,s,o,a)}}(e,t,o.path,o.affectedTree,i,r,s)}else{if(n.type!==$s.LISTEN_COMPLETE)throw N("Unknown operation type: "+n.type);a=function(e,t,n,i,r){const s=t.serverCache,a=ta(t,s.getNode(),s.isFullyInitialized()||Rr(n),s.isFiltered());return Ra(e,a,n,i,La,r)}(e,t,n.path,i,s)}const l=s.getChanges();return function(e,t,n){const i=t.eventCache;if(i.isFullyInitialized()){const r=i.getNode().isLeafNode()||i.getNode().isEmpty(),s=na(e);(n.length>0||!e.eventCache.isFullyInitialized()||r&&!i.getNode().equals(s)||!i.getNode().getPriority().equals(s.getPriority()))&&n.push(ws(na(t)))}}(t,a,l),{viewCache:a,changes:l}}function Ra(e,t,n,i,r,s){const a=t.eventCache;if(null!=Ia(i,n))return t;{let o,l;if(Rr(n))if(L(t.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),t.serverCache.isFiltered()){const n=ia(t),r=Sa(i,n instanceof ys?n:ys.EMPTY_NODE);o=e.filter.updateFullNode(t.eventCache.getNode(),r,s)}else{const n=wa(i,ia(t));o=e.filter.updateFullNode(t.eventCache.getNode(),n,s)}else{const c=kr(n);if(".priority"===c){L(1===Ar(n),"Can't have a priority with additional path components");const r=a.getNode();l=t.serverCache.getNode();const s=Ca(i,n,r,l);o=null!=s?e.filter.updatePriority(r,s):a.getNode()}else{const u=Or(n);let d;if(a.isCompleteForChild(c)){l=t.serverCache.getNode();const e=Ca(i,n,a.getNode(),l);d=null!=e?a.getNode().getImmediateChild(c).updateChild(u,e):a.getNode().getImmediateChild(c)}else d=ka(i,c,t.serverCache);o=null!=d?e.filter.updateChild(a.getNode(),c,d,u,r,s):a.getNode()}}return ea(t,o,a.isFullyInitialized()||Rr(n),e.filter.filtersNodes())}}function Ma(e,t,n,i,r,s,a,o){const l=t.serverCache;let c;const u=a?e.filter:e.filter.getIndexedFilter();if(Rr(n))c=u.updateFullNode(l.getNode(),i,null);else if(u.filtersNodes()&&!l.isFiltered()){const e=l.getNode().updateChild(n,i);c=u.updateFullNode(l.getNode(),e,null)}else{const e=kr(n);if(!l.isCompleteForPath(n)&&Ar(n)>1)return t;const r=Or(n),s=l.getNode().getImmediateChild(e).updateChild(r,i);c=".priority"===e?u.updatePriority(l.getNode(),s):u.updateChild(l.getNode(),e,s,r,La,null)}const d=ta(t,c,l.isFullyInitialized()||Rr(n),u.filtersNodes());return Ra(e,d,n,r,new Na(r,d,s),o)}function Fa(e,t,n,i,r,s,a){const o=t.eventCache;let l,c;const u=new Na(r,t,s);if(Rr(n))c=e.filter.updateFullNode(t.eventCache.getNode(),i,a),l=ea(t,c,!0,e.filter.filtersNodes());else{const r=kr(n);if(".priority"===r)c=e.filter.updatePriority(t.eventCache.getNode(),i),l=ea(t,c,o.isFullyInitialized(),o.isFiltered());else{const s=Or(n),c=o.getNode().getImmediateChild(r);let d;if(Rr(s))d=i;else{const e=u.getCompleteChild(r);d=null!=e?".priority"===Pr(s)&&e.getChild(Nr(s)).isEmpty()?e:e.updateChild(s,i):ys.EMPTY_NODE}if(c.equals(d))l=t;else{l=ea(t,e.filter.updateChild(o.getNode(),r,d,s,u,a),o.isFullyInitialized(),e.filter.filtersNodes())}}}return l}function Ua(e,t){return e.eventCache.isCompleteForChild(t)}function Ba(e,t,n){return n.foreach(((e,n)=>{t=t.updateChild(e,n)})),t}function ja(e,t,n,i,r,s,a,o){if(t.serverCache.getNode().isEmpty()&&!t.serverCache.isFullyInitialized())return t;let l,c=t;l=Rr(n)?i:new sa(null).setTree(n,i);const u=t.serverCache.getNode();return l.children.inorderTraversal(((n,i)=>{if(u.hasChild(n)){const l=Ba(0,t.serverCache.getNode().getImmediateChild(n),i);c=Ma(e,c,new Ir(n),l,r,s,a,o)}})),l.children.inorderTraversal(((n,i)=>{const l=!t.serverCache.isCompleteForChild(n)&&null===i.value;if(!u.hasChild(n)&&!l){const l=Ba(0,t.serverCache.getNode().getImmediateChild(n),i);c=Ma(e,c,new Ir(n),l,r,s,a,o)}})),c}class qa{constructor(e,t){this.query_=e,this.eventRegistrations_=[];const n=this.query_._queryParams,i=new xs(n.getIndex()),r=(s=n).loadsAllData()?new xs(s.getIndex()):s.hasLimit()?new As(s):new ks(s);var s;this.processor_=function(e){return{filter:e}}(r);const a=t.serverCache,o=t.eventCache,l=i.updateFullNode(ys.EMPTY_NODE,a.getNode(),null),c=r.updateFullNode(ys.EMPTY_NODE,o.getNode(),null),u=new Ys(l,a.isFullyInitialized(),i.filtersNodes()),d=new Ys(c,o.isFullyInitialized(),r.filtersNodes());this.viewCache_=Zs(d,u),this.eventGenerator_=new Qs(this.query_)}get query(){return this.query_}}function Ha(e,t){const n=ia(e.viewCache_);return n&&(e.query._queryParams.loadsAllData()||!Rr(t)&&!n.getImmediateChild(kr(t)).isEmpty())?n.getChild(t):null}function Va(e){return 0===e.eventRegistrations_.length}function $a(e,t,n){const i=[];if(n){L(null==t,"A cancel should cancel all event registrations.");const r=e.query._path;e.eventRegistrations_.forEach((e=>{const t=e.createCancelEvent(n,r);t&&i.push(t)}))}if(t){let n=[];for(let i=0;i<e.eventRegistrations_.length;++i){const r=e.eventRegistrations_[i];if(r.matches(t)){if(t.hasAnyCallback()){n=n.concat(e.eventRegistrations_.slice(i+1));break}}else n.push(r)}e.eventRegistrations_=n}else e.eventRegistrations_=[];return i}function Wa(e,t,n,i){t.type===$s.MERGE&&null!==t.source.queryId&&(L(ia(e.viewCache_),"We should always have a full cache before handling merges"),L(na(e.viewCache_),"Missing event cache, even though we have a server cache"));const r=e.viewCache_,s=Da(e.processor_,r,t,n,i);var a,o;return a=e.processor_,o=s.viewCache,L(o.eventCache.getNode().isIndexed(a.filter.getIndex()),"Event snap not indexed"),L(o.serverCache.getNode().isIndexed(a.filter.getIndex()),"Server snap not indexed"),L(s.viewCache.serverCache.isFullyInitialized()||!r.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),e.viewCache_=s.viewCache,za(e,s.changes,s.viewCache.eventCache.getNode(),null)}function za(e,t,n,i){const r=i?[i]:e.eventRegistrations_;return function(e,t,n,i){const r=[],s=[];return t.forEach((t=>{var n;"child_changed"===t.type&&e.index_.indexedValueChanged(t.oldSnap,t.snapshotNode)&&s.push((n=t.childName,{type:"child_moved",snapshotNode:t.snapshotNode,childName:n}))})),Js(e,r,"child_removed",t,i,n),Js(e,r,"child_added",t,i,n),Js(e,r,"child_moved",s,i,n),Js(e,r,"child_changed",t,i,n),Js(e,r,"value",t,i,n),r}(e.eventGenerator_,t,n,r)}let Ga,Ka;class Xa{constructor(){this.views=new Map}}function Ya(e,t,n,i){const r=t.source.queryId;if(null!==r){const s=e.views.get(r);return L(null!=s,"SyncTree gave us an op for an invalid query."),Wa(s,t,n,i)}{let r=[];for(const s of e.views.values())r=r.concat(Wa(s,t,n,i));return r}}function Qa(e,t,n,i,r){const s=t._queryIdentifier,a=e.views.get(s);if(!a){let e=wa(n,r?i:null),s=!1;e?s=!0:i instanceof ys?(e=Sa(n,i),s=!1):(e=ys.EMPTY_NODE,s=!1);const a=Zs(new Ys(e,s,!1),new Ys(i,r,!1));return new qa(t,a)}return a}function Ja(e,t,n,i,r,s){const a=Qa(e,t,i,r,s);return e.views.has(t._queryIdentifier)||e.views.set(t._queryIdentifier,a),function(e,t){e.eventRegistrations_.push(t)}(a,n),function(e,t){const n=e.viewCache_.eventCache,i=[];n.getNode().isLeafNode()||n.getNode().forEachChild(cs,((e,t)=>{i.push(Ss(e,t))}));return n.isFullyInitialized()&&i.push(ws(n.getNode())),za(e,i,n.getNode(),t)}(a,n)}function Za(e,t,n,i){const r=t._queryIdentifier,s=[];let a=[];const o=ro(e);if("default"===r)for(const[l,c]of e.views.entries())a=a.concat($a(c,n,i)),Va(c)&&(e.views.delete(l),c.query._queryParams.loadsAllData()||s.push(c.query));else{const t=e.views.get(r);t&&(a=a.concat($a(t,n,i)),Va(t)&&(e.views.delete(r),t.query._queryParams.loadsAllData()||s.push(t.query)))}return o&&!ro(e)&&s.push(new(L(Ga,"Reference.ts has not been loaded"),Ga)(t._repo,t._path)),{removed:s,events:a}}function eo(e){const t=[];for(const n of e.views.values())n.query._queryParams.loadsAllData()||t.push(n);return t}function to(e,t){let n=null;for(const i of e.views.values())n=n||Ha(i,t);return n}function no(e,t){if(t._queryParams.loadsAllData())return so(e);{const n=t._queryIdentifier;return e.views.get(n)}}function io(e,t){return null!=no(e,t)}function ro(e){return null!=so(e)}function so(e){for(const t of e.views.values())if(t.query._queryParams.loadsAllData())return t;return null}let ao=1;class oo{constructor(e){this.listenProvider_=e,this.syncPointTree_=new sa(null),this.pendingWriteTree_={visibleWrites:aa.empty(),allWrites:[],lastWriteId:-1},this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function lo(e,t,n,i,r){return function(e,t,n,i,r){L(i>e.lastWriteId,"Stacking an older write on top of newer ones"),void 0===r&&(r=!0),e.allWrites.push({path:t,snap:n,writeId:i,visible:r}),r&&(e.visibleWrites=oa(e.visibleWrites,t,n)),e.lastWriteId=i}(e.pendingWriteTree_,t,n,i,r),r?_o(e,new Ks({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},t,n)):[]}function co(e,t,n,i){!function(e,t,n,i){L(i>e.lastWriteId,"Stacking an older merge on top of newer ones"),e.allWrites.push({path:t,children:n,writeId:i,visible:!0}),e.visibleWrites=la(e.visibleWrites,t,n),e.lastWriteId=i}(e.pendingWriteTree_,t,n,i);const r=sa.fromObject(n);return _o(e,new Xs({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},t,r))}function uo(e,t,n=!1){const i=function(e,t){for(let n=0;n<e.allWrites.length;n++){const i=e.allWrites[n];if(i.writeId===t)return i}return null}(e.pendingWriteTree_,t);if(_a(e.pendingWriteTree_,t)){let t=new sa(null);return null!=i.snap?t=t.set(xr(),!0):Ki(i.children,(e=>{t=t.set(new Ir(e),!0)})),_o(e,new zs(i.path,t,n))}return[]}function ho(e,t,n){return _o(e,new Ks({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t,n))}function po(e,t,n,i,r=!1){const s=t._path,a=e.syncPointTree_.get(s);let o=[];if(a&&("default"===t._queryIdentifier||io(a,t))){const l=Za(a,t,n,i);0===a.views.size&&(e.syncPointTree_=e.syncPointTree_.remove(s));const c=l.removed;if(o=l.events,!r){const n=-1!==c.findIndex((e=>e._queryParams.loadsAllData())),r=e.syncPointTree_.findOnPath(s,((e,t)=>ro(t)));if(n&&!r){const t=e.syncPointTree_.subtree(s);if(!t.isEmpty()){const n=function(e){return e.fold(((e,t,n)=>{if(t&&ro(t)){return[so(t)]}{let e=[];return t&&(e=eo(t)),Ki(n,((t,n)=>{e=e.concat(n)})),e}}))}(t);for(let t=0;t<n.length;++t){const i=n[t],r=i.query,s=To(e,i);e.listenProvider_.startListening(xo(r),Eo(e,r),s.hashFn,s.onComplete)}}}if(!r&&c.length>0&&!i)if(n){const n=null;e.listenProvider_.stopListening(xo(t),n)}else c.forEach((t=>{const n=e.queryToTagMap.get(wo(t));e.listenProvider_.stopListening(xo(t),n)}))}!function(e,t){for(let n=0;n<t.length;++n){const i=t[n];if(!i._queryParams.loadsAllData()){const t=wo(i),n=e.queryToTagMap.get(t);e.queryToTagMap.delete(t),e.tagToQueryMap.delete(n)}}}(e,c)}return o}function fo(e,t,n,i){const r=So(e,i);if(null!=r){const i=Co(r),s=i.path,a=i.queryId,o=Mr(s,t);return Io(e,s,new Ks(Ws(a),o,n))}return[]}function mo(e,t,n,i=!1){const r=t._path;let s=null,a=!1;e.syncPointTree_.foreachOnPath(r,((e,t)=>{const n=Mr(e,r);s=s||to(t,n),a=a||ro(t)}));let o,l=e.syncPointTree_.get(r);if(l?(a=a||ro(l),s=s||to(l,xr())):(l=new Xa,e.syncPointTree_=e.syncPointTree_.set(r,l)),null!=s)o=!0;else{o=!1,s=ys.EMPTY_NODE;e.syncPointTree_.subtree(r).foreachChild(((e,t)=>{const n=to(t,xr());n&&(s=s.updateImmediateChild(e,n))}))}const c=io(l,t);if(!c&&!t._queryParams.loadsAllData()){const n=wo(t);L(!e.queryToTagMap.has(n),"View does not exist, but we have a tag");const i=ao++;e.queryToTagMap.set(n,i),e.tagToQueryMap.set(i,n)}let u=Ja(l,t,n,ya(e.pendingWriteTree_,r),s,o);if(!c&&!a&&!i){const n=no(l,t);u=u.concat(function(e,t,n){const i=t._path,r=Eo(e,t),s=To(e,n),a=e.listenProvider_.startListening(xo(t),r,s.hashFn,s.onComplete),o=e.syncPointTree_.subtree(i);if(r)L(!ro(o.value),"If we're adding a query, it shouldn't be shadowed");else{const t=o.fold(((e,t,n)=>{if(!Rr(e)&&t&&ro(t))return[so(t).query];{let e=[];return t&&(e=e.concat(eo(t).map((e=>e.query)))),Ki(n,((t,n)=>{e=e.concat(n)})),e}}));for(let n=0;n<t.length;++n){const i=t[n];e.listenProvider_.stopListening(xo(i),Eo(e,i))}}return a}(e,t,n))}return u}function go(e,t,n){const i=e.pendingWriteTree_,r=e.syncPointTree_.findOnPath(t,((e,n)=>{const i=to(n,Mr(e,t));if(i)return i}));return Ea(i,t,r,n,!0)}function yo(e,t){const n=t._path;let i=null;e.syncPointTree_.foreachOnPath(n,((e,t)=>{const r=Mr(e,n);i=i||to(t,r)}));let r=e.syncPointTree_.get(n);r?i=i||to(r,xr()):(r=new Xa,e.syncPointTree_=e.syncPointTree_.set(n,r));const s=null!=i,a=s?new Ys(i,!0,!1):null;return function(e){return na(e.viewCache_)}(Qa(r,t,ya(e.pendingWriteTree_,t._path),s?a.getNode():ys.EMPTY_NODE,s))}function _o(e,t){return vo(t,e.syncPointTree_,null,ya(e.pendingWriteTree_,xr()))}function vo(e,t,n,i){if(Rr(e.path))return bo(e,t,n,i);{const r=t.get(xr());null==n&&null!=r&&(n=to(r,xr()));let s=[];const a=kr(e.path),o=e.operationForChild(a),l=t.children.get(a);if(l&&o){const e=n?n.getImmediateChild(a):null,t=Aa(i,a);s=s.concat(vo(o,l,e,t))}return r&&(s=s.concat(Ya(r,e,i,n))),s}}function bo(e,t,n,i){const r=t.get(xr());null==n&&null!=r&&(n=to(r,xr()));let s=[];return t.children.inorderTraversal(((t,r)=>{const a=n?n.getImmediateChild(t):null,o=Aa(i,t),l=e.operationForChild(t);l&&(s=s.concat(bo(l,r,a,o)))})),r&&(s=s.concat(Ya(r,e,i,n))),s}function To(e,t){const n=t.query,i=Eo(e,n);return{hashFn:()=>{const e=function(e){return e.viewCache_.serverCache.getNode()}(t)||ys.EMPTY_NODE;return e.hash()},onComplete:t=>{if("ok"===t)return i?function(e,t,n){const i=So(e,n);if(i){const n=Co(i),r=n.path,s=n.queryId,a=Mr(r,t);return Io(e,r,new Gs(Ws(s),a))}return[]}(e,n._path,i):function(e,t){return _o(e,new Gs({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t))}(e,n._path);{const i=function(e,t){let n="Unknown Error";"too_big"===e?n="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===e?n="Client doesn't have permission to access the desired data.":"unavailable"===e&&(n="The service is unavailable");const i=new Error(e+" at "+t._path.toString()+": "+n);return i.code=e.toUpperCase(),i}(t,n);return po(e,n,null,i)}}}}function Eo(e,t){const n=wo(t);return e.queryToTagMap.get(n)}function wo(e){return e._path.toString()+"$"+e._queryIdentifier}function So(e,t){return e.tagToQueryMap.get(t)}function Co(e){const t=e.indexOf("$");return L(-1!==t&&t<e.length-1,"Bad queryKey."),{queryId:e.substr(t+1),path:new Ir(e.substr(0,t))}}function Io(e,t,n){const i=e.syncPointTree_.get(t);L(i,"Missing sync point for query tag that we're tracking");return Ya(i,n,ya(e.pendingWriteTree_,t),null)}function xo(e){return e._queryParams.loadsAllData()&&!e._queryParams.isDefault()?new(L(Ka,"Reference.ts has not been loaded"),Ka)(e._repo,e._path):e}class ko{constructor(e){this.node_=e}getImmediateChild(e){const t=this.node_.getImmediateChild(e);return new ko(t)}node(){return this.node_}}class Ao{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){const t=Dr(this.path_,e);return new Ao(this.syncTree_,t)}node(){return go(this.syncTree_,this.path_)}}const Oo=function(e){return(e=e||{}).timestamp=e.timestamp||(new Date).getTime(),e},Po=function(e,t,n){return e&&"object"==typeof e?(L(".sv"in e,"Unexpected leaf node or priority contents"),"string"==typeof e[".sv"]?Lo(e[".sv"],t,n):"object"==typeof e[".sv"]?No(e[".sv"],t):void L(!1,"Unexpected server value: "+JSON.stringify(e,null,2))):e},Lo=function(e,t,n){if("timestamp"===e)return n.timestamp;L(!1,"Unexpected server value: "+e)},No=function(e,t,n){e.hasOwnProperty("increment")||L(!1,"Unexpected server value: "+JSON.stringify(e,null,2));const i=e.increment;"number"!=typeof i&&L(!1,"Unexpected increment value: "+i);const r=t.node();if(L(null!=r,"Expected ChildrenNode.EMPTY_NODE for nulls"),!r.isLeafNode())return i;const s=r.getValue();return"number"!=typeof s?i:s+i},Do=function(e,t,n,i){return Mo(t,new Ao(n,e),i)},Ro=function(e,t,n){return Mo(e,new ko(t),n)};function Mo(e,t,n){const i=e.getPriority().val(),r=Po(i,t.getImmediateChild(".priority"),n);let s;if(e.isLeafNode()){const i=e,s=Po(i.getValue(),t,n);return s!==i.getValue()||r!==i.getPriority().val()?new ls(s,bs(r)):e}{const i=e;return s=i,r!==i.getPriority().val()&&(s=s.updatePriority(new ls(r))),i.forEachChild(cs,((e,i)=>{const r=Mo(i,t.getImmediateChild(e),n);r!==i&&(s=s.updateImmediateChild(e,r))})),s}}class Fo{constructor(e="",t=null,n={children:{},childCount:0}){this.name=e,this.parent=t,this.node=n}}function Uo(e,t){let n=t instanceof Ir?t:new Ir(t),i=e,r=kr(n);for(;null!==r;){const e=ue(i.node.children,r)||{children:{},childCount:0};i=new Fo(r,i,e),n=Or(n),r=kr(n)}return i}function Bo(e){return e.node.value}function jo(e,t){e.node.value=t,Wo(e)}function qo(e){return e.node.childCount>0}function Ho(e,t){Ki(e.node.children,((n,i)=>{t(new Fo(n,e,i))}))}function Vo(e,t,n,i){n&&!i&&t(e),Ho(e,(e=>{Vo(e,t,!0,i)})),n&&i&&t(e)}function $o(e){return new Ir(null===e.parent?e.name:$o(e.parent)+"/"+e.name)}function Wo(e){null!==e.parent&&function(e,t,n){const i=function(e){return void 0===Bo(e)&&!qo(e)}(n),r=ce(e.node.children,t);i&&r?(delete e.node.children[t],e.node.childCount--,Wo(e)):i||r||(e.node.children[t]=n.node,e.node.childCount++,Wo(e))}(e.parent,e.name,e)}const zo=/[\[\].#$\/\u0000-\u001F\u007F]/,Go=/[\[\].#$\u0000-\u001F\u007F]/,Ko=10485760,Xo=function(e){return"string"==typeof e&&0!==e.length&&!zo.test(e)},Yo=function(e){return"string"==typeof e&&0!==e.length&&!Go.test(e)},Qo=function(e){return null===e||"string"==typeof e||"number"==typeof e&&!ji(e)||e&&"object"==typeof e&&ce(e,".sv")},Jo=function(e,t,n,i){i&&void 0===t||Zo(Te(e,"value"),t,n)},Zo=function(e,t,n){const i=n instanceof Ir?new jr(n,e):n;if(void 0===t)throw new Error(e+"contains undefined "+Hr(i));if("function"==typeof t)throw new Error(e+"contains a function "+Hr(i)+" with contents = "+t.toString());if(ji(t))throw new Error(e+"contains "+t.toString()+" "+Hr(i));if("string"==typeof t&&t.length>Ko/3&&Ee(t)>Ko)throw new Error(e+"contains a string greater than "+Ko+" utf8 bytes "+Hr(i)+" ('"+t.substring(0,50)+"...')");if(t&&"object"==typeof t){let n=!1,r=!1;if(Ki(t,((t,s)=>{if(".value"===t)n=!0;else if(".priority"!==t&&".sv"!==t&&(r=!0,!Xo(t)))throw new Error(e+" contains an invalid key ("+t+") "+Hr(i)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');!function(e,t){e.parts_.length>0&&(e.byteLength_+=1),e.parts_.push(t),e.byteLength_+=Ee(t),qr(e)}(i,t),Zo(e,s,i),function(e){const t=e.parts_.pop();e.byteLength_-=Ee(t),e.parts_.length>0&&(e.byteLength_-=1)}(i)})),n&&r)throw new Error(e+' contains ".value" child '+Hr(i)+" in addition to actual children.")}},el=function(e,t,n,i){if(i&&void 0===t)return;const r=Te(e,"values");if(!t||"object"!=typeof t||Array.isArray(t))throw new Error(r+" must be an object containing the children to replace.");const s=[];Ki(t,((e,t)=>{const i=new Ir(e);if(Zo(r,t,Dr(n,i)),".priority"===Pr(i)&&!Qo(t))throw new Error(r+"contains an invalid value for '"+i.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");s.push(i)})),function(e,t){let n,i;for(n=0;n<t.length;n++){i=t[n];const r=Lr(i);for(let t=0;t<r.length;t++)if(".priority"===r[t]&&t===r.length-1);else if(!Xo(r[t]))throw new Error(e+"contains an invalid key ("+r[t]+") in path "+i.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"')}t.sort(Fr);let r=null;for(n=0;n<t.length;n++){if(i=t[n],null!==r&&Br(r,i))throw new Error(e+"contains a path "+r.toString()+" that is ancestor of another path "+i.toString());r=i}}(r,s)},tl=function(e,t,n){if(!n||void 0!==t){if(ji(t))throw new Error(Te(e,"priority")+"is "+t.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!Qo(t))throw new Error(Te(e,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},nl=function(e,t,n,i){if(!(i&&void 0===n||Xo(n)))throw new Error(Te(e,t)+'was an invalid key = "'+n+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},il=function(e,t,n,i){if(!(i&&void 0===n||Yo(n)))throw new Error(Te(e,t)+'was an invalid path = "'+n+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},rl=function(e,t,n,i){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),il(e,t,n,i)},sl=function(e,t){if(".info"===kr(t))throw new Error(e+" failed = Can't modify data under /.info/")},al=function(e,t){const n=t.path.toString();if("string"!=typeof t.repoInfo.host||0===t.repoInfo.host.length||!Xo(t.repoInfo.namespace)&&"localhost"!==t.repoInfo.host.split(":")[0]||0!==n.length&&!function(e){return e&&(e=e.replace(/^\/*\.info(\/|$)/,"/")),Yo(e)}(n))throw new Error(Te(e,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class ol{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function ll(e,t){let n=null;for(let i=0;i<t.length;i++){const r=t[i],s=r.getPath();null===n||Ur(s,n.path)||(e.eventLists_.push(n),n=null),null===n&&(n={events:[],path:s}),n.events.push(r)}n&&e.eventLists_.push(n)}function cl(e,t,n){ll(e,n),dl(e,(e=>Ur(e,t)))}function ul(e,t,n){ll(e,n),dl(e,(e=>Br(e,t)||Br(t,e)))}function dl(e,t){e.recursionDepth_++;let n=!0;for(let i=0;i<e.eventLists_.length;i++){const r=e.eventLists_[i];if(r){t(r.path)?(hl(e.eventLists_[i]),e.eventLists_[i]=null):n=!1}}n&&(e.eventLists_=[]),e.recursionDepth_--}function hl(e){for(let t=0;t<e.events.length;t++){const n=e.events[t];if(null!==n){e.events[t]=null;const i=n.getEventRunner();Li&&Ri("event: "+n.toString()),Ji(i)}}}const pl="repo_interrupt",fl=25;class ml{constructor(e,t,n,i){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=n,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new ol,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=Us(),this.transactionQueueTree_=new Fo,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function gl(e,t,n){if(e.stats_=hr(e.repoInfo_),e.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)e.server_=new Ms(e.repoInfo_,((t,n,i,r)=>{vl(e,t,n,i,r)}),e.authTokenProvider_,e.appCheckProvider_),setTimeout((()=>bl(e,!0)),0);else{if(null!=n){if("object"!=typeof n)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{oe(n)}catch(i){throw new Error("Invalid authOverride provided: "+i)}}e.persistentConnection_=new Wr(e.repoInfo_,t,((t,n,i,r)=>{vl(e,t,n,i,r)}),(t=>{bl(e,t)}),(t=>{!function(e,t){Ki(t,((t,n)=>{Tl(e,t,n)}))}(e,t)}),e.authTokenProvider_,e.appCheckProvider_,n),e.server_=e.persistentConnection_}e.authTokenProvider_.addTokenChangeListener((t=>{e.server_.refreshAuthToken(t)})),e.appCheckProvider_.addTokenChangeListener((t=>{e.server_.refreshAppCheckToken(t.token)})),e.statsReporter_=function(e,t){const n=e.toString();return dr[n]||(dr[n]=t()),dr[n]}(e.repoInfo_,(()=>new Vs(e.stats_,e.server_))),e.infoData_=new Fs,e.infoSyncTree_=new oo({startListening:(t,n,i,r)=>{let s=[];const a=e.infoData_.getNode(t._path);return a.isEmpty()||(s=ho(e.infoSyncTree_,t._path,a),setTimeout((()=>{r("ok")}),0)),s},stopListening:()=>{}}),Tl(e,"connected",!1),e.serverSyncTree_=new oo({startListening:(t,n,i,r)=>(e.server_.listen(t,i,n,((n,i)=>{const s=r(n,i);ul(e.eventQueue_,t._path,s)})),[]),stopListening:(t,n)=>{e.server_.unlisten(t,n)}})}function yl(e){const t=e.infoData_.getNode(new Ir(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t}function _l(e){return Oo({timestamp:yl(e)})}function vl(e,t,n,i,r){e.dataUpdateCount++;const s=new Ir(t);n=e.interceptServerDataCallback_?e.interceptServerDataCallback_(t,n):n;let a=[];if(r)if(i){const t=he(n,(e=>bs(e)));a=function(e,t,n,i){const r=So(e,i);if(r){const i=Co(r),s=i.path,a=i.queryId,o=Mr(s,t),l=sa.fromObject(n);return Io(e,s,new Xs(Ws(a),o,l))}return[]}(e.serverSyncTree_,s,t,r)}else{const t=bs(n);a=fo(e.serverSyncTree_,s,t,r)}else if(i){const t=he(n,(e=>bs(e)));a=function(e,t,n){const i=sa.fromObject(n);return _o(e,new Xs({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t,i))}(e.serverSyncTree_,s,t)}else{const t=bs(n);a=ho(e.serverSyncTree_,s,t)}let o=s;a.length>0&&(o=Ll(e,s)),ul(e.eventQueue_,o,a)}function bl(e,t){Tl(e,"connected",t),!1===t&&function(e){kl(e,"onDisconnectEvents");const t=_l(e),n=Us();qs(e.onDisconnect_,xr(),((i,r)=>{const s=Do(i,r,e.serverSyncTree_,t);Bs(n,i,s)}));let i=[];qs(n,xr(),((t,n)=>{i=i.concat(ho(e.serverSyncTree_,t,n));const r=Fl(e,t);Ll(e,r)})),e.onDisconnect_=Us(),ul(e.eventQueue_,xr(),i)}(e)}function Tl(e,t,n){const i=new Ir("/.info/"+t),r=bs(n);e.infoData_.updateSnapshot(i,r);const s=ho(e.infoSyncTree_,i,r);ul(e.eventQueue_,i,s)}function El(e){return e.nextWriteId_++}function wl(e,t,n,i,r){kl(e,"set",{path:t.toString(),value:n,priority:i});const s=_l(e),a=bs(n,i),o=go(e.serverSyncTree_,t),l=Ro(a,o,s),c=El(e),u=lo(e.serverSyncTree_,t,l,c,!0);ll(e.eventQueue_,u),e.server_.put(t.toString(),a.val(!0),((n,i)=>{const s="ok"===n;s||Bi("set at "+t+" failed: "+n);const a=uo(e.serverSyncTree_,c,!s);ul(e.eventQueue_,t,a),Al(e,r,n,i)}));const d=Fl(e,t);Ll(e,d),ul(e.eventQueue_,d,[])}function Sl(e,t,n){e.server_.onDisconnectCancel(t.toString(),((i,r)=>{"ok"===i&&js(e.onDisconnect_,t),Al(e,n,i,r)}))}function Cl(e,t,n,i){const r=bs(n);e.server_.onDisconnectPut(t.toString(),r.val(!0),((n,s)=>{"ok"===n&&Bs(e.onDisconnect_,t,r),Al(e,i,n,s)}))}function Il(e,t,n){let i;i=".info"===kr(t._path)?po(e.infoSyncTree_,t,n):po(e.serverSyncTree_,t,n),cl(e.eventQueue_,t._path,i)}function xl(e){e.persistentConnection_&&e.persistentConnection_.interrupt(pl)}function kl(e,...t){let n="";e.persistentConnection_&&(n=e.persistentConnection_.id+":"),Ri(n,...t)}function Al(e,t,n,i){t&&Ji((()=>{if("ok"===n)t(null);else{const e=(n||"error").toUpperCase();let r=e;i&&(r+=": "+i);const s=new Error(r);s.code=e,t(s)}}))}function Ol(e,t,n){return go(e.serverSyncTree_,t,n)||ys.EMPTY_NODE}function Pl(e,t=e.transactionQueueTree_){if(t||Ml(e,t),Bo(t)){const n=Dl(e,t);L(n.length>0,"Sending zero length transaction queue");n.every((e=>0===e.status))&&function(e,t,n){const i=n.map((e=>e.currentWriteId)),r=Ol(e,t,i);let s=r;const a=r.hash();for(let c=0;c<n.length;c++){const e=n[c];L(0===e.status,"tryToSendTransactionQueue_: items in queue should all be run."),e.status=1,e.retryCount++;const i=Mr(t,e.path);s=s.updateChild(i,e.currentOutputSnapshotRaw)}const o=s.val(!0),l=t;e.server_.put(l.toString(),o,(i=>{kl(e,"transaction put response",{path:l.toString(),status:i});let r=[];if("ok"===i){const i=[];for(let t=0;t<n.length;t++)n[t].status=2,r=r.concat(uo(e.serverSyncTree_,n[t].currentWriteId)),n[t].onComplete&&i.push((()=>n[t].onComplete(null,!0,n[t].currentOutputSnapshotResolved))),n[t].unwatcher();Ml(e,Uo(e.transactionQueueTree_,t)),Pl(e,e.transactionQueueTree_),ul(e.eventQueue_,t,r);for(let e=0;e<i.length;e++)Ji(i[e])}else{if("datastale"===i)for(let e=0;e<n.length;e++)3===n[e].status?n[e].status=4:n[e].status=0;else{Bi("transaction at "+l.toString()+" failed: "+i);for(let e=0;e<n.length;e++)n[e].status=4,n[e].abortReason=i}Ll(e,t)}}),a)}(e,$o(t),n)}else qo(t)&&Ho(t,(t=>{Pl(e,t)}))}function Ll(e,t){const n=Nl(e,t),i=$o(n);return function(e,t,n){if(0===t.length)return;const i=[];let r=[];const s=t.filter((e=>0===e.status)),a=s.map((e=>e.currentWriteId));for(let l=0;l<t.length;l++){const s=t[l],c=Mr(n,s.path);let u,d=!1;if(L(null!==c,"rerunTransactionsUnderNode_: relativePath should not be null."),4===s.status)d=!0,u=s.abortReason,r=r.concat(uo(e.serverSyncTree_,s.currentWriteId,!0));else if(0===s.status)if(s.retryCount>=fl)d=!0,u="maxretry",r=r.concat(uo(e.serverSyncTree_,s.currentWriteId,!0));else{const n=Ol(e,s.path,a);s.currentInputSnapshot=n;const i=t[l].update(n.val());if(void 0!==i){Zo("transaction failed: Data returned ",i,s.path);let t=bs(i);"object"==typeof i&&null!=i&&ce(i,".priority")||(t=t.updatePriority(n.getPriority()));const o=s.currentWriteId,l=_l(e),c=Ro(t,n,l);s.currentOutputSnapshotRaw=t,s.currentOutputSnapshotResolved=c,s.currentWriteId=El(e),a.splice(a.indexOf(o),1),r=r.concat(lo(e.serverSyncTree_,s.path,c,s.currentWriteId,s.applyLocally)),r=r.concat(uo(e.serverSyncTree_,o,!0))}else d=!0,u="nodata",r=r.concat(uo(e.serverSyncTree_,s.currentWriteId,!0))}ul(e.eventQueue_,n,r),r=[],d&&(t[l].status=2,o=t[l].unwatcher,setTimeout(o,Math.floor(0)),t[l].onComplete&&("nodata"===u?i.push((()=>t[l].onComplete(null,!1,t[l].currentInputSnapshot))):i.push((()=>t[l].onComplete(new Error(u),!1,null)))))}var o;Ml(e,e.transactionQueueTree_);for(let l=0;l<i.length;l++)Ji(i[l]);Pl(e,e.transactionQueueTree_)}(e,Dl(e,n),i),i}function Nl(e,t){let n,i=e.transactionQueueTree_;for(n=kr(t);null!==n&&void 0===Bo(i);)i=Uo(i,n),n=kr(t=Or(t));return i}function Dl(e,t){const n=[];return Rl(e,t,n),n.sort(((e,t)=>e.order-t.order)),n}function Rl(e,t,n){const i=Bo(t);if(i)for(let r=0;r<i.length;r++)n.push(i[r]);Ho(t,(t=>{Rl(e,t,n)}))}function Ml(e,t){const n=Bo(t);if(n){let e=0;for(let t=0;t<n.length;t++)2!==n[t].status&&(n[e]=n[t],e++);n.length=e,jo(t,n.length>0?n:void 0)}Ho(t,(t=>{Ml(e,t)}))}function Fl(e,t){const n=$o(Nl(e,t)),i=Uo(e.transactionQueueTree_,t);return function(e,t,n){let i=n?e:e.parent;for(;null!==i;){if(t(i))return!0;i=i.parent}}(i,(t=>{Ul(e,t)})),Ul(e,i),Vo(i,(t=>{Ul(e,t)})),n}function Ul(e,t){const n=Bo(t);if(n){const i=[];let r=[],s=-1;for(let t=0;t<n.length;t++)3===n[t].status||(1===n[t].status?(L(s===t-1,"All SENT items should be at beginning of queue."),s=t,n[t].status=3,n[t].abortReason="set"):(L(0===n[t].status,"Unexpected transaction status in abort"),n[t].unwatcher(),r=r.concat(uo(e.serverSyncTree_,n[t].currentWriteId,!0)),n[t].onComplete&&i.push(n[t].onComplete.bind(null,new Error("set"),!1,null))));-1===s?jo(t,void 0):n.length=s+1,ul(e.eventQueue_,$o(t),r);for(let e=0;e<i.length;e++)Ji(i[e])}}const Bl=function(e,t){const n=jl(e),i=n.namespace;"firebase.com"===n.domain&&Ui(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),i&&"undefined"!==i||"localhost"===n.domain||Ui("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||"undefined"!=typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&Bi("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().");const r="ws"===n.scheme||"wss"===n.scheme;return{repoInfo:new or(n.host,n.secure,i,r,t,"",i!==n.subdomain),path:new Ir(n.pathString)}},jl=function(e){let t="",n="",i="",r="",s="",a=!0,o="https",l=443;if("string"==typeof e){let c=e.indexOf("//");c>=0&&(o=e.substring(0,c-1),e=e.substring(c+2));let u=e.indexOf("/");-1===u&&(u=e.length);let d=e.indexOf("?");-1===d&&(d=e.length),t=e.substring(0,Math.min(u,d)),u<d&&(r=function(e){let t="";const n=e.split("/");for(let r=0;r<n.length;r++)if(n[r].length>0){let e=n[r];try{e=decodeURIComponent(e.replace(/\+/g," "))}catch(i){}t+="/"+e}return t}(e.substring(u,d)));const h=function(e){const t={};"?"===e.charAt(0)&&(e=e.substring(1));for(const n of e.split("&")){if(0===n.length)continue;const i=n.split("=");2===i.length?t[decodeURIComponent(i[0])]=decodeURIComponent(i[1]):Bi(`Invalid query segment '${n}' in query '${e}'`)}return t}(e.substring(Math.min(e.length,d)));c=t.indexOf(":"),c>=0?(a="https"===o||"wss"===o,l=parseInt(t.substring(c+1),10)):c=t.length;const p=t.slice(0,c);if("localhost"===p.toLowerCase())n="localhost";else if(p.split(".").length<=2)n=p;else{const e=t.indexOf(".");i=t.substring(0,e).toLowerCase(),n=t.substring(e+1),s=i}"ns"in h&&(s=h.ns)}return{host:t,port:l,domain:n,subdomain:i,secure:a,scheme:o,pathString:r,namespace:s}},ql="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",Hl=function(){let e=0;const t=[];return function(n){const i=n===e;let r;e=n;const s=new Array(8);for(r=7;r>=0;r--)s[r]=ql.charAt(n%64),n=Math.floor(n/64);L(0===n,"Cannot push at time == 0");let a=s.join("");if(i){for(r=11;r>=0&&63===t[r];r--)t[r]=0;t[r]++}else for(r=0;r<12;r++)t[r]=Math.floor(64*Math.random());for(r=0;r<12;r++)a+=ql.charAt(t[r]);return L(20===a.length,"nextPushId: Length should be 20."),a}}();class Vl{constructor(e,t,n,i){this.eventType=e,this.eventRegistration=t,this.snapshot=n,this.prevName=i}getPath(){const e=this.snapshot.ref;return"value"===this.eventType?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+oe(this.snapshot.exportVal())}}class $l{constructor(e,t,n){this.eventRegistration=e,this.error=t,this.path=n}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class Wl{constructor(e,t){this.snapshotCallback=e,this.cancelCallback=t}onValue(e,t){this.snapshotCallback.call(null,e,t)}onCancel(e){return L(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}class zl{constructor(e,t){this._repo=e,this._path=t}cancel(){const e=new X;return Sl(this._repo,this._path,e.wrapCallback((()=>{}))),e.promise}remove(){sl("OnDisconnect.remove",this._path);const e=new X;return Cl(this._repo,this._path,null,e.wrapCallback((()=>{}))),e.promise}set(e){sl("OnDisconnect.set",this._path),Jo("OnDisconnect.set",e,this._path,!1);const t=new X;return Cl(this._repo,this._path,e,t.wrapCallback((()=>{}))),t.promise}setWithPriority(e,t){sl("OnDisconnect.setWithPriority",this._path),Jo("OnDisconnect.setWithPriority",e,this._path,!1),tl("OnDisconnect.setWithPriority",t,!1);const n=new X;return function(e,t,n,i,r){const s=bs(n,i);e.server_.onDisconnectPut(t.toString(),s.val(!0),((n,i)=>{"ok"===n&&Bs(e.onDisconnect_,t,s),Al(0,r,n,i)}))}(this._repo,this._path,e,t,n.wrapCallback((()=>{}))),n.promise}update(e){sl("OnDisconnect.update",this._path),el("OnDisconnect.update",e,this._path,!1);const t=new X;return function(e,t,n,i){if(de(n))return Ri("onDisconnect().update() called with empty data.  Don't do anything."),void Al(0,i,"ok",void 0);e.server_.onDisconnectMerge(t.toString(),n,((r,s)=>{"ok"===r&&Ki(n,((n,i)=>{const r=bs(i);Bs(e.onDisconnect_,Dr(t,n),r)})),Al(0,i,r,s)}))}(this._repo,this._path,e,t.wrapCallback((()=>{}))),t.promise}}class Gl{constructor(e,t,n,i){this._repo=e,this._path=t,this._queryParams=n,this._orderByCalled=i}get key(){return Rr(this._path)?null:Pr(this._path)}get ref(){return new Ql(this._repo,this._path)}get _queryIdentifier(){const e=Rs(this._queryParams),t=zi(e);return"{}"===t?"default":t}get _queryObject(){return Rs(this._queryParams)}isEqual(e){if(!((e=ke(e))instanceof Gl))return!1;const t=this._repo===e._repo,n=Ur(this._path,e._path),i=this._queryIdentifier===e._queryIdentifier;return t&&n&&i}toJSON(){return this.toString()}toString(){return this._repo.toString()+function(e){let t="";for(let n=e.pieceNum_;n<e.pieces_.length;n++)""!==e.pieces_[n]&&(t+="/"+encodeURIComponent(String(e.pieces_[n])));return t||"/"}(this._path)}}function Kl(e,t){if(!0===e._orderByCalled)throw new Error(t+": You can't combine multiple orderBy calls.")}function Xl(e){let t=null,n=null;if(e.hasStart()&&(t=e.getIndexStartValue()),e.hasEnd()&&(n=e.getIndexEndValue()),e.getIndex()===Yr){const i="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",r="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(e.hasStart()){if(e.getIndexStartName()!==qi)throw new Error(i);if("string"!=typeof t)throw new Error(r)}if(e.hasEnd()){if(e.getIndexEndName()!==Hi)throw new Error(i);if("string"!=typeof n)throw new Error(r)}}else if(e.getIndex()===cs){if(null!=t&&!Qo(t)||null!=n&&!Qo(n))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if(L(e.getIndex()instanceof Ts||e.getIndex()===Es,"unknown index type."),null!=t&&"object"==typeof t||null!=n&&"object"==typeof n)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function Yl(e){if(e.hasStart()&&e.hasEnd()&&e.hasLimit()&&!e.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}class Ql extends Gl{constructor(e,t){super(e,t,new Os,!1)}get parent(){const e=Nr(this._path);return null===e?null:new Ql(this._repo,e)}get root(){let e=this;for(;null!==e.parent;)e=e.parent;return e}}class Jl{constructor(e,t,n){this._node=e,this.ref=t,this._index=n}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const t=new Ir(e),n=ec(this.ref,e);return new Jl(this._node.getChild(t),n,cs)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){if(this._node.isLeafNode())return!1;return!!this._node.forEachChild(this._index,((t,n)=>e(new Jl(n,ec(this.ref,t),cs))))}hasChild(e){const t=new Ir(e);return!this._node.getChild(t).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function Zl(e,t){return(e=ke(e))._checkNotDeleted("ref"),void 0!==t?ec(e._root,t):e._root}function ec(e,t){return null===kr((e=ke(e))._path)?rl("child","path",t,!1):il("child","path",t,!1),new Ql(e._repo,Dr(e._path,t))}function tc(e,t){e=ke(e),sl("set",e._path),Jo("set",t,e._path,!1);const n=new X;return wl(e._repo,e._path,t,null,n.wrapCallback((()=>{}))),n.promise}function nc(e){e=ke(e);const t=new Wl((()=>{})),n=new ic(t);return function(e,t,n){const i=yo(e.serverSyncTree_,t);return null!=i?Promise.resolve(i):e.server_.get(t).then((i=>{const r=bs(i).withIndex(t._queryParams.getIndex());let s;if(mo(e.serverSyncTree_,t,n,!0),t._queryParams.loadsAllData())s=ho(e.serverSyncTree_,t._path,r);else{const n=Eo(e.serverSyncTree_,t);s=fo(e.serverSyncTree_,t._path,r,n)}return ul(e.eventQueue_,t._path,s),po(e.serverSyncTree_,t,n,null,!0),r}),(n=>(kl(e,"get for query "+oe(t)+" failed: "+n),Promise.reject(new Error(n)))))}(e._repo,e,n).then((t=>new Jl(t,new Ql(e._repo,e._path),e._queryParams.getIndex())))}class ic{constructor(e){this.callbackContext=e}respondsTo(e){return"value"===e}createEvent(e,t){const n=t._queryParams.getIndex();return new Vl("value",this,new Jl(e.snapshotNode,new Ql(t._repo,t._path),n))}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new $l(this,e,t):null}matches(e){return e instanceof ic&&(!e.callbackContext||!this.callbackContext||e.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}class rc{constructor(e,t){this.eventType=e,this.callbackContext=t}respondsTo(e){let t="children_added"===e?"child_added":e;return t="children_removed"===t?"child_removed":t,this.eventType===t}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new $l(this,e,t):null}createEvent(e,t){L(null!=e.childName,"Child events should have a childName.");const n=ec(new Ql(t._repo,t._path),e.childName),i=t._queryParams.getIndex();return new Vl(e.type,this,new Jl(e.snapshotNode,n,i),e.prevName)}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,e.prevName)}matches(e){return e instanceof rc&&(this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext)))}hasAnyCallback(){return!!this.callbackContext}}function sc(e,t,n,i,r){let s;if("object"==typeof i&&(s=void 0,r=i),"function"==typeof i&&(s=i),r&&r.onlyOnce){const t=n,i=(n,i)=>{Il(e._repo,e,o),t(n,i)};i.userCallback=n.userCallback,i.context=n.context,n=i}const a=new Wl(n,s||void 0),o="value"===t?new ic(a):new rc(t,a);return function(e,t,n){let i;i=".info"===kr(t._path)?mo(e.infoSyncTree_,t,n):mo(e.serverSyncTree_,t,n),cl(e.eventQueue_,t._path,i)}(e._repo,e,o),()=>Il(e._repo,e,o)}function ac(e,t,n,i){return sc(e,"value",t,n,i)}class oc{}class lc extends oc{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){Jo("endAt",this._value,e._path,!0);const t=Ls(e._queryParams,this._value,this._key);if(Yl(t),Xl(t),e._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new Gl(e._repo,e._path,t,e._orderByCalled)}}class cc extends oc{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){Jo("endBefore",this._value,e._path,!1);const t=function(e,t,n){let i;return i=e.index_===Yr||n?Ls(e,t,n):Ls(e,t,qi),i.endBeforeSet_=!0,i}(e._queryParams,this._value,this._key);if(Yl(t),Xl(t),e._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new Gl(e._repo,e._path,t,e._orderByCalled)}}class uc extends oc{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){Jo("startAt",this._value,e._path,!0);const t=Ps(e._queryParams,this._value,this._key);if(Yl(t),Xl(t),e._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new Gl(e._repo,e._path,t,e._orderByCalled)}}class dc extends oc{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){Jo("startAfter",this._value,e._path,!1);const t=function(e,t,n){let i;return i=e.index_===Yr||n?Ps(e,t,n):Ps(e,t,Hi),i.startAfterSet_=!0,i}(e._queryParams,this._value,this._key);if(Yl(t),Xl(t),e._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new Gl(e._repo,e._path,t,e._orderByCalled)}}class hc extends oc{constructor(e){super(),this._limit=e}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new Gl(e._repo,e._path,function(e,t){const n=e.copy();return n.limitSet_=!0,n.limit_=t,n.viewFrom_="l",n}(e._queryParams,this._limit),e._orderByCalled)}}class pc extends oc{constructor(e){super(),this._limit=e}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new Gl(e._repo,e._path,function(e,t){const n=e.copy();return n.limitSet_=!0,n.limit_=t,n.viewFrom_="r",n}(e._queryParams,this._limit),e._orderByCalled)}}class fc extends oc{constructor(e){super(),this._path=e}_apply(e){Kl(e,"orderByChild");const t=new Ir(this._path);if(Rr(t))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");const n=new Ts(t),i=Ns(e._queryParams,n);return Xl(i),new Gl(e._repo,e._path,i,!0)}}class mc extends oc{_apply(e){Kl(e,"orderByKey");const t=Ns(e._queryParams,Yr);return Xl(t),new Gl(e._repo,e._path,t,!0)}}class gc extends oc{_apply(e){Kl(e,"orderByPriority");const t=Ns(e._queryParams,cs);return Xl(t),new Gl(e._repo,e._path,t,!0)}}class yc extends oc{_apply(e){Kl(e,"orderByValue");const t=Ns(e._queryParams,Es);return Xl(t),new Gl(e._repo,e._path,t,!0)}}class _c extends oc{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){if(Jo("equalTo",this._value,e._path,!1),e._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(e._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new lc(this._value,this._key)._apply(new uc(this._value,this._key)._apply(e))}}!function(e){L(!Ga,"__referenceConstructor has already been defined"),Ga=e}(Ql),function(e){L(!Ka,"__referenceConstructor has already been defined"),Ka=e}(Ql);const vc="FIREBASE_DATABASE_EMULATOR_HOST",bc={};let Tc=!1;function Ec(e,t,n,i,r){let s=i||e.options.databaseURL;void 0===s&&(e.options.projectId||Ui("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Ri("Using default host for project ",e.options.projectId),s=`${e.options.projectId}-default-rtdb.firebaseio.com`);let a,o,l=Bl(s,r),c=l.repoInfo;"undefined"!=typeof process&&process.env&&(o=process.env[vc]),o?(a=!0,s=`http://${o}?ns=${c.namespace}`,l=Bl(s,r),c=l.repoInfo):a=!l.repoInfo.secure;const u=r&&a?new nr(nr.OWNER):new tr(e.name,e.options,t);al("Invalid Firebase Database URL",l),Rr(l.path)||Ui("Database URL must point to the root of a Firebase Database (not including a child path).");const d=function(e,t,n,i){let r=bc[t.name];r||(r={},bc[t.name]=r);let s=r[e.toURLString()];s&&Ui("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call.");return s=new ml(e,Tc,n,i),r[e.toURLString()]=s,s}(c,e,u,new er(e.name,n));return new wc(d,e)}class wc{constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(gl(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Ql(this._repo,xr())),this._rootInternal}_delete(){return null!==this._rootInternal&&(!function(e,t){const n=bc[t];n&&n[e.key]===e||Ui(`Database ${t}(${e.repoInfo_}) has already been deleted.`),xl(e),delete n[e.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){null===this._rootInternal&&Ui("Cannot call "+e+" on a deleted database.")}}function Sc(){vr.IS_TRANSPORT_INITIALIZED&&Bi("Transport has already been initialized. Please call this function before calling ref or setting up a listener")}function Cc(e=yt(),t){const n=ht(e,"database").getImmediate({identifier:t});if(!n._instanceStarted){const e=z("database");e&&Ic(n,...e)}return n}function Ic(e,t,n,i={}){(e=ke(e))._checkNotDeleted("useEmulator"),e._instanceStarted&&Ui("Cannot call useEmulator() after instance has already been initialized.");const r=e._repoInternal;let s;if(r.repoInfo_.nodeAdmin)i.mockUserToken&&Ui('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),s=new nr(nr.OWNER);else if(i.mockUserToken){const t="string"==typeof i.mockUserToken?i.mockUserToken:function(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n=t||"demo-project",i=e.iat||0,r=e.sub||e.user_id;if(!r)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const s=Object.assign({iss:`https://securetoken.google.com/${n}`,aud:n,iat:i,exp:i+3600,auth_time:i,sub:r,user_id:r,firebase:{sign_in_provider:"custom",identities:{}}},e);return[U(JSON.stringify({alg:"none",type:"JWT"})),U(JSON.stringify(s)),""].join(".")}(i.mockUserToken,e.app.options.projectId);s=new nr(t)}!function(e,t,n,i){e.repoInfo_=new or(`${t}:${n}`,!1,e.repoInfo_.namespace,e.repoInfo_.webSocketOnly,e.repoInfo_.nodeAdmin,e.repoInfo_.persistenceKey,e.repoInfo_.includeNamespaceInQueryParams,!0),i&&(e.authTokenProvider_=i)}(r,t,n,s)}const xc={".sv":"timestamp"};class kc{constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}}Wr.prototype.simpleListen=function(e,t){this.sendRequest("q",{p:e},t)},Wr.prototype.echo=function(e,t){this.sendRequest("echo",{d:e},t)};!function(e){Ei(mt),dt(new Ae("database",((e,{instanceIdentifier:t})=>Ec(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"),e.getProvider("app-check-internal"),t)),"PUBLIC").setMultipleInstances(!0)),_t(vi,bi,e),_t(vi,bi,"esm2017")}();const Ac=Object.freeze(Object.defineProperty({__proto__:null,DataSnapshot:Jl,Database:wc,OnDisconnect:zl,QueryConstraint:oc,TransactionResult:kc,_QueryImpl:Gl,_QueryParams:Os,_ReferenceImpl:Ql,_TEST_ACCESS_forceRestClient:function(e){!function(e){Tc=e}(e)},_TEST_ACCESS_hijackHash:function(e){const t=Wr.prototype.put;return Wr.prototype.put=function(n,i,r,s){void 0!==s&&(s=e()),t.call(this,n,i,r,s)},function(){Wr.prototype.put=t}},_repoManagerDatabaseFromApp:Ec,_setSDKVersion:Ei,_validatePathString:il,_validateWritablePath:sl,child:ec,connectDatabaseEmulator:Ic,enableLogging:function(e,t){Di(e,t)},endAt:function(e,t){return nl("endAt","key",t,!0),new lc(e,t)},endBefore:function(e,t){return nl("endBefore","key",t,!0),new cc(e,t)},equalTo:function(e,t){return nl("equalTo","key",t,!0),new _c(e,t)},forceLongPolling:function(){Sc(),_r.forceDisallow(),mr.forceAllow()},forceWebSockets:function(){Sc(),mr.forceDisallow()},get:nc,getDatabase:Cc,goOffline:function(e){(e=ke(e))._checkNotDeleted("goOffline"),xl(e._repo)},goOnline:function(e){var t;(e=ke(e))._checkNotDeleted("goOnline"),(t=e._repo).persistentConnection_&&t.persistentConnection_.resume(pl)},increment:function(e){return{".sv":{increment:e}}},limitToFirst:function(e){if("number"!=typeof e||Math.floor(e)!==e||e<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new hc(e)},limitToLast:function(e){if("number"!=typeof e||Math.floor(e)!==e||e<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new pc(e)},off:function(e,t,n){let i=null;const r=n?new Wl(n):null;"value"===t?i=new ic(r):t&&(i=new rc(t,r)),Il(e._repo,e,i)},onChildAdded:function(e,t,n,i){return sc(e,"child_added",t,n,i)},onChildChanged:function(e,t,n,i){return sc(e,"child_changed",t,n,i)},onChildMoved:function(e,t,n,i){return sc(e,"child_moved",t,n,i)},onChildRemoved:function(e,t,n,i){return sc(e,"child_removed",t,n,i)},onDisconnect:function(e){return e=ke(e),new zl(e._repo,e._path)},onValue:ac,orderByChild:function(e){if("$key"===e)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===e)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===e)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return il("orderByChild","path",e,!1),new fc(e)},orderByKey:function(){return new mc},orderByPriority:function(){return new gc},orderByValue:function(){return new yc},push:function(e,t){e=ke(e),sl("push",e._path),Jo("push",t,e._path,!0);const n=yl(e._repo),i=Hl(n),r=ec(e,i),s=ec(e,i);let a;return a=null!=t?tc(s,t).then((()=>s)):Promise.resolve(s),r.then=a.then.bind(a),r.catch=a.then.bind(a,void 0),r},query:function(e,...t){let n=ke(e);for(const i of t)n=i._apply(n);return n},ref:Zl,refFromURL:function(e,t){(e=ke(e))._checkNotDeleted("refFromURL");const n=Bl(t,e._repo.repoInfo_.nodeAdmin);al("refFromURL",n);const i=n.repoInfo;return e._repo.repoInfo_.isCustomHost()||i.host===e._repo.repoInfo_.host||Ui("refFromURL: Host name does not match the current database: (found "+i.host+" but expected "+e._repo.repoInfo_.host+")"),Zl(e,n.path.toString())},remove:function(e){return sl("remove",e._path),tc(e,null)},runTransaction:function(e,t,n){var i;if(e=ke(e),sl("Reference.transaction",e._path),".length"===e.key||".keys"===e.key)throw"Reference.transaction failed: "+e.key+" is a read-only object.";const r=null===(i=null==n?void 0:n.applyLocally)||void 0===i||i,s=new X,a=ac(e,(()=>{}));return function(e,t,n,i,r,s){kl(e,"transaction on "+t);const a={path:t,update:n,onComplete:i,status:null,order:Ai(),applyLocally:s,retryCount:0,unwatcher:r,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},o=Ol(e,t,void 0);a.currentInputSnapshot=o;const l=a.update(o.val());if(void 0===l)a.unwatcher(),a.currentOutputSnapshotRaw=null,a.currentOutputSnapshotResolved=null,a.onComplete&&a.onComplete(null,!1,a.currentInputSnapshot);else{Zo("transaction failed: Data returned ",l,a.path),a.status=0;const n=Uo(e.transactionQueueTree_,t),i=Bo(n)||[];let r;i.push(a),jo(n,i),"object"==typeof l&&null!==l&&ce(l,".priority")?(r=ue(l,".priority"),L(Qo(r),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):r=(go(e.serverSyncTree_,t)||ys.EMPTY_NODE).getPriority().val();const s=_l(e),c=bs(l,r),u=Ro(c,o,s);a.currentOutputSnapshotRaw=c,a.currentOutputSnapshotResolved=u,a.currentWriteId=El(e);const d=lo(e.serverSyncTree_,t,u,a.currentWriteId,a.applyLocally);ul(e.eventQueue_,t,d),Pl(e,e.transactionQueueTree_)}}(e._repo,e._path,t,((t,n,i)=>{let r=null;t?s.reject(t):(r=new Jl(i,new Ql(e._repo,e._path),cs),s.resolve(new kc(n,r)))}),a,r),s.promise},serverTimestamp:function(){return xc},set:tc,setPriority:function(e,t){e=ke(e),sl("setPriority",e._path),tl("setPriority",t,!1);const n=new X;return wl(e._repo,Dr(e._path,".priority"),t,null,n.wrapCallback((()=>{}))),n.promise},setWithPriority:function(e,t,n){if(sl("setWithPriority",e._path),Jo("setWithPriority",t,e._path,!1),tl("setWithPriority",n,!1),".length"===e.key||".keys"===e.key)throw"setWithPriority failed: "+e.key+" is a read-only object.";const i=new X;return wl(e._repo,e._path,t,n,i.wrapCallback((()=>{}))),i.promise},startAfter:function(e,t){return nl("startAfter","key",t,!0),new dc(e,t)},startAt:function(e=null,t){return nl("startAt","key",t,!0),new uc(e,t)},update:function(e,t){el("update",t,e._path,!1);const n=new X;return function(e,t,n,i){kl(e,"update",{path:t.toString(),value:n});let r=!0;const s=_l(e),a={};if(Ki(n,((n,i)=>{r=!1,a[n]=Do(Dr(t,n),bs(i),e.serverSyncTree_,s)})),r)Ri("update() called with empty data.  Don't do anything."),Al(0,i,"ok",void 0);else{const r=El(e),s=co(e.serverSyncTree_,t,a,r);ll(e.eventQueue_,s),e.server_.merge(t.toString(),n,((n,s)=>{const a="ok"===n;a||Bi("update at "+t+" failed: "+n);const o=uo(e.serverSyncTree_,r,!a),l=o.length>0?Ll(e,t):t;ul(e.eventQueue_,l,o),Al(0,i,n,s)})),Ki(n,(n=>{const i=Fl(e,Dr(t,n));Ll(e,i)})),ul(e.eventQueue_,t,[])}}(e._repo,e._path,t,n.wrapCallback((()=>{}))),n.promise}},Symbol.toStringTag,{value:"Module"}));var Oc=function(e,t){return Oc=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},Oc(e,t)};function Pc(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}Oc(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var Lc=function(){return Lc=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},Lc.apply(this,arguments)};function Nc(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]])}return n}function Dc(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],i=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&i>=e.length&&(e=void 0),{value:e&&e[i++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function Rc(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var i,r,s=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(i=s.next()).done;)a.push(i.value)}catch(error){r={error:error}}finally{try{i&&!i.done&&(n=s.return)&&n.call(s)}finally{if(r)throw r.error}}return a}function Mc(e,t,n){if(n||2===arguments.length)for(var i,r=0,s=t.length;r<s;r++)!i&&r in t||(i||(i=Array.prototype.slice.call(t,0,r)),i[r]=t[r]);return e.concat(i||Array.prototype.slice.call(t))}function Fc(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const Uc=function(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend."}},Bc=Fc,jc=new re("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),qc=new Ue("@firebase/auth");function Hc(e,...t){qc.logLevel<=Ne.ERROR&&qc.error(`Auth (${mt}): ${e}`,...t)}function Vc(e,...t){throw Gc(e,...t)}function $c(e,...t){return Gc(e,...t)}function Wc(e,t,n){const i=Object.assign(Object.assign({},Bc()),{[t]:n});return new re("auth","Firebase",i).create(t,{appName:e.name})}function zc(e,t,n){if(!(t instanceof n))throw n.name!==t.constructor.name&&Vc(e,"argument-error"),Wc(e,"argument-error",`Type of ${t.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Gc(e,...t){if("string"!=typeof e){const n=t[0],i=[...t.slice(1)];return i[0]&&(i[0].appName=e.name),e._errorFactory.create(n,...i)}return jc.create(e,...t)}function Kc(e,t,...n){if(!e)throw Gc(t,...n)}function Xc(e){const t="INTERNAL ASSERTION FAILED: "+e;throw Hc(t),new Error(t)}function Yc(e,t){e||Xc(t)}function Qc(){var e;return"undefined"!=typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function Jc(){return"http:"===Zc()||"https:"===Zc()}function Zc(){var e;return"undefined"!=typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}class eu{constructor(e,t){this.shortDelay=e,this.longDelay=t,Yc(t>e,"Short delay should be less than long delay!"),this.isMobile=Q()||Z()}get(){return"undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(Jc()||J()||"connection"in navigator)&&!navigator.onLine?Math.min(5e3,this.shortDelay):this.isMobile?this.longDelay:this.shortDelay}}function tu(e,t){Yc(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?`${n}${t.startsWith("/")?t.slice(1):t}`:n}class nu{static initialize(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:void Xc("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:void Xc("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:void Xc("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const iu={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},ru=new eu(3e4,6e4);function su(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}async function au(e,t,n,i,r={}){return ou(e,r,(async()=>{let r={},s={};i&&("GET"===t?s=i:r={body:JSON.stringify(i)});const a=me(Object.assign({key:e.config.apiKey},s)).slice(1),o=await e._getAdditionalHeaders();return o["Content-Type"]="application/json",e.languageCode&&(o["X-Firebase-Locale"]=e.languageCode),nu.fetch()(cu(e,e.config.apiHost,n,a),Object.assign({method:t,headers:o,referrerPolicy:"no-referrer"},r))}))}async function ou(e,t,n){e._canInitEmulator=!1;const i=Object.assign(Object.assign({},iu),t);try{const t=new uu(e),r=await Promise.race([n(),t.promise]);t.clearNetworkTimeout();const s=await r.json();if("needConfirmation"in s)throw du(e,"account-exists-with-different-credential",s);if(r.ok&&!("errorMessage"in s))return s;{const t=r.ok?s.errorMessage:s.error.message,[n,a]=t.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===n)throw du(e,"credential-already-in-use",s);if("EMAIL_EXISTS"===n)throw du(e,"email-already-in-use",s);if("USER_DISABLED"===n)throw du(e,"user-disabled",s);const o=i[n]||n.toLowerCase().replace(/[_\s]+/g,"-");if(a)throw Wc(e,o,a);Vc(e,o)}}catch(r){if(r instanceof ie)throw r;Vc(e,"network-request-failed",{message:String(r)})}}async function lu(e,t,n,i,r={}){const s=await au(e,t,n,i,r);return"mfaPendingCredential"in s&&Vc(e,"multi-factor-auth-required",{_serverResponse:s}),s}function cu(e,t,n,i){const r=`${t}${n}?${i}`;return e.config.emulator?tu(e.config,r):`${e.config.apiScheme}://${r}`}class uu{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise(((e,t)=>{this.timer=setTimeout((()=>t($c(this.auth,"network-request-failed"))),ru.get())}))}clearNetworkTimeout(){clearTimeout(this.timer)}}function du(e,t,n){const i={appName:e.name};n.email&&(i.email=n.email),n.phoneNumber&&(i.phoneNumber=n.phoneNumber);const r=$c(e,t,i);return r.customData._tokenResponse=n,r}function hu(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(t){}}async function pu(e,t=!1){const n=ke(e),i=await n.getIdToken(t),r=mu(i);Kc(r&&r.exp&&r.auth_time&&r.iat,n.auth,"internal-error");const s="object"==typeof r.firebase?r.firebase:void 0,a=null==s?void 0:s.sign_in_provider;return{claims:r,token:i,authTime:hu(fu(r.auth_time)),issuedAtTime:hu(fu(r.iat)),expirationTime:hu(fu(r.exp)),signInProvider:a||null,signInSecondFactor:(null==s?void 0:s.sign_in_second_factor)||null}}function fu(e){return 1e3*Number(e)}function mu(e){const[t,n,i]=e.split(".");if(void 0===t||void 0===n||void 0===i)return Hc("JWT malformed, contained fewer than 3 sections"),null;try{const e=B(n);return e?JSON.parse(e):(Hc("Failed to decode base64 JWT payload"),null)}catch(r){return Hc("Caught error parsing JWT payload as JSON",null==r?void 0:r.toString()),null}}async function gu(e,t,n=!1){if(n)return t;try{return await t}catch(i){throw i instanceof ie&&function({code:e}){return"auth/user-disabled"===e||"auth/user-token-expired"===e}(i)&&e.auth.currentUser===e&&await e.auth.signOut(),i}}class yu{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const e=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),e}{this.errorBackoff=3e4;const e=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,e)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout((async()=>{await this.iteration()}),t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){return void("auth/network-request-failed"===(null==e?void 0:e.code)&&this.schedule(!0))}this.schedule()}}class _u{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=hu(this.lastLoginAt),this.creationTime=hu(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function vu(e){var t;const n=e.auth,i=await e.getIdToken(),r=await gu(e,async function(e,t){return au(e,"POST","/v1/accounts:lookup",t)}(n,{idToken:i}));Kc(null==r?void 0:r.users.length,n,"internal-error");const s=r.users[0];e._notifyReloadListener(s);const a=(null===(t=s.providerUserInfo)||void 0===t?void 0:t.length)?s.providerUserInfo.map((e=>{var{providerId:t}=e,n=Nc(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})):[];const o=(l=e.providerData,c=a,[...l.filter((e=>!c.some((t=>t.providerId===e.providerId)))),...c]);var l,c;const u=e.isAnonymous,d=!(e.email&&s.passwordHash||(null==o?void 0:o.length)),h=!!u&&d,p={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:o,metadata:new _u(s.createdAt,s.lastLoginAt),isAnonymous:h};Object.assign(e,p)}async function bu(e){const t=ke(e);await vu(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}class Tu{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Kc(e.idToken,"internal-error"),Kc(void 0!==e.idToken,"internal-error"),Kc(void 0!==e.refreshToken,"internal-error");const t="expiresIn"in e&&void 0!==e.expiresIn?Number(e.expiresIn):function(e){const t=mu(e);return Kc(t,"internal-error"),Kc(void 0!==t.exp,"internal-error"),Kc(void 0!==t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}async getToken(e,t=!1){return Kc(!this.accessToken||this.refreshToken,e,"user-token-expired"),t||!this.accessToken||this.isExpired?this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null:this.accessToken}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:n,refreshToken:i,expiresIn:r}=await async function(e,t){const n=await ou(e,{},(async()=>{const n=me({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:i,apiKey:r}=e.config,s=cu(e,i,"/v1/token",`key=${r}`),a=await e._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",nu.fetch()(s,{method:"POST",headers:a,body:n})}));return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}(e,t);this.updateTokensAndExpiration(n,i,Number(r))}updateTokensAndExpiration(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}static fromJSON(e,t){const{refreshToken:n,accessToken:i,expirationTime:r}=t,s=new Tu;return n&&(Kc("string"==typeof n,"internal-error",{appName:e}),s.refreshToken=n),i&&(Kc("string"==typeof i,"internal-error",{appName:e}),s.accessToken=i),r&&(Kc("number"==typeof r,"internal-error",{appName:e}),s.expirationTime=r),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Tu,this.toJSON())}_performRefresh(){return Xc("not implemented")}}function Eu(e,t){Kc("string"==typeof e||void 0===e,"internal-error",{appName:t})}class wu{constructor(e){var{uid:t,auth:n,stsTokenManager:i}=e,r=Nc(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new yu(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=n,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=r.displayName||null,this.email=r.email||null,this.emailVerified=r.emailVerified||!1,this.phoneNumber=r.phoneNumber||null,this.photoURL=r.photoURL||null,this.isAnonymous=r.isAnonymous||!1,this.tenantId=r.tenantId||null,this.providerData=r.providerData?[...r.providerData]:[],this.metadata=new _u(r.createdAt||void 0,r.lastLoginAt||void 0)}async getIdToken(e){const t=await gu(this,this.stsTokenManager.getToken(this.auth,e));return Kc(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return pu(this,e)}reload(){return bu(this)}_assign(e){this!==e&&(Kc(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map((e=>Object.assign({},e))),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new wu(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){Kc(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),t&&await vu(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){const e=await this.getIdToken();return await gu(this,async function(e,t){return au(e,"POST","/v1/accounts:delete",t)}(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map((e=>Object.assign({},e))),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var n,i,r,s,a,o,l,c;const u=null!==(n=t.displayName)&&void 0!==n?n:void 0,d=null!==(i=t.email)&&void 0!==i?i:void 0,h=null!==(r=t.phoneNumber)&&void 0!==r?r:void 0,p=null!==(s=t.photoURL)&&void 0!==s?s:void 0,f=null!==(a=t.tenantId)&&void 0!==a?a:void 0,m=null!==(o=t._redirectEventId)&&void 0!==o?o:void 0,g=null!==(l=t.createdAt)&&void 0!==l?l:void 0,y=null!==(c=t.lastLoginAt)&&void 0!==c?c:void 0,{uid:_,emailVerified:v,isAnonymous:b,providerData:T,stsTokenManager:E}=t;Kc(_&&E,e,"internal-error");const w=Tu.fromJSON(this.name,E);Kc("string"==typeof _,e,"internal-error"),Eu(u,e.name),Eu(d,e.name),Kc("boolean"==typeof v,e,"internal-error"),Kc("boolean"==typeof b,e,"internal-error"),Eu(h,e.name),Eu(p,e.name),Eu(f,e.name),Eu(m,e.name),Eu(g,e.name),Eu(y,e.name);const S=new wu({uid:_,auth:e,email:d,emailVerified:v,displayName:u,isAnonymous:b,photoURL:p,phoneNumber:h,tenantId:f,stsTokenManager:w,createdAt:g,lastLoginAt:y});return T&&Array.isArray(T)&&(S.providerData=T.map((e=>Object.assign({},e)))),m&&(S._redirectEventId=m),S}static async _fromIdTokenResponse(e,t,n=!1){const i=new Tu;i.updateFromServerResponse(t);const r=new wu({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:n});return await vu(r),r}}const Su=new Map;function Cu(e){Yc(e instanceof Function,"Expected a class definition");let t=Su.get(e);return t?(Yc(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,Su.set(e,t),t)}class Iu{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return void 0===t?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}Iu.type="NONE";const xu=Iu;function ku(e,t,n){return`firebase:${e}:${t}:${n}`}class Au{constructor(e,t,n){this.persistence=e,this.auth=t,this.userKey=n;const{config:i,name:r}=this.auth;this.fullUserKey=ku(this.userKey,i.apiKey,r),this.fullPersistenceKey=ku("persistence",i.apiKey,r),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?wu._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();return await this.removeCurrentUser(),this.persistence=e,t?this.setCurrentUser(t):void 0}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,n="authUser"){if(!t.length)return new Au(Cu(xu),e,n);const i=(await Promise.all(t.map((async e=>{if(await e._isAvailable())return e})))).filter((e=>e));let r=i[0]||Cu(xu);const s=ku(n,e.config.apiKey,e.name);let a=null;for(const l of t)try{const t=await l._get(s);if(t){const n=wu._fromJSON(e,t);l!==r&&(a=n),r=l;break}}catch(V_){}const o=i.filter((e=>e._shouldAllowMigration));return r._shouldAllowMigration&&o.length?(r=o[0],a&&await r._set(s,a.toJSON()),await Promise.all(t.map((async e=>{if(e!==r)try{await e._remove(s)}catch(V_){}}))),new Au(r,e,n)):new Au(r,e,n)}}function Ou(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(Du(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(Pu(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(Mu(t))return"Blackberry";if(Fu(t))return"Webos";if(Lu(t))return"Safari";if((t.includes("chrome/")||Nu(t))&&!t.includes("edge/"))return"Chrome";if(Ru(t))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=e.match(t);if(2===(null==n?void 0:n.length))return n[1]}return"Other"}function Pu(e=Y()){return/firefox\//i.test(e)}function Lu(e=Y()){const t=e.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function Nu(e=Y()){return/crios\//i.test(e)}function Du(e=Y()){return/iemobile/i.test(e)}function Ru(e=Y()){return/android/i.test(e)}function Mu(e=Y()){return/blackberry/i.test(e)}function Fu(e=Y()){return/webos/i.test(e)}function Uu(e=Y()){return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function Bu(){return function(){const e=Y();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}()&&10===document.documentMode}function ju(e=Y()){return Uu(e)||Ru(e)||Fu(e)||Mu(e)||/windows phone/i.test(e)||Du(e)}function qu(e,t=[]){let n;switch(e){case"Browser":n=Ou(Y());break;case"Worker":n=`${Ou(Y())}-${e}`;break;default:n=e}const i=t.length?t.join(","):"FirebaseCore-web";return`${n}/JsCore/${mt}/${i}`}async function Hu(e,t){return au(e,"GET","/v2/recaptchaConfig",su(e,t))}function Vu(e){return void 0!==e&&void 0!==e.getResponse}function $u(e){return void 0!==e&&void 0!==e.enterprise}class Wu{constructor(e){if(this.siteKey="",this.emailPasswordEnabled=!1,void 0===e.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.emailPasswordEnabled=e.recaptchaEnforcementState.some((e=>"EMAIL_PASSWORD_PROVIDER"===e.provider&&"OFF"!==e.enforcementState))}}function zu(e){return new Promise(((t,n)=>{const i=document.createElement("script");i.setAttribute("src",e),i.onload=t,i.onerror=e=>{const t=$c("internal-error");t.customData=e,n(t)},i.type="text/javascript",i.charset="UTF-8",function(){var e,t;return null!==(t=null===(e=document.getElementsByTagName("head"))||void 0===e?void 0:e[0])&&void 0!==t?t:document}().appendChild(i)}))}function Gu(e){return`__${e}${Math.floor(1e6*Math.random())}`}class Ku{constructor(e){this.type="recaptcha-enterprise",this.auth=Ju(e)}async verify(e="verify",t=!1){function n(t,n,i){const r=window.grecaptcha;$u(r)?r.enterprise.ready((()=>{r.enterprise.execute(t,{action:e}).then((e=>{n(e)})).catch((()=>{n("NO_RECAPTCHA")}))})):i(Error("No reCAPTCHA enterprise script loaded."))}return new Promise(((e,i)=>{(async function(e){if(!t){if(null==e.tenantId&&null!=e._agentRecaptchaConfig)return e._agentRecaptchaConfig.siteKey;if(null!=e.tenantId&&void 0!==e._tenantRecaptchaConfigs[e.tenantId])return e._tenantRecaptchaConfigs[e.tenantId].siteKey}return new Promise((async(t,n)=>{Hu(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then((i=>{if(void 0!==i.recaptchaKey){const n=new Wu(i);return null==e.tenantId?e._agentRecaptchaConfig=n:e._tenantRecaptchaConfigs[e.tenantId]=n,t(n.siteKey)}n(new Error("recaptcha Enterprise site key undefined"))})).catch((e=>{n(e)}))}))})(this.auth).then((r=>{if(!t&&$u(window.grecaptcha))n(r,e,i);else{if("undefined"==typeof window)return void i(new Error("RecaptchaVerifier is only supported in browser"));zu("https://www.google.com/recaptcha/enterprise.js?render="+r).then((()=>{n(r,e,i)})).catch((e=>{i(e)}))}})).catch((e=>{i(e)}))}))}}async function Xu(e,t,n,i=!1){const r=new Ku(e);let s;try{s=await r.verify(n)}catch(error){s=await r.verify(n,!0)}const a=Object.assign({},t);return i?Object.assign(a,{captchaResp:s}):Object.assign(a,{captchaResponse:s}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a}class Yu{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const n=t=>new Promise(((n,i)=>{try{n(e(t))}catch(r){i(r)}}));n.onAbort=t,this.queue.push(n);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const n of this.queue)await n(e),n.onAbort&&t.push(n.onAbort)}catch(n){t.reverse();for(const e of t)try{e()}catch(i){}throw this.auth._errorFactory.create("login-blocked",{originalMessage:null==n?void 0:n.message})}}}class Qu{constructor(e,t,n,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=n,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Zu(this),this.idTokenSubscription=new Zu(this),this.beforeStateQueue=new Yu(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=jc,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Cu(t)),this._initializationPromise=this.queue((async()=>{var n,i;if(!this._deleted&&(this.persistenceManager=await Au.create(this,e),!this._deleted)){if(null===(n=this._popupRedirectResolver)||void 0===n?void 0:n._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch(r){}await this.initializeCurrentUser(t),this.lastNotifiedUid=(null===(i=this.currentUser)||void 0===i?void 0:i.uid)||null,this._deleted||(this._isInitialized=!0)}})),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();return this.currentUser||e?this.currentUser&&e&&this.currentUser.uid===e.uid?(this._currentUser._assign(e),void(await this.currentUser.getIdToken())):void(await this._updateCurrentUser(e,!0)):void 0}async initializeCurrentUser(e){var t;const n=await this.assertedPersistence.getCurrentUser();let i=n,r=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const n=null===(t=this.redirectUser)||void 0===t?void 0:t._redirectEventId,s=null==i?void 0:i._redirectEventId,a=await this.tryRedirectSignIn(e);n&&n!==s||!(null==a?void 0:a.user)||(i=a.user,r=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(r)try{await this.beforeStateQueue.runMiddleware(i)}catch(s){i=n,this._popupRedirectResolver._overrideRedirectResult(this,(()=>Promise.reject(s)))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return Kc(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch(n){await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await vu(e)}catch(t){if("auth/network-request-failed"!==(null==t?void 0:t.code))return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=function(){if("undefined"==typeof navigator)return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}()}async _delete(){this._deleted=!0}async updateCurrentUser(e){const t=e?ke(e):null;return t&&Kc(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Kc(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue((async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()}))}async signOut(){return await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0)}setPersistence(e){return this.queue((async()=>{await this.assertedPersistence.setPersistence(Cu(e))}))}async initializeRecaptchaConfig(){const e=await Hu(this,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),t=new Wu(e);if(null==this.tenantId?this._agentRecaptchaConfig=t:this._tenantRecaptchaConfigs[this.tenantId]=t,t.emailPasswordEnabled){new Ku(this).verify()}}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new re("auth","Firebase",e())}onAuthStateChanged(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}async _setRedirectUser(e,t){const n=await this.getOrInitRedirectPersistenceManager(t);return null===e?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Cu(e)||this._popupRedirectResolver;Kc(t,this,"argument-error"),this.redirectPersistenceManager=await Au.create(this,[Cu(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,n;return this._isInitialized&&await this.queue((async()=>{})),(null===(t=this._currentUser)||void 0===t?void 0:t._redirectEventId)===e?this._currentUser:(null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue((async()=>this.directlySetCurrentUser(e)))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,n,i){if(this._deleted)return()=>{};const r="function"==typeof t?t:t.next.bind(t),s=this._isInitialized?Promise.resolve():this._initializationPromise;return Kc(s,this,"internal-error"),s.then((()=>r(this.currentUser))),"function"==typeof t?e.addObserver(t,n,i):e.addObserver(t)}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Kc(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=qu(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const n=await(null===(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getHeartbeatsHeader());n&&(t["X-Firebase-Client"]=n);const i=await this._getAppCheckToken();return i&&(t["X-Firebase-AppCheck"]=i),t}async _getAppCheckToken(){var e;const t=await(null===(e=this.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getToken());return(null==t?void 0:t.error)&&function(e,...t){qc.logLevel<=Ne.WARN&&qc.warn(`Auth (${mt}): ${e}`,...t)}(`Error while retrieving App Check token: ${t.error}`),null==t?void 0:t.token}}function Ju(e){return ke(e)}class Zu{constructor(e){this.auth=e,this.observer=null,this.addObserver=function(e,t){const n=new ve(e,t);return n.subscribe.bind(n)}((e=>this.observer=e))}get next(){return Kc(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function ed(e,t){const n=ht(e,"auth");if(n.isInitialized()){const e=n.getImmediate();if(pe(n.getOptions(),null!=t?t:{}))return e;Vc(e,"already-initialized")}return n.initialize({options:t})}function td(e,t,n){const i=Ju(e);Kc(i._canInitEmulator,i,"emulator-config-failed"),Kc(/^https?:\/\//.test(t),i,"invalid-emulator-scheme");const r=!!(null==n?void 0:n.disableWarnings),s=nd(t),{host:a,port:o}=function(e){const t=nd(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};const i=n[2].split("@").pop()||"",r=/^(\[[^\]]+\])(:|$)/.exec(i);if(r){const e=r[1];return{host:e,port:id(i.substr(e.length+1))}}{const[e,t]=i.split(":");return{host:e,port:id(t)}}}(t),l=null===o?"":`:${o}`;i.config.emulator={url:`${s}//${a}${l}/`},i.settings.appVerificationDisabledForTesting=!0,i.emulatorConfig=Object.freeze({host:a,port:o,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:r})}),r||function(){function e(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials.");"undefined"!=typeof window&&"undefined"!=typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}function nd(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function id(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}class rd{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Xc("not implemented")}_getIdTokenResponse(e){return Xc("not implemented")}_linkToIdToken(e,t){return Xc("not implemented")}_getReauthenticationResolver(e){return Xc("not implemented")}}async function sd(e,t){return au(e,"POST","/v1/accounts:resetPassword",su(e,t))}async function ad(e,t){return au(e,"POST","/v1/accounts:update",t)}async function od(e,t){return lu(e,"POST","/v1/accounts:signInWithPassword",su(e,t))}async function ld(e,t){return au(e,"POST","/v1/accounts:sendOobCode",su(e,t))}async function cd(e,t){return ld(e,t)}async function ud(e,t){return ld(e,t)}class dd extends rd{constructor(e,t,n,i=null){super("password",n),this._email=e,this._password=t,this._tenantId=i}static _fromEmailAndPassword(e,t){return new dd(e,t,"password")}static _fromEmailAndCode(e,t,n=null){return new dd(e,t,"emailLink",n)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t="string"==typeof e?JSON.parse(e):e;if((null==t?void 0:t.email)&&(null==t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){var t;switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};if(null===(t=e._getRecaptchaConfig())||void 0===t?void 0:t.emailPasswordEnabled){const t=await Xu(e,n,"signInWithPassword");return od(e,t)}return od(e,n).catch((async t=>{if("auth/missing-recaptcha-token"===t.code){console.log("Sign-in with email address and password is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow.");const t=await Xu(e,n,"signInWithPassword");return od(e,t)}return Promise.reject(t)}));case"emailLink":return async function(e,t){return lu(e,"POST","/v1/accounts:signInWithEmailLink",su(e,t))}(e,{email:this._email,oobCode:this._password});default:Vc(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":return ad(e,{idToken:t,returnSecureToken:!0,email:this._email,password:this._password});case"emailLink":return async function(e,t){return lu(e,"POST","/v1/accounts:signInWithEmailLink",su(e,t))}(e,{idToken:t,email:this._email,oobCode:this._password});default:Vc(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function hd(e,t){return lu(e,"POST","/v1/accounts:signInWithIdp",su(e,t))}class pd extends rd{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new pd(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Vc("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t="string"==typeof e?JSON.parse(e):e,{providerId:n,signInMethod:i}=t,r=Nc(t,["providerId","signInMethod"]);if(!n||!i)return null;const s=new pd(n,i);return s.idToken=r.idToken||void 0,s.accessToken=r.accessToken||void 0,s.secret=r.secret,s.nonce=r.nonce,s.pendingToken=r.pendingToken||null,s}_getIdTokenResponse(e){return hd(e,this.buildRequest())}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,hd(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,hd(e,t)}buildRequest(){const e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=me(t)}return e}}const fd={USER_NOT_FOUND:"user-not-found"};class md extends rd{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,t){return new md({verificationId:e,verificationCode:t})}static _fromTokenResponse(e,t){return new md({phoneNumber:e,temporaryProof:t})}_getIdTokenResponse(e){return async function(e,t){return lu(e,"POST","/v1/accounts:signInWithPhoneNumber",su(e,t))}(e,this._makeVerificationRequest())}_linkToIdToken(e,t){return async function(e,t){const n=await lu(e,"POST","/v1/accounts:signInWithPhoneNumber",su(e,t));if(n.temporaryProof)throw du(e,"account-exists-with-different-credential",n);return n}(e,Object.assign({idToken:t},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return async function(e,t){return lu(e,"POST","/v1/accounts:signInWithPhoneNumber",su(e,Object.assign(Object.assign({},t),{operation:"REAUTH"})),fd)}(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:t,verificationId:n,verificationCode:i}=this.params;return e&&t?{temporaryProof:e,phoneNumber:t}:{sessionInfo:n,code:i}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){"string"==typeof e&&(e=JSON.parse(e));const{verificationId:t,verificationCode:n,phoneNumber:i,temporaryProof:r}=e;return n||t||i||r?new md({verificationId:t,verificationCode:n,phoneNumber:i,temporaryProof:r}):null}}class gd{constructor(e){var t,n,i,r,s,a;const o=ge(ye(e)),l=null!==(t=o.apiKey)&&void 0!==t?t:null,c=null!==(n=o.oobCode)&&void 0!==n?n:null,u=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(i=o.mode)&&void 0!==i?i:null);Kc(l&&c&&u,"argument-error"),this.apiKey=l,this.operation=u,this.code=c,this.continueUrl=null!==(r=o.continueUrl)&&void 0!==r?r:null,this.languageCode=null!==(s=o.languageCode)&&void 0!==s?s:null,this.tenantId=null!==(a=o.tenantId)&&void 0!==a?a:null}static parseLink(e){const t=function(e){const t=ge(ye(e)).link,n=t?ge(ye(t)).deep_link_id:null,i=ge(ye(e)).deep_link_id;return(i?ge(ye(i)).link:null)||i||n||t||e}(e);try{return new gd(t)}catch(V_){return null}}}class yd{constructor(){this.providerId=yd.PROVIDER_ID}static credential(e,t){return dd._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const n=gd.parseLink(t);return Kc(n,"argument-error"),dd._fromEmailAndCode(e,n.code,n.tenantId)}}yd.PROVIDER_ID="password",yd.EMAIL_PASSWORD_SIGN_IN_METHOD="password",yd.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class _d{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class vd extends _d{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class bd extends vd{static credentialFromJSON(e){const t="string"==typeof e?JSON.parse(e):e;return Kc("providerId"in t&&"signInMethod"in t,"argument-error"),pd._fromParams(t)}credential(e){return this._credential(Object.assign(Object.assign({},e),{nonce:e.rawNonce}))}_credential(e){return Kc(e.idToken||e.accessToken,"argument-error"),pd._fromParams(Object.assign(Object.assign({},e),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(e){return bd.oauthCredentialFromTaggedObject(e)}static credentialFromError(e){return bd.oauthCredentialFromTaggedObject(e.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:n,oauthTokenSecret:i,pendingToken:r,nonce:s,providerId:a}=e;if(!(n||i||t||r))return null;if(!a)return null;try{return new bd(a)._credential({idToken:t,accessToken:n,nonce:s,pendingToken:r})}catch(o){return null}}}class Td extends vd{constructor(){super("facebook.com")}static credential(e){return pd._fromParams({providerId:Td.PROVIDER_ID,signInMethod:Td.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Td.credentialFromTaggedObject(e)}static credentialFromError(e){return Td.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e))return null;if(!e.oauthAccessToken)return null;try{return Td.credential(e.oauthAccessToken)}catch(V_){return null}}}Td.FACEBOOK_SIGN_IN_METHOD="facebook.com",Td.PROVIDER_ID="facebook.com";class Ed extends vd{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return pd._fromParams({providerId:Ed.PROVIDER_ID,signInMethod:Ed.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Ed.credentialFromTaggedObject(e)}static credentialFromError(e){return Ed.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:n}=e;if(!t&&!n)return null;try{return Ed.credential(t,n)}catch(V_){return null}}}Ed.GOOGLE_SIGN_IN_METHOD="google.com",Ed.PROVIDER_ID="google.com";class wd extends vd{constructor(){super("github.com")}static credential(e){return pd._fromParams({providerId:wd.PROVIDER_ID,signInMethod:wd.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return wd.credentialFromTaggedObject(e)}static credentialFromError(e){return wd.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e))return null;if(!e.oauthAccessToken)return null;try{return wd.credential(e.oauthAccessToken)}catch(V_){return null}}}wd.GITHUB_SIGN_IN_METHOD="github.com",wd.PROVIDER_ID="github.com";class Sd extends rd{constructor(e,t){super(e,e),this.pendingToken=t}_getIdTokenResponse(e){return hd(e,this.buildRequest())}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,hd(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,hd(e,t)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(e){const t="string"==typeof e?JSON.parse(e):e,{providerId:n,signInMethod:i,pendingToken:r}=t;return n&&i&&r&&n===i?new Sd(n,r):null}static _create(e,t){return new Sd(e,t)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class Cd extends _d{constructor(e){Kc(e.startsWith("saml."),"argument-error"),super(e)}static credentialFromResult(e){return Cd.samlCredentialFromTaggedObject(e)}static credentialFromError(e){return Cd.samlCredentialFromTaggedObject(e.customData||{})}static credentialFromJSON(e){const t=Sd.fromJSON(e);return Kc(t,"argument-error"),t}static samlCredentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{pendingToken:t,providerId:n}=e;if(!t||!n)return null;try{return Sd._create(n,t)}catch(i){return null}}}class Id extends vd{constructor(){super("twitter.com")}static credential(e,t){return pd._fromParams({providerId:Id.PROVIDER_ID,signInMethod:Id.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Id.credentialFromTaggedObject(e)}static credentialFromError(e){return Id.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:n}=e;if(!t||!n)return null;try{return Id.credential(t,n)}catch(V_){return null}}}async function xd(e,t){return lu(e,"POST","/v1/accounts:signUp",su(e,t))}Id.TWITTER_SIGN_IN_METHOD="twitter.com",Id.PROVIDER_ID="twitter.com";class kd{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,n,i=!1){const r=await wu._fromIdTokenResponse(e,n,i),s=Ad(n);return new kd({user:r,providerId:s,_tokenResponse:n,operationType:t})}static async _forOperation(e,t,n){await e._updateTokensIfNecessary(n,!0);const i=Ad(n);return new kd({user:e,providerId:i,_tokenResponse:n,operationType:t})}}function Ad(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}class Od extends ie{constructor(e,t,n,i){var r;super(t.code,t.message),this.operationType=n,this.user=i,Object.setPrototypeOf(this,Od.prototype),this.customData={appName:e.name,tenantId:null!==(r=e.tenantId)&&void 0!==r?r:void 0,_serverResponse:t.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,t,n,i){return new Od(e,t,n,i)}}function Pd(e,t,n,i){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch((n=>{if("auth/multi-factor-auth-required"===n.code)throw Od._fromErrorAndOperation(e,n,t,i);throw n}))}function Ld(e){return new Set(e.map((({providerId:e})=>e)).filter((e=>!!e)))}async function Nd(e,t,n=!1){const i=await gu(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return kd._forOperation(e,"link",i)}async function Dd(e,t,n){await vu(t);const i=!1===e?"provider-already-linked":"no-such-provider";Kc(Ld(t.providerData).has(n)===e,t.auth,i)}async function Rd(e,t,n=!1){const{auth:i}=e,r="reauthenticate";try{const s=await gu(e,Pd(i,r,t,e),n);Kc(s.idToken,i,"internal-error");const a=mu(s.idToken);Kc(a,i,"internal-error");const{sub:o}=a;return Kc(e.uid===o,i,"user-mismatch"),kd._forOperation(e,r,s)}catch(s){throw"auth/user-not-found"===(null==s?void 0:s.code)&&Vc(i,"user-mismatch"),s}}async function Md(e,t,n=!1){const i="signIn",r=await Pd(e,i,t),s=await kd._fromIdTokenResponse(e,i,r);return n||await e._updateCurrentUser(s.user),s}async function Fd(e,t){return Md(Ju(e),t)}async function Ud(e,t){const n=ke(e);return await Dd(!1,n,t.providerId),Nd(n,t)}async function Bd(e,t){return Rd(ke(e),t)}class jd{constructor(e,t){this.factorId=e,this.uid=t.mfaEnrollmentId,this.enrollmentTime=new Date(t.enrolledAt).toUTCString(),this.displayName=t.displayName}static _fromServerResponse(e,t){return"phoneInfo"in t?qd._fromServerResponse(e,t):"totpInfo"in t?Hd._fromServerResponse(e,t):Vc(e,"internal-error")}}class qd extends jd{constructor(e){super("phone",e),this.phoneNumber=e.phoneInfo}static _fromServerResponse(e,t){return new qd(t)}}class Hd extends jd{constructor(e){super("totp",e)}static _fromServerResponse(e,t){return new Hd(t)}}function Vd(e,t,n){var i;Kc((null===(i=n.url)||void 0===i?void 0:i.length)>0,e,"invalid-continue-uri"),Kc(void 0===n.dynamicLinkDomain||n.dynamicLinkDomain.length>0,e,"invalid-dynamic-link-domain"),t.continueUrl=n.url,t.dynamicLinkDomain=n.dynamicLinkDomain,t.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(Kc(n.iOS.bundleId.length>0,e,"missing-ios-bundle-id"),t.iOSBundleId=n.iOS.bundleId),n.android&&(Kc(n.android.packageName.length>0,e,"missing-android-pkg-name"),t.androidInstallApp=n.android.installApp,t.androidMinimumVersionCode=n.android.minimumVersion,t.androidPackageName=n.android.packageName)}async function $d(e,t,n){var i;const r=Ju(e),s={requestType:"PASSWORD_RESET",email:t,clientType:"CLIENT_TYPE_WEB"};if(null===(i=r._getRecaptchaConfig())||void 0===i?void 0:i.emailPasswordEnabled){const e=await Xu(r,s,"getOobCode",!0);n&&Vd(r,e,n),await cd(r,e)}else n&&Vd(r,s,n),await cd(r,s).catch((async e=>{if("auth/missing-recaptcha-token"!==e.code)return Promise.reject(e);{console.log("Password resets are protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the password reset flow.");const e=await Xu(r,s,"getOobCode",!0);n&&Vd(r,e,n),await cd(r,e)}}))}async function Wd(e,t){const n=ke(e),i=await sd(n,{oobCode:t}),r=i.requestType;switch(Kc(r,n,"internal-error"),r){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":Kc(i.newEmail,n,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":Kc(i.mfaInfo,n,"internal-error");default:Kc(i.email,n,"internal-error")}let s=null;return i.mfaInfo&&(s=jd._fromServerResponse(Ju(n),i.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===i.requestType?i.newEmail:i.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===i.requestType?i.email:i.newEmail)||null,multiFactorInfo:s},operation:r}}async function zd(e,t,n){var i;const r=Ju(e),s={returnSecureToken:!0,email:t,password:n,clientType:"CLIENT_TYPE_WEB"};let a;if(null===(i=r._getRecaptchaConfig())||void 0===i?void 0:i.emailPasswordEnabled){const e=await Xu(r,s,"signUpPassword");a=xd(r,e)}else a=xd(r,s).catch((async e=>{if("auth/missing-recaptcha-token"===e.code){console.log("Sign-up is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-up flow.");const e=await Xu(r,s,"signUpPassword");return xd(r,e)}return Promise.reject(e)}));const o=await a.catch((e=>Promise.reject(e))),l=await kd._fromIdTokenResponse(r,"signIn",o);return await r._updateCurrentUser(l.user),l}function Gd(e,t,n){return Fd(ke(e),yd.credential(t,n))}async function Kd(e,{displayName:t,photoURL:n}){if(void 0===t&&void 0===n)return;const i=ke(e),r={idToken:await i.getIdToken(),displayName:t,photoUrl:n,returnSecureToken:!0},s=await gu(i,async function(e,t){return au(e,"POST","/v1/accounts:update",t)}(i.auth,r));i.displayName=s.displayName||null,i.photoURL=s.photoUrl||null;const a=i.providerData.find((({providerId:e})=>"password"===e));a&&(a.displayName=i.displayName,a.photoURL=i.photoURL),await i._updateTokensIfNecessary(s)}async function Xd(e,t,n){const{auth:i}=e,r={idToken:await e.getIdToken(),returnSecureToken:!0};t&&(r.email=t),n&&(r.password=n);const s=await gu(e,ad(i,r));await e._updateTokensIfNecessary(s,!0)}class Yd{constructor(e,t,n={}){this.isNewUser=e,this.providerId=t,this.profile=n}}class Qd extends Yd{constructor(e,t,n,i){super(e,t,n),this.username=i}}class Jd extends Yd{constructor(e,t){super(e,"facebook.com",t)}}class Zd extends Qd{constructor(e,t){super(e,"github.com",t,"string"==typeof(null==t?void 0:t.login)?null==t?void 0:t.login:null)}}class eh extends Yd{constructor(e,t){super(e,"google.com",t)}}class th extends Qd{constructor(e,t,n){super(e,"twitter.com",t,n)}}function nh(e,t,n,i){return ke(e).onIdTokenChanged(t,n,i)}function ih(e,t,n){return ke(e).beforeAuthStateChanged(t,n)}function rh(e){return ke(e).signOut()}class sh{constructor(e,t,n){this.type=e,this.credential=t,this.auth=n}static _fromIdtoken(e,t){return new sh("enroll",e,t)}static _fromMfaPendingCredential(e){return new sh("signin",e)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(e){var t,n;if(null==e?void 0:e.multiFactorSession){if(null===(t=e.multiFactorSession)||void 0===t?void 0:t.pendingCredential)return sh._fromMfaPendingCredential(e.multiFactorSession.pendingCredential);if(null===(n=e.multiFactorSession)||void 0===n?void 0:n.idToken)return sh._fromIdtoken(e.multiFactorSession.idToken)}return null}}class ah{constructor(e,t,n){this.session=e,this.hints=t,this.signInResolver=n}static _fromError(e,t){const n=Ju(e),i=t.customData._serverResponse,r=(i.mfaInfo||[]).map((e=>jd._fromServerResponse(n,e)));Kc(i.mfaPendingCredential,n,"internal-error");const s=sh._fromMfaPendingCredential(i.mfaPendingCredential);return new ah(s,r,(async e=>{const r=await e._process(n,s);delete i.mfaInfo,delete i.mfaPendingCredential;const a=Object.assign(Object.assign({},i),{idToken:r.idToken,refreshToken:r.refreshToken});switch(t.operationType){case"signIn":const e=await kd._fromIdTokenResponse(n,t.operationType,a);return await n._updateCurrentUser(e.user),e;case"reauthenticate":return Kc(t.user,n,"internal-error"),kd._forOperation(t.user,t.operationType,a);default:Vc(n,"internal-error")}}))}async resolveSignIn(e){const t=e;return this.signInResolver(t)}}class oh{constructor(e){this.user=e,this.enrolledFactors=[],e._onReload((t=>{t.mfaInfo&&(this.enrolledFactors=t.mfaInfo.map((t=>jd._fromServerResponse(e.auth,t))))}))}static _fromUser(e){return new oh(e)}async getSession(){return sh._fromIdtoken(await this.user.getIdToken(),this.user.auth)}async enroll(e,t){const n=e,i=await this.getSession(),r=await gu(this.user,n._process(this.user.auth,i,t));return await this.user._updateTokensIfNecessary(r),this.user.reload()}async unenroll(e){const t="string"==typeof e?e:e.uid,n=await this.user.getIdToken();try{const e=await gu(this.user,function(e,t){return au(e,"POST","/v2/accounts/mfaEnrollment:withdraw",su(e,t))}(this.user.auth,{idToken:n,mfaEnrollmentId:t}));this.enrolledFactors=this.enrolledFactors.filter((({uid:e})=>e!==t)),await this.user._updateTokensIfNecessary(e),await this.user.reload()}catch(i){throw i}}}const lh=new WeakMap;const ch="__sak";class uh{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(ch,"1"),this.storage.removeItem(ch),Promise.resolve(!0)):Promise.resolve(!1)}catch(V_){return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}class dh extends uh{constructor(){super((()=>window.localStorage),"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function(){const e=Y();return Lu(e)||Uu(e)}()&&function(){try{return!(!window||window===window.top)}catch(e){return!1}}(),this.fallbackToPolling=ju(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const n=this.storage.getItem(t),i=this.localCache[t];n!==i&&e(t,i,n)}}onStorageEvent(e,t=!1){if(!e.key)return void this.forAllChangedKeys(((e,t,n)=>{this.notifyListeners(e,n)}));const n=e.key;if(t?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const i=this.storage.getItem(n);if(e.newValue!==i)null!==e.newValue?this.storage.setItem(n,e.newValue):this.storage.removeItem(n);else if(this.localCache[n]===e.newValue&&!t)return}const i=()=>{const e=this.storage.getItem(n);(t||this.localCache[n]!==e)&&this.notifyListeners(n,e)},r=this.storage.getItem(n);Bu()&&r!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,10):i()}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const i of Array.from(n))i(t?JSON.parse(t):t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval((()=>{this.forAllChangedKeys(((e,t,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:n}),!0)}))}),1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}dh.type="LOCAL";const hh=dh;class ph extends uh{constructor(){super((()=>window.sessionStorage),"SESSION")}_addListener(e,t){}_removeListener(e,t){}}ph.type="SESSION";const fh=ph;class mh{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find((t=>t.isListeningto(e)));if(t)return t;const n=new mh(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:n,eventType:i,data:r}=t.data,s=this.handlersMap[i];if(!(null==s?void 0:s.size))return;t.ports[0].postMessage({status:"ack",eventId:n,eventType:i});const a=Array.from(s).map((async e=>e(t.origin,r))),o=await function(e){return Promise.all(e.map((async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}})))}(a);t.ports[0].postMessage({status:"done",eventId:n,eventType:i,response:o})}_subscribe(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}function gh(e="",t=10){let n="";for(let i=0;i<t;i++)n+=Math.floor(10*Math.random());return e+n}mh.receivers=[];class yh{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,n=50){const i="undefined"!=typeof MessageChannel?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let r,s;return new Promise(((a,o)=>{const l=gh("",20);i.port1.start();const c=setTimeout((()=>{o(new Error("unsupported_event"))}),n);s={messageChannel:i,onMessage(e){const t=e;if(t.data.eventId===l)switch(t.data.status){case"ack":clearTimeout(c),r=setTimeout((()=>{o(new Error("timeout"))}),3e3);break;case"done":clearTimeout(r),a(t.data.response);break;default:clearTimeout(c),clearTimeout(r),o(new Error("invalid_response"))}}},this.handlers.add(s),i.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:e,eventId:l,data:t},[i.port2])})).finally((()=>{s&&this.removeMessageHandler(s)}))}}function _h(){return window}function vh(){return void 0!==_h().WorkerGlobalScope&&"function"==typeof _h().importScripts}const bh="firebaseLocalStorageDb",Th="firebaseLocalStorage",Eh="fbase_key";class wh{constructor(e){this.request=e}toPromise(){return new Promise(((e,t)=>{this.request.addEventListener("success",(()=>{e(this.request.result)})),this.request.addEventListener("error",(()=>{t(this.request.error)}))}))}}function Sh(e,t){return e.transaction([Th],t?"readwrite":"readonly").objectStore(Th)}function Ch(){const e=indexedDB.open(bh,1);return new Promise(((t,n)=>{e.addEventListener("error",(()=>{n(e.error)})),e.addEventListener("upgradeneeded",(()=>{const t=e.result;try{t.createObjectStore(Th,{keyPath:Eh})}catch(i){n(i)}})),e.addEventListener("success",(async()=>{const n=e.result;n.objectStoreNames.contains(Th)?t(n):(n.close(),await function(){const e=indexedDB.deleteDatabase(bh);return new wh(e).toPromise()}(),t(await Ch()))}))}))}async function Ih(e,t,n){const i=Sh(e,!0).put({[Eh]:t,value:n});return new wh(i).toPromise()}function xh(e,t){const n=Sh(e,!0).delete(t);return new wh(n).toPromise()}class kh{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then((()=>{}),(()=>{}))}async _openDb(){return this.db||(this.db=await Ch()),this.db}async _withRetries(e){let t=0;for(;;)try{const t=await this._openDb();return await e(t)}catch(n){if(t++>3)throw n;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return vh()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=mh._getInstance(vh()?self:null),this.receiver._subscribe("keyChanged",(async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)}))),this.receiver._subscribe("ping",(async(e,t)=>["keyChanged"]))}async initializeSender(){var e,t;if(this.activeServiceWorker=await async function(){if(!(null===navigator||void 0===navigator?void 0:navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch(e){return null}}(),!this.activeServiceWorker)return;this.sender=new yh(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&(null===(e=n[0])||void 0===e?void 0:e.fulfilled)&&(null===(t=n[0])||void 0===t?void 0:t.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(this.sender&&this.activeServiceWorker&&function(){var e;return(null===(e=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===e?void 0:e.controller)||null}()===this.activeServiceWorker)try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch(V_){}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Ch();return await Ih(e,ch,"1"),await xh(e,ch),!0}catch(V_){}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite((async()=>(await this._withRetries((n=>Ih(n,e,t))),this.localCache[e]=t,this.notifyServiceWorker(e))))}async _get(e){const t=await this._withRetries((t=>async function(e,t){const n=Sh(e,!1).get(t),i=await new wh(n).toPromise();return void 0===i?null:i.value}(t,e)));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite((async()=>(await this._withRetries((t=>xh(t,e))),delete this.localCache[e],this.notifyServiceWorker(e))))}async _poll(){const e=await this._withRetries((e=>{const t=Sh(e,!1).getAll();return new wh(t).toPromise()}));if(!e)return[];if(0!==this.pendingWrites)return[];const t=[],n=new Set;for(const{fbase_key:i,value:r}of e)n.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(r)&&(this.notifyListeners(i,r),t.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!n.has(i)&&(this.notifyListeners(i,null),t.push(i));return t}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const i of Array.from(n))i(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval((async()=>this._poll()),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}kh.type="LOCAL";const Ah=kh;const Oh=1e12;class Ph{constructor(e){this.auth=e,this.counter=Oh,this._widgets=new Map}render(e,t){const n=this.counter;return this._widgets.set(n,new Lh(e,this.auth.name,t||{})),this.counter++,n}reset(e){var t;const n=e||Oh;null===(t=this._widgets.get(n))||void 0===t||t.delete(),this._widgets.delete(n)}getResponse(e){var t;const n=e||Oh;return(null===(t=this._widgets.get(n))||void 0===t?void 0:t.getResponse())||""}async execute(e){var t;const n=e||Oh;return null===(t=this._widgets.get(n))||void 0===t||t.execute(),""}}class Lh{constructor(e,t,n){this.params=n,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const i="string"==typeof e?document.getElementById(e):e;Kc(i,"argument-error",{appName:t}),this.container=i,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),this.timerId||(this.timerId=window.setTimeout((()=>{this.responseToken=function(e){const t=[],n="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let i=0;i<e;i++)t.push(n.charAt(Math.floor(Math.random()*n.length)));return t.join("")}(50);const{callback:e,"expired-callback":t}=this.params;if(e)try{e(this.responseToken)}catch(n){}this.timerId=window.setTimeout((()=>{if(this.timerId=null,this.responseToken=null,t)try{t()}catch(n){}this.isVisible&&this.execute()}),6e4)}),500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const Nh=Gu("rcb"),Dh=new eu(3e4,6e4);class Rh{constructor(){var e;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!(null===(e=_h().grecaptcha)||void 0===e?void 0:e.render)}load(e,t=""){return Kc(function(e){return e.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(e)}(t),e,"argument-error"),this.shouldResolveImmediately(t)&&Vu(_h().grecaptcha)?Promise.resolve(_h().grecaptcha):new Promise(((n,i)=>{const r=_h().setTimeout((()=>{i($c(e,"network-request-failed"))}),Dh.get());_h()[Nh]=()=>{_h().clearTimeout(r),delete _h()[Nh];const s=_h().grecaptcha;if(!s||!Vu(s))return void i($c(e,"internal-error"));const a=s.render;s.render=(e,t)=>{const n=a(e,t);return this.counter++,n},this.hostLanguage=t,n(s)};zu(`https://www.google.com/recaptcha/api.js??${me({onload:Nh,render:"explicit",hl:t})}`).catch((()=>{clearTimeout(r),i($c(e,"internal-error"))}))}))}clearedOneInstance(){this.counter--}shouldResolveImmediately(e){var t;return!!(null===(t=_h().grecaptcha)||void 0===t?void 0:t.render)&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class Mh{async load(e){return new Ph(e)}clearedOneInstance(){}}const Fh="recaptcha",Uh={theme:"light",type:"image"};class Bh{constructor(e,t){this.verificationId=e,this.onConfirmation=t}confirm(e){const t=md._fromVerification(this.verificationId,e);return this.onConfirmation(t)}}async function jh(e,t,n){var i;const r=await n.verify();try{let s;if(Kc("string"==typeof r,e,"argument-error"),Kc(n.type===Fh,e,"argument-error"),s="string"==typeof t?{phoneNumber:t}:t,"session"in s){const t=s.session;if("phoneNumber"in s){Kc("enroll"===t.type,e,"internal-error");const n=await function(e,t){return au(e,"POST","/v2/accounts/mfaEnrollment:start",su(e,t))}(e,{idToken:t.credential,phoneEnrollmentInfo:{phoneNumber:s.phoneNumber,recaptchaToken:r}});return n.phoneSessionInfo.sessionInfo}{Kc("signin"===t.type,e,"internal-error");const n=(null===(i=s.multiFactorHint)||void 0===i?void 0:i.uid)||s.multiFactorUid;Kc(n,e,"missing-multi-factor-info");const a=await function(e,t){return au(e,"POST","/v2/accounts/mfaSignIn:start",su(e,t))}(e,{mfaPendingCredential:t.credential,mfaEnrollmentId:n,phoneSignInInfo:{recaptchaToken:r}});return a.phoneResponseInfo.sessionInfo}}{const{sessionInfo:t}=await async function(e,t){return au(e,"POST","/v1/accounts:sendVerificationCode",su(e,t))}(e,{phoneNumber:s.phoneNumber,recaptchaToken:r});return t}}finally{n._reset()}}class qh{constructor(e){this.providerId=qh.PROVIDER_ID,this.auth=Ju(e)}verifyPhoneNumber(e,t){return jh(this.auth,e,ke(t))}static credential(e,t){return md._fromVerification(e,t)}static credentialFromResult(e){const t=e;return qh.credentialFromTaggedObject(t)}static credentialFromError(e){return qh.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{phoneNumber:t,temporaryProof:n}=e;return t&&n?md._fromTokenResponse(t,n):null}}function Hh(e,t){return t?Cu(t):(Kc(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}qh.PROVIDER_ID="phone",qh.PHONE_SIGN_IN_METHOD="phone";class Vh extends rd{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return hd(e,this._buildIdpRequest())}_linkToIdToken(e,t){return hd(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return hd(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function $h(e){return Md(e.auth,new Vh(e),e.bypassAuthState)}function Wh(e){const{auth:t,user:n}=e;return Kc(n,t,"internal-error"),Rd(n,new Vh(e),e.bypassAuthState)}async function zh(e){const{auth:t,user:n}=e;return Kc(n,t,"internal-error"),Nd(n,new Vh(e),e.bypassAuthState)}class Gh{constructor(e,t,n,i,r=!1){this.auth=e,this.resolver=n,this.user=i,this.bypassAuthState=r,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise((async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(n){this.reject(n)}}))}async onAuthEvent(e){const{urlResponse:t,sessionId:n,postBody:i,tenantId:r,error:s,type:a}=e;if(s)return void this.reject(s);const o={auth:this.auth,requestUri:t,sessionId:n,tenantId:r||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(o))}catch(l){this.reject(l)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return $h;case"linkViaPopup":case"linkViaRedirect":return zh;case"reauthViaPopup":case"reauthViaRedirect":return Wh;default:Vc(this.auth,"internal-error")}}resolve(e){Yc(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Yc(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Kh=new eu(2e3,1e4);async function Xh(e,t,n){const i=Ju(e);zc(e,t,_d);const r=Hh(i,n);return new Yh(i,"signInViaPopup",t,r).executeNotNull()}class Yh extends Gh{constructor(e,t,n,i,r){super(e,t,i,r),this.provider=n,this.authWindow=null,this.pollId=null,Yh.currentPopupAction&&Yh.currentPopupAction.cancel(),Yh.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Kc(e,this.auth,"internal-error"),e}async onExecution(){Yc(1===this.filter.length,"Popup operations only handle one event");const e=gh();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch((e=>{this.reject(e)})),this.resolver._isIframeWebStorageSupported(this.auth,(e=>{e||this.reject($c(this.auth,"web-storage-unsupported"))})),this.pollUserCancellation()}get eventId(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}cancel(){this.reject($c(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Yh.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,n;(null===(n=null===(t=this.authWindow)||void 0===t?void 0:t.window)||void 0===n?void 0:n.closed)?this.pollId=window.setTimeout((()=>{this.pollId=null,this.reject($c(this.auth,"popup-closed-by-user"))}),8e3):this.pollId=window.setTimeout(e,Kh.get())};e()}}Yh.currentPopupAction=null;const Qh="pendingRedirect",Jh=new Map;class Zh extends Gh{constructor(e,t,n=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,n),this.eventId=null}async execute(){let e=Jh.get(this.auth._key());if(!e){try{const t=await async function(e,t){const n=ip(t),i=np(e);if(!(await i._isAvailable()))return!1;const r="true"===await i._get(n);return await i._remove(n),r}(this.resolver,this.auth),n=t?await super.execute():null;e=()=>Promise.resolve(n)}catch(t){e=()=>Promise.reject(t)}Jh.set(this.auth._key(),e)}return this.bypassAuthState||Jh.set(this.auth._key(),(()=>Promise.resolve(null))),e()}async onAuthEvent(e){if("signInViaRedirect"===e.type)return super.onAuthEvent(e);if("unknown"!==e.type){if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}else this.resolve(null)}async onExecution(){}cleanUp(){}}async function ep(e,t){return np(e)._set(ip(t),"true")}function tp(e,t){Jh.set(e._key(),t)}function np(e){return Cu(e._redirectPersistence)}function ip(e){return ku(Qh,e.config.apiKey,e.name)}async function rp(e,t,n=!1){const i=Ju(e),r=Hh(i,t),s=new Zh(i,r,n),a=await s.execute();return a&&!n&&(delete a.user._redirectEventId,await i._persistUserIfCurrent(a.user),await i._setRedirectUser(null,t)),a}async function sp(e){const t=gh(`${e.uid}:::`);return e._redirectEventId=t,await e.auth._setRedirectUser(e),await e.auth._persistUserIfCurrent(e),t}class ap{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach((n=>{this.isEventForConsumer(e,n)&&(t=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))})),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return lp(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var n;if(e.error&&!lp(e)){const i=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError($c(this.auth,i))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(op(e))}saveEventToCache(e){this.cachedEventUids.add(op(e)),this.lastProcessedEventTime=Date.now()}}function op(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter((e=>e)).join("-")}function lp({type:e,error:t}){return"unknown"===e&&"auth/no-auth-event"===(null==t?void 0:t.code)}const cp=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,up=/^https?/;async function dp(e){if(e.config.emulator)return;const{authorizedDomains:t}=await async function(e,t={}){return au(e,"GET","/v1/projects",t)}(e);for(const n of t)try{if(hp(n))return}catch(V_){}Vc(e,"unauthorized-domain")}function hp(e){const t=Qc(),{protocol:n,hostname:i}=new URL(t);if(e.startsWith("chrome-extension://")){const r=new URL(e);return""===r.hostname&&""===i?"chrome-extension:"===n&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===n&&r.hostname===i}if(!up.test(n))return!1;if(cp.test(e))return i===e;const r=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+r+"|"+r+")$","i").test(i)}const pp=new eu(3e4,6e4);function fp(){const e=_h().___jsl;if(null==e?void 0:e.H)for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let n=0;n<e.CP.length;n++)e.CP[n]=null}let mp=null;function gp(e){return mp=mp||function(e){return new Promise(((t,n)=>{var i,r,s;function a(){fp(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{fp(),n($c(e,"network-request-failed"))},timeout:pp.get()})}if(null===(r=null===(i=_h().gapi)||void 0===i?void 0:i.iframes)||void 0===r?void 0:r.Iframe)t(gapi.iframes.getContext());else{if(!(null===(s=_h().gapi)||void 0===s?void 0:s.load)){const t=Gu("iframefcb");return _h()[t]=()=>{gapi.load?a():n($c(e,"network-request-failed"))},zu(`https://apis.google.com/js/api.js?onload=${t}`).catch((e=>n(e)))}a()}})).catch((e=>{throw mp=null,e}))}(e),mp}const yp=new eu(5e3,15e3),_p="__/auth/iframe",vp="emulator/auth/iframe",bp={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Tp=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Ep(e){const t=e.config;Kc(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?tu(t,vp):`https://${e.config.authDomain}/${_p}`,i={apiKey:t.apiKey,appName:e.name,v:mt},r=Tp.get(e.config.apiHost);r&&(i.eid=r);const s=e._getFrameworks();return s.length&&(i.fw=s.join(",")),`${n}?${me(i).slice(1)}`}const wp={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Sp{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(e){}}}function Cp(e,t,n,i=500,r=600){const s=Math.max((window.screen.availHeight-r)/2,0).toString(),a=Math.max((window.screen.availWidth-i)/2,0).toString();let o="";const l=Object.assign(Object.assign({},wp),{width:i.toString(),height:r.toString(),top:s,left:a}),c=Y().toLowerCase();n&&(o=Nu(c)?"_blank":n),Pu(c)&&(t=t||"http://localhost",l.scrollbars="yes");const u=Object.entries(l).reduce(((e,[t,n])=>`${e}${t}=${n},`),"");if(function(e=Y()){var t;return Uu(e)&&!!(null===(t=window.navigator)||void 0===t?void 0:t.standalone)}(c)&&"_self"!==o)return function(e,t){const n=document.createElement("a");n.href=e,n.target=t;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(i)}(t||"",o),new Sp(null);const d=window.open(t||"",o,u);Kc(d,e,"popup-blocked");try{d.focus()}catch(h){}return new Sp(d)}const Ip="__/auth/handler",xp="emulator/auth/handler",kp=encodeURIComponent("fac");async function Ap(e,t,n,i,r,s){Kc(e.config.authDomain,e,"auth-domain-config-required"),Kc(e.config.apiKey,e,"invalid-api-key");const a={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:i,v:mt,eventId:r};if(t instanceof _d){t.setDefaultLanguage(e.languageCode),a.providerId=t.providerId||"",de(t.getCustomParameters())||(a.customParameters=JSON.stringify(t.getCustomParameters()));for(const[e,t]of Object.entries(s||{}))a[e]=t}if(t instanceof vd){const e=t.getScopes().filter((e=>""!==e));e.length>0&&(a.scopes=e.join(","))}e.tenantId&&(a.tid=e.tenantId);const o=a;for(const u of Object.keys(o))void 0===o[u]&&delete o[u];const l=await e._getAppCheckToken(),c=l?`#${kp}=${encodeURIComponent(l)}`:"";return`${function({config:e}){if(!e.emulator)return`https://${e.authDomain}/${Ip}`;return tu(e,xp)}(e)}?${me(o).slice(1)}${c}`}const Op="webStorageSupport";const Pp=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=fh,this._completeRedirectFn=rp,this._overrideRedirectResult=tp}async _openPopup(e,t,n,i){var r;Yc(null===(r=this.eventManagers[e._key()])||void 0===r?void 0:r.manager,"_initialize() not called before _openPopup()");return Cp(e,await Ap(e,t,n,Qc(),i),gh())}async _openRedirect(e,t,n,i){await this._originValidation(e);return function(e){_h().location.href=e}(await Ap(e,t,n,Qc(),i)),new Promise((()=>{}))}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:e,promise:n}=this.eventManagers[t];return e?Promise.resolve(e):(Yc(n,"If manager is not set, promise should be"),n)}const n=this.initAndGetManager(e);return this.eventManagers[t]={promise:n},n.catch((()=>{delete this.eventManagers[t]})),n}async initAndGetManager(e){const t=await async function(e){const t=await gp(e),n=_h().gapi;return Kc(n,e,"internal-error"),t.open({where:document.body,url:Ep(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:bp,dontclear:!0},(t=>new Promise((async(n,i)=>{await t.restyle({setHideOnLeave:!1});const r=$c(e,"network-request-failed"),s=_h().setTimeout((()=>{i(r)}),yp.get());function a(){_h().clearTimeout(s),n(t)}t.ping(a).then(a,(()=>{i(r)}))}))))}(e),n=new ap(e);return t.register("authEvent",(t=>{Kc(null==t?void 0:t.authEvent,e,"invalid-auth-event");return{status:n.onEvent(t.authEvent)?"ACK":"ERROR"}}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=t,n}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Op,{type:Op},(n=>{var i;const r=null===(i=null==n?void 0:n[0])||void 0===i?void 0:i[Op];void 0!==r&&t(!!r),Vc(e,"internal-error")}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=dp(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return ju()||Lu()||Uu()}};class Lp{constructor(e){this.factorId=e}_process(e,t,n){switch(t.type){case"enroll":return this._finalizeEnroll(e,t.credential,n);case"signin":return this._finalizeSignIn(e,t.credential);default:return Xc("unexpected MultiFactorSessionType")}}}class Np extends Lp{constructor(e){super("phone"),this.credential=e}static _fromCredential(e){return new Np(e)}_finalizeEnroll(e,t,n){return function(e,t){return au(e,"POST","/v2/accounts/mfaEnrollment:finalize",su(e,t))}(e,{idToken:t,displayName:n,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(e,t){return function(e,t){return au(e,"POST","/v2/accounts/mfaSignIn:finalize",su(e,t))}(e,{mfaPendingCredential:t,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}class Dp{constructor(){}static assertion(e){return Np._fromCredential(e)}}Dp.FACTOR_ID="phone";class Rp{static assertionForEnrollment(e,t){return Mp._fromSecret(e,t)}static assertionForSignIn(e,t){return Mp._fromEnrollmentId(e,t)}static async generateSecret(e){const t=e;Kc(void 0!==t.auth,"internal-error");const n=await function(e,t){return au(e,"POST","/v2/accounts/mfaEnrollment:start",su(e,t))}(t.auth,{idToken:t.credential,totpEnrollmentInfo:{}});return Fp._fromStartTotpMfaEnrollmentResponse(n,t.auth)}}Rp.FACTOR_ID="totp";class Mp extends Lp{constructor(e,t,n){super("totp"),this.otp=e,this.enrollmentId=t,this.secret=n}static _fromSecret(e,t){return new Mp(t,void 0,e)}static _fromEnrollmentId(e,t){return new Mp(t,e)}async _finalizeEnroll(e,t,n){return Kc(void 0!==this.secret,e,"argument-error"),function(e,t){return au(e,"POST","/v2/accounts/mfaEnrollment:finalize",su(e,t))}(e,{idToken:t,displayName:n,totpVerificationInfo:this.secret._makeTotpVerificationInfo(this.otp)})}async _finalizeSignIn(e,t){Kc(void 0!==this.enrollmentId&&void 0!==this.otp,e,"argument-error");const n={verificationCode:this.otp};return function(e,t){return au(e,"POST","/v2/accounts/mfaSignIn:finalize",su(e,t))}(e,{mfaPendingCredential:t,mfaEnrollmentId:this.enrollmentId,totpVerificationInfo:n})}}class Fp{constructor(e,t,n,i,r,s,a){this.sessionInfo=s,this.auth=a,this.secretKey=e,this.hashingAlgorithm=t,this.codeLength=n,this.codeIntervalSeconds=i,this.enrollmentCompletionDeadline=r}static _fromStartTotpMfaEnrollmentResponse(e,t){return new Fp(e.totpSessionInfo.sharedSecretKey,e.totpSessionInfo.hashingAlgorithm,e.totpSessionInfo.verificationCodeLength,e.totpSessionInfo.periodSec,new Date(e.totpSessionInfo.finalizeEnrollmentTime).toUTCString(),e.totpSessionInfo.sessionInfo,t)}_makeTotpVerificationInfo(e){return{sessionInfo:this.sessionInfo,verificationCode:e}}generateQrCodeUrl(e,t){var n;let i=!1;return(Up(e)||Up(t))&&(i=!0),i&&(Up(e)&&(e=(null===(n=this.auth.currentUser)||void 0===n?void 0:n.email)||"unknownuser"),Up(t)&&(t=this.auth.name)),`otpauth://totp/${t}:${e}?secret=${this.secretKey}&issuer=${t}&algorithm=${this.hashingAlgorithm}&digits=${this.codeLength}`}}function Up(e){return void 0===e||0===(null==e?void 0:e.length)}var Bp="@firebase/auth",jp="0.23.2";class qp{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}async getToken(e){if(this.assertAuthConfigured(),await this.auth._initializationPromise,!this.auth.currentUser)return null;return{accessToken:await this.auth.currentUser.getIdToken(e)}}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged((t=>{e((null==t?void 0:t.stsTokenManager.accessToken)||null)}));this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Kc(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}const Hp=K("authIdTokenMaxAge")||300;let Vp=null;const $p=e=>async t=>{const n=t&&await t.getIdTokenResult(),i=n&&((new Date).getTime()-Date.parse(n.issuedAtTime))/1e3;if(i&&i>Hp)return;const r=null==n?void 0:n.token;Vp!==r&&(Vp=r,await fetch(e,{method:r?"POST":"DELETE",headers:r?{Authorization:`Bearer ${r}`}:{}}))};function Wp(e=yt()){const t=ht(e,"auth");if(t.isInitialized())return t.getImmediate();const n=ed(e,{popupRedirectResolver:Pp,persistence:[Ah,hh,fh]}),i=K("authTokenSyncURL");if(i){const e=$p(i);ih(n,e,(()=>e(n.currentUser))),nh(n,(t=>e(t)))}const r=W("auth");return r&&td(n,`http://${r}`),n}var zp;zp="Browser",dt(new Ae("auth",((e,{options:t})=>{const n=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),r=e.getProvider("app-check-internal"),{apiKey:s,authDomain:a}=n.options;Kc(s&&!s.includes(":"),"invalid-api-key",{appName:n.name});const o={apiKey:s,authDomain:a,clientPlatform:zp,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:qu(zp)},l=new Qu(n,i,r,o);return function(e,t){const n=(null==t?void 0:t.persistence)||[],i=(Array.isArray(n)?n:[n]).map(Cu);(null==t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(i,null==t?void 0:t.popupRedirectResolver)}(l,t),l}),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback(((e,t,n)=>{e.getProvider("auth-internal").initialize()}))),dt(new Ae("auth-internal",(e=>(e=>new qp(e))(Ju(e.getProvider("auth").getImmediate()))),"PRIVATE").setInstantiationMode("EXPLICIT")),_t(Bp,jp,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(zp)),_t(Bp,jp,"esm2017");const Gp=Object.freeze(Object.defineProperty({__proto__:null,ActionCodeOperation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"},ActionCodeURL:gd,AuthCredential:rd,AuthErrorCodes:{ADMIN_ONLY_OPERATION:"auth/admin-restricted-operation",ARGUMENT_ERROR:"auth/argument-error",APP_NOT_AUTHORIZED:"auth/app-not-authorized",APP_NOT_INSTALLED:"auth/app-not-installed",CAPTCHA_CHECK_FAILED:"auth/captcha-check-failed",CODE_EXPIRED:"auth/code-expired",CORDOVA_NOT_READY:"auth/cordova-not-ready",CORS_UNSUPPORTED:"auth/cors-unsupported",CREDENTIAL_ALREADY_IN_USE:"auth/credential-already-in-use",CREDENTIAL_MISMATCH:"auth/custom-token-mismatch",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"auth/requires-recent-login",DEPENDENT_SDK_INIT_BEFORE_AUTH:"auth/dependent-sdk-initialized-before-auth",DYNAMIC_LINK_NOT_ACTIVATED:"auth/dynamic-link-not-activated",EMAIL_CHANGE_NEEDS_VERIFICATION:"auth/email-change-needs-verification",EMAIL_EXISTS:"auth/email-already-in-use",EMULATOR_CONFIG_FAILED:"auth/emulator-config-failed",EXPIRED_OOB_CODE:"auth/expired-action-code",EXPIRED_POPUP_REQUEST:"auth/cancelled-popup-request",INTERNAL_ERROR:"auth/internal-error",INVALID_API_KEY:"auth/invalid-api-key",INVALID_APP_CREDENTIAL:"auth/invalid-app-credential",INVALID_APP_ID:"auth/invalid-app-id",INVALID_AUTH:"auth/invalid-user-token",INVALID_AUTH_EVENT:"auth/invalid-auth-event",INVALID_CERT_HASH:"auth/invalid-cert-hash",INVALID_CODE:"auth/invalid-verification-code",INVALID_CONTINUE_URI:"auth/invalid-continue-uri",INVALID_CORDOVA_CONFIGURATION:"auth/invalid-cordova-configuration",INVALID_CUSTOM_TOKEN:"auth/invalid-custom-token",INVALID_DYNAMIC_LINK_DOMAIN:"auth/invalid-dynamic-link-domain",INVALID_EMAIL:"auth/invalid-email",INVALID_EMULATOR_SCHEME:"auth/invalid-emulator-scheme",INVALID_IDP_RESPONSE:"auth/invalid-credential",INVALID_MESSAGE_PAYLOAD:"auth/invalid-message-payload",INVALID_MFA_SESSION:"auth/invalid-multi-factor-session",INVALID_OAUTH_CLIENT_ID:"auth/invalid-oauth-client-id",INVALID_OAUTH_PROVIDER:"auth/invalid-oauth-provider",INVALID_OOB_CODE:"auth/invalid-action-code",INVALID_ORIGIN:"auth/unauthorized-domain",INVALID_PASSWORD:"auth/wrong-password",INVALID_PERSISTENCE:"auth/invalid-persistence-type",INVALID_PHONE_NUMBER:"auth/invalid-phone-number",INVALID_PROVIDER_ID:"auth/invalid-provider-id",INVALID_RECIPIENT_EMAIL:"auth/invalid-recipient-email",INVALID_SENDER:"auth/invalid-sender",INVALID_SESSION_INFO:"auth/invalid-verification-id",INVALID_TENANT_ID:"auth/invalid-tenant-id",MFA_INFO_NOT_FOUND:"auth/multi-factor-info-not-found",MFA_REQUIRED:"auth/multi-factor-auth-required",MISSING_ANDROID_PACKAGE_NAME:"auth/missing-android-pkg-name",MISSING_APP_CREDENTIAL:"auth/missing-app-credential",MISSING_AUTH_DOMAIN:"auth/auth-domain-config-required",MISSING_CODE:"auth/missing-verification-code",MISSING_CONTINUE_URI:"auth/missing-continue-uri",MISSING_IFRAME_START:"auth/missing-iframe-start",MISSING_IOS_BUNDLE_ID:"auth/missing-ios-bundle-id",MISSING_OR_INVALID_NONCE:"auth/missing-or-invalid-nonce",MISSING_MFA_INFO:"auth/missing-multi-factor-info",MISSING_MFA_SESSION:"auth/missing-multi-factor-session",MISSING_PHONE_NUMBER:"auth/missing-phone-number",MISSING_SESSION_INFO:"auth/missing-verification-id",MODULE_DESTROYED:"auth/app-deleted",NEED_CONFIRMATION:"auth/account-exists-with-different-credential",NETWORK_REQUEST_FAILED:"auth/network-request-failed",NULL_USER:"auth/null-user",NO_AUTH_EVENT:"auth/no-auth-event",NO_SUCH_PROVIDER:"auth/no-such-provider",OPERATION_NOT_ALLOWED:"auth/operation-not-allowed",OPERATION_NOT_SUPPORTED:"auth/operation-not-supported-in-this-environment",POPUP_BLOCKED:"auth/popup-blocked",POPUP_CLOSED_BY_USER:"auth/popup-closed-by-user",PROVIDER_ALREADY_LINKED:"auth/provider-already-linked",QUOTA_EXCEEDED:"auth/quota-exceeded",REDIRECT_CANCELLED_BY_USER:"auth/redirect-cancelled-by-user",REDIRECT_OPERATION_PENDING:"auth/redirect-operation-pending",REJECTED_CREDENTIAL:"auth/rejected-credential",SECOND_FACTOR_ALREADY_ENROLLED:"auth/second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"auth/maximum-second-factor-count-exceeded",TENANT_ID_MISMATCH:"auth/tenant-id-mismatch",TIMEOUT:"auth/timeout",TOKEN_EXPIRED:"auth/user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"auth/too-many-requests",UNAUTHORIZED_DOMAIN:"auth/unauthorized-continue-uri",UNSUPPORTED_FIRST_FACTOR:"auth/unsupported-first-factor",UNSUPPORTED_PERSISTENCE:"auth/unsupported-persistence-type",UNSUPPORTED_TENANT_OPERATION:"auth/unsupported-tenant-operation",UNVERIFIED_EMAIL:"auth/unverified-email",USER_CANCELLED:"auth/user-cancelled",USER_DELETED:"auth/user-not-found",USER_DISABLED:"auth/user-disabled",USER_MISMATCH:"auth/user-mismatch",USER_SIGNED_OUT:"auth/user-signed-out",WEAK_PASSWORD:"auth/weak-password",WEB_STORAGE_UNSUPPORTED:"auth/web-storage-unsupported",ALREADY_INITIALIZED:"auth/already-initialized",RECAPTCHA_NOT_ENABLED:"auth/recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"auth/missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"auth/invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"auth/invalid-recaptcha-action",MISSING_CLIENT_TYPE:"auth/missing-client-type",MISSING_RECAPTCHA_VERSION:"auth/missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"auth/invalid-recaptcha-version",INVALID_REQ_TYPE:"auth/invalid-req-type"},EmailAuthCredential:dd,EmailAuthProvider:yd,FacebookAuthProvider:Td,FactorId:{PHONE:"phone",TOTP:"totp"},GithubAuthProvider:wd,GoogleAuthProvider:Ed,OAuthCredential:pd,OAuthProvider:bd,OperationType:{LINK:"link",REAUTHENTICATE:"reauthenticate",SIGN_IN:"signIn"},PhoneAuthCredential:md,PhoneAuthProvider:qh,PhoneMultiFactorGenerator:Dp,ProviderId:{FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},RecaptchaVerifier:class{constructor(e,t=Object.assign({},Uh),n){this.parameters=t,this.type=Fh,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Ju(n),this.isInvisible="invisible"===this.parameters.size,Kc("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment");const i="string"==typeof e?document.getElementById(e):e;Kc(i,this.auth,"argument-error"),this.container=i,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new Mh:new Rh,this.validateStartingState()}async verify(){this.assertNotDestroyed();const e=await this.render(),t=this.getAssertedRecaptcha(),n=t.getResponse(e);return n||new Promise((n=>{const i=e=>{e&&(this.tokenChangeListeners.delete(i),n(e))};this.tokenChangeListeners.add(i),this.isInvisible&&t.execute(e)}))}render(){try{this.assertNotDestroyed()}catch(e){return Promise.reject(e)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch((e=>{throw this.renderPromise=null,e}))),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach((e=>{this.container.removeChild(e)}))}validateStartingState(){Kc(!this.parameters.sitekey,this.auth,"argument-error"),Kc(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),Kc("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(e){return t=>{if(this.tokenChangeListeners.forEach((e=>e(t))),"function"==typeof e)e(t);else if("string"==typeof e){const n=_h()[e];"function"==typeof n&&n(t)}}}assertNotDestroyed(){Kc(!this.destroyed,this.auth,"internal-error")}async makeRenderPromise(){if(await this.init(),!this.widgetId){let e=this.container;if(!this.isInvisible){const t=document.createElement("div");e.appendChild(t),e=t}this.widgetId=this.getAssertedRecaptcha().render(e,this.parameters)}return this.widgetId}async init(){Kc(Jc()&&!vh(),this.auth,"internal-error"),await function(){let e=null;return new Promise((t=>{"complete"!==document.readyState?(e=()=>t(),window.addEventListener("load",e)):t()})).catch((t=>{throw e&&window.removeEventListener("load",e),t}))}(),this.recaptcha=await this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);const e=await async function(e){return(await au(e,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""}(this.auth);Kc(e,this.auth,"internal-error"),this.parameters.sitekey=e}getAssertedRecaptcha(){return Kc(this.recaptcha,this.auth,"internal-error"),this.recaptcha}},SAMLAuthProvider:Cd,SignInMethod:{EMAIL_LINK:"emailLink",EMAIL_PASSWORD:"password",FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PHONE:"phone",TWITTER:"twitter.com"},TotpMultiFactorGenerator:Rp,TotpSecret:Fp,TwitterAuthProvider:Id,applyActionCode:async function(e,t){await async function(e,t){return au(e,"POST","/v1/accounts:update",su(e,t))}(ke(e),{oobCode:t})},beforeAuthStateChanged:ih,browserLocalPersistence:hh,browserPopupRedirectResolver:Pp,browserSessionPersistence:fh,checkActionCode:Wd,confirmPasswordReset:async function(e,t,n){await sd(ke(e),{oobCode:t,newPassword:n})},connectAuthEmulator:td,createUserWithEmailAndPassword:zd,debugErrorMap:Uc,deleteUser:async function(e){return ke(e).delete()},fetchSignInMethodsForEmail:async function(e,t){const n={identifier:t,continueUri:Jc()?Qc():"http://localhost"},{signinMethods:i}=await async function(e,t){return au(e,"POST","/v1/accounts:createAuthUri",su(e,t))}(ke(e),n);return i||[]},getAdditionalUserInfo:function(e){const{user:t,_tokenResponse:n}=e;return t.isAnonymous&&!n?{providerId:null,isNewUser:!1,profile:null}:function(e){var t,n;if(!e)return null;const{providerId:i}=e,r=e.rawUserInfo?JSON.parse(e.rawUserInfo):{},s=e.isNewUser||"identitytoolkit#SignupNewUserResponse"===e.kind;if(!i&&(null==e?void 0:e.idToken)){const i=null===(n=null===(t=mu(e.idToken))||void 0===t?void 0:t.firebase)||void 0===n?void 0:n.sign_in_provider;if(i)return new Yd(s,"anonymous"!==i&&"custom"!==i?i:null)}if(!i)return null;switch(i){case"facebook.com":return new Jd(s,r);case"github.com":return new Zd(s,r);case"google.com":return new eh(s,r);case"twitter.com":return new th(s,r,e.screenName||null);case"custom":case"anonymous":return new Yd(s,null);default:return new Yd(s,i,r)}}(n)},getAuth:Wp,getIdToken:function(e,t=!1){return ke(e).getIdToken(t)},getIdTokenResult:pu,getMultiFactorResolver:function(e,t){var n;const i=ke(e),r=t;return Kc(t.customData.operationType,i,"argument-error"),Kc(null===(n=r.customData._serverResponse)||void 0===n?void 0:n.mfaPendingCredential,i,"argument-error"),ah._fromError(i,r)},getRedirectResult:async function(e,t){return await Ju(e)._initializationPromise,rp(e,t,!1)},inMemoryPersistence:xu,indexedDBLocalPersistence:Ah,initializeAuth:ed,initializeRecaptchaConfig:function(e){return Ju(e).initializeRecaptchaConfig()},isSignInWithEmailLink:function(e,t){const n=gd.parseLink(t);return"EMAIL_SIGNIN"===(null==n?void 0:n.operation)},linkWithCredential:Ud,linkWithPhoneNumber:async function(e,t,n){const i=ke(e);await Dd(!1,i,"phone");const r=await jh(i.auth,t,ke(n));return new Bh(r,(e=>Ud(i,e)))},linkWithPopup:async function(e,t,n){const i=ke(e);zc(i.auth,t,_d);const r=Hh(i.auth,n);return new Yh(i.auth,"linkViaPopup",t,r,i).executeNotNull()},linkWithRedirect:function(e,t,n){return async function(e,t,n){const i=ke(e);zc(i.auth,t,_d),await i.auth._initializationPromise;const r=Hh(i.auth,n);await Dd(!1,i,t.providerId),await ep(r,i.auth);const s=await sp(i);return r._openRedirect(i.auth,t,"linkViaRedirect",s)}(e,t,n)},multiFactor:function(e){const t=ke(e);return lh.has(t)||lh.set(t,oh._fromUser(t)),lh.get(t)},onAuthStateChanged:function(e,t,n,i){return ke(e).onAuthStateChanged(t,n,i)},onIdTokenChanged:nh,parseActionCodeURL:function(e){return gd.parseLink(e)},prodErrorMap:Bc,reauthenticateWithCredential:Bd,reauthenticateWithPhoneNumber:async function(e,t,n){const i=ke(e),r=await jh(i.auth,t,ke(n));return new Bh(r,(e=>Bd(i,e)))},reauthenticateWithPopup:async function(e,t,n){const i=ke(e);zc(i.auth,t,_d);const r=Hh(i.auth,n);return new Yh(i.auth,"reauthViaPopup",t,r,i).executeNotNull()},reauthenticateWithRedirect:function(e,t,n){return async function(e,t,n){const i=ke(e);zc(i.auth,t,_d),await i.auth._initializationPromise;const r=Hh(i.auth,n);await ep(r,i.auth);const s=await sp(i);return r._openRedirect(i.auth,t,"reauthViaRedirect",s)}(e,t,n)},reload:bu,sendEmailVerification:async function(e,t){const n=ke(e),i={requestType:"VERIFY_EMAIL",idToken:await e.getIdToken()};t&&Vd(n.auth,i,t);const{email:r}=await async function(e,t){return ld(e,t)}(n.auth,i);r!==e.email&&await e.reload()},sendPasswordResetEmail:$d,sendSignInLinkToEmail:async function(e,t,n){var i;const r=Ju(e),s={requestType:"EMAIL_SIGNIN",email:t,clientType:"CLIENT_TYPE_WEB"};function a(e,t){Kc(t.handleCodeInApp,r,"argument-error"),t&&Vd(r,e,t)}if(null===(i=r._getRecaptchaConfig())||void 0===i?void 0:i.emailPasswordEnabled){const e=await Xu(r,s,"getOobCode",!0);a(e,n),await ud(r,e)}else a(s,n),await ud(r,s).catch((async e=>{if("auth/missing-recaptcha-token"!==e.code)return Promise.reject(e);{console.log("Email link sign-in is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow.");const e=await Xu(r,s,"getOobCode",!0);a(e,n),await ud(r,e)}}))},setPersistence:function(e,t){return ke(e).setPersistence(t)},signInAnonymously:async function(e){var t;const n=Ju(e);if(await n._initializationPromise,null===(t=n.currentUser)||void 0===t?void 0:t.isAnonymous)return new kd({user:n.currentUser,providerId:null,operationType:"signIn"});const i=await xd(n,{returnSecureToken:!0}),r=await kd._fromIdTokenResponse(n,"signIn",i,!0);return await n._updateCurrentUser(r.user),r},signInWithCredential:Fd,signInWithCustomToken:async function(e,t){const n=Ju(e),i=await async function(e,t){return lu(e,"POST","/v1/accounts:signInWithCustomToken",su(e,t))}(n,{token:t,returnSecureToken:!0}),r=await kd._fromIdTokenResponse(n,"signIn",i);return await n._updateCurrentUser(r.user),r},signInWithEmailAndPassword:Gd,signInWithEmailLink:async function(e,t,n){const i=ke(e),r=yd.credentialWithLink(t,n||Qc());return Kc(r._tenantId===(i.tenantId||null),i,"tenant-id-mismatch"),Fd(i,r)},signInWithPhoneNumber:async function(e,t,n){const i=Ju(e),r=await jh(i,t,ke(n));return new Bh(r,(e=>Fd(i,e)))},signInWithPopup:Xh,signInWithRedirect:function(e,t,n){return async function(e,t,n){const i=Ju(e);zc(e,t,_d),await i._initializationPromise;const r=Hh(i,n);return await ep(r,i),r._openRedirect(i,t,"signInViaRedirect")}(e,t,n)},signOut:rh,unlink:async function(e,t){const n=ke(e);await Dd(!0,n,t);const{providerUserInfo:i}=await async function(e,t){return au(e,"POST","/v1/accounts:update",t)}(n.auth,{idToken:await n.getIdToken(),deleteProvider:[t]}),r=Ld(i||[]);return n.providerData=n.providerData.filter((e=>r.has(e.providerId))),r.has("phone")||(n.phoneNumber=null),await n.auth._persistUserIfCurrent(n),n},updateCurrentUser:function(e,t){return ke(e).updateCurrentUser(t)},updateEmail:function(e,t){return Xd(ke(e),t,null)},updatePassword:function(e,t){return Xd(ke(e),null,t)},updatePhoneNumber:async function(e,t){await Nd(ke(e),t)},updateProfile:Kd,useDeviceLanguage:function(e){ke(e).useDeviceLanguage()},verifyBeforeUpdateEmail:async function(e,t,n){const i=ke(e),r={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:await e.getIdToken(),newEmail:t};n&&Vd(i.auth,r,n);const{email:s}=await async function(e,t){return ld(e,t)}(i.auth,r);s!==e.email&&await e.reload()},verifyPasswordResetCode:async function(e,t){const{data:n}=await Wd(ke(e),t);return n.email}},Symbol.toStringTag,{value:"Module"})),Kp={apiKey:"AIzaSyASnaeaC-FLvGoHKneasPInl12JC9jX27Q",authDomain:"mytsbc-a2d97.firebaseapp.com",projectId:"mytsbc-a2d97",storageBucket:"mytsbc-a2d97.appspot.com",messagingSenderId:"267158378243",appId:"1:267158378243:web:31d94cda2ae697a0be7b36",measurementId:"G-2RQNS9T3W0",databaseURL:"https://mytsbc-a2d97-default-rtdb.asia-southeast1.firebasedatabase.app/"};function Xp(e,t,n){const i=gt(Kp);mi(i);const r=Wp();return Cc(i),r.setPersistence(hh),document.addEventListener("alpine:init",(()=>{let e=window.Alpine;e.store("auth",{authGet:()=>{let e=Wp();return e.setPersistence(hh),e},fbaseauth:Gp,authenticating:!0,user:{loggedIn:!1,email:"",password:"",displayName:"",idToken:"",uid:"",firebaseuser:null}}),e.store("firedb",{databaseGet:()=>Cc(i),fbasedb:Ac}),console.log("STORE SET2")})),window.modularcomponents={},document.addEventListener("alpine:init",(()=>{let e=window.Alpine;e.store("appData",{dark:!1,primarycolor:"#fff",modify(e){e(this)},fontsize:20}),e.store("uiData",{navbars:{main:"watch"},page:"watch",modify(e){e(this)}}),console.log("TRIP"),e.store("colors",window.colors)})),t.create(t.fragment,null)}function Yp(e){return`${(()=>{let t="";return Object.keys(e).forEach((e=>{t+=`'${e}': $store.colors['${e}'],`})),t})()}`}function Qp(e,t,n){return t.create("div",{"x-data":!0,"x-bind:style":`{${Yp(e.colors)}}`},t.create("div",{style:e.style},n))}var Jp;var Zp=function(){function e(e){void 0===e&&(e={}),this.adapter=e}return Object.defineProperty(e,"cssClasses",{get:function(){return{}},enumerable:!1,configurable:!0}),Object.defineProperty(e,"strings",{get:function(){return{}},enumerable:!1,configurable:!0}),Object.defineProperty(e,"numbers",{get:function(){return{}},enumerable:!1,configurable:!0}),Object.defineProperty(e,"defaultAdapter",{get:function(){return{}},enumerable:!1,configurable:!0}),e.prototype.init=function(){},e.prototype.destroy=function(){},e}(),ef=function(){function e(e,t){for(var n=[],i=2;i<arguments.length;i++)n[i-2]=arguments[i];this.root=e,this.initialize.apply(this,Mc([],Rc(n))),this.foundation=void 0===t?this.getDefaultFoundation():t,this.foundation.init(),this.initialSyncWithDOM()}return e.attachTo=function(t){return new e(t,new Zp({}))},e.prototype.initialize=function(){},e.prototype.getDefaultFoundation=function(){throw new Error("Subclasses must override getDefaultFoundation to return a properly configured foundation class")},e.prototype.initialSyncWithDOM=function(){},e.prototype.destroy=function(){this.foundation.destroy()},e.prototype.listen=function(e,t,n){this.root.addEventListener(e,t,n)},e.prototype.unlisten=function(e,t,n){this.root.removeEventListener(e,t,n)},e.prototype.emit=function(e,t,n){var i;void 0===n&&(n=!1),"function"==typeof CustomEvent?i=new CustomEvent(e,{bubbles:n,detail:t}):(i=document.createEvent("CustomEvent")).initCustomEvent(e,n,!1,t),this.root.dispatchEvent(i)},e}();function tf(e){return void 0===e&&(e=window),!!function(e){void 0===e&&(e=window);var t=!1;try{var n={get passive(){return t=!0,!1}},i=function(){};e.document.addEventListener("test",i,n),e.document.removeEventListener("test",i,n)}catch(r){t=!1}return t}(e)&&{passive:!0}}function nf(e,t){if(e.closest)return e.closest(t);for(var n=e;n;){if(rf(n,t))return n;n=n.parentElement}return null}function rf(e,t){return(e.matches||e.webkitMatchesSelector||e.msMatchesSelector).call(e,t)}var sf={BG_FOCUSED:"mdc-ripple-upgraded--background-focused",FG_ACTIVATION:"mdc-ripple-upgraded--foreground-activation",FG_DEACTIVATION:"mdc-ripple-upgraded--foreground-deactivation",ROOT:"mdc-ripple-upgraded",UNBOUNDED:"mdc-ripple-upgraded--unbounded"},af={VAR_FG_SCALE:"--mdc-ripple-fg-scale",VAR_FG_SIZE:"--mdc-ripple-fg-size",VAR_FG_TRANSLATE_END:"--mdc-ripple-fg-translate-end",VAR_FG_TRANSLATE_START:"--mdc-ripple-fg-translate-start",VAR_LEFT:"--mdc-ripple-left",VAR_TOP:"--mdc-ripple-top"},of={DEACTIVATION_TIMEOUT_MS:225,FG_DEACTIVATION_MS:150,INITIAL_ORIGIN_SCALE:.6,PADDING:10,TAP_DELAY_MS:300},lf=["touchstart","pointerdown","mousedown","keydown"],cf=["touchend","pointerup","mouseup","contextmenu"],uf=[],df=function(e){function t(n){var i=e.call(this,Lc(Lc({},t.defaultAdapter),n))||this;return i.activationAnimationHasEnded=!1,i.activationTimer=0,i.fgDeactivationRemovalTimer=0,i.fgScale="0",i.frame={width:0,height:0},i.initialSize=0,i.layoutFrame=0,i.maxRadius=0,i.unboundedCoords={left:0,top:0},i.activationState=i.defaultActivationState(),i.activationTimerCallback=function(){i.activationAnimationHasEnded=!0,i.runDeactivationUXLogicIfReady()},i.activateHandler=function(e){i.activateImpl(e)},i.deactivateHandler=function(){i.deactivateImpl()},i.focusHandler=function(){i.handleFocus()},i.blurHandler=function(){i.handleBlur()},i.resizeHandler=function(){i.layout()},i}return Pc(t,e),Object.defineProperty(t,"cssClasses",{get:function(){return sf},enumerable:!1,configurable:!0}),Object.defineProperty(t,"strings",{get:function(){return af},enumerable:!1,configurable:!0}),Object.defineProperty(t,"numbers",{get:function(){return of},enumerable:!1,configurable:!0}),Object.defineProperty(t,"defaultAdapter",{get:function(){return{addClass:function(){},browserSupportsCssVars:function(){return!0},computeBoundingRect:function(){return{top:0,right:0,bottom:0,left:0,width:0,height:0}},containsEventTarget:function(){return!0},deregisterDocumentInteractionHandler:function(){},deregisterInteractionHandler:function(){},deregisterResizeHandler:function(){},getWindowPageOffset:function(){return{x:0,y:0}},isSurfaceActive:function(){return!0},isSurfaceDisabled:function(){return!0},isUnbounded:function(){return!0},registerDocumentInteractionHandler:function(){},registerInteractionHandler:function(){},registerResizeHandler:function(){},removeClass:function(){},updateCssVariable:function(){}}},enumerable:!1,configurable:!0}),t.prototype.init=function(){var e=this,n=this.supportsPressRipple();if(this.registerRootHandlers(n),n){var i=t.cssClasses,r=i.ROOT,s=i.UNBOUNDED;requestAnimationFrame((function(){e.adapter.addClass(r),e.adapter.isUnbounded()&&(e.adapter.addClass(s),e.layoutInternal())}))}},t.prototype.destroy=function(){var e=this;if(this.supportsPressRipple()){this.activationTimer&&(clearTimeout(this.activationTimer),this.activationTimer=0,this.adapter.removeClass(t.cssClasses.FG_ACTIVATION)),this.fgDeactivationRemovalTimer&&(clearTimeout(this.fgDeactivationRemovalTimer),this.fgDeactivationRemovalTimer=0,this.adapter.removeClass(t.cssClasses.FG_DEACTIVATION));var n=t.cssClasses,i=n.ROOT,r=n.UNBOUNDED;requestAnimationFrame((function(){e.adapter.removeClass(i),e.adapter.removeClass(r),e.removeCssVars()}))}this.deregisterRootHandlers(),this.deregisterDeactivationHandlers()},t.prototype.activate=function(e){this.activateImpl(e)},t.prototype.deactivate=function(){this.deactivateImpl()},t.prototype.layout=function(){var e=this;this.layoutFrame&&cancelAnimationFrame(this.layoutFrame),this.layoutFrame=requestAnimationFrame((function(){e.layoutInternal(),e.layoutFrame=0}))},t.prototype.setUnbounded=function(e){var n=t.cssClasses.UNBOUNDED;e?this.adapter.addClass(n):this.adapter.removeClass(n)},t.prototype.handleFocus=function(){var e=this;requestAnimationFrame((function(){return e.adapter.addClass(t.cssClasses.BG_FOCUSED)}))},t.prototype.handleBlur=function(){var e=this;requestAnimationFrame((function(){return e.adapter.removeClass(t.cssClasses.BG_FOCUSED)}))},t.prototype.supportsPressRipple=function(){return this.adapter.browserSupportsCssVars()},t.prototype.defaultActivationState=function(){return{activationEvent:void 0,hasDeactivationUXRun:!1,isActivated:!1,isProgrammatic:!1,wasActivatedByPointer:!1,wasElementMadeActive:!1}},t.prototype.registerRootHandlers=function(e){var t,n;if(e){try{for(var i=Dc(lf),r=i.next();!r.done;r=i.next()){var s=r.value;this.adapter.registerInteractionHandler(s,this.activateHandler)}}catch(a){t={error:a}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}this.adapter.isUnbounded()&&this.adapter.registerResizeHandler(this.resizeHandler)}this.adapter.registerInteractionHandler("focus",this.focusHandler),this.adapter.registerInteractionHandler("blur",this.blurHandler)},t.prototype.registerDeactivationHandlers=function(e){var t,n;if("keydown"===e.type)this.adapter.registerInteractionHandler("keyup",this.deactivateHandler);else try{for(var i=Dc(cf),r=i.next();!r.done;r=i.next()){var s=r.value;this.adapter.registerDocumentInteractionHandler(s,this.deactivateHandler)}}catch(a){t={error:a}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}},t.prototype.deregisterRootHandlers=function(){var e,t;try{for(var n=Dc(lf),i=n.next();!i.done;i=n.next()){var r=i.value;this.adapter.deregisterInteractionHandler(r,this.activateHandler)}}catch(s){e={error:s}}finally{try{i&&!i.done&&(t=n.return)&&t.call(n)}finally{if(e)throw e.error}}this.adapter.deregisterInteractionHandler("focus",this.focusHandler),this.adapter.deregisterInteractionHandler("blur",this.blurHandler),this.adapter.isUnbounded()&&this.adapter.deregisterResizeHandler(this.resizeHandler)},t.prototype.deregisterDeactivationHandlers=function(){var e,t;this.adapter.deregisterInteractionHandler("keyup",this.deactivateHandler);try{for(var n=Dc(cf),i=n.next();!i.done;i=n.next()){var r=i.value;this.adapter.deregisterDocumentInteractionHandler(r,this.deactivateHandler)}}catch(s){e={error:s}}finally{try{i&&!i.done&&(t=n.return)&&t.call(n)}finally{if(e)throw e.error}}},t.prototype.removeCssVars=function(){var e=this,n=t.strings;Object.keys(n).forEach((function(t){0===t.indexOf("VAR_")&&e.adapter.updateCssVariable(n[t],null)}))},t.prototype.activateImpl=function(e){var t=this;if(!this.adapter.isSurfaceDisabled()){var n=this.activationState;if(!n.isActivated){var i=this.previousActivationEvent;if(!(i&&void 0!==e&&i.type!==e.type))n.isActivated=!0,n.isProgrammatic=void 0===e,n.activationEvent=e,n.wasActivatedByPointer=!n.isProgrammatic&&(void 0!==e&&("mousedown"===e.type||"touchstart"===e.type||"pointerdown"===e.type)),void 0!==e&&uf.length>0&&uf.some((function(e){return t.adapter.containsEventTarget(e)}))?this.resetActivationState():(void 0!==e&&(uf.push(e.target),this.registerDeactivationHandlers(e)),n.wasElementMadeActive=this.checkElementMadeActive(e),n.wasElementMadeActive&&this.animateActivation(),requestAnimationFrame((function(){uf=[],n.wasElementMadeActive||void 0===e||" "!==e.key&&32!==e.keyCode||(n.wasElementMadeActive=t.checkElementMadeActive(e),n.wasElementMadeActive&&t.animateActivation()),n.wasElementMadeActive||(t.activationState=t.defaultActivationState())})))}}},t.prototype.checkElementMadeActive=function(e){return void 0===e||"keydown"!==e.type||this.adapter.isSurfaceActive()},t.prototype.animateActivation=function(){var e=this,n=t.strings,i=n.VAR_FG_TRANSLATE_START,r=n.VAR_FG_TRANSLATE_END,s=t.cssClasses,a=s.FG_DEACTIVATION,o=s.FG_ACTIVATION,l=t.numbers.DEACTIVATION_TIMEOUT_MS;this.layoutInternal();var c="",u="";if(!this.adapter.isUnbounded()){var d=this.getFgTranslationCoordinates(),h=d.startPoint,p=d.endPoint;c=h.x+"px, "+h.y+"px",u=p.x+"px, "+p.y+"px"}this.adapter.updateCssVariable(i,c),this.adapter.updateCssVariable(r,u),clearTimeout(this.activationTimer),clearTimeout(this.fgDeactivationRemovalTimer),this.rmBoundedActivationClasses(),this.adapter.removeClass(a),this.adapter.computeBoundingRect(),this.adapter.addClass(o),this.activationTimer=setTimeout((function(){e.activationTimerCallback()}),l)},t.prototype.getFgTranslationCoordinates=function(){var e,t=this.activationState,n=t.activationEvent;return{startPoint:e={x:(e=t.wasActivatedByPointer?function(e,t,n){if(!e)return{x:0,y:0};var i,r,s=t.x,a=t.y,o=s+n.left,l=a+n.top;if("touchstart"===e.type){var c=e;i=c.changedTouches[0].pageX-o,r=c.changedTouches[0].pageY-l}else{var u=e;i=u.pageX-o,r=u.pageY-l}return{x:i,y:r}}(n,this.adapter.getWindowPageOffset(),this.adapter.computeBoundingRect()):{x:this.frame.width/2,y:this.frame.height/2}).x-this.initialSize/2,y:e.y-this.initialSize/2},endPoint:{x:this.frame.width/2-this.initialSize/2,y:this.frame.height/2-this.initialSize/2}}},t.prototype.runDeactivationUXLogicIfReady=function(){var e=this,n=t.cssClasses.FG_DEACTIVATION,i=this.activationState,r=i.hasDeactivationUXRun,s=i.isActivated;(r||!s)&&this.activationAnimationHasEnded&&(this.rmBoundedActivationClasses(),this.adapter.addClass(n),this.fgDeactivationRemovalTimer=setTimeout((function(){e.adapter.removeClass(n)}),of.FG_DEACTIVATION_MS))},t.prototype.rmBoundedActivationClasses=function(){var e=t.cssClasses.FG_ACTIVATION;this.adapter.removeClass(e),this.activationAnimationHasEnded=!1,this.adapter.computeBoundingRect()},t.prototype.resetActivationState=function(){var e=this;this.previousActivationEvent=this.activationState.activationEvent,this.activationState=this.defaultActivationState(),setTimeout((function(){return e.previousActivationEvent=void 0}),t.numbers.TAP_DELAY_MS)},t.prototype.deactivateImpl=function(){var e=this,t=this.activationState;if(t.isActivated){var n=Lc({},t);t.isProgrammatic?(requestAnimationFrame((function(){e.animateDeactivation(n)})),this.resetActivationState()):(this.deregisterDeactivationHandlers(),requestAnimationFrame((function(){e.activationState.hasDeactivationUXRun=!0,e.animateDeactivation(n),e.resetActivationState()})))}},t.prototype.animateDeactivation=function(e){var t=e.wasActivatedByPointer,n=e.wasElementMadeActive;(t||n)&&this.runDeactivationUXLogicIfReady()},t.prototype.layoutInternal=function(){var e=this;this.frame=this.adapter.computeBoundingRect();var n=Math.max(this.frame.height,this.frame.width);this.maxRadius=this.adapter.isUnbounded()?n:Math.sqrt(Math.pow(e.frame.width,2)+Math.pow(e.frame.height,2))+t.numbers.PADDING;var i=Math.floor(n*t.numbers.INITIAL_ORIGIN_SCALE);this.adapter.isUnbounded()&&i%2!=0?this.initialSize=i-1:this.initialSize=i,this.fgScale=""+this.maxRadius/this.initialSize,this.updateLayoutCssVars()},t.prototype.updateLayoutCssVars=function(){var e=t.strings,n=e.VAR_FG_SIZE,i=e.VAR_LEFT,r=e.VAR_TOP,s=e.VAR_FG_SCALE;this.adapter.updateCssVariable(n,this.initialSize+"px"),this.adapter.updateCssVariable(s,this.fgScale),this.adapter.isUnbounded()&&(this.unboundedCoords={left:Math.round(this.frame.width/2-this.initialSize/2),top:Math.round(this.frame.height/2-this.initialSize/2)},this.adapter.updateCssVariable(i,this.unboundedCoords.left+"px"),this.adapter.updateCssVariable(r,this.unboundedCoords.top+"px"))},t}(Zp),hf=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.disabled=!1,t}return Pc(t,e),t.attachTo=function(e,n){void 0===n&&(n={isUnbounded:void 0});var i=new t(e);return void 0!==n.isUnbounded&&(i.unbounded=n.isUnbounded),i},t.createAdapter=function(e){return{addClass:function(t){return e.root.classList.add(t)},browserSupportsCssVars:function(){return function(e,t){void 0===t&&(t=!1);var n,i=e.CSS;if("boolean"==typeof Jp&&!t)return Jp;if(!i||"function"!=typeof i.supports)return!1;var r=i.supports("--css-vars","yes"),s=i.supports("(--css-vars: yes)")&&i.supports("color","#00000000");return n=r||s,t||(Jp=n),n}(window)},computeBoundingRect:function(){return e.root.getBoundingClientRect()},containsEventTarget:function(t){return e.root.contains(t)},deregisterDocumentInteractionHandler:function(e,t){return document.documentElement.removeEventListener(e,t,tf())},deregisterInteractionHandler:function(t,n){return e.root.removeEventListener(t,n,tf())},deregisterResizeHandler:function(e){return window.removeEventListener("resize",e)},getWindowPageOffset:function(){return{x:window.pageXOffset,y:window.pageYOffset}},isSurfaceActive:function(){return rf(e.root,":active")},isSurfaceDisabled:function(){return Boolean(e.disabled)},isUnbounded:function(){return Boolean(e.unbounded)},registerDocumentInteractionHandler:function(e,t){return document.documentElement.addEventListener(e,t,tf())},registerInteractionHandler:function(t,n){return e.root.addEventListener(t,n,tf())},registerResizeHandler:function(e){return window.addEventListener("resize",e)},removeClass:function(t){return e.root.classList.remove(t)},updateCssVariable:function(t,n){return e.root.style.setProperty(t,n)}}},Object.defineProperty(t.prototype,"unbounded",{get:function(){return Boolean(this.isUnbounded)},set:function(e){this.isUnbounded=Boolean(e),this.setUnbounded()},enumerable:!1,configurable:!0}),t.prototype.activate=function(){this.foundation.activate()},t.prototype.deactivate=function(){this.foundation.deactivate()},t.prototype.layout=function(){this.foundation.layout()},t.prototype.getDefaultFoundation=function(){return new df(t.createAdapter(this))},t.prototype.initialSyncWithDOM=function(){var e=this.root;this.isUnbounded="mdcRippleIsUnbounded"in e.dataset},t.prototype.setUnbounded=function(){this.foundation.setUnbounded(Boolean(this.isUnbounded))},t}(ef);function pf(e,t,n){for(let i in n){let t=n[i];for(let n of Object.keys(e.attributes))t.length>=0?pf(e,null,t):t.setAttribute(n,e.attributes[n])}return n}function ff(e,t,n){return t.create("div",{style:"\r\n      position: absolute;\r\n      bottom: 0;\r\n      width: 100%;\r\n      height: 85px;\r\n      background-color: var(--navbar);\r\n      overflow-x: scroll;\r\n      "},t.create(gf,{navbarname:"main"},t.create(mf,{selfid:"home",buttonlabel:"Home",icon:"home"}),t.create(pf,{attributes:{"x-transition.duration.250ms":""}},t.create("div",{"x-show":"Object.keys(currentprogram).length > 0"},t.create(mf,{selfid:"series",buttonlabel:"Series",icon:"movie"}))),t.create(pf,{attributes:{"x-transition.duration.250ms":""}},t.create("div",{"x-show":"selectedvideo.selected"},t.create(mf,{selfid:"watch",buttonlabel:"Watch",icon:"movie"}))),t.create(mf,{selfid:"settings",buttonlabel:"Settings",icon:"settings"}),t.create("div",{"x-show":"auth.loggedIn && (auth.email == 'tengames.dev.id@gmail.com' || auth.email == 'muhammadfadhlan4@gmail.com')"},t.create(mf,{selfid:"thatnerdlabs",buttonlabel:"Labs",icon:"science"}))))}function mf(e,t,n){let i=t.create("div",{style:"\r\n                                border: 0px solid rgba(var(--mdc-theme-primary-rgb),1);\r\n                                \r\n                                border-radius: 16px;\r\n                                min-width: 46px;\r\n                                display: flex;\r\n                                justify-content: center;\r\n\r\n                            ",class:"mdc-ripple-surface mdc-ripple-surface--accent","x-bind:style":`{'background-color': current == '${e.selfid}' ? 'rgba(var(--mdc-theme-primary-rgb), 0.3)' : 'rgba(var(--mdc-theme-primary-rgb), 0)'}`,"x-transition":!0},e.icon);return hf.attachTo(i),t.create("div",null,t.create("style",null,"\n          #parent{}\n        .child {}\n        "),t.create("div",{id:"parent",style:"\r\n                    padding:10px;\r\n                    margin-left:10px;\r\n                    margin-right:10px;\r\n                    margin-top:5px;\r\n                ","x-on:click":`() => {\n          $store.uiData.page = '${e.selfid}'\n          current = '${e.selfid}'\n        }`},t.create("div",{class:"child"},t.create("span",{class:"material-icons",style:"\r\n                            width: 100%;\r\n                            height: 100%;\r\n                            \r\n                        "},t.create("div",{style:"\r\n                                text-align: center;\r\n                                display: flex;\r\n                                justify-content: center;\r\n                                width: 100%;\r\n                            "},t.create("div",null,i)))),t.create("div",{class:"child",style:"\r\n                        width: 100%;\r\n                        text-align: center;\r\n                    "},e.buttonlabel)))}function gf(e,t,n){return t.create("div",{"x-data":`{\n        navbarname: '${e.navbarname}',\n        current: $store.uiData.navbars['${e.navbarname}'],\n        setCurrent: (newState) => { this.current = newState },\n      }`,"x-init":`$watch('current', v => $store.uiData.navbars['${e.navbarname}'] = v); $watch('$store.uiData.navbars[\\'${e.navbarname}\\']', v => current = v);`,style:'\n        display:flex;\n        width: 100%;\n        justify-content: center;\n        .row:after {\n        content: "";\n        display: table;\n        clear: both;\n        }\n      ',class:"row"},t.create("style",null,'\n        .column {\n        float: left;\n        width: 50%;\n        }\n\n        /* Clear floats after the columns */\n        .row:after {\n        content: "";\n        display: table;\n        clear: both;\n        }\n      '),n)}function yf(e,t,n){let i=t.create("div",{"x-show":`$store.uiData.page == '${e.page}'`},n);return i.setAttribute("x-transition.duration.500ms",""),t.create(t.fragment,null,t.create("style",null,"\n           .container_row   {\n             display: grid;\n            }\n        \n            .layerX, .layer2{\n            grid-column: 1;\n            grid-row: 1;\n            }\n           "),i)}function _f(e,t,n){return t.create("div",{class:"container_row"},n)}function vf(e,t,n){for(let i of n)e.func(i);return n}function bf(e,t,n){let i=[];for(let r of n)i.push(e.pureFunc(r));return i}function Tf(e,t,n){return t.create("div",{style:"\r\n        width: fit-content;\r\n    "},t.create(vf,{func:e=>{hf.attachTo(e)}},t.create("button",{class:`${""==e.type?"":"mdc-button"} mdc-button${e.type||""}`},t.create("div",{class:"mdc-button__ripple"}),t.create("span",{class:"mdc-button__label"},e.label))))}function Ef(e,t,n){return t.create("div",{_content:`\n            <center>\n                ${t.create(bf,{pureFunc:e=>e.outerHTML},...n)}\n            </center>\n        `})}function wf(e){for(var t=0,n=0;n<e.length;n++){t=(t<<5)-t+e.charCodeAt(n),t&=t}return t}function Sf(e){let t=wf(e.toString());return null==window.LinkedFunctions&&(window.LinkedFunctions={}),window.LinkedFunctions[t]=e,`window['LinkedFunctions']['${t}'].bind(scope).bind(this)()`}function Cf(e){let t=wf(e.toString());return null==window.LinkedFunctions&&(window.LinkedFunctions={}),window.LinkedFunctions[t]=e,`window['LinkedFunctions']['${t}'].bind(scope).bind(this)().outerHTML`}function If(e,t,n){return t.create("div",{style:"\n      overflow-y: scroll;\n      height: calc(calc(var(--vh, 1vh) * 100) - 90px);\n    "},t.create("h2",{style:"\n         padding: 10px\n        "},"Featured Programme"),t.create("div",{style:"\n          height: 10px;\n          width: calc(100% - 20px);\n          background-color: var(--mdc-theme-secondary);\n          margin-left: 10px;\n          margin-right: 10px;\n          border-radius: 2.5px;\n        "}),t.create("div",{_content:`\n      <template x-for="item in programmes.data">\n          ${t.create("div",{style:"\n          width: calc(100% - 20px);\n          margin-left: 10px;\n          margin-right: 10px;\n          justify-content: center;\n        ","x-show":"item.featured"},t.create(Ef,null,t.create("img",{style:"\n\n            height: 200px;\n            margin-top: 10px;\n          ","x-bind:src":"item.imageurl"})),t.create(Ef,null,t.create("div",{style:"\n            font-family: BlinkMacSystemFont,-apple-system,'Segoe UI',Roboto,Oxygen,Ubuntu,Cantarell,'Fira Sans','Droid Sans','Helvetica Neue',Helvetica,Arial,sans-serif;\n            font-size: 2em;\n            margin-bottom: 5px;\n            ","x-text":"item.title"},"Featured programme")),t.create(Ef,null,t.create("div",{"x-on:click":Sf((function(){this.currentprogram=this.item,this.currentselected=(this.item.serieses||[])[0]||{},this.$store.uiData.navbars.main="series",this.$store.uiData.page="series"}))},t.create(Tf,{label:"watch now",type:"--raised"})))).outerHTML}\n        </template>\n        `}),t.create("div",{style:"\n          height: 10px;\n          width: calc(100% - 20px);\n          background-color: var(--mdc-theme-secondary);\n          margin-top: 10px;\n          margin-left: 10px;\n          margin-right: 10px;\n          border-radius: 2.5px;\n\n        "}),t.create("div",{_content:`\n      <template x-for="item in programmes.data">\n          ${t.create("div",{style:"\n          width: calc(100% - 20px);\n          margin-left: 10px;\n          margin-right: 10px;\n          justify-content: center;\n        ","x-show":"!item.featured"},t.create("div",{style:"\n                            display:flex\n                            "},t.create("img",{style:"\n                          width: 150px;\n                          height: 150px;\n                          margin-top: 10px;\n                        ","x-bind:src":"item.imageurl"}),t.create("div",{style:"\n                                height: 100%;\n                                display: block;\n                              "},t.create("div",{style:"\n                          font-family: BlinkMacSystemFont,-apple-system,'Segoe UI',Roboto,Oxygen,Ubuntu,Cantarell,'Fira Sans','Droid Sans','Helvetica Neue',Helvetica,Arial,sans-serif;\n                          font-size: 2em;\n                          margin-left: 10px;\n                          margin-bottom: 5px;\n                          ","x-text":"item.title"},"Southeast Gear"),t.create("div",{style:"\n                                  margin-left: 10px;\n                                  float: bottom;\n                                "},t.create("div",{"x-on:click":Sf((function(){this.currentprogram=this.item,this.currentselected=(this.item.serieses||[])[0]||{},this.$store.uiData.navbars.main="series",this.$store.uiData.page="series"}))},t.create(Tf,{label:"Watch now",type:"--raised"})))))).outerHTML}\n        </template>\n        `}))}var xf={animation:{prefixed:"-webkit-animation",standard:"animation"},transform:{prefixed:"-webkit-transform",standard:"transform"},transition:{prefixed:"-webkit-transition",standard:"transition"}},kf={animationend:{cssProperty:"animation",prefixed:"webkitAnimationEnd",standard:"animationend"},animationiteration:{cssProperty:"animation",prefixed:"webkitAnimationIteration",standard:"animationiteration"},animationstart:{cssProperty:"animation",prefixed:"webkitAnimationStart",standard:"animationstart"},transitionend:{cssProperty:"transition",prefixed:"webkitTransitionEnd",standard:"transitionend"}};function Af(e){return Boolean(e.document)&&"function"==typeof e.document.createElement}function Of(e,t){if(Af(e)&&t in xf){var n=e.document.createElement("div"),i=xf[t],r=i.standard,s=i.prefixed;return r in n.style?r:s}return t}function Pf(e,t){if(Af(e)&&t in kf){var n=e.document.createElement("div"),i=kf[t],r=i.standard,s=i.prefixed;return i.cssProperty in n.style?r:s}return t}var Lf={CLOSED_CLASS:"mdc-linear-progress--closed",CLOSED_ANIMATION_OFF_CLASS:"mdc-linear-progress--closed-animation-off",INDETERMINATE_CLASS:"mdc-linear-progress--indeterminate",REVERSED_CLASS:"mdc-linear-progress--reversed",ANIMATION_READY_CLASS:"mdc-linear-progress--animation-ready"},Nf={ARIA_HIDDEN:"aria-hidden",ARIA_VALUEMAX:"aria-valuemax",ARIA_VALUEMIN:"aria-valuemin",ARIA_VALUENOW:"aria-valuenow",BUFFER_BAR_SELECTOR:".mdc-linear-progress__buffer-bar",FLEX_BASIS:"flex-basis",PRIMARY_BAR_SELECTOR:".mdc-linear-progress__primary-bar"},Df=.8367142,Rf=2.00611057,Mf=.37651913,Ff=.84386165,Uf=1.60277782,Bf=function(e){function t(n){var i=e.call(this,Lc(Lc({},t.defaultAdapter),n))||this;return i.observer=null,i}return Pc(t,e),Object.defineProperty(t,"cssClasses",{get:function(){return Lf},enumerable:!1,configurable:!0}),Object.defineProperty(t,"strings",{get:function(){return Nf},enumerable:!1,configurable:!0}),Object.defineProperty(t,"defaultAdapter",{get:function(){return{addClass:function(){},attachResizeObserver:function(){return null},forceLayout:function(){},getWidth:function(){return 0},hasClass:function(){return!1},setBufferBarStyle:function(){return null},setPrimaryBarStyle:function(){return null},setStyle:function(){},removeAttribute:function(){},removeClass:function(){},setAttribute:function(){}}},enumerable:!1,configurable:!0}),t.prototype.init=function(){var e=this;this.determinate=!this.adapter.hasClass(Lf.INDETERMINATE_CLASS),this.adapter.addClass(Lf.ANIMATION_READY_CLASS),this.progress=0,this.buffer=1,this.observer=this.adapter.attachResizeObserver((function(t){var n,i;if(!e.determinate)try{for(var r=Dc(t),s=r.next();!s.done;s=r.next()){var a=s.value;a.contentRect&&e.calculateAndSetDimensions(a.contentRect.width)}}catch(o){n={error:o}}finally{try{s&&!s.done&&(i=r.return)&&i.call(r)}finally{if(n)throw n.error}}})),!this.determinate&&this.observer&&this.calculateAndSetDimensions(this.adapter.getWidth())},t.prototype.setDeterminate=function(e){if(this.determinate=e,this.determinate)return this.adapter.removeClass(Lf.INDETERMINATE_CLASS),this.adapter.setAttribute(Nf.ARIA_VALUENOW,this.progress.toString()),this.adapter.setAttribute(Nf.ARIA_VALUEMAX,"1"),this.adapter.setAttribute(Nf.ARIA_VALUEMIN,"0"),this.setPrimaryBarProgress(this.progress),void this.setBufferBarProgress(this.buffer);this.observer&&this.calculateAndSetDimensions(this.adapter.getWidth()),this.adapter.addClass(Lf.INDETERMINATE_CLASS),this.adapter.removeAttribute(Nf.ARIA_VALUENOW),this.adapter.removeAttribute(Nf.ARIA_VALUEMAX),this.adapter.removeAttribute(Nf.ARIA_VALUEMIN),this.setPrimaryBarProgress(1),this.setBufferBarProgress(1)},t.prototype.isDeterminate=function(){return this.determinate},t.prototype.setProgress=function(e){this.progress=e,this.determinate&&(this.setPrimaryBarProgress(e),this.adapter.setAttribute(Nf.ARIA_VALUENOW,e.toString()))},t.prototype.getProgress=function(){return this.progress},t.prototype.setBuffer=function(e){this.buffer=e,this.determinate&&this.setBufferBarProgress(e)},t.prototype.getBuffer=function(){return this.buffer},t.prototype.open=function(){this.adapter.removeClass(Lf.CLOSED_CLASS),this.adapter.removeClass(Lf.CLOSED_ANIMATION_OFF_CLASS),this.adapter.removeAttribute(Nf.ARIA_HIDDEN)},t.prototype.close=function(){this.adapter.addClass(Lf.CLOSED_CLASS),this.adapter.setAttribute(Nf.ARIA_HIDDEN,"true")},t.prototype.isClosed=function(){return this.adapter.hasClass(Lf.CLOSED_CLASS)},t.prototype.handleTransitionEnd=function(){this.adapter.hasClass(Lf.CLOSED_CLASS)&&this.adapter.addClass(Lf.CLOSED_ANIMATION_OFF_CLASS)},t.prototype.destroy=function(){e.prototype.destroy.call(this),this.observer&&this.observer.disconnect()},t.prototype.restartAnimation=function(){this.adapter.removeClass(Lf.ANIMATION_READY_CLASS),this.adapter.forceLayout(),this.adapter.addClass(Lf.ANIMATION_READY_CLASS)},t.prototype.setPrimaryBarProgress=function(e){var t="scaleX("+e+")",n="undefined"!=typeof window?Of(window,"transform"):"transform";this.adapter.setPrimaryBarStyle(n,t)},t.prototype.setBufferBarProgress=function(e){var t=100*e+"%";this.adapter.setBufferBarStyle(Nf.FLEX_BASIS,t)},t.prototype.calculateAndSetDimensions=function(e){var t=e*Df,n=e*Rf,i=e*Mf,r=e*Ff,s=e*Uf;this.adapter.setStyle("--mdc-linear-progress-primary-half",t+"px"),this.adapter.setStyle("--mdc-linear-progress-primary-half-neg",-t+"px"),this.adapter.setStyle("--mdc-linear-progress-primary-full",n+"px"),this.adapter.setStyle("--mdc-linear-progress-primary-full-neg",-n+"px"),this.adapter.setStyle("--mdc-linear-progress-secondary-quarter",i+"px"),this.adapter.setStyle("--mdc-linear-progress-secondary-quarter-neg",-i+"px"),this.adapter.setStyle("--mdc-linear-progress-secondary-half",r+"px"),this.adapter.setStyle("--mdc-linear-progress-secondary-half-neg",-r+"px"),this.adapter.setStyle("--mdc-linear-progress-secondary-full",s+"px"),this.adapter.setStyle("--mdc-linear-progress-secondary-full-neg",-s+"px"),this.restartAnimation()},t}(Zp),jf=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Pc(t,e),t.attachTo=function(e){return new t(e)},Object.defineProperty(t.prototype,"determinate",{set:function(e){this.foundation.setDeterminate(e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"progress",{set:function(e){this.foundation.setProgress(e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"buffer",{set:function(e){this.foundation.setBuffer(e)},enumerable:!1,configurable:!0}),t.prototype.open=function(){this.foundation.open()},t.prototype.close=function(){this.foundation.close()},t.prototype.initialSyncWithDOM=function(){var e=this;this.root.addEventListener("transitionend",(function(){e.foundation.handleTransitionEnd()}))},t.prototype.getDefaultFoundation=function(){var e=this,t={addClass:function(t){e.root.classList.add(t)},forceLayout:function(){e.root.getBoundingClientRect()},setBufferBarStyle:function(t,n){var i=e.root.querySelector(Bf.strings.BUFFER_BAR_SELECTOR);i&&i.style.setProperty(t,n)},setPrimaryBarStyle:function(t,n){var i=e.root.querySelector(Bf.strings.PRIMARY_BAR_SELECTOR);i&&i.style.setProperty(t,n)},hasClass:function(t){return e.root.classList.contains(t)},removeAttribute:function(t){e.root.removeAttribute(t)},removeClass:function(t){e.root.classList.remove(t)},setAttribute:function(t,n){e.root.setAttribute(t,n)},setStyle:function(t,n){e.root.style.setProperty(t,n)},attachResizeObserver:function(t){var n=window.ResizeObserver;if(n){var i=new n(t);return i.observe(e.root),i}return null},getWidth:function(){return e.root.offsetWidth}};return new Bf(t)},t}(ef);function qf(e,t,n){return t.create(vf,{func:e=>{new jf(e).determinate=!1}},t.create("div",{class:"mdc-linear-progress mdc-linear-progress--indeterminate","aria-label":"Example Progress Bar","aria-valuemin":"0","aria-valuemax":"1","aria-valuenow":"0.3"},t.create("div",{class:"mdc-linear-progress__buffer"},t.create("div",{class:"mdc-linear-progress__buffer-bar"}),t.create("div",{class:"mdc-linear-progress__buffer-dots"})),t.create("div",{class:"mdc-linear-progress__bar mdc-linear-progress__primary-bar"},t.create("span",{class:"mdc-linear-progress__bar-inner"})),t.create("div",{class:"mdc-linear-progress__bar mdc-linear-progress__secondary-bar"},t.create("span",{class:"mdc-linear-progress__bar-inner"}))))}var Hf={LABEL_FLOAT_ABOVE:"mdc-floating-label--float-above",LABEL_REQUIRED:"mdc-floating-label--required",LABEL_SHAKE:"mdc-floating-label--shake",ROOT:"mdc-floating-label"},Vf=function(e){function t(n){var i=e.call(this,Lc(Lc({},t.defaultAdapter),n))||this;return i.shakeAnimationEndHandler=function(){i.handleShakeAnimationEnd()},i}return Pc(t,e),Object.defineProperty(t,"cssClasses",{get:function(){return Hf},enumerable:!1,configurable:!0}),Object.defineProperty(t,"defaultAdapter",{get:function(){return{addClass:function(){},removeClass:function(){},getWidth:function(){return 0},registerInteractionHandler:function(){},deregisterInteractionHandler:function(){}}},enumerable:!1,configurable:!0}),t.prototype.init=function(){this.adapter.registerInteractionHandler("animationend",this.shakeAnimationEndHandler)},t.prototype.destroy=function(){this.adapter.deregisterInteractionHandler("animationend",this.shakeAnimationEndHandler)},t.prototype.getWidth=function(){return this.adapter.getWidth()},t.prototype.shake=function(e){var n=t.cssClasses.LABEL_SHAKE;e?this.adapter.addClass(n):this.adapter.removeClass(n)},t.prototype.float=function(e){var n=t.cssClasses,i=n.LABEL_FLOAT_ABOVE,r=n.LABEL_SHAKE;e?this.adapter.addClass(i):(this.adapter.removeClass(i),this.adapter.removeClass(r))},t.prototype.setRequired=function(e){var n=t.cssClasses.LABEL_REQUIRED;e?this.adapter.addClass(n):this.adapter.removeClass(n)},t.prototype.handleShakeAnimationEnd=function(){var e=t.cssClasses.LABEL_SHAKE;this.adapter.removeClass(e)},t}(Zp),$f=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Pc(t,e),t.attachTo=function(e){return new t(e)},t.prototype.shake=function(e){this.foundation.shake(e)},t.prototype.float=function(e){this.foundation.float(e)},t.prototype.setRequired=function(e){this.foundation.setRequired(e)},t.prototype.getWidth=function(){return this.foundation.getWidth()},t.prototype.getDefaultFoundation=function(){var e=this,t={addClass:function(t){return e.root.classList.add(t)},removeClass:function(t){return e.root.classList.remove(t)},getWidth:function(){return function(e){var t=e;if(null!==t.offsetParent)return t.scrollWidth;var n=t.cloneNode(!0);n.style.setProperty("position","absolute"),n.style.setProperty("transform","translate(-9999px, -9999px)"),document.documentElement.appendChild(n);var i=n.scrollWidth;return document.documentElement.removeChild(n),i}(e.root)},registerInteractionHandler:function(t,n){return e.listen(t,n)},deregisterInteractionHandler:function(t,n){return e.unlisten(t,n)}};return new Vf(t)},t}(ef),Wf={LINE_RIPPLE_ACTIVE:"mdc-line-ripple--active",LINE_RIPPLE_DEACTIVATING:"mdc-line-ripple--deactivating"},zf=function(e){function t(n){var i=e.call(this,Lc(Lc({},t.defaultAdapter),n))||this;return i.transitionEndHandler=function(e){i.handleTransitionEnd(e)},i}return Pc(t,e),Object.defineProperty(t,"cssClasses",{get:function(){return Wf},enumerable:!1,configurable:!0}),Object.defineProperty(t,"defaultAdapter",{get:function(){return{addClass:function(){},removeClass:function(){},hasClass:function(){return!1},setStyle:function(){},registerEventHandler:function(){},deregisterEventHandler:function(){}}},enumerable:!1,configurable:!0}),t.prototype.init=function(){this.adapter.registerEventHandler("transitionend",this.transitionEndHandler)},t.prototype.destroy=function(){this.adapter.deregisterEventHandler("transitionend",this.transitionEndHandler)},t.prototype.activate=function(){this.adapter.removeClass(Wf.LINE_RIPPLE_DEACTIVATING),this.adapter.addClass(Wf.LINE_RIPPLE_ACTIVE)},t.prototype.setRippleCenter=function(e){this.adapter.setStyle("transform-origin",e+"px center")},t.prototype.deactivate=function(){this.adapter.addClass(Wf.LINE_RIPPLE_DEACTIVATING)},t.prototype.handleTransitionEnd=function(e){var t=this.adapter.hasClass(Wf.LINE_RIPPLE_DEACTIVATING);"opacity"===e.propertyName&&t&&(this.adapter.removeClass(Wf.LINE_RIPPLE_ACTIVE),this.adapter.removeClass(Wf.LINE_RIPPLE_DEACTIVATING))},t}(Zp),Gf=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Pc(t,e),t.attachTo=function(e){return new t(e)},t.prototype.activate=function(){this.foundation.activate()},t.prototype.deactivate=function(){this.foundation.deactivate()},t.prototype.setRippleCenter=function(e){this.foundation.setRippleCenter(e)},t.prototype.getDefaultFoundation=function(){var e=this,t={addClass:function(t){return e.root.classList.add(t)},removeClass:function(t){return e.root.classList.remove(t)},hasClass:function(t){return e.root.classList.contains(t)},setStyle:function(t,n){return e.root.style.setProperty(t,n)},registerEventHandler:function(t,n){return e.listen(t,n)},deregisterEventHandler:function(t,n){return e.unlisten(t,n)}};return new zf(t)},t}(ef),Kf={NOTCH_ELEMENT_SELECTOR:".mdc-notched-outline__notch"},Xf={NOTCH_ELEMENT_PADDING:8},Yf={NO_LABEL:"mdc-notched-outline--no-label",OUTLINE_NOTCHED:"mdc-notched-outline--notched",OUTLINE_UPGRADED:"mdc-notched-outline--upgraded"},Qf=function(e){function t(n){return e.call(this,Lc(Lc({},t.defaultAdapter),n))||this}return Pc(t,e),Object.defineProperty(t,"strings",{get:function(){return Kf},enumerable:!1,configurable:!0}),Object.defineProperty(t,"cssClasses",{get:function(){return Yf},enumerable:!1,configurable:!0}),Object.defineProperty(t,"numbers",{get:function(){return Xf},enumerable:!1,configurable:!0}),Object.defineProperty(t,"defaultAdapter",{get:function(){return{addClass:function(){},removeClass:function(){},setNotchWidthProperty:function(){},removeNotchWidthProperty:function(){}}},enumerable:!1,configurable:!0}),t.prototype.notch=function(e){var n=t.cssClasses.OUTLINE_NOTCHED;e>0&&(e+=Xf.NOTCH_ELEMENT_PADDING),this.adapter.setNotchWidthProperty(e),this.adapter.addClass(n)},t.prototype.closeNotch=function(){var e=t.cssClasses.OUTLINE_NOTCHED;this.adapter.removeClass(e),this.adapter.removeNotchWidthProperty()},t}(Zp),Jf=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Pc(t,e),t.attachTo=function(e){return new t(e)},t.prototype.initialSyncWithDOM=function(){this.notchElement=this.root.querySelector(Kf.NOTCH_ELEMENT_SELECTOR);var e=this.root.querySelector("."+Vf.cssClasses.ROOT);e?(e.style.transitionDuration="0s",this.root.classList.add(Yf.OUTLINE_UPGRADED),requestAnimationFrame((function(){e.style.transitionDuration=""}))):this.root.classList.add(Yf.NO_LABEL)},t.prototype.notch=function(e){this.foundation.notch(e)},t.prototype.closeNotch=function(){this.foundation.closeNotch()},t.prototype.getDefaultFoundation=function(){var e=this;return new Qf({addClass:function(t){return e.root.classList.add(t)},removeClass:function(t){return e.root.classList.remove(t)},setNotchWidthProperty:function(t){e.notchElement.style.setProperty("width",t+"px")},removeNotchWidthProperty:function(){e.notchElement.style.removeProperty("width")}})},t}(ef),Zf={ROOT:"mdc-text-field-character-counter"},em={ROOT_SELECTOR:"."+Zf.ROOT},tm=function(e){function t(n){return e.call(this,Lc(Lc({},t.defaultAdapter),n))||this}return Pc(t,e),Object.defineProperty(t,"cssClasses",{get:function(){return Zf},enumerable:!1,configurable:!0}),Object.defineProperty(t,"strings",{get:function(){return em},enumerable:!1,configurable:!0}),Object.defineProperty(t,"defaultAdapter",{get:function(){return{setContent:function(){}}},enumerable:!1,configurable:!0}),t.prototype.setCounterValue=function(e,t){e=Math.min(e,t),this.adapter.setContent(e+" / "+t)},t}(Zp),nm=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Pc(t,e),t.attachTo=function(e){return new t(e)},Object.defineProperty(t.prototype,"foundationForTextField",{get:function(){return this.foundation},enumerable:!1,configurable:!0}),t.prototype.getDefaultFoundation=function(){var e=this;return new tm({setContent:function(t){e.root.textContent=t}})},t}(ef),im={ARIA_CONTROLS:"aria-controls",ARIA_DESCRIBEDBY:"aria-describedby",INPUT_SELECTOR:".mdc-text-field__input",LABEL_SELECTOR:".mdc-floating-label",LEADING_ICON_SELECTOR:".mdc-text-field__icon--leading",LINE_RIPPLE_SELECTOR:".mdc-line-ripple",OUTLINE_SELECTOR:".mdc-notched-outline",PREFIX_SELECTOR:".mdc-text-field__affix--prefix",SUFFIX_SELECTOR:".mdc-text-field__affix--suffix",TRAILING_ICON_SELECTOR:".mdc-text-field__icon--trailing"},rm={DISABLED:"mdc-text-field--disabled",FOCUSED:"mdc-text-field--focused",HELPER_LINE:"mdc-text-field-helper-line",INVALID:"mdc-text-field--invalid",LABEL_FLOATING:"mdc-text-field--label-floating",NO_LABEL:"mdc-text-field--no-label",OUTLINED:"mdc-text-field--outlined",ROOT:"mdc-text-field",TEXTAREA:"mdc-text-field--textarea",WITH_LEADING_ICON:"mdc-text-field--with-leading-icon",WITH_TRAILING_ICON:"mdc-text-field--with-trailing-icon",WITH_INTERNAL_COUNTER:"mdc-text-field--with-internal-counter"},sm={LABEL_SCALE:.75},am=["pattern","min","max","required","step","minlength","maxlength"],om=["color","date","datetime-local","month","range","time","week"],lm=["mousedown","touchstart"],cm=["click","keydown"],um=function(e){function t(n,i){void 0===i&&(i={});var r=e.call(this,Lc(Lc({},t.defaultAdapter),n))||this;return r.isFocused=!1,r.receivedUserInput=!1,r.valid=!0,r.useNativeValidation=!0,r.validateOnValueChange=!0,r.helperText=i.helperText,r.characterCounter=i.characterCounter,r.leadingIcon=i.leadingIcon,r.trailingIcon=i.trailingIcon,r.inputFocusHandler=function(){r.activateFocus()},r.inputBlurHandler=function(){r.deactivateFocus()},r.inputInputHandler=function(){r.handleInput()},r.setPointerXOffset=function(e){r.setTransformOrigin(e)},r.textFieldInteractionHandler=function(){r.handleTextFieldInteraction()},r.validationAttributeChangeHandler=function(e){r.handleValidationAttributeChange(e)},r}return Pc(t,e),Object.defineProperty(t,"cssClasses",{get:function(){return rm},enumerable:!1,configurable:!0}),Object.defineProperty(t,"strings",{get:function(){return im},enumerable:!1,configurable:!0}),Object.defineProperty(t,"numbers",{get:function(){return sm},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"shouldAlwaysFloat",{get:function(){var e=this.getNativeInput().type;return om.indexOf(e)>=0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"shouldFloat",{get:function(){return this.shouldAlwaysFloat||this.isFocused||!!this.getValue()||this.isBadInput()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"shouldShake",{get:function(){return!this.isFocused&&!this.isValid()&&!!this.getValue()},enumerable:!1,configurable:!0}),Object.defineProperty(t,"defaultAdapter",{get:function(){return{addClass:function(){},removeClass:function(){},hasClass:function(){return!0},setInputAttr:function(){},removeInputAttr:function(){},registerTextFieldInteractionHandler:function(){},deregisterTextFieldInteractionHandler:function(){},registerInputInteractionHandler:function(){},deregisterInputInteractionHandler:function(){},registerValidationAttributeChangeHandler:function(){return new MutationObserver((function(){}))},deregisterValidationAttributeChangeHandler:function(){},getNativeInput:function(){return null},isFocused:function(){return!1},activateLineRipple:function(){},deactivateLineRipple:function(){},setLineRippleTransformOrigin:function(){},shakeLabel:function(){},floatLabel:function(){},setLabelRequired:function(){},hasLabel:function(){return!1},getLabelWidth:function(){return 0},hasOutline:function(){return!1},notchOutline:function(){},closeOutline:function(){}}},enumerable:!1,configurable:!0}),t.prototype.init=function(){var e,t,n,i;this.adapter.hasLabel()&&this.getNativeInput().required&&this.adapter.setLabelRequired(!0),this.adapter.isFocused()?this.inputFocusHandler():this.adapter.hasLabel()&&this.shouldFloat&&(this.notchOutline(!0),this.adapter.floatLabel(!0),this.styleFloating(!0)),this.adapter.registerInputInteractionHandler("focus",this.inputFocusHandler),this.adapter.registerInputInteractionHandler("blur",this.inputBlurHandler),this.adapter.registerInputInteractionHandler("input",this.inputInputHandler);try{for(var r=Dc(lm),s=r.next();!s.done;s=r.next()){var a=s.value;this.adapter.registerInputInteractionHandler(a,this.setPointerXOffset)}}catch(c){e={error:c}}finally{try{s&&!s.done&&(t=r.return)&&t.call(r)}finally{if(e)throw e.error}}try{for(var o=Dc(cm),l=o.next();!l.done;l=o.next()){a=l.value;this.adapter.registerTextFieldInteractionHandler(a,this.textFieldInteractionHandler)}}catch(u){n={error:u}}finally{try{l&&!l.done&&(i=o.return)&&i.call(o)}finally{if(n)throw n.error}}this.validationObserver=this.adapter.registerValidationAttributeChangeHandler(this.validationAttributeChangeHandler),this.setcharacterCounter(this.getValue().length)},t.prototype.destroy=function(){var e,t,n,i;this.adapter.deregisterInputInteractionHandler("focus",this.inputFocusHandler),this.adapter.deregisterInputInteractionHandler("blur",this.inputBlurHandler),this.adapter.deregisterInputInteractionHandler("input",this.inputInputHandler);try{for(var r=Dc(lm),s=r.next();!s.done;s=r.next()){var a=s.value;this.adapter.deregisterInputInteractionHandler(a,this.setPointerXOffset)}}catch(c){e={error:c}}finally{try{s&&!s.done&&(t=r.return)&&t.call(r)}finally{if(e)throw e.error}}try{for(var o=Dc(cm),l=o.next();!l.done;l=o.next()){a=l.value;this.adapter.deregisterTextFieldInteractionHandler(a,this.textFieldInteractionHandler)}}catch(u){n={error:u}}finally{try{l&&!l.done&&(i=o.return)&&i.call(o)}finally{if(n)throw n.error}}this.adapter.deregisterValidationAttributeChangeHandler(this.validationObserver)},t.prototype.handleTextFieldInteraction=function(){var e=this.adapter.getNativeInput();e&&e.disabled||(this.receivedUserInput=!0)},t.prototype.handleValidationAttributeChange=function(e){var t=this;e.some((function(e){return am.indexOf(e)>-1&&(t.styleValidity(!0),t.adapter.setLabelRequired(t.getNativeInput().required),!0)})),e.indexOf("maxlength")>-1&&this.setcharacterCounter(this.getValue().length)},t.prototype.notchOutline=function(e){if(this.adapter.hasOutline()&&this.adapter.hasLabel())if(e){var t=this.adapter.getLabelWidth()*sm.LABEL_SCALE;this.adapter.notchOutline(t)}else this.adapter.closeOutline()},t.prototype.activateFocus=function(){this.isFocused=!0,this.styleFocused(this.isFocused),this.adapter.activateLineRipple(),this.adapter.hasLabel()&&(this.notchOutline(this.shouldFloat),this.adapter.floatLabel(this.shouldFloat),this.styleFloating(this.shouldFloat),this.adapter.shakeLabel(this.shouldShake)),!this.helperText||!this.helperText.isPersistent()&&this.helperText.isValidation()&&this.valid||this.helperText.showToScreenReader()},t.prototype.setTransformOrigin=function(e){if(!this.isDisabled()&&!this.adapter.hasOutline()){var t=e.touches,n=t?t[0]:e,i=n.target.getBoundingClientRect(),r=n.clientX-i.left;this.adapter.setLineRippleTransformOrigin(r)}},t.prototype.handleInput=function(){this.autoCompleteFocus(),this.setcharacterCounter(this.getValue().length)},t.prototype.autoCompleteFocus=function(){this.receivedUserInput||this.activateFocus()},t.prototype.deactivateFocus=function(){this.isFocused=!1,this.adapter.deactivateLineRipple();var e=this.isValid();this.styleValidity(e),this.styleFocused(this.isFocused),this.adapter.hasLabel()&&(this.notchOutline(this.shouldFloat),this.adapter.floatLabel(this.shouldFloat),this.styleFloating(this.shouldFloat),this.adapter.shakeLabel(this.shouldShake)),this.shouldFloat||(this.receivedUserInput=!1)},t.prototype.getValue=function(){return this.getNativeInput().value},t.prototype.setValue=function(e){if(this.getValue()!==e&&(this.getNativeInput().value=e),this.setcharacterCounter(e.length),this.validateOnValueChange){var t=this.isValid();this.styleValidity(t)}this.adapter.hasLabel()&&(this.notchOutline(this.shouldFloat),this.adapter.floatLabel(this.shouldFloat),this.styleFloating(this.shouldFloat),this.validateOnValueChange&&this.adapter.shakeLabel(this.shouldShake))},t.prototype.isValid=function(){return this.useNativeValidation?this.isNativeInputValid():this.valid},t.prototype.setValid=function(e){this.valid=e,this.styleValidity(e);var t=!e&&!this.isFocused&&!!this.getValue();this.adapter.hasLabel()&&this.adapter.shakeLabel(t)},t.prototype.setValidateOnValueChange=function(e){this.validateOnValueChange=e},t.prototype.getValidateOnValueChange=function(){return this.validateOnValueChange},t.prototype.setUseNativeValidation=function(e){this.useNativeValidation=e},t.prototype.isDisabled=function(){return this.getNativeInput().disabled},t.prototype.setDisabled=function(e){this.getNativeInput().disabled=e,this.styleDisabled(e)},t.prototype.setHelperTextContent=function(e){this.helperText&&this.helperText.setContent(e)},t.prototype.setLeadingIconAriaLabel=function(e){this.leadingIcon&&this.leadingIcon.setAriaLabel(e)},t.prototype.setLeadingIconContent=function(e){this.leadingIcon&&this.leadingIcon.setContent(e)},t.prototype.setTrailingIconAriaLabel=function(e){this.trailingIcon&&this.trailingIcon.setAriaLabel(e)},t.prototype.setTrailingIconContent=function(e){this.trailingIcon&&this.trailingIcon.setContent(e)},t.prototype.setcharacterCounter=function(e){if(this.characterCounter){var t=this.getNativeInput().maxLength;if(-1===t)throw new Error("MDCTextFieldFoundation: Expected maxlength html property on text input or textarea.");this.characterCounter.setCounterValue(e,t)}},t.prototype.isBadInput=function(){return this.getNativeInput().validity.badInput||!1},t.prototype.isNativeInputValid=function(){return this.getNativeInput().validity.valid},t.prototype.styleValidity=function(e){var n=t.cssClasses.INVALID;if(e?this.adapter.removeClass(n):this.adapter.addClass(n),this.helperText){if(this.helperText.setValidity(e),!this.helperText.isValidation())return;var i=this.helperText.isVisible(),r=this.helperText.getId();i&&r?this.adapter.setInputAttr(im.ARIA_DESCRIBEDBY,r):this.adapter.removeInputAttr(im.ARIA_DESCRIBEDBY)}},t.prototype.styleFocused=function(e){var n=t.cssClasses.FOCUSED;e?this.adapter.addClass(n):this.adapter.removeClass(n)},t.prototype.styleDisabled=function(e){var n=t.cssClasses,i=n.DISABLED,r=n.INVALID;e?(this.adapter.addClass(i),this.adapter.removeClass(r)):this.adapter.removeClass(i),this.leadingIcon&&this.leadingIcon.setDisabled(e),this.trailingIcon&&this.trailingIcon.setDisabled(e)},t.prototype.styleFloating=function(e){var n=t.cssClasses.LABEL_FLOATING;e?this.adapter.addClass(n):this.adapter.removeClass(n)},t.prototype.getNativeInput=function(){return(this.adapter?this.adapter.getNativeInput():null)||{disabled:!1,maxLength:-1,required:!1,type:"input",validity:{badInput:!1,valid:!0},value:""}},t}(Zp),dm={HELPER_TEXT_PERSISTENT:"mdc-text-field-helper-text--persistent",HELPER_TEXT_VALIDATION_MSG:"mdc-text-field-helper-text--validation-msg",ROOT:"mdc-text-field-helper-text"},hm={ARIA_HIDDEN:"aria-hidden",ROLE:"role",ROOT_SELECTOR:"."+dm.ROOT},pm=function(e){function t(n){return e.call(this,Lc(Lc({},t.defaultAdapter),n))||this}return Pc(t,e),Object.defineProperty(t,"cssClasses",{get:function(){return dm},enumerable:!1,configurable:!0}),Object.defineProperty(t,"strings",{get:function(){return hm},enumerable:!1,configurable:!0}),Object.defineProperty(t,"defaultAdapter",{get:function(){return{addClass:function(){},removeClass:function(){},hasClass:function(){return!1},getAttr:function(){return null},setAttr:function(){},removeAttr:function(){},setContent:function(){}}},enumerable:!1,configurable:!0}),t.prototype.getId=function(){return this.adapter.getAttr("id")},t.prototype.isVisible=function(){return"true"!==this.adapter.getAttr(hm.ARIA_HIDDEN)},t.prototype.setContent=function(e){this.adapter.setContent(e)},t.prototype.isPersistent=function(){return this.adapter.hasClass(dm.HELPER_TEXT_PERSISTENT)},t.prototype.setPersistent=function(e){e?this.adapter.addClass(dm.HELPER_TEXT_PERSISTENT):this.adapter.removeClass(dm.HELPER_TEXT_PERSISTENT)},t.prototype.isValidation=function(){return this.adapter.hasClass(dm.HELPER_TEXT_VALIDATION_MSG)},t.prototype.setValidation=function(e){e?this.adapter.addClass(dm.HELPER_TEXT_VALIDATION_MSG):this.adapter.removeClass(dm.HELPER_TEXT_VALIDATION_MSG)},t.prototype.showToScreenReader=function(){this.adapter.removeAttr(hm.ARIA_HIDDEN)},t.prototype.setValidity=function(e){var t=this.adapter.hasClass(dm.HELPER_TEXT_PERSISTENT),n=this.adapter.hasClass(dm.HELPER_TEXT_VALIDATION_MSG)&&!e;n?(this.showToScreenReader(),"alert"===this.adapter.getAttr(hm.ROLE)?this.refreshAlertRole():this.adapter.setAttr(hm.ROLE,"alert")):this.adapter.removeAttr(hm.ROLE),t||n||this.hide()},t.prototype.hide=function(){this.adapter.setAttr(hm.ARIA_HIDDEN,"true")},t.prototype.refreshAlertRole=function(){var e=this;this.adapter.removeAttr(hm.ROLE),requestAnimationFrame((function(){e.adapter.setAttr(hm.ROLE,"alert")}))},t}(Zp),fm=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Pc(t,e),t.attachTo=function(e){return new t(e)},Object.defineProperty(t.prototype,"foundationForTextField",{get:function(){return this.foundation},enumerable:!1,configurable:!0}),t.prototype.getDefaultFoundation=function(){var e=this,t={addClass:function(t){return e.root.classList.add(t)},removeClass:function(t){return e.root.classList.remove(t)},hasClass:function(t){return e.root.classList.contains(t)},getAttr:function(t){return e.root.getAttribute(t)},setAttr:function(t,n){return e.root.setAttribute(t,n)},removeAttr:function(t){return e.root.removeAttribute(t)},setContent:function(t){e.root.textContent=t}};return new pm(t)},t}(ef),mm={ICON_EVENT:"MDCTextField:icon",ICON_ROLE:"button"},gm={ROOT:"mdc-text-field__icon"},ym=["click","keydown"],_m=function(e){function t(n){var i=e.call(this,Lc(Lc({},t.defaultAdapter),n))||this;return i.savedTabIndex=null,i.interactionHandler=function(e){i.handleInteraction(e)},i}return Pc(t,e),Object.defineProperty(t,"strings",{get:function(){return mm},enumerable:!1,configurable:!0}),Object.defineProperty(t,"cssClasses",{get:function(){return gm},enumerable:!1,configurable:!0}),Object.defineProperty(t,"defaultAdapter",{get:function(){return{getAttr:function(){return null},setAttr:function(){},removeAttr:function(){},setContent:function(){},registerInteractionHandler:function(){},deregisterInteractionHandler:function(){},notifyIconAction:function(){}}},enumerable:!1,configurable:!0}),t.prototype.init=function(){var e,t;this.savedTabIndex=this.adapter.getAttr("tabindex");try{for(var n=Dc(ym),i=n.next();!i.done;i=n.next()){var r=i.value;this.adapter.registerInteractionHandler(r,this.interactionHandler)}}catch(s){e={error:s}}finally{try{i&&!i.done&&(t=n.return)&&t.call(n)}finally{if(e)throw e.error}}},t.prototype.destroy=function(){var e,t;try{for(var n=Dc(ym),i=n.next();!i.done;i=n.next()){var r=i.value;this.adapter.deregisterInteractionHandler(r,this.interactionHandler)}}catch(s){e={error:s}}finally{try{i&&!i.done&&(t=n.return)&&t.call(n)}finally{if(e)throw e.error}}},t.prototype.setDisabled=function(e){this.savedTabIndex&&(e?(this.adapter.setAttr("tabindex","-1"),this.adapter.removeAttr("role")):(this.adapter.setAttr("tabindex",this.savedTabIndex),this.adapter.setAttr("role",mm.ICON_ROLE)))},t.prototype.setAriaLabel=function(e){this.adapter.setAttr("aria-label",e)},t.prototype.setContent=function(e){this.adapter.setContent(e)},t.prototype.handleInteraction=function(e){var t="Enter"===e.key||13===e.keyCode;("click"===e.type||t)&&(e.preventDefault(),this.adapter.notifyIconAction())},t}(Zp),vm=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Pc(t,e),t.attachTo=function(e){return new t(e)},Object.defineProperty(t.prototype,"foundationForTextField",{get:function(){return this.foundation},enumerable:!1,configurable:!0}),t.prototype.getDefaultFoundation=function(){var e=this,t={getAttr:function(t){return e.root.getAttribute(t)},setAttr:function(t,n){return e.root.setAttribute(t,n)},removeAttr:function(t){return e.root.removeAttribute(t)},setContent:function(t){e.root.textContent=t},registerInteractionHandler:function(t,n){return e.listen(t,n)},deregisterInteractionHandler:function(t,n){return e.unlisten(t,n)},notifyIconAction:function(){return e.emit(_m.strings.ICON_EVENT,{},!0)}};return new _m(t)},t}(ef),bm=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Pc(t,e),t.attachTo=function(e){return new t(e)},t.prototype.initialize=function(e,t,n,i,r,s,a){void 0===e&&(e=function(e,t){return new hf(e,t)}),void 0===t&&(t=function(e){return new Gf(e)}),void 0===n&&(n=function(e){return new fm(e)}),void 0===i&&(i=function(e){return new nm(e)}),void 0===r&&(r=function(e){return new vm(e)}),void 0===s&&(s=function(e){return new $f(e)}),void 0===a&&(a=function(e){return new Jf(e)}),this.input=this.root.querySelector(im.INPUT_SELECTOR);var o=this.root.querySelector(im.LABEL_SELECTOR);this.label=o?s(o):null;var l=this.root.querySelector(im.LINE_RIPPLE_SELECTOR);this.lineRipple=l?t(l):null;var c=this.root.querySelector(im.OUTLINE_SELECTOR);this.outline=c?a(c):null;var u=pm.strings,d=this.root.nextElementSibling,h=d&&d.classList.contains(rm.HELPER_LINE),p=h&&d&&d.querySelector(u.ROOT_SELECTOR);this.helperText=p?n(p):null;var f=tm.strings,m=this.root.querySelector(f.ROOT_SELECTOR);!m&&h&&d&&(m=d.querySelector(f.ROOT_SELECTOR)),this.characterCounter=m?i(m):null;var g=this.root.querySelector(im.LEADING_ICON_SELECTOR);this.leadingIcon=g?r(g):null;var y=this.root.querySelector(im.TRAILING_ICON_SELECTOR);this.trailingIcon=y?r(y):null,this.prefix=this.root.querySelector(im.PREFIX_SELECTOR),this.suffix=this.root.querySelector(im.SUFFIX_SELECTOR),this.ripple=this.createRipple(e)},t.prototype.destroy=function(){this.ripple&&this.ripple.destroy(),this.lineRipple&&this.lineRipple.destroy(),this.helperText&&this.helperText.destroy(),this.characterCounter&&this.characterCounter.destroy(),this.leadingIcon&&this.leadingIcon.destroy(),this.trailingIcon&&this.trailingIcon.destroy(),this.label&&this.label.destroy(),this.outline&&this.outline.destroy(),e.prototype.destroy.call(this)},t.prototype.initialSyncWithDOM=function(){this.disabled=this.input.disabled},Object.defineProperty(t.prototype,"value",{get:function(){return this.foundation.getValue()},set:function(e){this.foundation.setValue(e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"disabled",{get:function(){return this.foundation.isDisabled()},set:function(e){this.foundation.setDisabled(e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"valid",{get:function(){return this.foundation.isValid()},set:function(e){this.foundation.setValid(e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"required",{get:function(){return this.input.required},set:function(e){this.input.required=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"pattern",{get:function(){return this.input.pattern},set:function(e){this.input.pattern=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"minLength",{get:function(){return this.input.minLength},set:function(e){this.input.minLength=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"maxLength",{get:function(){return this.input.maxLength},set:function(e){e<0?this.input.removeAttribute("maxLength"):this.input.maxLength=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"min",{get:function(){return this.input.min},set:function(e){this.input.min=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"max",{get:function(){return this.input.max},set:function(e){this.input.max=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"step",{get:function(){return this.input.step},set:function(e){this.input.step=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"helperTextContent",{set:function(e){this.foundation.setHelperTextContent(e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"leadingIconAriaLabel",{set:function(e){this.foundation.setLeadingIconAriaLabel(e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"leadingIconContent",{set:function(e){this.foundation.setLeadingIconContent(e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"trailingIconAriaLabel",{set:function(e){this.foundation.setTrailingIconAriaLabel(e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"trailingIconContent",{set:function(e){this.foundation.setTrailingIconContent(e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"useNativeValidation",{set:function(e){this.foundation.setUseNativeValidation(e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"prefixText",{get:function(){return this.prefix?this.prefix.textContent:null},set:function(e){this.prefix&&(this.prefix.textContent=e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"suffixText",{get:function(){return this.suffix?this.suffix.textContent:null},set:function(e){this.suffix&&(this.suffix.textContent=e)},enumerable:!1,configurable:!0}),t.prototype.focus=function(){this.input.focus()},t.prototype.layout=function(){var e=this.foundation.shouldFloat;this.foundation.notchOutline(e)},t.prototype.getDefaultFoundation=function(){var e=Lc(Lc(Lc(Lc(Lc({},this.getRootAdapterMethods()),this.getInputAdapterMethods()),this.getLabelAdapterMethods()),this.getLineRippleAdapterMethods()),this.getOutlineAdapterMethods());return new um(e,this.getFoundationMap())},t.prototype.getRootAdapterMethods=function(){var e=this;return{addClass:function(t){return e.root.classList.add(t)},removeClass:function(t){return e.root.classList.remove(t)},hasClass:function(t){return e.root.classList.contains(t)},registerTextFieldInteractionHandler:function(t,n){e.listen(t,n)},deregisterTextFieldInteractionHandler:function(t,n){e.unlisten(t,n)},registerValidationAttributeChangeHandler:function(t){var n=new MutationObserver((function(e){return t(function(e){return e.map((function(e){return e.attributeName})).filter((function(e){return e}))}(e))}));return n.observe(e.input,{attributes:!0}),n},deregisterValidationAttributeChangeHandler:function(e){e.disconnect()}}},t.prototype.getInputAdapterMethods=function(){var e=this;return{getNativeInput:function(){return e.input},setInputAttr:function(t,n){e.input.setAttribute(t,n)},removeInputAttr:function(t){e.input.removeAttribute(t)},isFocused:function(){return document.activeElement===e.input},registerInputInteractionHandler:function(t,n){e.input.addEventListener(t,n,tf())},deregisterInputInteractionHandler:function(t,n){e.input.removeEventListener(t,n,tf())}}},t.prototype.getLabelAdapterMethods=function(){var e=this;return{floatLabel:function(t){e.label&&e.label.float(t)},getLabelWidth:function(){return e.label?e.label.getWidth():0},hasLabel:function(){return Boolean(e.label)},shakeLabel:function(t){e.label&&e.label.shake(t)},setLabelRequired:function(t){e.label&&e.label.setRequired(t)}}},t.prototype.getLineRippleAdapterMethods=function(){var e=this;return{activateLineRipple:function(){e.lineRipple&&e.lineRipple.activate()},deactivateLineRipple:function(){e.lineRipple&&e.lineRipple.deactivate()},setLineRippleTransformOrigin:function(t){e.lineRipple&&e.lineRipple.setRippleCenter(t)}}},t.prototype.getOutlineAdapterMethods=function(){var e=this;return{closeOutline:function(){e.outline&&e.outline.closeNotch()},hasOutline:function(){return Boolean(e.outline)},notchOutline:function(t){e.outline&&e.outline.notch(t)}}},t.prototype.getFoundationMap=function(){return{characterCounter:this.characterCounter?this.characterCounter.foundationForTextField:void 0,helperText:this.helperText?this.helperText.foundationForTextField:void 0,leadingIcon:this.leadingIcon?this.leadingIcon.foundationForTextField:void 0,trailingIcon:this.trailingIcon?this.trailingIcon.foundationForTextField:void 0}},t.prototype.createRipple=function(e){var t=this,n=this.root.classList.contains(rm.TEXTAREA),i=this.root.classList.contains(rm.OUTLINED);if(n||i)return null;var r=Lc(Lc({},hf.createAdapter(this)),{isSurfaceActive:function(){return rf(t.input,":active")},registerInteractionHandler:function(e,n){t.input.addEventListener(e,n,tf())},deregisterInteractionHandler:function(e,n){t.input.removeEventListener(e,n,tf())}});return e(this.root,new df(r))},t}(ef);function Tm(e,t,n){let i=e.inputtype,r=e.inputlabel,s=e.inputmodel,a=t.create("label",{class:"mdc-text-field mdc-text-field--outlined",style:"\r\n                width: 100%\r\n            "},t.create("span",{class:"mdc-notched-outline",style:"color:white;"},t.create("span",{class:"mdc-notched-outline__leading"}),t.create("span",{class:"mdc-notched-outline__notch"},t.create("span",{class:"mdc-floating-label",id:"my-label-id",style:"color:white;"},r)),t.create("span",{class:"mdc-notched-outline__trailing"})),t.create("input",{type:i,class:"mdc-text-field__input ","x-model":s,"aria-labelledby":"my-label-id",style:"\r\n                color:white;\r\n                width:100%;\r\n                "}));return new bm(a),a}function Em(e,t,n){return t.create(t.fragment,null,t.create("div",{style:"\r\n    margin-top: 12px;\r\n"},t.create(Tm,{inputtype:"email",inputlabel:"Email",inputmodel:"email"})),t.create("div",{style:"\r\n    margin-top: 12px;\r\n"},t.create(Tm,{inputtype:"password",inputlabel:"Password",inputmodel:"password"})),t.create("div",{style:"margin-top: 12px;","x-show":"mode == 'signup'"},"If you forget your password, all account ",t.create("br",null),"data will be lost permanently."),t.create("div",{style:"margin-top: 16px;"},"Your account data is stored encrypted."),t.create("div",{"x-show":"mode == 'signup'"},t.create("div",{style:"\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n    "},t.create("div",{"x-type":"--raised","x-label":"Sign up",style:"margin-top: 12px;","x-bind":"actions.signup","x-show":"!auth.authenticating"},t.create(Tf,{label:"Sign up",type:"--raised"})))),t.create("div",{"x-show":"mode == 'login'"},t.create("div",{style:"\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n    "},t.create("div",{"x-type":"--raised","x-label":"Sign in",style:"margin-top: 12px;","x-bind":"actions.signin","x-show":"!auth.authenticating"},t.create(Tf,{label:"Sign in",type:"--raised"})))),t.create("div",{style:"\r\n        display: flex;\r\n        align-items: center;\r\n        justify-content: center;\r\n        "},t.create("div",{"x-show":"auth.authenticating",style:"\r\n    margin-top: 16px;\r\n    color: var(--mdc-theme-primary);\r\n    height: 8px;\r\n    width: 95%;\r\n"},t.create(qf,null))))}function wm(e,t,n){return t.create(t.fragment,null,t.create("div",{"x-show":"mode == 'signup'"},t.create("div",{style:"display: flex; align-items: center; justify-content: center"},t.create("div",{"x-type":"--raised","x-label":"Sign up / Sign in",style:"margin-top: 12px","x-bind":"actions.googlesignin","x-show":"!auth.authenticating"},t.create(Tf,{label:"Sign in",type:"--raised"})))),t.create("div",{style:"\r\n        display: flex;\r\n        align-items: center;\r\n        justify-content: center;\r\n        "},t.create("div",{"x-show":"auth.authenticating",style:"\r\n    margin-top: 16px;\r\n    color: var(--mdc-theme-primary);\r\n    height: 8px;\r\n    width: 95%;\r\n"},t.create(qf,null))))}function Sm(e,t,n){return t.create(t.fragment,null,t.create("span",{class:"material-icons",style:"\r\n                                        width: 100%;\r\n                                        height: 100%;\r\n                                        margin-bottom: 24px;\r\n                                    ","x-show":"!auth.authenticating"},t.create("div",{"x-on:click":"() => {\r\n                                        if (loginwith == 'google') {\r\n                                            step = 'pickprovider'\r\n                                        } else {\r\n                                            step = 'loginorsignup'\r\n                                        }\r\n                                            \r\n                                        }"},"arrow_back")),t.create("div",{"x-show":"mode == 'signup'"},t.create("div",{style:"\r\n                                        display: flex;\r\n                                        align-items: center;\r\n                                        justify-content: center;\r\n                                        "},t.create("h2",null,"Welcome!"))),t.create("div",{"x-show":"mode == 'login'"},t.create("div",{style:"\r\n          display: flex;\r\n          align-items: center;\r\n          justify-content: center;\r\n          "},t.create("h2",null,"Welcome back!"))))}function Cm(e,t,n){return t.create(t.fragment,null,t.create("span",{class:"material-icons",style:"width: 100%; height: 100%; margin-bottom: 24px"},t.create("div",{"x-on:click":"() => {\r\n        auth.dialogopen = false\r\n    }"},"arrow_back")),t.create("div",{style:"display: flex; align-items: center; justify-content: center"},t.create("div",{"x-on:click":"() => {\r\n                                            mode = 'login'\r\n                                            step = 'page'\r\n                                        }"},t.create(Tf,{label:"Sign in",type:"--raised"})),t.create("div",{style:"margin-left: 38px","x-on:click":"() => {\r\n                                            mode = 'signup'\r\n                                            step = 'page'\r\n                                        }"},t.create(Tf,{label:"Sign up",type:"--raised"}))),t.create("div",{"x-data":!0,"x-effect":"() => {\r\n    if (loginwith == 'google' && step == 'loginorsignup') {\r\n        step = 'page';\r\n        mode = 'signup';\r\n    }\r\n}"}))}function Im(e,t,n){return t.create(t.fragment,null,t.create("div",{style:"\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n"},t.create("div",{"x-on:click":"() => {\r\n                                        loginwith = 'google';\r\n                                        step = 'loginorsignup';\r\n    }"},t.create(Tf,{label:"Google",type:"--raised"}))),t.create("div",{style:"\r\n       display: flex;\r\n       align-items: center;\r\n       justify-content: center;\r\n       margin-top: 8px;\r\n"},t.create("div",{"x-on:click":"() => {\r\n                                        loginwith = 'email';\r\n                                        step = 'loginorsignup';\r\n                                    }"},t.create(Tf,{label:"Email / Password",type:"--raised"}))))}let xm=new Worker(new URL(""+new URL("wasmhandler-388d8d67.js",import.meta.url).href,self.location),{type:"module"}),km=[];function Am(){return Am=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},Am.apply(this,arguments)}xm.onmessage=e=>{for(let t of km)t(e.data);km=[]};const Om=Object.freeze(Object.defineProperty({__proto__:null,default:Am},Symbol.toStringTag,{value:"Module"}));var Pm="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Lm="object"===("undefined"==typeof window?"undefined":Pm(window))&&"object"===("undefined"==typeof document?"undefined":Pm(document))&&9===document.nodeType;function Nm(e){return Nm="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Nm(e)}function Dm(e){var t=function(e,t){if("object"!==Nm(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!==Nm(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===Nm(t)?t:String(t)}function Rm(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,Dm(i.key),i)}}function Mm(e,t,n){return t&&Rm(e.prototype,t),n&&Rm(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function Fm(e,t){return Fm=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Fm(e,t)}function Um(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,Fm(e,t)}function Bm(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var jm={}.constructor;function qm(e){if(null==e||"object"!=typeof e)return e;if(Array.isArray(e))return e.map(qm);if(e.constructor!==jm)return e;var t={};for(var n in e)t[n]=qm(e[n]);return t}function Hm(e,t,n){void 0===e&&(e="unnamed");var i=n.jss,r=qm(t),s=i.plugins.onCreateRule(e,r,n);return s||(e[0],null)}var Vm=function(e,t){for(var n="",i=0;i<e.length&&"!important"!==e[i];i++)n&&(n+=t),n+=e[i];return n},$m=function(e){if(!Array.isArray(e))return e;var t="";if(Array.isArray(e[0]))for(var n=0;n<e.length&&"!important"!==e[n];n++)t&&(t+=", "),t+=Vm(e[n]," ");else t=Vm(e,", ");return"!important"===e[e.length-1]&&(t+=" !important"),t};function Wm(e){return e&&!1===e.format?{linebreak:"",space:""}:{linebreak:"\n",space:" "}}function zm(e,t){for(var n="",i=0;i<t;i++)n+="  ";return n+e}function Gm(e,t,n){void 0===n&&(n={});var i="";if(!t)return i;var r=n.indent,s=void 0===r?0:r,a=t.fallbacks;!1===n.format&&(s=-1/0);var o=Wm(n),l=o.linebreak,c=o.space;if(e&&s++,a)if(Array.isArray(a))for(var u=0;u<a.length;u++){var d=a[u];for(var h in d){var p=d[h];null!=p&&(i&&(i+=l),i+=zm(h+":"+c+$m(p)+";",s))}}else for(var f in a){var m=a[f];null!=m&&(i&&(i+=l),i+=zm(f+":"+c+$m(m)+";",s))}for(var g in t){var y=t[g];null!=y&&"fallbacks"!==g&&(i&&(i+=l),i+=zm(g+":"+c+$m(y)+";",s))}return(i||n.allowEmpty)&&e?(i&&(i=""+l+i+l),zm(""+e+c+"{"+i,--s)+zm("}",s)):i}var Km=/([[\].#*$><+~=|^:(),"'`\s])/g,Xm="undefined"!=typeof CSS&&CSS.escape,Ym=function(e){return Xm?Xm(e):e.replace(Km,"\\$1")},Qm=function(){function e(e,t,n){this.type="style",this.isProcessed=!1;var i=n.sheet,r=n.Renderer;this.key=e,this.options=n,this.style=t,i?this.renderer=i.renderer:r&&(this.renderer=new r)}return e.prototype.prop=function(e,t,n){if(void 0===t)return this.style[e];var i=!!n&&n.force;if(!i&&this.style[e]===t)return this;var r=t;n&&!1===n.process||(r=this.options.jss.plugins.onChangeValue(t,e,this));var s=null==r||!1===r,a=e in this.style;if(s&&!a&&!i)return this;var o=s&&a;if(o?delete this.style[e]:this.style[e]=r,this.renderable&&this.renderer)return o?this.renderer.removeProperty(this.renderable,e):this.renderer.setProperty(this.renderable,e,r),this;var l=this.options.sheet;return l&&l.attached,this},e}(),Jm=function(e){function t(t,n,i){var r;r=e.call(this,t,n,i)||this;var s=i.selector,a=i.scoped,o=i.sheet,l=i.generateId;return s?r.selectorText=s:!1!==a&&(r.id=l(Bm(Bm(r)),o),r.selectorText="."+Ym(r.id)),r}Um(t,e);var n=t.prototype;return n.applyTo=function(e){var t=this.renderer;if(t){var n=this.toJSON();for(var i in n)t.setProperty(e,i,n[i])}return this},n.toJSON=function(){var e={};for(var t in this.style){var n=this.style[t];"object"!=typeof n?e[t]=n:Array.isArray(n)&&(e[t]=$m(n))}return e},n.toString=function(e){var t=this.options.sheet,n=!!t&&t.options.link?Am({},e,{allowEmpty:!0}):e;return Gm(this.selectorText,this.style,n)},Mm(t,[{key:"selector",set:function(e){if(e!==this.selectorText){this.selectorText=e;var t=this.renderer,n=this.renderable;if(n&&t)t.setSelector(n,e)||t.replaceRule(n,this)}},get:function(){return this.selectorText}}]),t}(Qm),Zm={onCreateRule:function(e,t,n){return"@"===e[0]||n.parent&&"keyframes"===n.parent.type?null:new Jm(e,t,n)}},eg={indent:1,children:!0},tg=/@([\w-]+)/,ng=function(){function e(e,t,n){this.type="conditional",this.isProcessed=!1,this.key=e;var i=e.match(tg);for(var r in this.at=i?i[1]:"unknown",this.query=n.name||"@"+this.at,this.options=n,this.rules=new Ig(Am({},n,{parent:this})),t)this.rules.add(r,t[r]);this.rules.process()}var t=e.prototype;return t.getRule=function(e){return this.rules.get(e)},t.indexOf=function(e){return this.rules.indexOf(e)},t.addRule=function(e,t,n){var i=this.rules.add(e,t,n);return i?(this.options.jss.plugins.onProcessRule(i),i):null},t.replaceRule=function(e,t,n){var i=this.rules.replace(e,t,n);return i&&this.options.jss.plugins.onProcessRule(i),i},t.toString=function(e){void 0===e&&(e=eg);var t=Wm(e).linebreak;if(null==e.indent&&(e.indent=eg.indent),null==e.children&&(e.children=eg.children),!1===e.children)return this.query+" {}";var n=this.rules.toString(e);return n?this.query+" {"+t+n+t+"}":""},e}(),ig=/@container|@media|@supports\s+/,rg={onCreateRule:function(e,t,n){return ig.test(e)?new ng(e,t,n):null}},sg={indent:1,children:!0},ag=/@keyframes\s+([\w-]+)/,og=function(){function e(e,t,n){this.type="keyframes",this.at="@keyframes",this.isProcessed=!1;var i=e.match(ag);i&&i[1]?this.name=i[1]:this.name="noname",this.key=this.type+"-"+this.name,this.options=n;var r=n.scoped,s=n.sheet,a=n.generateId;for(var o in this.id=!1===r?this.name:Ym(a(this,s)),this.rules=new Ig(Am({},n,{parent:this})),t)this.rules.add(o,t[o],Am({},n,{parent:this}));this.rules.process()}return e.prototype.toString=function(e){void 0===e&&(e=sg);var t=Wm(e).linebreak;if(null==e.indent&&(e.indent=sg.indent),null==e.children&&(e.children=sg.children),!1===e.children)return this.at+" "+this.id+" {}";var n=this.rules.toString(e);return n&&(n=""+t+n+t),this.at+" "+this.id+" {"+n+"}"},e}(),lg=/@keyframes\s+/,cg=/\$([\w-]+)/g,ug=function(e,t){return"string"==typeof e?e.replace(cg,(function(e,n){return n in t?t[n]:e})):e},dg=function(e,t,n){var i=e[t],r=ug(i,n);r!==i&&(e[t]=r)},hg={onCreateRule:function(e,t,n){return"string"==typeof e&&lg.test(e)?new og(e,t,n):null},onProcessStyle:function(e,t,n){return"style"===t.type&&n?("animation-name"in e&&dg(e,"animation-name",n.keyframes),"animation"in e&&dg(e,"animation",n.keyframes),e):e},onChangeValue:function(e,t,n){var i=n.options.sheet;if(!i)return e;switch(t){case"animation":case"animation-name":return ug(e,i.keyframes);default:return e}}},pg=function(e){function t(){return e.apply(this,arguments)||this}return Um(t,e),t.prototype.toString=function(e){var t=this.options.sheet,n=!!t&&t.options.link?Am({},e,{allowEmpty:!0}):e;return Gm(this.key,this.style,n)},t}(Qm),fg={onCreateRule:function(e,t,n){return n.parent&&"keyframes"===n.parent.type?new pg(e,t,n):null}},mg=function(){function e(e,t,n){this.type="font-face",this.at="@font-face",this.isProcessed=!1,this.key=e,this.style=t,this.options=n}return e.prototype.toString=function(e){var t=Wm(e).linebreak;if(Array.isArray(this.style)){for(var n="",i=0;i<this.style.length;i++)n+=Gm(this.at,this.style[i]),this.style[i+1]&&(n+=t);return n}return Gm(this.at,this.style,e)},e}(),gg=/@font-face/,yg={onCreateRule:function(e,t,n){return gg.test(e)?new mg(e,t,n):null}},_g=function(){function e(e,t,n){this.type="viewport",this.at="@viewport",this.isProcessed=!1,this.key=e,this.style=t,this.options=n}return e.prototype.toString=function(e){return Gm(this.key,this.style,e)},e}(),vg={onCreateRule:function(e,t,n){return"@viewport"===e||"@-ms-viewport"===e?new _g(e,t,n):null}},bg=function(){function e(e,t,n){this.type="simple",this.isProcessed=!1,this.key=e,this.value=t,this.options=n}return e.prototype.toString=function(e){if(Array.isArray(this.value)){for(var t="",n=0;n<this.value.length;n++)t+=this.key+" "+this.value[n]+";",this.value[n+1]&&(t+="\n");return t}return this.key+" "+this.value+";"},e}(),Tg={"@charset":!0,"@import":!0,"@namespace":!0},Eg={onCreateRule:function(e,t,n){return e in Tg?new bg(e,t,n):null}},wg=[Zm,rg,hg,fg,yg,vg,Eg],Sg={process:!0},Cg={force:!0,process:!0},Ig=function(){function e(e){this.map={},this.raw={},this.index=[],this.counter=0,this.options=e,this.classes=e.classes,this.keyframes=e.keyframes}var t=e.prototype;return t.add=function(e,t,n){var i=this.options,r=i.parent,s=i.sheet,a=i.jss,o=i.Renderer,l=i.generateId,c=i.scoped,u=Am({classes:this.classes,parent:r,sheet:s,jss:a,Renderer:o,generateId:l,scoped:c,name:e,keyframes:this.keyframes,selector:void 0},n),d=e;e in this.raw&&(d=e+"-d"+this.counter++),this.raw[d]=t,d in this.classes&&(u.selector="."+Ym(this.classes[d]));var h=Hm(d,t,u);if(!h)return null;this.register(h);var p=void 0===u.index?this.index.length:u.index;return this.index.splice(p,0,h),h},t.replace=function(e,t,n){var i=this.get(e),r=this.index.indexOf(i);i&&this.remove(i);var s=n;return-1!==r&&(s=Am({},n,{index:r})),this.add(e,t,s)},t.get=function(e){return this.map[e]},t.remove=function(e){this.unregister(e),delete this.raw[e.key],this.index.splice(this.index.indexOf(e),1)},t.indexOf=function(e){return this.index.indexOf(e)},t.process=function(){var e=this.options.jss.plugins;this.index.slice(0).forEach(e.onProcessRule,e)},t.register=function(e){this.map[e.key]=e,e instanceof Jm?(this.map[e.selector]=e,e.id&&(this.classes[e.key]=e.id)):e instanceof og&&this.keyframes&&(this.keyframes[e.name]=e.id)},t.unregister=function(e){delete this.map[e.key],e instanceof Jm?(delete this.map[e.selector],delete this.classes[e.key]):e instanceof og&&delete this.keyframes[e.name]},t.update=function(){var e,t,n;if("string"==typeof(arguments.length<=0?void 0:arguments[0])?(e=arguments.length<=0?void 0:arguments[0],t=arguments.length<=1?void 0:arguments[1],n=arguments.length<=2?void 0:arguments[2]):(t=arguments.length<=0?void 0:arguments[0],n=arguments.length<=1?void 0:arguments[1],e=null),e)this.updateOne(this.get(e),t,n);else for(var i=0;i<this.index.length;i++)this.updateOne(this.index[i],t,n)},t.updateOne=function(t,n,i){void 0===i&&(i=Sg);var r=this.options,s=r.jss.plugins,a=r.sheet;if(t.rules instanceof e)t.rules.update(n,i);else{var o=t.style;if(s.onUpdate(n,t,a,i),i.process&&o&&o!==t.style){for(var l in s.onProcessStyle(t.style,t,a),t.style){var c=t.style[l];c!==o[l]&&t.prop(l,c,Cg)}for(var u in o){var d=t.style[u],h=o[u];null==d&&d!==h&&t.prop(u,null,Cg)}}}},t.toString=function(e){for(var t="",n=this.options.sheet,i=!!n&&n.options.link,r=Wm(e).linebreak,s=0;s<this.index.length;s++){var a=this.index[s].toString(e);(a||i)&&(t&&(t+=r),t+=a)}return t},e}(),xg=function(){function e(e,t){for(var n in this.attached=!1,this.deployed=!1,this.classes={},this.keyframes={},this.options=Am({},t,{sheet:this,parent:this,classes:this.classes,keyframes:this.keyframes}),t.Renderer&&(this.renderer=new t.Renderer(this)),this.rules=new Ig(this.options),e)this.rules.add(n,e[n]);this.rules.process()}var t=e.prototype;return t.attach=function(){return this.attached||(this.renderer&&this.renderer.attach(),this.attached=!0,this.deployed||this.deploy()),this},t.detach=function(){return this.attached?(this.renderer&&this.renderer.detach(),this.attached=!1,this):this},t.addRule=function(e,t,n){var i=this.queue;this.attached&&!i&&(this.queue=[]);var r=this.rules.add(e,t,n);return r?(this.options.jss.plugins.onProcessRule(r),this.attached?this.deployed?(i?i.push(r):(this.insertRule(r),this.queue&&(this.queue.forEach(this.insertRule,this),this.queue=void 0)),r):r:(this.deployed=!1,r)):null},t.replaceRule=function(e,t,n){var i=this.rules.get(e);if(!i)return this.addRule(e,t,n);var r=this.rules.replace(e,t,n);return r&&this.options.jss.plugins.onProcessRule(r),this.attached?this.deployed?(this.renderer&&(r?i.renderable&&this.renderer.replaceRule(i.renderable,r):this.renderer.deleteRule(i)),r):r:(this.deployed=!1,r)},t.insertRule=function(e){this.renderer&&this.renderer.insertRule(e)},t.addRules=function(e,t){var n=[];for(var i in e){var r=this.addRule(i,e[i],t);r&&n.push(r)}return n},t.getRule=function(e){return this.rules.get(e)},t.deleteRule=function(e){var t="object"==typeof e?e:this.rules.get(e);return!(!t||this.attached&&!t.renderable)&&(this.rules.remove(t),!(this.attached&&t.renderable&&this.renderer)||this.renderer.deleteRule(t.renderable))},t.indexOf=function(e){return this.rules.indexOf(e)},t.deploy=function(){return this.renderer&&this.renderer.deploy(),this.deployed=!0,this},t.update=function(){var e;return(e=this.rules).update.apply(e,arguments),this},t.updateOne=function(e,t,n){return this.rules.updateOne(e,t,n),this},t.toString=function(e){return this.rules.toString(e)},e}(),kg=function(){function e(){this.plugins={internal:[],external:[]},this.registry={}}var t=e.prototype;return t.onCreateRule=function(e,t,n){for(var i=0;i<this.registry.onCreateRule.length;i++){var r=this.registry.onCreateRule[i](e,t,n);if(r)return r}return null},t.onProcessRule=function(e){if(!e.isProcessed){for(var t=e.options.sheet,n=0;n<this.registry.onProcessRule.length;n++)this.registry.onProcessRule[n](e,t);e.style&&this.onProcessStyle(e.style,e,t),e.isProcessed=!0}},t.onProcessStyle=function(e,t,n){for(var i=0;i<this.registry.onProcessStyle.length;i++)t.style=this.registry.onProcessStyle[i](t.style,t,n)},t.onProcessSheet=function(e){for(var t=0;t<this.registry.onProcessSheet.length;t++)this.registry.onProcessSheet[t](e)},t.onUpdate=function(e,t,n,i){for(var r=0;r<this.registry.onUpdate.length;r++)this.registry.onUpdate[r](e,t,n,i)},t.onChangeValue=function(e,t,n){for(var i=e,r=0;r<this.registry.onChangeValue.length;r++)i=this.registry.onChangeValue[r](i,t,n);return i},t.use=function(e,t){void 0===t&&(t={queue:"external"});var n=this.plugins[t.queue];-1===n.indexOf(e)&&(n.push(e),this.registry=[].concat(this.plugins.external,this.plugins.internal).reduce((function(e,t){for(var n in t)n in e&&e[n].push(t[n]);return e}),{onCreateRule:[],onProcessRule:[],onProcessStyle:[],onProcessSheet:[],onChangeValue:[],onUpdate:[]}))},e}(),Ag=function(){function e(){this.registry=[]}var t=e.prototype;return t.add=function(e){var t=this.registry,n=e.options.index;if(-1===t.indexOf(e))if(0===t.length||n>=this.index)t.push(e);else for(var i=0;i<t.length;i++)if(t[i].options.index>n)return void t.splice(i,0,e)},t.reset=function(){this.registry=[]},t.remove=function(e){var t=this.registry.indexOf(e);this.registry.splice(t,1)},t.toString=function(e){for(var t=void 0===e?{}:e,n=t.attached,i=function(e,t){if(null==e)return{};var n,i,r={},s=Object.keys(e);for(i=0;i<s.length;i++)n=s[i],t.indexOf(n)>=0||(r[n]=e[n]);return r}(t,["attached"]),r=Wm(i).linebreak,s="",a=0;a<this.registry.length;a++){var o=this.registry[a];null!=n&&o.attached!==n||(s&&(s+=r),s+=o.toString(i))}return s},Mm(e,[{key:"index",get:function(){return 0===this.registry.length?0:this.registry[this.registry.length-1].options.index}}]),e}(),Og=new Ag,Pg="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window&&window.Math===Math?window:"undefined"!=typeof self&&self.Math===Math?self:Function("return this")(),Lg="2f1acc6c3a606b082e5eef5e54414ffb";null==Pg[Lg]&&(Pg[Lg]=0);var Ng=Pg[Lg]++,Dg=function(e){void 0===e&&(e={});var t=0;return function(n,i){t+=1;var r="",s="";return i&&(i.options.classNamePrefix&&(s=i.options.classNamePrefix),null!=i.options.jss.id&&(r=String(i.options.jss.id))),e.minify?""+(s||"c")+Ng+r+t:s+n.key+"-"+Ng+(r?"-"+r:"")+"-"+t}},Rg=function(e){var t;return function(){return t||(t=e()),t}},Mg=function(e,t){try{return e.attributeStyleMap?e.attributeStyleMap.get(t):e.style.getPropertyValue(t)}catch(n){return""}},Fg=function(e,t,n){try{var i=n;if(Array.isArray(n)&&(i=$m(n)),e.attributeStyleMap)e.attributeStyleMap.set(t,i);else{var r=i?i.indexOf("!important"):-1,s=r>-1?i.substr(0,r-1):i;e.style.setProperty(t,s,r>-1?"important":"")}}catch(a){return!1}return!0},Ug=function(e,t){try{e.attributeStyleMap?e.attributeStyleMap.delete(t):e.style.removeProperty(t)}catch(n){}},Bg=function(e,t){return e.selectorText=t,e.selectorText===t},jg=Rg((function(){return document.querySelector("head")}));function qg(e){var t=Og.registry;if(t.length>0){var n=function(e,t){for(var n=0;n<e.length;n++){var i=e[n];if(i.attached&&i.options.index>t.index&&i.options.insertionPoint===t.insertionPoint)return i}return null}(t,e);if(n&&n.renderer)return{parent:n.renderer.element.parentNode,node:n.renderer.element};if(n=function(e,t){for(var n=e.length-1;n>=0;n--){var i=e[n];if(i.attached&&i.options.insertionPoint===t.insertionPoint)return i}return null}(t,e),n&&n.renderer)return{parent:n.renderer.element.parentNode,node:n.renderer.element.nextSibling}}var i=e.insertionPoint;if(i&&"string"==typeof i){var r=function(e){for(var t=jg(),n=0;n<t.childNodes.length;n++){var i=t.childNodes[n];if(8===i.nodeType&&i.nodeValue.trim()===e)return i}return null}(i);if(r)return{parent:r.parentNode,node:r.nextSibling}}return!1}var Hg,Vg=Rg((function(){var e=document.querySelector('meta[property="csp-nonce"]');return e?e.getAttribute("content"):null})),$g=function(e,t,n){try{"insertRule"in e?e.insertRule(t,n):"appendRule"in e&&e.appendRule(t)}catch(i){return!1}return e.cssRules[n]},Wg=function(e,t){var n=e.cssRules.length;return void 0===t||t>n?n:t},zg=function(){function e(e){this.getPropertyValue=Mg,this.setProperty=Fg,this.removeProperty=Ug,this.setSelector=Bg,this.hasInsertedRules=!1,this.cssRules=[],e&&Og.add(e),this.sheet=e;var t=this.sheet?this.sheet.options:{},n=t.media,i=t.meta,r=t.element;this.element=r||function(){var e=document.createElement("style");return e.textContent="\n",e}(),this.element.setAttribute("data-jss",""),n&&this.element.setAttribute("media",n),i&&this.element.setAttribute("data-meta",i);var s=Vg();s&&this.element.setAttribute("nonce",s)}var t=e.prototype;return t.attach=function(){if(!this.element.parentNode&&this.sheet){!function(e,t){var n=t.insertionPoint,i=qg(t);if(!1!==i&&i.parent)i.parent.insertBefore(e,i.node);else if(n&&"number"==typeof n.nodeType){var r=n,s=r.parentNode;s&&s.insertBefore(e,r.nextSibling)}else jg().appendChild(e)}(this.element,this.sheet.options);var e=Boolean(this.sheet&&this.sheet.deployed);this.hasInsertedRules&&e&&(this.hasInsertedRules=!1,this.deploy())}},t.detach=function(){if(this.sheet){var e=this.element.parentNode;e&&e.removeChild(this.element),this.sheet.options.link&&(this.cssRules=[],this.element.textContent="\n")}},t.deploy=function(){var e=this.sheet;e&&(e.options.link?this.insertRules(e.rules):this.element.textContent="\n"+e.toString()+"\n")},t.insertRules=function(e,t){for(var n=0;n<e.index.length;n++)this.insertRule(e.index[n],n,t)},t.insertRule=function(e,t,n){if(void 0===n&&(n=this.element.sheet),e.rules){var i=e,r=n;if("conditional"===e.type||"keyframes"===e.type){var s=Wg(n,t);if(!1===(r=$g(n,i.toString({children:!1}),s)))return!1;this.refCssRule(e,s,r)}return this.insertRules(i.rules,r),r}var a=e.toString();if(!a)return!1;var o=Wg(n,t),l=$g(n,a,o);return!1!==l&&(this.hasInsertedRules=!0,this.refCssRule(e,o,l),l)},t.refCssRule=function(e,t,n){e.renderable=n,e.options.parent instanceof xg&&this.cssRules.splice(t,0,n)},t.deleteRule=function(e){var t=this.element.sheet,n=this.indexOf(e);return-1!==n&&(t.deleteRule(n),this.cssRules.splice(n,1),!0)},t.indexOf=function(e){return this.cssRules.indexOf(e)},t.replaceRule=function(e,t){var n=this.indexOf(e);return-1!==n&&(this.element.sheet.deleteRule(n),this.cssRules.splice(n,1),this.insertRule(t,n))},t.getRules=function(){return this.element.sheet.cssRules},e}(),Gg=0,Kg=function(){function e(e){this.id=Gg++,this.version="10.10.0",this.plugins=new kg,this.options={id:{minify:!1},createGenerateId:Dg,Renderer:Lm?zg:null,plugins:[]},this.generateId=Dg({minify:!1});for(var t=0;t<wg.length;t++)this.plugins.use(wg[t],{queue:"internal"});this.setup(e)}var t=e.prototype;return t.setup=function(e){return void 0===e&&(e={}),e.createGenerateId&&(this.options.createGenerateId=e.createGenerateId),e.id&&(this.options.id=Am({},this.options.id,e.id)),(e.createGenerateId||e.id)&&(this.generateId=this.options.createGenerateId(this.options.id)),null!=e.insertionPoint&&(this.options.insertionPoint=e.insertionPoint),"Renderer"in e&&(this.options.Renderer=e.Renderer),e.plugins&&this.use.apply(this,e.plugins),this},t.createStyleSheet=function(e,t){void 0===t&&(t={});var n=t.index;"number"!=typeof n&&(n=0===Og.index?0:Og.index+1);var i=new xg(e,Am({},t,{jss:this,generateId:t.generateId||this.generateId,insertionPoint:this.options.insertionPoint,Renderer:this.options.Renderer,index:n}));return this.plugins.onProcessSheet(i),i},t.removeStyleSheet=function(e){return e.detach(),Og.remove(e),this},t.createRule=function(e,t,n){if(void 0===t&&(t={}),void 0===n&&(n={}),"object"==typeof e)return this.createRule(void 0,e,t);var i=Am({},n,{name:e,jss:this,Renderer:this.options.Renderer});i.generateId||(i.generateId=this.generateId),i.classes||(i.classes={}),i.keyframes||(i.keyframes={});var r=Hm(e,t,i);return r&&this.plugins.onProcessRule(r),r},t.use=function(){for(var e=this,t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];return n.forEach((function(t){e.plugins.use(t)})),this},e}(),Xg="object"==typeof CSS&&null!=CSS&&"number"in CSS;const Yg=new Kg(Hg);var Qg=Date.now(),Jg="fnValues"+Qg,Zg="fnStyle"+ ++Qg;const ey=function(){return{onCreateRule:function(e,t,n){if("function"!=typeof t)return null;var i=Hm(e,{},n);return i[Zg]=t,i},onProcessStyle:function(e,t){if(Jg in t||Zg in t)return e;var n={};for(var i in e){var r=e[i];"function"==typeof r&&(delete e[i],n[i]=r)}return t[Jg]=n,e},onUpdate:function(e,t,n,i){var r=t,s=r[Zg];s&&(r.style=s(e)||{});var a=r[Jg];if(a)for(var o in a)r.prop(o,a[o](e),i)}}};var ty=function(e){var t,n=e.Symbol;return"function"==typeof n?n.observable?t=n.observable:(t=n("observable"),n.observable=t):t="@@observable",t}("undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof module?module:Function("return this")()),ny=function(e){return e&&e[ty]&&e===e[ty]()};const iy=function(e){return{onCreateRule:function(t,n,i){if(!ny(n))return null;var r=n,s=Hm(t,{},i);return r.subscribe((function(t){for(var n in t)s.prop(n,t[n],e)})),s},onProcessRule:function(t){if(!t||"style"===t.type){var n=t,i=n.style,r=function(t){var r=i[t];if(!ny(r))return"continue";delete i[t],r.subscribe({next:function(i){n.prop(t,i,e)}})};for(var s in i)r(s)}}}};var ry=/;\n/,sy=function(e){"string"==typeof e.style&&(e.style=function(e){for(var t={},n=e.split(ry),i=0;i<n.length;i++){var r=(n[i]||"").trim();if(r){var s=r.indexOf(":");if(-1!==s){var a=r.substr(0,s).trim(),o=r.substr(s+1).trim();t[a]=o}}}return t}(e.style))};var ay="@global",oy="@global ",ly=function(){function e(e,t,n){for(var i in this.type="global",this.at=ay,this.isProcessed=!1,this.key=e,this.options=n,this.rules=new Ig(Am({},n,{parent:this})),t)this.rules.add(i,t[i]);this.rules.process()}var t=e.prototype;return t.getRule=function(e){return this.rules.get(e)},t.addRule=function(e,t,n){var i=this.rules.add(e,t,n);return i&&this.options.jss.plugins.onProcessRule(i),i},t.replaceRule=function(e,t,n){var i=this.rules.replace(e,t,n);return i&&this.options.jss.plugins.onProcessRule(i),i},t.indexOf=function(e){return this.rules.indexOf(e)},t.toString=function(e){return this.rules.toString(e)},e}(),cy=function(){function e(e,t,n){this.type="global",this.at=ay,this.isProcessed=!1,this.key=e,this.options=n;var i=e.substr(8);this.rule=n.jss.createRule(i,t,Am({},n,{parent:this}))}return e.prototype.toString=function(e){return this.rule?this.rule.toString(e):""},e}(),uy=/\s*,\s*/g;function dy(e,t){for(var n=e.split(uy),i="",r=0;r<n.length;r++)i+=t+" "+n[r].trim(),n[r+1]&&(i+=", ");return i}function hy(){return{onCreateRule:function(e,t,n){if(!e)return null;if(e===ay)return new ly(e,t,n);if("@"===e[0]&&e.substr(0,8)===oy)return new cy(e,t,n);var i=n.parent;return i&&("global"===i.type||i.options.parent&&"global"===i.options.parent.type)&&(n.scoped=!1),n.selector||!1!==n.scoped||(n.selector=e),null},onProcessRule:function(e,t){"style"===e.type&&t&&(function(e,t){var n=e.options,i=e.style,r=i?i[ay]:null;if(r){for(var s in r)t.addRule(s,r[s],Am({},n,{selector:dy(s,e.selector)}));delete i[ay]}}(e,t),function(e,t){var n=e.options,i=e.style;for(var r in i)if("@"===r[0]&&r.substr(0,ay.length)===ay){var s=dy(r.substr(ay.length),e.selector);t.addRule(s,i[r],Am({},n,{selector:s})),delete i[r]}}(e,t))}}}var py=function(e){return e&&"object"==typeof e&&!Array.isArray(e)},fy="extendCurrValue"+Date.now();function my(e,t,n,i){return void 0===i&&(i={}),function(e,t,n,i){if("string"!=typeof e.extend)if(Array.isArray(e.extend))for(var r=0;r<e.extend.length;r++){var s=e.extend[r];my("string"==typeof s?Am({},e,{extend:s}):e.extend[r],t,n,i)}else for(var a in e.extend)"extend"!==a?py(e.extend[a])?(a in i||(i[a]={}),my(e.extend[a],t,n,i[a])):i[a]=e.extend[a]:my(e.extend.extend,t,n,i);else{if(!n)return;var o=n.getRule(e.extend);if(!o)return;if(o===t)return;var l=o.options.parent;l&&my(l.rules.raw[e.extend],t,n,i)}}(e,t,n,i),function(e,t,n,i){for(var r in e)"extend"!==r&&(py(i[r])&&py(e[r])?my(e[r],t,n,i[r]):py(e[r])?i[r]=my(e[r],t,n):i[r]=e[r])}(e,t,n,i),i}var gy=/\s*,\s*/g,yy=/&/g,_y=/\$([\w-]+)/g;function vy(){function e(e,t){return function(n,i){var r=e.getRule(i)||t&&t.getRule(i);return r?r.selector:i}}function t(e,t){for(var n=t.split(gy),i=e.split(gy),r="",s=0;s<n.length;s++)for(var a=n[s],o=0;o<i.length;o++){var l=i[o];r&&(r+=", "),r+=-1!==l.indexOf("&")?l.replace(yy,a):a+" "+l}return r}function n(e,t,n){if(n)return Am({},n,{index:n.index+1});var i=e.options.nestingLevel;i=void 0===i?1:i+1;var r=Am({},e.options,{nestingLevel:i,index:t.indexOf(e)+1});return delete r.name,r}return{onProcessStyle:function(i,r,s){if("style"!==r.type)return i;var a,o,l=r,c=l.options.parent;for(var u in i){var d=-1!==u.indexOf("&"),h="@"===u[0];if(d||h){if(a=n(l,c,a),d){var p=t(u,l.selector);o||(o=e(c,s)),p=p.replace(_y,o);var f=l.key+"-"+u;"replaceRule"in c?c.replaceRule(f,i[u],Am({},a,{selector:p})):c.addRule(f,i[u],Am({},a,{selector:p}))}else h&&c.addRule(u,{},a).addRule(l.key,i[u],{selector:l.selector});delete i[u]}}return i}}}function by(e,t){if(!t)return!0;if(Array.isArray(t)){for(var n=0;n<t.length;n++){if(!by(e,t[n]))return!1}return!0}if(t.indexOf(" ")>-1)return by(e,t.split(" "));var i=e.options.parent;if("$"===t[0]){var r=i.getRule(t.substr(1));return!!r&&(r!==e&&(i.classes[e.key]+=" "+i.classes[r.key],!0))}return i.classes[e.key]+=" "+t,!0}function Ty(){return{onProcessStyle:function(e,t){return"composes"in e?(by(t,e.composes),delete e.composes,e):e}}}var Ey=/[A-Z]/g,wy=/^ms-/,Sy={};function Cy(e){return"-"+e.toLowerCase()}function Iy(e){if(Sy.hasOwnProperty(e))return Sy[e];var t=e.replace(Ey,Cy);return Sy[e]=wy.test(t)?"-"+t:t}function xy(e){var t={};for(var n in e){t[0===n.indexOf("--")?n:Iy(n)]=e[n]}return e.fallbacks&&(Array.isArray(e.fallbacks)?t.fallbacks=e.fallbacks.map(xy):t.fallbacks=xy(e.fallbacks)),t}var ky=Xg&&CSS?CSS.px:"px",Ay=Xg&&CSS?CSS.ms:"ms",Oy=Xg&&CSS?CSS.percent:"%";function Py(e){var t=/(-[a-z])/g,n=function(e){return e[1].toUpperCase()},i={};for(var r in e)i[r]=e[r],i[r.replace(t,n)]=e[r];return i}var Ly=Py({"animation-delay":Ay,"animation-duration":Ay,"background-position":ky,"background-position-x":ky,"background-position-y":ky,"background-size":ky,border:ky,"border-bottom":ky,"border-bottom-left-radius":ky,"border-bottom-right-radius":ky,"border-bottom-width":ky,"border-left":ky,"border-left-width":ky,"border-radius":ky,"border-right":ky,"border-right-width":ky,"border-top":ky,"border-top-left-radius":ky,"border-top-right-radius":ky,"border-top-width":ky,"border-width":ky,"border-block":ky,"border-block-end":ky,"border-block-end-width":ky,"border-block-start":ky,"border-block-start-width":ky,"border-block-width":ky,"border-inline":ky,"border-inline-end":ky,"border-inline-end-width":ky,"border-inline-start":ky,"border-inline-start-width":ky,"border-inline-width":ky,"border-start-start-radius":ky,"border-start-end-radius":ky,"border-end-start-radius":ky,"border-end-end-radius":ky,margin:ky,"margin-bottom":ky,"margin-left":ky,"margin-right":ky,"margin-top":ky,"margin-block":ky,"margin-block-end":ky,"margin-block-start":ky,"margin-inline":ky,"margin-inline-end":ky,"margin-inline-start":ky,padding:ky,"padding-bottom":ky,"padding-left":ky,"padding-right":ky,"padding-top":ky,"padding-block":ky,"padding-block-end":ky,"padding-block-start":ky,"padding-inline":ky,"padding-inline-end":ky,"padding-inline-start":ky,"mask-position-x":ky,"mask-position-y":ky,"mask-size":ky,height:ky,width:ky,"min-height":ky,"max-height":ky,"min-width":ky,"max-width":ky,bottom:ky,left:ky,top:ky,right:ky,inset:ky,"inset-block":ky,"inset-block-end":ky,"inset-block-start":ky,"inset-inline":ky,"inset-inline-end":ky,"inset-inline-start":ky,"box-shadow":ky,"text-shadow":ky,"column-gap":ky,"column-rule":ky,"column-rule-width":ky,"column-width":ky,"font-size":ky,"font-size-delta":ky,"letter-spacing":ky,"text-decoration-thickness":ky,"text-indent":ky,"text-stroke":ky,"text-stroke-width":ky,"word-spacing":ky,motion:ky,"motion-offset":ky,outline:ky,"outline-offset":ky,"outline-width":ky,perspective:ky,"perspective-origin-x":Oy,"perspective-origin-y":Oy,"transform-origin":Oy,"transform-origin-x":Oy,"transform-origin-y":Oy,"transform-origin-z":Oy,"transition-delay":Ay,"transition-duration":Ay,"vertical-align":ky,"flex-basis":ky,"shape-margin":ky,size:ky,gap:ky,grid:ky,"grid-gap":ky,"row-gap":ky,"grid-row-gap":ky,"grid-column-gap":ky,"grid-template-rows":ky,"grid-template-columns":ky,"grid-auto-rows":ky,"grid-auto-columns":ky,"box-shadow-x":ky,"box-shadow-y":ky,"box-shadow-blur":ky,"box-shadow-spread":ky,"font-line-height":ky,"text-shadow-x":ky,"text-shadow-y":ky,"text-shadow-blur":ky});function Ny(e,t,n){if(null==t)return t;if(Array.isArray(t))for(var i=0;i<t.length;i++)t[i]=Ny(e,t[i],n);else if("object"==typeof t)if("fallbacks"===e)for(var r in t)t[r]=Ny(r,t[r],n);else for(var s in t)t[s]=Ny(e+"-"+s,t[s],n);else if("number"==typeof t&&!1===isNaN(t)){var a=n[e]||Ly[e];return!a||0===t&&a===ky?t.toString():"function"==typeof a?a(t).toString():""+t+a}return t}function Dy(e){void 0===e&&(e={});var t=Py(e);return{onProcessStyle:function(e,n){if("style"!==n.type)return e;for(var i in e)e[i]=Ny(i,e[i],t);return e},onChangeValue:function(e,n){return Ny(n,e,t)}}}var Ry={"background-size":!0,"background-position":!0,border:!0,"border-bottom":!0,"border-left":!0,"border-top":!0,"border-right":!0,"border-radius":!0,"border-image":!0,"border-width":!0,"border-style":!0,"border-color":!0,"box-shadow":!0,flex:!0,margin:!0,padding:!0,outline:!0,"transform-origin":!0,transform:!0,transition:!0},My={position:!0,size:!0},Fy={padding:{top:0,right:0,bottom:0,left:0},margin:{top:0,right:0,bottom:0,left:0},background:{attachment:null,color:null,image:null,position:null,repeat:null},border:{width:null,style:null,color:null},"border-top":{width:null,style:null,color:null},"border-right":{width:null,style:null,color:null},"border-bottom":{width:null,style:null,color:null},"border-left":{width:null,style:null,color:null},outline:{width:null,style:null,color:null},"list-style":{type:null,position:null,image:null},transition:{property:null,duration:null,"timing-function":null,timingFunction:null,delay:null},animation:{name:null,duration:null,"timing-function":null,timingFunction:null,delay:null,"iteration-count":null,iterationCount:null,direction:null,"fill-mode":null,fillMode:null,"play-state":null,playState:null},"box-shadow":{x:0,y:0,blur:0,spread:0,color:null,inset:null},"text-shadow":{x:0,y:0,blur:null,color:null}},Uy={border:{radius:"border-radius",image:"border-image",width:"border-width",style:"border-style",color:"border-color"},"border-bottom":{width:"border-bottom-width",style:"border-bottom-style",color:"border-bottom-color"},"border-top":{width:"border-top-width",style:"border-top-style",color:"border-top-color"},"border-left":{width:"border-left-width",style:"border-left-style",color:"border-left-color"},"border-right":{width:"border-right-width",style:"border-right-style",color:"border-right-color"},background:{size:"background-size",image:"background-image"},font:{style:"font-style",variant:"font-variant",weight:"font-weight",stretch:"font-stretch",size:"font-size",family:"font-family",lineHeight:"line-height","line-height":"line-height"},flex:{grow:"flex-grow",basis:"flex-basis",direction:"flex-direction",wrap:"flex-wrap",flow:"flex-flow",shrink:"flex-shrink"},align:{self:"align-self",items:"align-items",content:"align-content"},grid:{"template-columns":"grid-template-columns",templateColumns:"grid-template-columns","template-rows":"grid-template-rows",templateRows:"grid-template-rows","template-areas":"grid-template-areas",templateAreas:"grid-template-areas",template:"grid-template","auto-columns":"grid-auto-columns",autoColumns:"grid-auto-columns","auto-rows":"grid-auto-rows",autoRows:"grid-auto-rows","auto-flow":"grid-auto-flow",autoFlow:"grid-auto-flow",row:"grid-row",column:"grid-column","row-start":"grid-row-start",rowStart:"grid-row-start","row-end":"grid-row-end",rowEnd:"grid-row-end","column-start":"grid-column-start",columnStart:"grid-column-start","column-end":"grid-column-end",columnEnd:"grid-column-end",area:"grid-area",gap:"grid-gap","row-gap":"grid-row-gap",rowGap:"grid-row-gap","column-gap":"grid-column-gap",columnGap:"grid-column-gap"}};function By(e,t,n,i){return null==n[t]?e:0===e.length?[]:Array.isArray(e[0])?By(e[0],t,n,i):"object"==typeof e[0]?function(e,t,n){return e.map((function(e){return jy(e,t,n,!1,!0)}))}(e,t,i):[e]}function jy(e,t,n,i,r){if(!Fy[t]&&!Uy[t])return[];var s=[];if(Uy[t]&&(e=function(e,t,n,i){for(var r in n){var s=n[r];if(void 0!==e[r]&&(i||!t.prop(s))){var a,o=qy((a={},a[s]=e[r],a),t)[s];i?t.style.fallbacks[s]=o:t.style[s]=o}delete e[r]}return e}(e,n,Uy[t],i)),Object.keys(e).length)for(var a in Fy[t])e[a]?Array.isArray(e[a])?s.push(null===My[a]?e[a]:e[a].join(" ")):s.push(e[a]):null!=Fy[t][a]&&s.push(Fy[t][a]);return!s.length||r?s:[s]}function qy(e,t,n){for(var i in e){var r=e[i];if(Array.isArray(r)){if(!Array.isArray(r[0])){if("fallbacks"===i){for(var s=0;s<e.fallbacks.length;s++)e.fallbacks[s]=qy(e.fallbacks[s],t,!0);continue}e[i]=By(r,i,Ry,t),e[i].length||delete e[i]}}else if("object"==typeof r){if("fallbacks"===i){e.fallbacks=qy(e.fallbacks,t,!0);continue}e[i]=jy(r,i,t,n),e[i].length||delete e[i]}else""===e[i]&&delete e[i]}return e}function Hy(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function Vy(e){return function(e){if(Array.isArray(e))return Hy(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return Hy(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Hy(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var $y="",Wy="",zy="",Gy="",Ky=Lm&&"ontouchstart"in document.documentElement;if(Lm){var Xy={Moz:"-moz-",ms:"-ms-",O:"-o-",Webkit:"-webkit-"},Yy=document.createElement("p").style;for(var Qy in Xy)if(Qy+"Transform"in Yy){$y=Qy,Wy=Xy[Qy];break}"Webkit"===$y&&"msHyphens"in Yy&&($y="ms",Wy=Xy.ms,Gy="edge"),"Webkit"===$y&&"-apple-trailing-word"in Yy&&(zy="apple")}var Jy={js:$y,css:Wy,vendor:zy,browser:Gy,isTouch:Ky};var Zy={noPrefill:["appearance"],supportedProperty:function(e){return"appearance"===e&&("ms"===Jy.js?"-webkit-"+e:Jy.css+e)}},e_={noPrefill:["color-adjust"],supportedProperty:function(e){return"color-adjust"===e&&("Webkit"===Jy.js?Jy.css+"print-"+e:e)}},t_=/[-\s]+(.)?/g;function n_(e,t){return t?t.toUpperCase():""}function i_(e){return e.replace(t_,n_)}function r_(e){return i_("-"+e)}var s_,a_={noPrefill:["mask"],supportedProperty:function(e,t){if(!/^mask/.test(e))return!1;if("Webkit"===Jy.js){var n="mask-image";if(i_(n)in t)return e;if(Jy.js+r_(n)in t)return Jy.css+e}return e}},o_={noPrefill:["text-orientation"],supportedProperty:function(e){return"text-orientation"===e&&("apple"!==Jy.vendor||Jy.isTouch?e:Jy.css+e)}},l_={noPrefill:["transform"],supportedProperty:function(e,t,n){return"transform"===e&&(n.transform?e:Jy.css+e)}},c_={noPrefill:["transition"],supportedProperty:function(e,t,n){return"transition"===e&&(n.transition?e:Jy.css+e)}},u_={noPrefill:["writing-mode"],supportedProperty:function(e){return"writing-mode"===e&&("Webkit"===Jy.js||"ms"===Jy.js&&"edge"!==Jy.browser?Jy.css+e:e)}},d_={noPrefill:["user-select"],supportedProperty:function(e){return"user-select"===e&&("Moz"===Jy.js||"ms"===Jy.js||"apple"===Jy.vendor?Jy.css+e:e)}},h_={supportedProperty:function(e,t){return!!/^break-/.test(e)&&("Webkit"===Jy.js?"WebkitColumn"+r_(e)in t&&Jy.css+"column-"+e:"Moz"===Jy.js&&("page"+r_(e)in t&&"page-"+e))}},p_={supportedProperty:function(e,t){if(!/^(border|margin|padding)-inline/.test(e))return!1;if("Moz"===Jy.js)return e;var n=e.replace("-inline","");return Jy.js+r_(n)in t&&Jy.css+n}},f_={supportedProperty:function(e,t){return i_(e)in t&&e}},m_={supportedProperty:function(e,t){var n=r_(e);return"-"===e[0]||"-"===e[0]&&"-"===e[1]?e:Jy.js+n in t?Jy.css+e:"Webkit"!==Jy.js&&"Webkit"+n in t&&"-webkit-"+e}},g_={supportedProperty:function(e){return"scroll-snap"===e.substring(0,11)&&("ms"===Jy.js?""+Jy.css+e:e)}},y_={supportedProperty:function(e){return"overscroll-behavior"===e&&("ms"===Jy.js?Jy.css+"scroll-chaining":e)}},__={"flex-grow":"flex-positive","flex-shrink":"flex-negative","flex-basis":"flex-preferred-size","justify-content":"flex-pack",order:"flex-order","align-items":"flex-align","align-content":"flex-line-pack"},v_={supportedProperty:function(e,t){var n=__[e];return!!n&&(Jy.js+r_(n)in t&&Jy.css+n)}},b_={flex:"box-flex","flex-grow":"box-flex","flex-direction":["box-orient","box-direction"],order:"box-ordinal-group","align-items":"box-align","flex-flow":["box-orient","box-direction"],"justify-content":"box-pack"},T_=Object.keys(b_),E_=function(e){return Jy.css+e},w_={supportedProperty:function(e,t,n){var i=n.multiple;if(T_.indexOf(e)>-1){var r=b_[e];if(!Array.isArray(r))return Jy.js+r_(r)in t&&Jy.css+r;if(!i)return!1;for(var s=0;s<r.length;s++)if(!(Jy.js+r_(r[0])in t))return!1;return r.map(E_)}return!1}},S_=[Zy,e_,a_,o_,l_,c_,u_,d_,h_,p_,f_,m_,g_,y_,v_,w_],C_=S_.filter((function(e){return e.supportedProperty})).map((function(e){return e.supportedProperty})),I_=S_.filter((function(e){return e.noPrefill})).reduce((function(e,t){return e.push.apply(e,Vy(t.noPrefill)),e}),[]),x_={};if(Lm){s_=document.createElement("p");var k_=window.getComputedStyle(document.documentElement,"");for(var A_ in k_)isNaN(A_)||(x_[k_[A_]]=k_[A_]);I_.forEach((function(e){return delete x_[e]}))}function O_(e,t){if(void 0===t&&(t={}),!s_)return e;if(null!=x_[e])return x_[e];"transition"!==e&&"transform"!==e||(t[e]=e in s_.style);for(var n=0;n<C_.length&&(x_[e]=C_[n](e,s_.style,t),!x_[e]);n++);try{s_.style[e]=""}catch(i){return!1}return x_[e]}var P_,L_={},N_={transition:1,"transition-property":1,"-webkit-transition":1,"-webkit-transition-property":1},D_=/(^\s*[\w-]+)|, (\s*[\w-]+)(?![^()]*\))/g;function R_(e,t,n){if("var"===t)return"var";if("all"===t)return"all";if("all"===n)return", all";var i=t?O_(t):", "+O_(n);return i||(t||n)}function M_(e,t){var n=t;if(!P_||"content"===e)return t;if("string"!=typeof n||!isNaN(parseInt(n,10)))return n;var i=e+n;if(null!=L_[i])return L_[i];try{P_.style[e]=n}catch(r){return L_[i]=!1,!1}if(N_[e])n=n.replace(D_,R_);else if(""===P_.style[e]&&("-ms-flex"===(n=Jy.css+n)&&(P_.style[e]="-ms-flexbox"),P_.style[e]=n,""===P_.style[e]))return L_[i]=!1,!1;return P_.style[e]="",L_[i]=n,L_[i]}function F_(){function e(t){for(var n in t){var i=t[n];if("fallbacks"===n&&Array.isArray(i))t[n]=i.map(e);else{var r=!1,s=O_(n);s&&s!==n&&(r=!0);var a=!1,o=M_(s,$m(i));o&&o!==i&&(a=!0),(r||a)&&(r&&delete t[n],t[s||n]=o||i)}}return t}return{onProcessRule:function(e){if("keyframes"===e.type){var t=e;t.at=function(e){return"-"===e[1]||"ms"===Jy.js?e:"@"+Jy.css+"keyframes"+e.substr(10)}(t.at)}},onProcessStyle:function(t,n){return"style"!==n.type?t:e(t)},onChangeValue:function(e,t){return M_(t,$m(e))||e}}}Lm&&(P_=document.createElement("p"));const U_=function(e){return void 0===e&&(e={}),{plugins:[ey(),iy(e.observable),{onProcessRule:sy},hy(),{onProcessStyle:function(e,t,n){return"extend"in e?my(e,t,n):e},onChangeValue:function(e,t,n){if("extend"!==t)return e;if(null==e||!1===e){for(var i in n[fy])n.prop(i,null);return n[fy]=null,null}if("object"==typeof e){for(var r in e)n.prop(r,e[r]);n[fy]=e}return null}},vy(),Ty(),{onProcessStyle:function(e){if(Array.isArray(e)){for(var t=0;t<e.length;t++)e[t]=xy(e[t]);return e}return xy(e)},onChangeValue:function(e,t,n){if(0===t.indexOf("--"))return e;var i=Iy(t);return t===i?e:(n.prop(i,e),null)}},Dy(e.defaultUnit),{onProcessStyle:function(e,t){if(!e||"style"!==t.type)return e;if(Array.isArray(e)){for(var n=0;n<e.length;n++)e[n]=qy(e[n],t);return e}return qy(e,t)}},F_(),(t=function(e,t){return e.length===t.length?e>t?1:-1:e.length-t.length},{onProcessStyle:function(e,n){if("style"!==n.type)return e;for(var i={},r=Object.keys(e).sort(t),s=0;s<r.length;s++)i[r[s]]=e[r[s]];return i}})]};var t};function B_(e,t,n){return t.create("div",{"x-bind:class":"'mdc-dialog' + (auth.dialogopen ? ' mdc-dialog--open' : '')","x-data":"loginModal"},t.create("div",{class:"mdc-dialog__container"},t.create("div",{class:"mdc-dialog__surface","aria-modal":"true","aria-labelledby":"my-dialog-title","aria-describedby":"my-dialog-content"},t.create("div",{class:"mdc-dialog__content",id:"my-dialog-content",style:"\r\n                            color: white;\r\n                            \r\n                        "},t.create("style",null,".layer1, .layer2{\n                grid-column: 1;\n                grid-row: 1;\n              }"),t.create(pf,{attributes:{"x-transition:enter.duration.1000ms":"","x-transition:enter.delay.350ms":"","x-transition:leave.duration.250ms":""}},t.create("span",{class:"material-icons",style:"\r\n                    width: 100%;\r\n                    height: 100%;\r\n                    margin-bottom: 24px;\r\n                ","x-show":"!auth.authenticating && step === 'pickprovider'"},t.create("div",{"x-on:click":"() => {\r\n                                auth.dialogopen = false;\r\n                            }"},"arrow_back")),t.create("p",{style:"\r\n                    margin-top: 8px;\r\n                    margin-bottom: 8px;\r\n                ","x-show":"step == 'pickprovider'"},"Please choose your authentication provider from the list below."),t.create("div",{"x-show":"step == 'pickprovider'"},t.create(Im,null)),t.create("div",{"x-show":"step == 'loginorsignup'"},t.create(Cm,null)),t.create("div",{"x-show":"step == 'page'"},t.create(Sm,null),t.create("div",{"x-show":"loginwith == 'email'"},t.create(Em,null)),t.create("div",{"x-show":"loginwith == 'google'"},t.create(wm,null))))))),t.create("div",{class:"mdc-dialog__scrim"}))}function j_(e,t,n){return t.create(t.fragment,null,t.create("div",{style:"  \r\n  overflow-y: scroll;\r\n  height: calc(calc(var(--vh, 1vh) * 100) - 85px);\r\n  margin-top: 10px;\r\n  "},t.create("div",{style:"\r\n          height: 10px;\r\n          width: calc(100% - 20px);\r\n          margin-left: 10px;\r\n          margin-right: 10px;\r\n          \r\n        "},t.create("div",{style:"\r\n      display: flex;\r\n      background-color: rgba(var(--mdc-theme-primary-rgb), 0.3);\r\n      width: 100%;\r\n      height: 85px;\r\n      padding: 20px;\r\n      border-radius: 5px;\r\n      position: relative;\r\n      align-items: center;\r\n    "},t.create("div",{style:"\r\n        width: 45px;\r\n        height: 45px;\r\n        border-radius: calc(45px / 2);\r\n        background-color: white;\r\n      "}),t.create("div",{"x-show":"!auth.authenticating"},t.create(pf,{attributes:{"x-transition.duration.250ms":""}},t.create("div",{style:"\r\n                margin-left: 10px;\r\n              ","x-show":"auth.loggedIn","x-text":"auth.email"},"Main")),t.create("div",{style:"\r\n                margin-left: 10px;\r\n                "},t.create("div",{"x-show":"!auth.loggedIn && !offline.isoffline","x-on:click":"() => {\r\n                    auth.dialogopen = true;\r\n                }"},t.create(Tf,{label:"Sign up / Sign in",type:"--raised"})),t.create("div",{"x-show":"auth.loggedIn","x-bind":"actions.signout"},t.create(Tf,{label:"Log out",type:"--raised"})))),t.create("div",{"x-show":"auth.authenticating",style:"\r\n    margin-left: 10px;\r\n    color: var(--mdc-theme-primary);\r\n    height: 8px;\r\n    width: 90%;\r\n"},t.create(qf,null))),t.create("div",{"x-show":"offline.isoffline"},t.create("div",{style:"display: flex;background-color: rgba(var(--mdc-theme-primary-rgb), 0.3);width: 100%;height: 85px;padding: 20px;border-radius: 5px;position: relative;align-items: center; margin-top: 10px;"},t.create("h3",{style:"margin-right: 10px;"},"Press the button when you are back online."),t.create("div",{"x-on:click":"window.location.reload()"},t.create(Tf,{label:"Go back online",type:"--raised"})))))),t.create(B_,null))}Yg.setup(U_()),Yg.createStyleSheet({onedash:{backgroundColor:"white"}}).attach(),document.addEventListener("alpine:init",(()=>{window.Alpine.data("loginModal",(()=>({mode:"",loginwith:"email",step:"loginorsignup",email:"",password:"",actions:{googlesignin:{"@click"(){if(this.auth.authenticating)return;this.auth.authenticating=!0;let e=Wp(this.firebaseapp);e.setPersistence(hh),Xh(e,new Ed).then((e=>{let t=e.user;this.auth.loggedIn=!0,this.auth.email=t.email,this.auth.displayName=t.displayName,this.auth.dialogopen=!1,this.auth.uid=t.uid,this.auth.authenticating=!1})).catch((e=>{alert(e.message),this.auth.authenticating=!1}))}},forgetpassword:{"@click"(){if(this.auth.authenticating)return;let e=Wp(this.firebaseapp);e.setPersistence(hh),$d(e,this.email)}},signup:{async"@click"(){if(console.log("XTRIGGER"),this.auth.authenticating)return;this.auth.authenticating=!0;const e=Cc(),t=btoa(this.email);let n=this.email.toString(),i=(await(r=this.password,new Promise(((e,t)=>{let n=new Worker(new URL(""+new URL("wasmhandler-388d8d67.js",import.meta.url).href,self.location),{type:"module"});n.onmessage=t=>{"ready"==t.data?(console.log("suc2"),n.postMessage({req:"newdatabase",password:r})):(e(t.data),n.terminate())}})))).data;var r;nc(Zl(e,"/users2/"+t)).then((r=>{null!=r.val()?(alert("User already exists on this service."),this.auth.authenticating=!1):(console.log(i),tc(Zl(e,"/users2/"+t),{database:i.database}).then((()=>{zd(Wp(this.firebaseapp),n,i.accessKey).then((e=>{Kd(e.user,{displayName:btoa(JSON.stringify({openid:i.openid}))}).then((()=>{this.auth.dialogopen=!1}))}))})))})),console.log(i)}},signin:{async"@click"(){if(this.auth.authenticating)return;this.auth.authenticating=!0;const e=Cc(),t=btoa(this.email);let n=this.email.toString();nc(Zl(e,"/users2/"+t)).then((async e=>{if(null!=e.val()){let i=e.val().database;try{let e=(await function(e,t){return new Promise(((n,i)=>{km.push(n),xm.postMessage({req:"getaccesskey",database:e,password:t})}))}(i,this.password)).data;"PASSFAILED"==e?console.log("KeePass was unable to open the database."):console.log("KeePass opened.");let t=Wp(this.firebaseapp);await Gd(t,n,e);this.auth.authenticating=!1,this.auth.dialogopen=!1}catch(t){this.auth.authenticating=!1,alert(t)}}else alert("User does not exist on this service."),this.auth.authenticating=!1}))}}}})))}));var q_,H_,V_,$_,W_={ANCHOR:"mdc-menu-surface--anchor",ANIMATING_CLOSED:"mdc-menu-surface--animating-closed",ANIMATING_OPEN:"mdc-menu-surface--animating-open",FIXED:"mdc-menu-surface--fixed",IS_OPEN_BELOW:"mdc-menu-surface--is-open-below",OPEN:"mdc-menu-surface--open",ROOT:"mdc-menu-surface"},z_={CLOSED_EVENT:"MDCMenuSurface:closed",CLOSING_EVENT:"MDCMenuSurface:closing",OPENED_EVENT:"MDCMenuSurface:opened",OPENING_EVENT:"MDCMenuSurface:opening",FOCUSABLE_ELEMENTS:["button:not(:disabled)",'[href]:not([aria-disabled="true"])',"input:not(:disabled)","select:not(:disabled)","textarea:not(:disabled)",'[tabindex]:not([tabindex="-1"]):not([aria-disabled="true"])'].join(", ")},G_={TRANSITION_OPEN_DURATION:120,TRANSITION_CLOSE_DURATION:75,MARGIN_TO_EDGE:32,ANCHOR_TO_MENU_SURFACE_WIDTH_RATIO:.67,TOUCH_EVENT_WAIT_MS:30};!function(e){e[e.BOTTOM=1]="BOTTOM",e[e.CENTER=2]="CENTER",e[e.RIGHT=4]="RIGHT",e[e.FLIP_RTL=8]="FLIP_RTL"}(q_||(q_={})),function(e){e[e.TOP_LEFT=0]="TOP_LEFT",e[e.TOP_RIGHT=4]="TOP_RIGHT",e[e.BOTTOM_LEFT=1]="BOTTOM_LEFT",e[e.BOTTOM_RIGHT=5]="BOTTOM_RIGHT",e[e.TOP_START=8]="TOP_START",e[e.TOP_END=12]="TOP_END",e[e.BOTTOM_START=9]="BOTTOM_START",e[e.BOTTOM_END=13]="BOTTOM_END"}(H_||(H_={}));var K_={LIST_ITEM_ACTIVATED_CLASS:"mdc-list-item--activated",LIST_ITEM_CLASS:"mdc-list-item",LIST_ITEM_DISABLED_CLASS:"mdc-list-item--disabled",LIST_ITEM_SELECTED_CLASS:"mdc-list-item--selected",LIST_ITEM_TEXT_CLASS:"mdc-list-item__text",LIST_ITEM_PRIMARY_TEXT_CLASS:"mdc-list-item__primary-text",ROOT:"mdc-list"},X_=((V_={})[""+K_.LIST_ITEM_ACTIVATED_CLASS]="mdc-list-item--activated",V_[""+K_.LIST_ITEM_CLASS]="mdc-list-item",V_[""+K_.LIST_ITEM_DISABLED_CLASS]="mdc-list-item--disabled",V_[""+K_.LIST_ITEM_SELECTED_CLASS]="mdc-list-item--selected",V_[""+K_.LIST_ITEM_PRIMARY_TEXT_CLASS]="mdc-list-item__primary-text",V_[""+K_.ROOT]="mdc-list",V_),Y_=(($_={})[""+K_.LIST_ITEM_ACTIVATED_CLASS]="mdc-deprecated-list-item--activated",$_[""+K_.LIST_ITEM_CLASS]="mdc-deprecated-list-item",$_[""+K_.LIST_ITEM_DISABLED_CLASS]="mdc-deprecated-list-item--disabled",$_[""+K_.LIST_ITEM_SELECTED_CLASS]="mdc-deprecated-list-item--selected",$_[""+K_.LIST_ITEM_TEXT_CLASS]="mdc-deprecated-list-item__text",$_[""+K_.LIST_ITEM_PRIMARY_TEXT_CLASS]="mdc-deprecated-list-item__primary-text",$_[""+K_.ROOT]="mdc-deprecated-list",$_),Q_={ACTION_EVENT:"MDCList:action",SELECTION_CHANGE_EVENT:"MDCList:selectionChange",ARIA_CHECKED:"aria-checked",ARIA_CHECKED_CHECKBOX_SELECTOR:'[role="checkbox"][aria-checked="true"]',ARIA_CHECKED_RADIO_SELECTOR:'[role="radio"][aria-checked="true"]',ARIA_CURRENT:"aria-current",ARIA_DISABLED:"aria-disabled",ARIA_ORIENTATION:"aria-orientation",ARIA_ORIENTATION_HORIZONTAL:"horizontal",ARIA_ROLE_CHECKBOX_SELECTOR:'[role="checkbox"]',ARIA_SELECTED:"aria-selected",ARIA_INTERACTIVE_ROLES_SELECTOR:'[role="listbox"], [role="menu"]',ARIA_MULTI_SELECTABLE_SELECTOR:'[aria-multiselectable="true"]',CHECKBOX_RADIO_SELECTOR:'input[type="checkbox"], input[type="radio"]',CHECKBOX_SELECTOR:'input[type="checkbox"]',CHILD_ELEMENTS_TO_TOGGLE_TABINDEX:"\n    ."+K_.LIST_ITEM_CLASS+" button:not(:disabled),\n    ."+K_.LIST_ITEM_CLASS+" a,\n    ."+Y_[K_.LIST_ITEM_CLASS]+" button:not(:disabled),\n    ."+Y_[K_.LIST_ITEM_CLASS]+" a\n  ",DEPRECATED_SELECTOR:".mdc-deprecated-list",FOCUSABLE_CHILD_ELEMENTS:"\n    ."+K_.LIST_ITEM_CLASS+" button:not(:disabled),\n    ."+K_.LIST_ITEM_CLASS+" a,\n    ."+K_.LIST_ITEM_CLASS+' input[type="radio"]:not(:disabled),\n    .'+K_.LIST_ITEM_CLASS+' input[type="checkbox"]:not(:disabled),\n    .'+Y_[K_.LIST_ITEM_CLASS]+" button:not(:disabled),\n    ."+Y_[K_.LIST_ITEM_CLASS]+" a,\n    ."+Y_[K_.LIST_ITEM_CLASS]+' input[type="radio"]:not(:disabled),\n    .'+Y_[K_.LIST_ITEM_CLASS]+' input[type="checkbox"]:not(:disabled)\n  ',RADIO_SELECTOR:'input[type="radio"]',SELECTED_ITEM_SELECTOR:'[aria-selected="true"], [aria-current="true"]'},J_={UNSET_INDEX:-1,TYPEAHEAD_BUFFER_CLEAR_TIMEOUT_MS:300},Z_={UNKNOWN:"Unknown",BACKSPACE:"Backspace",ENTER:"Enter",SPACEBAR:"Spacebar",PAGE_UP:"PageUp",PAGE_DOWN:"PageDown",END:"End",HOME:"Home",ARROW_LEFT:"ArrowLeft",ARROW_UP:"ArrowUp",ARROW_RIGHT:"ArrowRight",ARROW_DOWN:"ArrowDown",DELETE:"Delete",ESCAPE:"Escape",TAB:"Tab"},ev=new Set;ev.add(Z_.BACKSPACE),ev.add(Z_.ENTER),ev.add(Z_.SPACEBAR),ev.add(Z_.PAGE_UP),ev.add(Z_.PAGE_DOWN),ev.add(Z_.END),ev.add(Z_.HOME),ev.add(Z_.ARROW_LEFT),ev.add(Z_.ARROW_UP),ev.add(Z_.ARROW_RIGHT),ev.add(Z_.ARROW_DOWN),ev.add(Z_.DELETE),ev.add(Z_.ESCAPE),ev.add(Z_.TAB);var tv=8,nv=13,iv=32,rv=33,sv=34,av=35,ov=36,lv=37,cv=38,uv=39,dv=40,hv=46,pv=27,fv=9,mv=new Map;mv.set(tv,Z_.BACKSPACE),mv.set(nv,Z_.ENTER),mv.set(iv,Z_.SPACEBAR),mv.set(rv,Z_.PAGE_UP),mv.set(sv,Z_.PAGE_DOWN),mv.set(av,Z_.END),mv.set(ov,Z_.HOME),mv.set(lv,Z_.ARROW_LEFT),mv.set(cv,Z_.ARROW_UP),mv.set(uv,Z_.ARROW_RIGHT),mv.set(dv,Z_.ARROW_DOWN),mv.set(hv,Z_.DELETE),mv.set(pv,Z_.ESCAPE),mv.set(fv,Z_.TAB);var gv=new Set;function yv(e){var t=e.key;if(ev.has(t))return t;var n=mv.get(e.keyCode);return n||Z_.UNKNOWN}gv.add(Z_.PAGE_UP),gv.add(Z_.PAGE_DOWN),gv.add(Z_.END),gv.add(Z_.HOME),gv.add(Z_.ARROW_LEFT),gv.add(Z_.ARROW_UP),gv.add(Z_.ARROW_RIGHT),gv.add(Z_.ARROW_DOWN);var _v=["input","button","textarea","select"],vv=function(e){var t=e.target;if(t){var n=(""+t.tagName).toLowerCase();-1===_v.indexOf(n)&&e.preventDefault()}};function bv(e,t){var n,i=e.nextChar,r=e.focusItemAtIndex,s=e.sortedIndexByFirstChar,a=e.focusedItemIndex,o=e.skipFocus,l=e.isItemAtIndexDisabled;return clearTimeout(t.bufferClearTimeout),t.bufferClearTimeout=setTimeout((function(){Ev(t)}),J_.TYPEAHEAD_BUFFER_CLEAR_TIMEOUT_MS),t.typeaheadBuffer=t.typeaheadBuffer+i,n=1===t.typeaheadBuffer.length?function(e,t,n,i){var r=i.typeaheadBuffer[0],s=e.get(r);if(!s)return-1;if(r===i.currentFirstChar&&s[i.sortedIndexCursor].index===t){i.sortedIndexCursor=(i.sortedIndexCursor+1)%s.length;var a=s[i.sortedIndexCursor].index;if(!n(a))return a}i.currentFirstChar=r;var o,l=-1;for(o=0;o<s.length;o++)if(!n(s[o].index)){l=o;break}for(;o<s.length;o++)if(s[o].index>t&&!n(s[o].index)){l=o;break}if(-1!==l)return i.sortedIndexCursor=l,s[i.sortedIndexCursor].index;return-1}(s,a,l,t):function(e,t,n){var i=n.typeaheadBuffer[0],r=e.get(i);if(!r)return-1;var s=r[n.sortedIndexCursor];if(0===s.text.lastIndexOf(n.typeaheadBuffer,0)&&!t(s.index))return s.index;var a=(n.sortedIndexCursor+1)%r.length,o=-1;for(;a!==n.sortedIndexCursor;){var l=r[a],c=0===l.text.lastIndexOf(n.typeaheadBuffer,0),u=!t(l.index);if(c&&u){o=a;break}a=(a+1)%r.length}if(-1!==o)return n.sortedIndexCursor=o,r[n.sortedIndexCursor].index;return-1}(s,l,t),-1===n||o||r(n),n}function Tv(e){return e.typeaheadBuffer.length>0}function Ev(e){e.typeaheadBuffer=""}function wv(e,t){var n=e.event,i=e.isTargetListItem,r=e.focusedItemIndex,s=e.focusItemAtIndex,a=e.sortedIndexByFirstChar,o=e.isItemAtIndexDisabled,l="ArrowLeft"===yv(n),c="ArrowUp"===yv(n),u="ArrowRight"===yv(n),d="ArrowDown"===yv(n),h="Home"===yv(n),p="End"===yv(n),f="Enter"===yv(n),m="Spacebar"===yv(n);return n.altKey||n.ctrlKey||n.metaKey||l||c||u||d||h||p||f?-1:m||1!==n.key.length?m?(i&&vv(n),i&&Tv(t)?bv({focusItemAtIndex:s,focusedItemIndex:r,nextChar:" ",sortedIndexByFirstChar:a,skipFocus:!1,isItemAtIndexDisabled:o},t):-1):-1:(vv(n),bv({focusItemAtIndex:s,focusedItemIndex:r,nextChar:n.key.toLowerCase(),sortedIndexByFirstChar:a,skipFocus:!1,isItemAtIndexDisabled:o},t))}var Sv=["Alt","Control","Meta","Shift"];function Cv(e){var t=new Set(e?Sv.filter((function(t){return e.getModifierState(t)})):[]);return function(e){return e.every((function(e){return t.has(e)}))&&e.length===t.size}}var Iv,xv=function(e){function t(n){var i=e.call(this,Lc(Lc({},t.defaultAdapter),n))||this;return i.wrapFocus=!1,i.isVertical=!0,i.isSingleSelectionList=!1,i.areDisabledItemsFocusable=!0,i.selectedIndex=J_.UNSET_INDEX,i.focusedItemIndex=J_.UNSET_INDEX,i.useActivatedClass=!1,i.useSelectedAttr=!1,i.ariaCurrentAttrValue=null,i.isCheckboxList=!1,i.isRadioList=!1,i.lastSelectedIndex=null,i.hasTypeahead=!1,i.typeaheadState={bufferClearTimeout:0,currentFirstChar:"",sortedIndexCursor:0,typeaheadBuffer:""},i.sortedIndexByFirstChar=new Map,i}return Pc(t,e),Object.defineProperty(t,"strings",{get:function(){return Q_},enumerable:!1,configurable:!0}),Object.defineProperty(t,"cssClasses",{get:function(){return K_},enumerable:!1,configurable:!0}),Object.defineProperty(t,"numbers",{get:function(){return J_},enumerable:!1,configurable:!0}),Object.defineProperty(t,"defaultAdapter",{get:function(){return{addClassForElementIndex:function(){},focusItemAtIndex:function(){},getAttributeForElementIndex:function(){return null},getFocusedElementIndex:function(){return 0},getListItemCount:function(){return 0},hasCheckboxAtIndex:function(){return!1},hasRadioAtIndex:function(){return!1},isCheckboxCheckedAtIndex:function(){return!1},isFocusInsideList:function(){return!1},isRootFocused:function(){return!1},listItemAtIndexHasClass:function(){return!1},notifyAction:function(){},notifySelectionChange:function(){},removeClassForElementIndex:function(){},setAttributeForElementIndex:function(){},setCheckedCheckboxOrRadioAtIndex:function(){},setTabIndexForListItemChildren:function(){},getPrimaryTextAtIndex:function(){return""}}},enumerable:!1,configurable:!0}),t.prototype.layout=function(){0!==this.adapter.getListItemCount()&&(this.adapter.hasCheckboxAtIndex(0)?this.isCheckboxList=!0:this.adapter.hasRadioAtIndex(0)?this.isRadioList=!0:this.maybeInitializeSingleSelection(),this.hasTypeahead&&(this.sortedIndexByFirstChar=this.typeaheadInitSortedIndex()))},t.prototype.getFocusedItemIndex=function(){return this.focusedItemIndex},t.prototype.setWrapFocus=function(e){this.wrapFocus=e},t.prototype.setVerticalOrientation=function(e){this.isVertical=e},t.prototype.setSingleSelection=function(e){this.isSingleSelectionList=e,e&&(this.maybeInitializeSingleSelection(),this.selectedIndex=this.getSelectedIndexFromDOM())},t.prototype.setDisabledItemsFocusable=function(e){this.areDisabledItemsFocusable=e},t.prototype.maybeInitializeSingleSelection=function(){var e=this.getSelectedIndexFromDOM();e!==J_.UNSET_INDEX&&(this.adapter.listItemAtIndexHasClass(e,K_.LIST_ITEM_ACTIVATED_CLASS)&&this.setUseActivatedClass(!0),this.isSingleSelectionList=!0,this.selectedIndex=e)},t.prototype.getSelectedIndexFromDOM=function(){for(var e=J_.UNSET_INDEX,t=this.adapter.getListItemCount(),n=0;n<t;n++){var i=this.adapter.listItemAtIndexHasClass(n,K_.LIST_ITEM_SELECTED_CLASS),r=this.adapter.listItemAtIndexHasClass(n,K_.LIST_ITEM_ACTIVATED_CLASS);if(i||r){e=n;break}}return e},t.prototype.setHasTypeahead=function(e){this.hasTypeahead=e,e&&(this.sortedIndexByFirstChar=this.typeaheadInitSortedIndex())},t.prototype.isTypeaheadInProgress=function(){return this.hasTypeahead&&Tv(this.typeaheadState)},t.prototype.setUseActivatedClass=function(e){this.useActivatedClass=e},t.prototype.setUseSelectedAttribute=function(e){this.useSelectedAttr=e},t.prototype.getSelectedIndex=function(){return this.selectedIndex},t.prototype.setSelectedIndex=function(e,t){void 0===t&&(t={}),this.isIndexValid(e)&&(this.isCheckboxList?this.setCheckboxAtIndex(e,t):this.isRadioList?this.setRadioAtIndex(e,t):this.setSingleSelectionAtIndex(e,t))},t.prototype.handleFocusIn=function(e){e>=0&&(this.focusedItemIndex=e,this.adapter.setAttributeForElementIndex(e,"tabindex","0"),this.adapter.setTabIndexForListItemChildren(e,"0"))},t.prototype.handleFocusOut=function(e){var t=this;e>=0&&(this.adapter.setAttributeForElementIndex(e,"tabindex","-1"),this.adapter.setTabIndexForListItemChildren(e,"-1")),setTimeout((function(){t.adapter.isFocusInsideList()||t.setTabindexToFirstSelectedOrFocusedItem()}),0)},t.prototype.isIndexDisabled=function(e){return this.adapter.listItemAtIndexHasClass(e,K_.LIST_ITEM_DISABLED_CLASS)},t.prototype.handleKeydown=function(e,t,n){var i,r=this,s="ArrowLeft"===yv(e),a="ArrowUp"===yv(e),o="ArrowRight"===yv(e),l="ArrowDown"===yv(e),c="Home"===yv(e),u="End"===yv(e),d="Enter"===yv(e),h="Spacebar"===yv(e),p=this.isVertical&&l||!this.isVertical&&o,f=this.isVertical&&a||!this.isVertical&&s,m="A"===e.key||"a"===e.key,g=Cv(e);if(this.adapter.isRootFocused()){if((f||u)&&g([]))e.preventDefault(),this.focusLastElement();else if((p||c)&&g([]))e.preventDefault(),this.focusFirstElement();else if(f&&g(["Shift"])&&this.isCheckboxList){e.preventDefault(),-1!==(v=this.focusLastElement())&&this.setSelectedIndexOnAction(v,!1)}else if(p&&g(["Shift"])&&this.isCheckboxList){e.preventDefault(),-1!==(v=this.focusFirstElement())&&this.setSelectedIndexOnAction(v,!1)}if(this.hasTypeahead){var y={event:e,focusItemAtIndex:function(e){r.focusItemAtIndex(e)},focusedItemIndex:-1,isTargetListItem:t,sortedIndexByFirstChar:this.sortedIndexByFirstChar,isItemAtIndexDisabled:function(e){return r.isIndexDisabled(e)}};wv(y,this.typeaheadState)}}else{var _=this.adapter.getFocusedElementIndex();if(!(-1===_&&(_=n)<0)){if(p&&g([]))vv(e),this.focusNextElement(_);else if(f&&g([]))vv(e),this.focusPrevElement(_);else if(p&&g(["Shift"])&&this.isCheckboxList){vv(e),-1!==(v=this.focusNextElement(_))&&this.setSelectedIndexOnAction(v,!1)}else if(f&&g(["Shift"])&&this.isCheckboxList){var v;vv(e),-1!==(v=this.focusPrevElement(_))&&this.setSelectedIndexOnAction(v,!1)}else if(c&&g([]))vv(e),this.focusFirstElement();else if(u&&g([]))vv(e),this.focusLastElement();else if(c&&g(["Control","Shift"])&&this.isCheckboxList){if(vv(e),this.isIndexDisabled(_))return;this.focusFirstElement(),this.toggleCheckboxRange(0,_,_)}else if(u&&g(["Control","Shift"])&&this.isCheckboxList){if(vv(e),this.isIndexDisabled(_))return;this.focusLastElement(),this.toggleCheckboxRange(_,this.adapter.getListItemCount()-1,_)}else if(m&&g(["Control"])&&this.isCheckboxList)e.preventDefault(),this.checkboxListToggleAll(this.selectedIndex===J_.UNSET_INDEX?[]:this.selectedIndex,!0);else if((d||h)&&g([])){if(t){if((b=e.target)&&"A"===b.tagName&&d)return;if(vv(e),this.isIndexDisabled(_))return;this.isTypeaheadInProgress()||(this.isSelectableList()&&this.setSelectedIndexOnAction(_,!1),this.adapter.notifyAction(_))}}else if((d||h)&&g(["Shift"])&&this.isCheckboxList){var b;if((b=e.target)&&"A"===b.tagName&&d)return;if(vv(e),this.isIndexDisabled(_))return;this.isTypeaheadInProgress()||(this.toggleCheckboxRange(null!==(i=this.lastSelectedIndex)&&void 0!==i?i:_,_,_),this.adapter.notifyAction(_))}if(this.hasTypeahead){y={event:e,focusItemAtIndex:function(e){r.focusItemAtIndex(e)},focusedItemIndex:this.focusedItemIndex,isTargetListItem:t,sortedIndexByFirstChar:this.sortedIndexByFirstChar,isItemAtIndexDisabled:function(e){return r.isIndexDisabled(e)}};wv(y,this.typeaheadState)}}}},t.prototype.handleClick=function(e,t,n){var i,r=Cv(n);e!==J_.UNSET_INDEX&&(this.isIndexDisabled(e)||(r([])?(this.isSelectableList()&&this.setSelectedIndexOnAction(e,t),this.adapter.notifyAction(e)):this.isCheckboxList&&r(["Shift"])&&(this.toggleCheckboxRange(null!==(i=this.lastSelectedIndex)&&void 0!==i?i:e,e,e),this.adapter.notifyAction(e))))},t.prototype.focusNextElement=function(e){var t=this.adapter.getListItemCount(),n=e,i=null;do{if(++n>=t){if(!this.wrapFocus)return e;n=0}if(n===i)return-1;i=null!=i?i:n}while(!this.areDisabledItemsFocusable&&this.isIndexDisabled(n));return this.focusItemAtIndex(n),n},t.prototype.focusPrevElement=function(e){var t=this.adapter.getListItemCount(),n=e,i=null;do{if(--n<0){if(!this.wrapFocus)return e;n=t-1}if(n===i)return-1;i=null!=i?i:n}while(!this.areDisabledItemsFocusable&&this.isIndexDisabled(n));return this.focusItemAtIndex(n),n},t.prototype.focusFirstElement=function(){return this.focusNextElement(-1)},t.prototype.focusLastElement=function(){return this.focusPrevElement(this.adapter.getListItemCount())},t.prototype.focusInitialElement=function(){var e=this.getFirstSelectedOrFocusedItemIndex();return this.focusItemAtIndex(e),e},t.prototype.setEnabled=function(e,t){this.isIndexValid(e,!1)&&(t?(this.adapter.removeClassForElementIndex(e,K_.LIST_ITEM_DISABLED_CLASS),this.adapter.setAttributeForElementIndex(e,Q_.ARIA_DISABLED,"false")):(this.adapter.addClassForElementIndex(e,K_.LIST_ITEM_DISABLED_CLASS),this.adapter.setAttributeForElementIndex(e,Q_.ARIA_DISABLED,"true")))},t.prototype.setSingleSelectionAtIndex=function(e,t){if(void 0===t&&(t={}),this.selectedIndex!==e||t.forceUpdate){var n=K_.LIST_ITEM_SELECTED_CLASS;this.useActivatedClass&&(n=K_.LIST_ITEM_ACTIVATED_CLASS),this.selectedIndex!==J_.UNSET_INDEX&&this.adapter.removeClassForElementIndex(this.selectedIndex,n),this.setAriaForSingleSelectionAtIndex(e),this.setTabindexAtIndex(e),e!==J_.UNSET_INDEX&&this.adapter.addClassForElementIndex(e,n),this.selectedIndex=e,t.isUserInteraction&&!t.forceUpdate&&this.adapter.notifySelectionChange([e])}},t.prototype.setAriaForSingleSelectionAtIndex=function(e){this.selectedIndex===J_.UNSET_INDEX&&(this.ariaCurrentAttrValue=this.adapter.getAttributeForElementIndex(e,Q_.ARIA_CURRENT));var t=null!==this.ariaCurrentAttrValue,n=t?Q_.ARIA_CURRENT:Q_.ARIA_SELECTED;if(this.selectedIndex!==J_.UNSET_INDEX&&this.adapter.setAttributeForElementIndex(this.selectedIndex,n,"false"),e!==J_.UNSET_INDEX){var i=t?this.ariaCurrentAttrValue:"true";this.adapter.setAttributeForElementIndex(e,n,i)}},t.prototype.getSelectionAttribute=function(){return this.useSelectedAttr?Q_.ARIA_SELECTED:Q_.ARIA_CHECKED},t.prototype.setRadioAtIndex=function(e,t){void 0===t&&(t={});var n=this.getSelectionAttribute();this.adapter.setCheckedCheckboxOrRadioAtIndex(e,!0),(this.selectedIndex!==e||t.forceUpdate)&&(this.selectedIndex!==J_.UNSET_INDEX&&this.adapter.setAttributeForElementIndex(this.selectedIndex,n,"false"),this.adapter.setAttributeForElementIndex(e,n,"true"),this.selectedIndex=e,t.isUserInteraction&&!t.forceUpdate&&this.adapter.notifySelectionChange([e]))},t.prototype.setCheckboxAtIndex=function(e,t){void 0===t&&(t={});for(var n=this.selectedIndex,i=t.isUserInteraction?new Set(n===J_.UNSET_INDEX?[]:n):null,r=this.getSelectionAttribute(),s=[],a=0;a<this.adapter.getListItemCount();a++){var o=null==i?void 0:i.has(a),l=e.indexOf(a)>=0;l!==o&&s.push(a),this.adapter.setCheckedCheckboxOrRadioAtIndex(a,l),this.adapter.setAttributeForElementIndex(a,r,l?"true":"false")}this.selectedIndex=e,t.isUserInteraction&&s.length&&this.adapter.notifySelectionChange(s)},t.prototype.toggleCheckboxRange=function(e,t,n){this.lastSelectedIndex=n;for(var i=new Set(this.selectedIndex===J_.UNSET_INDEX?[]:this.selectedIndex),r=!(null==i?void 0:i.has(n)),s=Rc([e,t].sort(),2),a=s[0],o=s[1],l=this.getSelectionAttribute(),c=[],u=a;u<=o;u++){if(!this.isIndexDisabled(u))r!==i.has(u)&&(c.push(u),this.adapter.setCheckedCheckboxOrRadioAtIndex(u,r),this.adapter.setAttributeForElementIndex(u,l,""+r),r?i.add(u):i.delete(u))}c.length&&(this.selectedIndex=Mc([],Rc(i)),this.adapter.notifySelectionChange(c))},t.prototype.setTabindexAtIndex=function(e){this.focusedItemIndex===J_.UNSET_INDEX&&0!==e?this.adapter.setAttributeForElementIndex(0,"tabindex","-1"):this.focusedItemIndex>=0&&this.focusedItemIndex!==e&&this.adapter.setAttributeForElementIndex(this.focusedItemIndex,"tabindex","-1"),this.selectedIndex instanceof Array||this.selectedIndex===e||this.adapter.setAttributeForElementIndex(this.selectedIndex,"tabindex","-1"),e!==J_.UNSET_INDEX&&this.adapter.setAttributeForElementIndex(e,"tabindex","0")},t.prototype.isSelectableList=function(){return this.isSingleSelectionList||this.isCheckboxList||this.isRadioList},t.prototype.setTabindexToFirstSelectedOrFocusedItem=function(){var e=this.getFirstSelectedOrFocusedItemIndex();this.setTabindexAtIndex(e)},t.prototype.getFirstSelectedOrFocusedItemIndex=function(){return this.isSelectableList()?"number"==typeof this.selectedIndex&&this.selectedIndex!==J_.UNSET_INDEX?this.selectedIndex:this.selectedIndex instanceof Array&&this.selectedIndex.length>0?this.selectedIndex.reduce((function(e,t){return Math.min(e,t)})):0:Math.max(this.focusedItemIndex,0)},t.prototype.isIndexValid=function(e,t){var n=this;if(void 0===t&&(t=!0),e instanceof Array){if(!this.isCheckboxList&&t)throw new Error("MDCListFoundation: Array of index is only supported for checkbox based list");return 0===e.length||e.some((function(e){return n.isIndexInRange(e)}))}if("number"==typeof e){if(this.isCheckboxList&&t)throw new Error("MDCListFoundation: Expected array of index for checkbox based list but got number: "+e);return this.isIndexInRange(e)||this.isSingleSelectionList&&e===J_.UNSET_INDEX}return!1},t.prototype.isIndexInRange=function(e){var t=this.adapter.getListItemCount();return e>=0&&e<t},t.prototype.setSelectedIndexOnAction=function(e,t){this.lastSelectedIndex=e,this.isCheckboxList?(this.toggleCheckboxAtIndex(e,t),this.adapter.notifySelectionChange([e])):this.setSelectedIndex(e,{isUserInteraction:!0})},t.prototype.toggleCheckboxAtIndex=function(e,t){var n,i=this.getSelectionAttribute(),r=this.adapter.isCheckboxCheckedAtIndex(e);t?n=r:(n=!r,this.adapter.setCheckedCheckboxOrRadioAtIndex(e,n)),this.adapter.setAttributeForElementIndex(e,i,n?"true":"false");var s=this.selectedIndex===J_.UNSET_INDEX?[]:this.selectedIndex.slice();n?s.push(e):s=s.filter((function(t){return t!==e})),this.selectedIndex=s},t.prototype.focusItemAtIndex=function(e){this.adapter.focusItemAtIndex(e),this.focusedItemIndex=e},t.prototype.checkboxListToggleAll=function(e,t){var n=this.adapter.getListItemCount();if(e.length===n)this.setCheckboxAtIndex([],{isUserInteraction:t});else{for(var i=[],r=0;r<n;r++)(!this.isIndexDisabled(r)||e.indexOf(r)>-1)&&i.push(r);this.setCheckboxAtIndex(i,{isUserInteraction:t})}},t.prototype.typeaheadMatchItem=function(e,t,n){var i=this;void 0===n&&(n=!1);var r={focusItemAtIndex:function(e){i.focusItemAtIndex(e)},focusedItemIndex:t||this.focusedItemIndex,nextChar:e,sortedIndexByFirstChar:this.sortedIndexByFirstChar,skipFocus:n,isItemAtIndexDisabled:function(e){return i.isIndexDisabled(e)}};return bv(r,this.typeaheadState)},t.prototype.typeaheadInitSortedIndex=function(){return function(e,t){for(var n=new Map,i=0;i<e;i++){var r=t(i).trim();if(r){var s=r[0].toLowerCase();n.has(s)||n.set(s,[]),n.get(s).push({text:r.toLowerCase(),index:i})}}return n.forEach((function(e){e.sort((function(e,t){return e.index-t.index}))})),n}(this.adapter.getListItemCount(),this.adapter.getPrimaryTextAtIndex)},t.prototype.clearTypeaheadBuffer=function(){Ev(this.typeaheadState)},t}(Zp),kv=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Pc(t,e),Object.defineProperty(t.prototype,"vertical",{set:function(e){this.foundation.setVerticalOrientation(e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"listElements",{get:function(){return Array.from(this.root.querySelectorAll("."+this.classNameMap[K_.LIST_ITEM_CLASS]))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"wrapFocus",{set:function(e){this.foundation.setWrapFocus(e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"typeaheadInProgress",{get:function(){return this.foundation.isTypeaheadInProgress()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasTypeahead",{set:function(e){this.foundation.setHasTypeahead(e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"singleSelection",{set:function(e){this.foundation.setSingleSelection(e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"disabledItemsFocusable",{set:function(e){this.foundation.setDisabledItemsFocusable(e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"selectedIndex",{get:function(){return this.foundation.getSelectedIndex()},set:function(e){this.foundation.setSelectedIndex(e)},enumerable:!1,configurable:!0}),t.attachTo=function(e){return new t(e)},t.prototype.initialSyncWithDOM=function(){this.isEvolutionEnabled="evolution"in this.root.dataset,this.isEvolutionEnabled?this.classNameMap=X_:rf(this.root,Q_.DEPRECATED_SELECTOR)?this.classNameMap=Y_:this.classNameMap=Object.values(K_).reduce((function(e,t){return e[t]=t,e}),{}),this.handleClick=this.handleClickEvent.bind(this),this.handleKeydown=this.handleKeydownEvent.bind(this),this.focusInEventListener=this.handleFocusInEvent.bind(this),this.focusOutEventListener=this.handleFocusOutEvent.bind(this),this.listen("keydown",this.handleKeydown),this.listen("click",this.handleClick),this.listen("focusin",this.focusInEventListener),this.listen("focusout",this.focusOutEventListener),this.layout(),this.initializeListType(),this.ensureFocusable()},t.prototype.destroy=function(){this.unlisten("keydown",this.handleKeydown),this.unlisten("click",this.handleClick),this.unlisten("focusin",this.focusInEventListener),this.unlisten("focusout",this.focusOutEventListener)},t.prototype.layout=function(){var e=this.root.getAttribute(Q_.ARIA_ORIENTATION);this.vertical=e!==Q_.ARIA_ORIENTATION_HORIZONTAL;var t="."+this.classNameMap[K_.LIST_ITEM_CLASS]+":not([tabindex])",n=Q_.FOCUSABLE_CHILD_ELEMENTS,i=this.root.querySelectorAll(t);i.length&&Array.prototype.forEach.call(i,(function(e){e.setAttribute("tabindex","-1")}));var r=this.root.querySelectorAll(n);r.length&&Array.prototype.forEach.call(r,(function(e){e.setAttribute("tabindex","-1")})),this.isEvolutionEnabled&&this.foundation.setUseSelectedAttribute(!0),this.foundation.layout()},t.prototype.getPrimaryText=function(e){var t,n=e.querySelector("."+this.classNameMap[K_.LIST_ITEM_PRIMARY_TEXT_CLASS]);if(this.isEvolutionEnabled||n)return null!==(t=null==n?void 0:n.textContent)&&void 0!==t?t:"";var i=e.querySelector("."+this.classNameMap[K_.LIST_ITEM_TEXT_CLASS]);return i&&i.textContent||""},t.prototype.initializeListType=function(){var e=this;if(this.isInteractive=rf(this.root,Q_.ARIA_INTERACTIVE_ROLES_SELECTOR),this.isEvolutionEnabled&&this.isInteractive){var t=Array.from(this.root.querySelectorAll(Q_.SELECTED_ITEM_SELECTOR),(function(t){return e.listElements.indexOf(t)}));rf(this.root,Q_.ARIA_MULTI_SELECTABLE_SELECTOR)?this.selectedIndex=t:t.length>0&&(this.selectedIndex=t[0])}else{var n=this.root.querySelectorAll(Q_.ARIA_ROLE_CHECKBOX_SELECTOR),i=this.root.querySelector(Q_.ARIA_CHECKED_RADIO_SELECTOR);if(n.length){var r=this.root.querySelectorAll(Q_.ARIA_CHECKED_CHECKBOX_SELECTOR);this.selectedIndex=Array.from(r,(function(t){return e.listElements.indexOf(t)}))}else i&&(this.selectedIndex=this.listElements.indexOf(i))}},t.prototype.setEnabled=function(e,t){this.foundation.setEnabled(e,t)},t.prototype.typeaheadMatchItem=function(e,t){return this.foundation.typeaheadMatchItem(e,t,!0)},t.prototype.getDefaultFoundation=function(){var e=this,t={addClassForElementIndex:function(t,n){var i=e.listElements[t];i&&i.classList.add(e.classNameMap[n])},focusItemAtIndex:function(t){var n=e.listElements[t];n&&n.focus()},getAttributeForElementIndex:function(t,n){return e.listElements[t].getAttribute(n)},getFocusedElementIndex:function(){return e.listElements.indexOf(document.activeElement)},getListItemCount:function(){return e.listElements.length},getPrimaryTextAtIndex:function(t){return e.getPrimaryText(e.listElements[t])},hasCheckboxAtIndex:function(t){return!!e.listElements[t].querySelector(Q_.CHECKBOX_SELECTOR)},hasRadioAtIndex:function(t){return!!e.listElements[t].querySelector(Q_.RADIO_SELECTOR)},isCheckboxCheckedAtIndex:function(t){return e.listElements[t].querySelector(Q_.CHECKBOX_SELECTOR).checked},isFocusInsideList:function(){return e.root!==document.activeElement&&e.root.contains(document.activeElement)},isRootFocused:function(){return document.activeElement===e.root},listItemAtIndexHasClass:function(t,n){return e.listElements[t].classList.contains(e.classNameMap[n])},notifyAction:function(t){e.emit(Q_.ACTION_EVENT,{index:t},!0)},notifySelectionChange:function(t){e.emit(Q_.SELECTION_CHANGE_EVENT,{changedIndices:t},!0)},removeClassForElementIndex:function(t,n){var i=e.listElements[t];i&&i.classList.remove(e.classNameMap[n])},setAttributeForElementIndex:function(t,n,i){var r=e.listElements[t];r&&r.setAttribute(n,i)},setCheckedCheckboxOrRadioAtIndex:function(t,n){var i=e.listElements[t].querySelector(Q_.CHECKBOX_RADIO_SELECTOR);i.checked=n;var r=document.createEvent("Event");r.initEvent("change",!0,!0),i.dispatchEvent(r)},setTabIndexForListItemChildren:function(t,n){var i=e.listElements[t],r=Q_.CHILD_ELEMENTS_TO_TOGGLE_TABINDEX;Array.prototype.forEach.call(i.querySelectorAll(r),(function(e){e.setAttribute("tabindex",n)}))}};return new xv(t)},t.prototype.ensureFocusable=function(){if(this.isEvolutionEnabled&&this.isInteractive&&!this.root.querySelector("."+this.classNameMap[K_.LIST_ITEM_CLASS]+'[tabindex="0"]')){var e=this.initialFocusIndex();-1!==e&&(this.listElements[e].tabIndex=0)}},t.prototype.initialFocusIndex=function(){if(this.selectedIndex instanceof Array&&this.selectedIndex.length>0)return this.selectedIndex[0];if("number"==typeof this.selectedIndex&&this.selectedIndex!==J_.UNSET_INDEX)return this.selectedIndex;var e=this.root.querySelector("."+this.classNameMap[K_.LIST_ITEM_CLASS]+":not(."+this.classNameMap[K_.LIST_ITEM_DISABLED_CLASS]+")");return null===e?-1:this.getListItemIndex(e)},t.prototype.getListItemIndex=function(e){var t=nf(e,"."+this.classNameMap[K_.LIST_ITEM_CLASS]+", ."+this.classNameMap[K_.ROOT]);return t&&rf(t,"."+this.classNameMap[K_.LIST_ITEM_CLASS])?this.listElements.indexOf(t):-1},t.prototype.handleFocusInEvent=function(e){var t=this.getListItemIndex(e.target);this.foundation.handleFocusIn(t)},t.prototype.handleFocusOutEvent=function(e){var t=this.getListItemIndex(e.target);this.foundation.handleFocusOut(t)},t.prototype.handleKeydownEvent=function(e){var t=this.getListItemIndex(e.target),n=e.target;this.foundation.handleKeydown(e,n.classList.contains(this.classNameMap[K_.LIST_ITEM_CLASS]),t)},t.prototype.handleClickEvent=function(e){var t=this.getListItemIndex(e.target),n=!rf(e.target,Q_.CHECKBOX_RADIO_SELECTOR);this.foundation.handleClick(t,n,e)},t}(ef),Av=function(e){function t(n){var i=e.call(this,Lc(Lc({},t.defaultAdapter),n))||this;return i.isSurfaceOpen=!1,i.isQuickOpen=!1,i.isHoistedElement=!1,i.isFixedPosition=!1,i.isHorizontallyCenteredOnViewport=!1,i.maxHeight=0,i.openBottomBias=0,i.openAnimationEndTimerId=0,i.closeAnimationEndTimerId=0,i.animationRequestId=0,i.anchorCorner=H_.TOP_START,i.originCorner=H_.TOP_START,i.anchorMargin={top:0,right:0,bottom:0,left:0},i.position={x:0,y:0},i}return Pc(t,e),Object.defineProperty(t,"cssClasses",{get:function(){return W_},enumerable:!1,configurable:!0}),Object.defineProperty(t,"strings",{get:function(){return z_},enumerable:!1,configurable:!0}),Object.defineProperty(t,"numbers",{get:function(){return G_},enumerable:!1,configurable:!0}),Object.defineProperty(t,"Corner",{get:function(){return H_},enumerable:!1,configurable:!0}),Object.defineProperty(t,"defaultAdapter",{get:function(){return{addClass:function(){},removeClass:function(){},hasClass:function(){return!1},hasAnchor:function(){return!1},isElementInContainer:function(){return!1},isFocused:function(){return!1},isRtl:function(){return!1},getInnerDimensions:function(){return{height:0,width:0}},getAnchorDimensions:function(){return null},getWindowDimensions:function(){return{height:0,width:0}},getBodyDimensions:function(){return{height:0,width:0}},getWindowScroll:function(){return{x:0,y:0}},setPosition:function(){},setMaxHeight:function(){},setTransformOrigin:function(){},saveFocus:function(){},restoreFocus:function(){},notifyClose:function(){},notifyClosing:function(){},notifyOpen:function(){},notifyOpening:function(){}}},enumerable:!1,configurable:!0}),t.prototype.init=function(){var e=t.cssClasses,n=e.ROOT,i=e.OPEN;if(!this.adapter.hasClass(n))throw new Error(n+" class required in root element.");this.adapter.hasClass(i)&&(this.isSurfaceOpen=!0)},t.prototype.destroy=function(){clearTimeout(this.openAnimationEndTimerId),clearTimeout(this.closeAnimationEndTimerId),cancelAnimationFrame(this.animationRequestId)},t.prototype.setAnchorCorner=function(e){this.anchorCorner=e},t.prototype.flipCornerHorizontally=function(){this.originCorner=this.originCorner^q_.RIGHT},t.prototype.setAnchorMargin=function(e){this.anchorMargin.top=e.top||0,this.anchorMargin.right=e.right||0,this.anchorMargin.bottom=e.bottom||0,this.anchorMargin.left=e.left||0},t.prototype.setIsHoisted=function(e){this.isHoistedElement=e},t.prototype.setFixedPosition=function(e){this.isFixedPosition=e},t.prototype.isFixed=function(){return this.isFixedPosition},t.prototype.setAbsolutePosition=function(e,t){this.position.x=this.isFinite(e)?e:0,this.position.y=this.isFinite(t)?t:0},t.prototype.setIsHorizontallyCenteredOnViewport=function(e){this.isHorizontallyCenteredOnViewport=e},t.prototype.setQuickOpen=function(e){this.isQuickOpen=e},t.prototype.setMaxHeight=function(e){this.maxHeight=e},t.prototype.setOpenBottomBias=function(e){this.openBottomBias=e},t.prototype.isOpen=function(){return this.isSurfaceOpen},t.prototype.open=function(){var e=this;this.isSurfaceOpen||(this.adapter.notifyOpening(),this.adapter.saveFocus(),this.isQuickOpen?(this.isSurfaceOpen=!0,this.adapter.addClass(t.cssClasses.OPEN),this.dimensions=this.adapter.getInnerDimensions(),this.autoposition(),this.adapter.notifyOpen()):(this.adapter.addClass(t.cssClasses.ANIMATING_OPEN),this.animationRequestId=requestAnimationFrame((function(){e.dimensions=e.adapter.getInnerDimensions(),e.autoposition(),e.adapter.addClass(t.cssClasses.OPEN),e.openAnimationEndTimerId=setTimeout((function(){e.openAnimationEndTimerId=0,e.adapter.removeClass(t.cssClasses.ANIMATING_OPEN),e.adapter.notifyOpen()}),G_.TRANSITION_OPEN_DURATION)})),this.isSurfaceOpen=!0))},t.prototype.close=function(e){var n=this;if(void 0===e&&(e=!1),this.isSurfaceOpen){if(this.adapter.notifyClosing(),this.isQuickOpen)return this.isSurfaceOpen=!1,e||this.maybeRestoreFocus(),this.adapter.removeClass(t.cssClasses.OPEN),this.adapter.removeClass(t.cssClasses.IS_OPEN_BELOW),void this.adapter.notifyClose();this.adapter.addClass(t.cssClasses.ANIMATING_CLOSED),requestAnimationFrame((function(){n.adapter.removeClass(t.cssClasses.OPEN),n.adapter.removeClass(t.cssClasses.IS_OPEN_BELOW),n.closeAnimationEndTimerId=setTimeout((function(){n.closeAnimationEndTimerId=0,n.adapter.removeClass(t.cssClasses.ANIMATING_CLOSED),n.adapter.notifyClose()}),G_.TRANSITION_CLOSE_DURATION)})),this.isSurfaceOpen=!1,e||this.maybeRestoreFocus()}},t.prototype.handleBodyClick=function(e){var t=e.target;this.adapter.isElementInContainer(t)||this.close()},t.prototype.handleKeydown=function(e){var t=e.keyCode;("Escape"===e.key||27===t)&&this.close()},t.prototype.autoposition=function(){var e;this.measurements=this.getAutoLayoutmeasurements();var n=this.getoriginCorner(),i=this.getMenuSurfaceMaxHeight(n),r=this.hasBit(n,q_.BOTTOM)?"bottom":"top",s=this.hasBit(n,q_.RIGHT)?"right":"left",a=this.getHorizontalOriginOffset(n),o=this.getVerticalOriginOffset(n),l=this.measurements,c=l.anchorSize,u=l.surfaceSize,d=((e={})[s]=a,e[r]=o,e);c.width/u.width>G_.ANCHOR_TO_MENU_SURFACE_WIDTH_RATIO&&(s="center"),(this.isHoistedElement||this.isFixedPosition)&&this.adjustPositionForHoistedElement(d),this.adapter.setTransformOrigin(s+" "+r),this.adapter.setPosition(d),this.adapter.setMaxHeight(i?i+"px":""),this.hasBit(n,q_.BOTTOM)||this.adapter.addClass(t.cssClasses.IS_OPEN_BELOW)},t.prototype.getAutoLayoutmeasurements=function(){var e=this.adapter.getAnchorDimensions(),t=this.adapter.getBodyDimensions(),n=this.adapter.getWindowDimensions(),i=this.adapter.getWindowScroll();return e||(e={top:this.position.y,right:this.position.x,bottom:this.position.y,left:this.position.x,width:0,height:0}),{anchorSize:e,bodySize:t,surfaceSize:this.dimensions,viewportDistance:{top:e.top,right:n.width-e.right,bottom:n.height-e.bottom,left:e.left},viewportSize:n,windowScroll:i}},t.prototype.getoriginCorner=function(){var e,n,i=this.originCorner,r=this.measurements,s=r.viewportDistance,a=r.anchorSize,o=r.surfaceSize,l=t.numbers.MARGIN_TO_EDGE;this.hasBit(this.anchorCorner,q_.BOTTOM)?(e=s.top-l+this.anchorMargin.bottom,n=s.bottom-l-this.anchorMargin.bottom):(e=s.top-l+this.anchorMargin.top,n=s.bottom-l+a.height-this.anchorMargin.top),!(n-o.height>0)&&e>n+this.openBottomBias&&(i=this.setBit(i,q_.BOTTOM));var c,u,d=this.adapter.isRtl(),h=this.hasBit(this.anchorCorner,q_.FLIP_RTL),p=this.hasBit(this.anchorCorner,q_.RIGHT)||this.hasBit(i,q_.RIGHT),f=!1;(f=d&&h?!p:p)?(c=s.left+a.width+this.anchorMargin.right,u=s.right-this.anchorMargin.right):(c=s.left+this.anchorMargin.left,u=s.right+a.width-this.anchorMargin.left);var m=c-o.width>0,g=u-o.width>0,y=this.hasBit(i,q_.FLIP_RTL)&&this.hasBit(i,q_.RIGHT);return g&&y&&d||!m&&y?i=this.unsetBit(i,q_.RIGHT):(m&&f&&d||m&&!f&&p||!g&&c>=u)&&(i=this.setBit(i,q_.RIGHT)),i},t.prototype.getMenuSurfaceMaxHeight=function(e){if(this.maxHeight>0)return this.maxHeight;var n=this.measurements.viewportDistance,i=0,r=this.hasBit(e,q_.BOTTOM),s=this.hasBit(this.anchorCorner,q_.BOTTOM),a=t.numbers.MARGIN_TO_EDGE;return r?(i=n.top+this.anchorMargin.top-a,s||(i+=this.measurements.anchorSize.height)):(i=n.bottom-this.anchorMargin.bottom+this.measurements.anchorSize.height-a,s&&(i-=this.measurements.anchorSize.height)),i},t.prototype.getHorizontalOriginOffset=function(e){var t=this.measurements.anchorSize,n=this.hasBit(e,q_.RIGHT),i=this.hasBit(this.anchorCorner,q_.RIGHT);if(n){var r=i?t.width-this.anchorMargin.left:this.anchorMargin.right;return this.isHoistedElement||this.isFixedPosition?r-(this.measurements.viewportSize.width-this.measurements.bodySize.width):r}return i?t.width-this.anchorMargin.right:this.anchorMargin.left},t.prototype.getVerticalOriginOffset=function(e){var t=this.measurements.anchorSize,n=this.hasBit(e,q_.BOTTOM),i=this.hasBit(this.anchorCorner,q_.BOTTOM);return n?i?t.height-this.anchorMargin.top:-this.anchorMargin.bottom:i?t.height+this.anchorMargin.bottom:this.anchorMargin.top},t.prototype.adjustPositionForHoistedElement=function(e){var t,n,i=this.measurements,r=i.windowScroll,s=i.viewportDistance,a=i.surfaceSize,o=i.viewportSize,l=Object.keys(e);try{for(var c=Dc(l),u=c.next();!u.done;u=c.next()){var d=u.value,h=e[d]||0;!this.isHorizontallyCenteredOnViewport||"left"!==d&&"right"!==d?(h+=s[d],this.isFixedPosition||("top"===d?h+=r.y:"bottom"===d?h-=r.y:"left"===d?h+=r.x:h-=r.x),e[d]=h):e[d]=(o.width-a.width)/2}}catch(p){t={error:p}}finally{try{u&&!u.done&&(n=c.return)&&n.call(c)}finally{if(t)throw t.error}}},t.prototype.maybeRestoreFocus=function(){var e=this,t=this.adapter.isFocused(),n=this.adapter.getOwnerDocument?this.adapter.getOwnerDocument():document,i=n.activeElement&&this.adapter.isElementInContainer(n.activeElement);(t||i)&&setTimeout((function(){e.adapter.restoreFocus()}),G_.TOUCH_EVENT_WAIT_MS)},t.prototype.hasBit=function(e,t){return Boolean(e&t)},t.prototype.setBit=function(e,t){return e|t},t.prototype.unsetBit=function(e,t){return e^t},t.prototype.isFinite=function(e){return"number"==typeof e&&isFinite(e)},t}(Zp),Ov=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Pc(t,e),t.attachTo=function(e){return new t(e)},t.prototype.initialSyncWithDOM=function(){var e=this,t=this.root.parentElement;this.anchorElement=t&&t.classList.contains(W_.ANCHOR)?t:null,this.root.classList.contains(W_.FIXED)&&this.setFixedPosition(!0),this.handleKeydown=function(t){e.foundation.handleKeydown(t)},this.handleBodyClick=function(t){e.foundation.handleBodyClick(t)},this.registerBodyClickListener=function(){document.body.addEventListener("click",e.handleBodyClick,{capture:!0})},this.deregisterBodyClickListener=function(){document.body.removeEventListener("click",e.handleBodyClick,{capture:!0})},this.listen("keydown",this.handleKeydown),this.listen(z_.OPENED_EVENT,this.registerBodyClickListener),this.listen(z_.CLOSED_EVENT,this.deregisterBodyClickListener)},t.prototype.destroy=function(){this.unlisten("keydown",this.handleKeydown),this.unlisten(z_.OPENED_EVENT,this.registerBodyClickListener),this.unlisten(z_.CLOSED_EVENT,this.deregisterBodyClickListener),e.prototype.destroy.call(this)},t.prototype.isOpen=function(){return this.foundation.isOpen()},t.prototype.open=function(){this.foundation.open()},t.prototype.close=function(e){void 0===e&&(e=!1),this.foundation.close(e)},Object.defineProperty(t.prototype,"quickOpen",{set:function(e){this.foundation.setQuickOpen(e)},enumerable:!1,configurable:!0}),t.prototype.setIsHoisted=function(e){this.foundation.setIsHoisted(e)},t.prototype.setMenuSurfaceAnchorElement=function(e){this.anchorElement=e},t.prototype.setFixedPosition=function(e){e?this.root.classList.add(W_.FIXED):this.root.classList.remove(W_.FIXED),this.foundation.setFixedPosition(e)},t.prototype.setAbsolutePosition=function(e,t){this.foundation.setAbsolutePosition(e,t),this.setIsHoisted(!0)},t.prototype.setAnchorCorner=function(e){this.foundation.setAnchorCorner(e)},t.prototype.setAnchorMargin=function(e){this.foundation.setAnchorMargin(e)},t.prototype.getDefaultFoundation=function(){var e=this,t={addClass:function(t){return e.root.classList.add(t)},removeClass:function(t){return e.root.classList.remove(t)},hasClass:function(t){return e.root.classList.contains(t)},hasAnchor:function(){return!!e.anchorElement},notifyClose:function(){return e.emit(Av.strings.CLOSED_EVENT,{})},notifyClosing:function(){e.emit(Av.strings.CLOSING_EVENT,{})},notifyOpen:function(){return e.emit(Av.strings.OPENED_EVENT,{})},notifyOpening:function(){return e.emit(Av.strings.OPENING_EVENT,{})},isElementInContainer:function(t){return e.root.contains(t)},isRtl:function(){return"rtl"===getComputedStyle(e.root).getPropertyValue("direction")},setTransformOrigin:function(t){var n=Of(window,"transform")+"-origin";e.root.style.setProperty(n,t)},isFocused:function(){return document.activeElement===e.root},saveFocus:function(){e.previousFocus=document.activeElement},restoreFocus:function(){e.root.contains(document.activeElement)&&e.previousFocus&&e.previousFocus.focus&&e.previousFocus.focus()},getInnerDimensions:function(){return{width:e.root.offsetWidth,height:e.root.offsetHeight}},getAnchorDimensions:function(){return e.anchorElement?e.anchorElement.getBoundingClientRect():null},getWindowDimensions:function(){return{width:window.innerWidth,height:window.innerHeight}},getBodyDimensions:function(){return{width:document.body.clientWidth,height:document.body.clientHeight}},getWindowScroll:function(){return{x:window.pageXOffset,y:window.pageYOffset}},setPosition:function(t){var n=e.root;n.style.left="left"in t?t.left+"px":"",n.style.right="right"in t?t.right+"px":"",n.style.top="top"in t?t.top+"px":"",n.style.bottom="bottom"in t?t.bottom+"px":""},setMaxHeight:function(t){e.root.style.maxHeight=t}};return new Av(t)},t}(ef),Pv={MENU_SELECTED_LIST_ITEM:"mdc-menu-item--selected",MENU_SELECTION_GROUP:"mdc-menu__selection-group",ROOT:"mdc-menu"},Lv={ARIA_CHECKED_ATTR:"aria-checked",ARIA_DISABLED_ATTR:"aria-disabled",CHECKBOX_SELECTOR:'input[type="checkbox"]',LIST_SELECTOR:".mdc-list,.mdc-deprecated-list",SELECTED_EVENT:"MDCMenu:selected",SKIP_RESTORE_FOCUS:"data-menu-item-skip-restore-focus"},Nv={FOCUS_ROOT_INDEX:-1};!function(e){e[e.NONE=0]="NONE",e[e.LIST_ROOT=1]="LIST_ROOT",e[e.FIRST_ITEM=2]="FIRST_ITEM",e[e.LAST_ITEM=3]="LAST_ITEM"}(Iv||(Iv={}));var Dv=function(e){function t(n){var i=e.call(this,Lc(Lc({},t.defaultAdapter),n))||this;return i.closeAnimationEndTimerId=0,i.defaultFocusState=Iv.LIST_ROOT,i.selectedIndex=-1,i}return Pc(t,e),Object.defineProperty(t,"cssClasses",{get:function(){return Pv},enumerable:!1,configurable:!0}),Object.defineProperty(t,"strings",{get:function(){return Lv},enumerable:!1,configurable:!0}),Object.defineProperty(t,"numbers",{get:function(){return Nv},enumerable:!1,configurable:!0}),Object.defineProperty(t,"defaultAdapter",{get:function(){return{addClassToElementAtIndex:function(){},removeClassFromElementAtIndex:function(){},addAttributeToElementAtIndex:function(){},removeAttributeFromElementAtIndex:function(){},getAttributeFromElementAtIndex:function(){return null},elementContainsClass:function(){return!1},closeSurface:function(){},getElementIndex:function(){return-1},notifySelected:function(){},getMenuItemCount:function(){return 0},focusItemAtIndex:function(){},focusListRoot:function(){},getSelectedSiblingOfItemAtIndex:function(){return-1},isSelectableItemAtIndex:function(){return!1}}},enumerable:!1,configurable:!0}),t.prototype.destroy=function(){this.closeAnimationEndTimerId&&clearTimeout(this.closeAnimationEndTimerId),this.adapter.closeSurface()},t.prototype.handleKeydown=function(e){var t=e.key,n=e.keyCode;("Tab"===t||9===n)&&this.adapter.closeSurface(!0)},t.prototype.handleItemAction=function(e){var t=this,n=this.adapter.getElementIndex(e);if(!(n<0)){this.adapter.notifySelected({index:n});var i="true"===this.adapter.getAttributeFromElementAtIndex(n,Lv.SKIP_RESTORE_FOCUS);this.adapter.closeSurface(i),this.closeAnimationEndTimerId=setTimeout((function(){var n=t.adapter.getElementIndex(e);n>=0&&t.adapter.isSelectableItemAtIndex(n)&&t.setSelectedIndex(n)}),Av.numbers.TRANSITION_CLOSE_DURATION)}},t.prototype.handleMenuSurfaceOpened=function(){switch(this.defaultFocusState){case Iv.FIRST_ITEM:this.adapter.focusItemAtIndex(0);break;case Iv.LAST_ITEM:this.adapter.focusItemAtIndex(this.adapter.getMenuItemCount()-1);break;case Iv.NONE:break;default:this.adapter.focusListRoot()}},t.prototype.setDefaultFocusState=function(e){this.defaultFocusState=e},t.prototype.getSelectedIndex=function(){return this.selectedIndex},t.prototype.setSelectedIndex=function(e){if(this.validatedIndex(e),!this.adapter.isSelectableItemAtIndex(e))throw new Error("MDCMenuFoundation: No selection group at specified index.");var t=this.adapter.getSelectedSiblingOfItemAtIndex(e);t>=0&&(this.adapter.removeAttributeFromElementAtIndex(t,Lv.ARIA_CHECKED_ATTR),this.adapter.removeClassFromElementAtIndex(t,Pv.MENU_SELECTED_LIST_ITEM)),this.adapter.addClassToElementAtIndex(e,Pv.MENU_SELECTED_LIST_ITEM),this.adapter.addAttributeToElementAtIndex(e,Lv.ARIA_CHECKED_ATTR,"true"),this.selectedIndex=e},t.prototype.setEnabled=function(e,t){this.validatedIndex(e),t?(this.adapter.removeClassFromElementAtIndex(e,K_.LIST_ITEM_DISABLED_CLASS),this.adapter.addAttributeToElementAtIndex(e,Lv.ARIA_DISABLED_ATTR,"false")):(this.adapter.addClassToElementAtIndex(e,K_.LIST_ITEM_DISABLED_CLASS),this.adapter.addAttributeToElementAtIndex(e,Lv.ARIA_DISABLED_ATTR,"true"))},t.prototype.validatedIndex=function(e){var t=this.adapter.getMenuItemCount();if(!(e>=0&&e<t))throw new Error("MDCMenuFoundation: No list item at specified index.")},t}(Zp),Rv=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Pc(t,e),t.attachTo=function(e){return new t(e)},t.prototype.initialize=function(e,t){void 0===e&&(e=function(e){return new Ov(e)}),void 0===t&&(t=function(e){return new kv(e)}),this.menuSurfaceFactory=e,this.listFactory=t},t.prototype.initialSyncWithDOM=function(){var e=this;this.menuSurface=this.menuSurfaceFactory(this.root);var t=this.root.querySelector(Lv.LIST_SELECTOR);t?(this.list=this.listFactory(t),this.list.wrapFocus=!0):this.list=null,this.handleKeydown=function(t){e.foundation.handleKeydown(t)},this.handleItemAction=function(t){e.foundation.handleItemAction(e.items[t.detail.index])},this.handleMenuSurfaceOpened=function(){e.foundation.handleMenuSurfaceOpened()},this.menuSurface.listen(Av.strings.OPENED_EVENT,this.handleMenuSurfaceOpened),this.listen("keydown",this.handleKeydown),this.listen(xv.strings.ACTION_EVENT,this.handleItemAction)},t.prototype.destroy=function(){this.list&&this.list.destroy(),this.menuSurface.destroy(),this.menuSurface.unlisten(Av.strings.OPENED_EVENT,this.handleMenuSurfaceOpened),this.unlisten("keydown",this.handleKeydown),this.unlisten(xv.strings.ACTION_EVENT,this.handleItemAction),e.prototype.destroy.call(this)},Object.defineProperty(t.prototype,"open",{get:function(){return this.menuSurface.isOpen()},set:function(e){e?this.menuSurface.open():this.menuSurface.close()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"wrapFocus",{get:function(){return!!this.list&&this.list.wrapFocus},set:function(e){this.list&&(this.list.wrapFocus=e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasTypeahead",{set:function(e){this.list&&(this.list.hasTypeahead=e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"typeaheadInProgress",{get:function(){return!!this.list&&this.list.typeaheadInProgress},enumerable:!1,configurable:!0}),t.prototype.typeaheadMatchItem=function(e,t){return this.list?this.list.typeaheadMatchItem(e,t):-1},t.prototype.layout=function(){this.list&&this.list.layout()},Object.defineProperty(t.prototype,"items",{get:function(){return this.list?this.list.listElements:[]},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"singleSelection",{set:function(e){this.list&&(this.list.singleSelection=e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"selectedIndex",{get:function(){return this.list?this.list.selectedIndex:J_.UNSET_INDEX},set:function(e){this.list&&(this.list.selectedIndex=e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"quickOpen",{set:function(e){this.menuSurface.quickOpen=e},enumerable:!1,configurable:!0}),t.prototype.setDefaultFocusState=function(e){this.foundation.setDefaultFocusState(e)},t.prototype.setAnchorCorner=function(e){this.menuSurface.setAnchorCorner(e)},t.prototype.setAnchorMargin=function(e){this.menuSurface.setAnchorMargin(e)},t.prototype.setSelectedIndex=function(e){this.foundation.setSelectedIndex(e)},t.prototype.setEnabled=function(e,t){this.foundation.setEnabled(e,t)},t.prototype.getOptionByIndex=function(e){return e<this.items.length?this.items[e]:null},t.prototype.getPrimaryTextAtIndex=function(e){var t=this.getOptionByIndex(e);return t&&this.list&&this.list.getPrimaryText(t)||""},t.prototype.setFixedPosition=function(e){this.menuSurface.setFixedPosition(e)},t.prototype.setIsHoisted=function(e){this.menuSurface.setIsHoisted(e)},t.prototype.setAbsolutePosition=function(e,t){this.menuSurface.setAbsolutePosition(e,t)},t.prototype.setAnchorElement=function(e){this.menuSurface.anchorElement=e},t.prototype.getDefaultFoundation=function(){var e=this,t={addClassToElementAtIndex:function(t,n){e.items[t].classList.add(n)},removeClassFromElementAtIndex:function(t,n){e.items[t].classList.remove(n)},addAttributeToElementAtIndex:function(t,n,i){e.items[t].setAttribute(n,i)},removeAttributeFromElementAtIndex:function(t,n){e.items[t].removeAttribute(n)},getAttributeFromElementAtIndex:function(t,n){return e.items[t].getAttribute(n)},elementContainsClass:function(e,t){return e.classList.contains(t)},closeSurface:function(t){e.menuSurface.close(t)},getElementIndex:function(t){return e.items.indexOf(t)},notifySelected:function(t){e.emit(Lv.SELECTED_EVENT,{index:t.index,item:e.items[t.index]})},getMenuItemCount:function(){return e.items.length},focusItemAtIndex:function(t){e.items[t].focus()},focusListRoot:function(){e.root.querySelector(Lv.LIST_SELECTOR).focus()},isSelectableItemAtIndex:function(t){return!!nf(e.items[t],"."+Pv.MENU_SELECTION_GROUP)},getSelectedSiblingOfItemAtIndex:function(t){var n=nf(e.items[t],"."+Pv.MENU_SELECTION_GROUP).querySelector("."+Pv.MENU_SELECTED_LIST_ITEM);return n?e.items.indexOf(n):-1}};return new Dv(t)},t}(ef);function Mv(e,t,n){return t.create(vf,{func:t=>{new Rv(t).open=e.menuvisible}},t.create("div",{class:"mdc-menu mdc-menu-surface",style:`\n            opacity: ${e.menuvisible?1:0};\n            \n          `},t.create("ul",{class:"mdc-deprecated-list","aria-hidden":"true","aria-orientation":"vertical",tabindex:"-1"},t.create("div",{_content:`<template x-for="item in ${Sf((function(){return e.menulist}))}">\n          ${t.create("li",{class:"mdc-deprecated-list-item","x-on:click":Sf((function(){this[e.menumodel]=this.item,this.menuvisible=!1}))},t.create("span",{class:"mdc-deprecated-list-item__ripple"}),t.create("span",{class:"mdc-deprecated-list-item__text",style:"color: var(--mdc-theme-secondary);","x-text":"item.seriesname"},"A Menu Item")).outerHTML}\n          </template>`}))))[0]}function Fv(e,t,n){return t.create(t.fragment,null,t.create("style",{_content:"\n  .container_row {\n    display: grid;\n  }\n\n  .layer1,\n  .layer2 {\n    grid-column: 1;\n    grid-row: 1;\n  }\n\n  .layer1 span {\n    color: #fff;\n    background: #000cf6;\n  }\n\n  .layer2 {\n    background: rgba(255, 0, 0, 0.4);\n  }\n            "}),t.create("div",{"x-init":"() => {\n        var vh = $store.appData.fontsize\n        document.documentElement.style.setProperty('--fontsize', `${vh}px`);\n}"}),t.create("div",{style:"overflow-y: scroll; \n  height: calc(calc(var(--vh, 1vh) * 100) - 85px)"},t.create("div",{style:"\n    width:100%;\n    height: 100%;\n    \n  "},t.create("div",{class:"container_row"},t.create("div",{style:"\n  display: flex;\n   justify-content: center;\n  ",class:"layer1"},t.create("img",{style:"\n            width: 100%;\n            height: calc(var(--vh, 1vh) * 35);\n            filter: blur(2px);\n            z-index: 0;\n          ","x-bind:src":"currentprogram.imageurl"})),t.create("div",{id:"resizetarget"}),t.create("div",{class:"layer1",style:"\n        z-index: 1;\n      "},t.create("div",{style:"\n                height: calc(var(--vh, 1vh) * 35);\n                width: calc(100% - 36px);\n                display: block;\n                flex-wrap: wrap;\n                padding-top: 16px;\n                margin-left: 18px;\n                margin-right: 18px;\n                align-content: baseline;\n                justify-content: center;\n                z-index: 1;\n              "},t.create("h2",{"x-text":"currentprogram.title"}),t.create("div",{"x-text":"currentprogram.description"})))),t.create("div",null,t.create("div",{class:"mdc-menu-surface--anchor"},t.create("div",{"x-data":"{\n                menuvisible: false,\n              }","x-html":Cf((function(){return t.create("div",null,t.create("div",{style:"\n                          width: fit-content;\n                      ","x-on:click":Sf((function(){this.menuvisible=!0}))}),t.create(vf,{func:e=>{hf.attachTo(e)}},t.create("div",{style:"\n                        border: 2px solid var(--mdc-theme-primary);\n                        border-radius: 4px;\n                        width: fit-content;\n                        --mdc-text-button-label-text-color: var(--mdc-theme-secondary);\n                        margin: 4px;\n                        display: flex;\n                        align-content: center;\n                      ",class:"mdc-ripple-surface mdc-ripple-surface--accent","x-on:click":Sf((function(){this.menuvisible=!this.menuvisible}))},t.create(Tf,{label:t.create("div",{style:"\n                              display: flex;\n                            "},t.create("div",{style:"\n                                height: 24px;\n                                vertical-align: center;\n                                padding-top: 2px;\n                              ","x-text":"currentselected.seriesname"},"1234"),t.create("span",{class:"material-symbols-outlined material-icons"},"arrow_drop_down")),type:"--text"}))),t.create(Mv,{menulist:this.currentprogram.serieses,menuvisible:this.menuvisible,menumodel:"currentselected"}))}))})),t.create("div",null,t.create("div",{_content:`\n      <template x-for="(item, index) in currentselected.videos">\n          ${t.create("div",null,t.create(pf,{attributes:{"x-transition.duration.250ms":""}},t.create("div",{style:"\n          width: calc(100% - 20px);\n          margin-left: 10px;\n          margin-right: 10px;\n          justify-content: center;\n        "},t.create("div",{style:"\n                            display:flex\n                            "},t.create("img",{style:"\n                          width: 150px;\n                          height: 150px;\n                          margin-top: 10px;\n                        ","x-bind:src":"currentselected.imageurl"}),t.create("div",{style:"\n                                height: 100%;\n                                display: block;\n                              "},t.create("div",{style:"\n                          font-family: BlinkMacSystemFont,-apple-system,'Segoe UI',Roboto,Oxygen,Ubuntu,Cantarell,'Fira Sans','Droid Sans','Helvetica Neue',Helvetica,Arial,sans-serif;\n                          font-size: 2em;\n                          margin-left: 10px;\n                          margin-bottom: 5px;\n                          ","x-text":"item.videotitle"},"Southeast Gear"),t.create("div",{style:"\n                                  margin-left: 10px;\n                                ","x-on:click":Sf((function(){}))},t.create(Tf,{label:"Watch now",type:"--raised"}))))))).outerHTML}\n        </template>\n        `}))))))}var Uv,Bv="mdc-dom-focus-sentinel",jv=function(){function e(e,t){void 0===t&&(t={}),this.root=e,this.options=t,this.elFocusedBeforeTrapFocus=null}return e.prototype.trapFocus=function(){var e=this.getFocusableElements(this.root);if(0===e.length)throw new Error("FocusTrap: Element must have at least one focusable child.");this.elFocusedBeforeTrapFocus=document.activeElement instanceof HTMLElement?document.activeElement:null,this.wrapTabFocus(this.root),this.options.skipInitialFocus||this.focusInitialElement(e,this.options.initialFocusEl)},e.prototype.releaseFocus=function(){[].slice.call(this.root.querySelectorAll("."+Bv)).forEach((function(e){e.parentElement.removeChild(e)})),!this.options.skipRestoreFocus&&this.elFocusedBeforeTrapFocus&&this.elFocusedBeforeTrapFocus.focus()},e.prototype.wrapTabFocus=function(e){var t=this,n=this.createSentinel(),i=this.createSentinel();n.addEventListener("focus",(function(){var n=t.getFocusableElements(e);n.length>0&&n[n.length-1].focus()})),i.addEventListener("focus",(function(){var n=t.getFocusableElements(e);n.length>0&&n[0].focus()})),e.insertBefore(n,e.children[0]),e.appendChild(i)},e.prototype.focusInitialElement=function(e,t){var n=0;t&&(n=Math.max(e.indexOf(t),0)),e[n].focus()},e.prototype.getFocusableElements=function(e){return[].slice.call(e.querySelectorAll("[autofocus], [tabindex], a, input, textarea, select, button")).filter((function(e){var t="true"===e.getAttribute("aria-disabled")||null!=e.getAttribute("disabled")||null!=e.getAttribute("hidden")||"true"===e.getAttribute("aria-hidden"),n=e.tabIndex>=0&&e.getBoundingClientRect().width>0&&!e.classList.contains(Bv)&&!t,i=!1;if(n){var r=getComputedStyle(e);i="none"===r.display||"hidden"===r.visibility}return n&&!i}))},e.prototype.createSentinel=function(){var e=document.createElement("div");return e.setAttribute("tabindex","0"),e.setAttribute("aria-hidden","true"),e.classList.add(Bv),e},e}(),qv=function(){function e(){this.rafIDs=new Map}return e.prototype.request=function(e,t){var n=this;this.cancel(e);var i=requestAnimationFrame((function(i){n.rafIDs.delete(e),t(i)}));this.rafIDs.set(e,i)},e.prototype.cancel=function(e){var t=this.rafIDs.get(e);t&&(cancelAnimationFrame(t),this.rafIDs.delete(e))},e.prototype.cancelAll=function(){var e=this;this.rafIDs.forEach((function(t,n){e.cancel(n)}))},e.prototype.getQueue=function(){var e=[];return this.rafIDs.forEach((function(t,n){e.push(n)})),e},e}(),Hv={CLOSING:"mdc-dialog--closing",OPEN:"mdc-dialog--open",OPENING:"mdc-dialog--opening",SCROLLABLE:"mdc-dialog--scrollable",SCROLL_LOCK:"mdc-dialog-scroll-lock",STACKED:"mdc-dialog--stacked",FULLSCREEN:"mdc-dialog--fullscreen",SCROLL_DIVIDER_HEADER:"mdc-dialog-scroll-divider-header",SCROLL_DIVIDER_FOOTER:"mdc-dialog-scroll-divider-footer",SURFACE_SCRIM_SHOWN:"mdc-dialog__surface-scrim--shown",SURFACE_SCRIM_SHOWING:"mdc-dialog__surface-scrim--showing",SURFACE_SCRIM_HIDING:"mdc-dialog__surface-scrim--hiding",SCRIM_HIDDEN:"mdc-dialog__scrim--hidden"},Vv={ACTION_ATTRIBUTE:"data-mdc-dialog-action",BUTTON_DEFAULT_ATTRIBUTE:"data-mdc-dialog-button-default",BUTTON_SELECTOR:".mdc-dialog__button",CLOSED_EVENT:"MDCDialog:closed",CLOSE_ACTION:"close",CLOSING_EVENT:"MDCDialog:closing",CONTAINER_SELECTOR:".mdc-dialog__container",CONTENT_SELECTOR:".mdc-dialog__content",DESTROY_ACTION:"destroy",INITIAL_FOCUS_ATTRIBUTE:"data-mdc-dialog-initial-focus",OPENED_EVENT:"MDCDialog:opened",OPENING_EVENT:"MDCDialog:opening",SCRIM_SELECTOR:".mdc-dialog__scrim",SUPPRESS_DEFAULT_PRESS_SELECTOR:["textarea",".mdc-menu .mdc-list-item",".mdc-menu .mdc-deprecated-list-item"].join(", "),SURFACE_SELECTOR:".mdc-dialog__surface"},$v={DIALOG_ANIMATION_CLOSE_TIME_MS:75,DIALOG_ANIMATION_OPEN_TIME_MS:150};!function(e){e.POLL_SCROLL_POS="poll_scroll_position",e.POLL_LAYOUT_CHANGE="poll_layout_change"}(Uv||(Uv={}));var Wv=function(e){function t(n){var i=e.call(this,Lc(Lc({},t.defaultAdapter),n))||this;return i.dialogOpen=!1,i.isFullscreen=!1,i.animationFrame=0,i.animationTimer=0,i.escapeKeyAction=Vv.CLOSE_ACTION,i.scrimClickAction=Vv.CLOSE_ACTION,i.autoStackButtons=!0,i.areButtonsStacked=!1,i.suppressDefaultPressSelector=Vv.SUPPRESS_DEFAULT_PRESS_SELECTOR,i.animFrame=new qv,i.contentScrollHandler=function(){i.handleScrollEvent()},i.windowResizeHandler=function(){i.layout()},i.windowOrientationChangeHandler=function(){i.layout()},i}return Pc(t,e),Object.defineProperty(t,"cssClasses",{get:function(){return Hv},enumerable:!1,configurable:!0}),Object.defineProperty(t,"strings",{get:function(){return Vv},enumerable:!1,configurable:!0}),Object.defineProperty(t,"numbers",{get:function(){return $v},enumerable:!1,configurable:!0}),Object.defineProperty(t,"defaultAdapter",{get:function(){return{addBodyClass:function(){},addClass:function(){},areButtonsStacked:function(){return!1},clickDefaultButton:function(){},eventTargetMatches:function(){return!1},getActionFromEvent:function(){return""},getInitialFocusEl:function(){return null},hasClass:function(){return!1},isContentScrollable:function(){return!1},notifyClosed:function(){},notifyClosing:function(){},notifyOpened:function(){},notifyOpening:function(){},releaseFocus:function(){},removeBodyClass:function(){},removeClass:function(){},reverseButtons:function(){},trapFocus:function(){},registerContentEventHandler:function(){},deregisterContentEventHandler:function(){},isScrollableContentAtTop:function(){return!1},isScrollableContentAtBottom:function(){return!1},registerWindowEventHandler:function(){},deregisterWindowEventHandler:function(){}}},enumerable:!1,configurable:!0}),t.prototype.init=function(){this.adapter.hasClass(Hv.STACKED)&&this.setAutoStackButtons(!1),this.isFullscreen=this.adapter.hasClass(Hv.FULLSCREEN)},t.prototype.destroy=function(){this.animationTimer&&(clearTimeout(this.animationTimer),this.handleAnimationTimerEnd()),this.isFullscreen&&this.adapter.deregisterContentEventHandler("scroll",this.contentScrollHandler),this.animFrame.cancelAll(),this.adapter.deregisterWindowEventHandler("resize",this.windowResizeHandler),this.adapter.deregisterWindowEventHandler("orientationchange",this.windowOrientationChangeHandler)},t.prototype.open=function(e){var t=this;this.dialogOpen=!0,this.adapter.notifyOpening(),this.adapter.addClass(Hv.OPENING),this.isFullscreen&&this.adapter.registerContentEventHandler("scroll",this.contentScrollHandler),e&&e.isAboveFullscreenDialog&&this.adapter.addClass(Hv.SCRIM_HIDDEN),this.adapter.registerWindowEventHandler("resize",this.windowResizeHandler),this.adapter.registerWindowEventHandler("orientationchange",this.windowOrientationChangeHandler),this.runNextAnimationFrame((function(){t.adapter.addClass(Hv.OPEN),t.adapter.addBodyClass(Hv.SCROLL_LOCK),t.layout(),t.animationTimer=setTimeout((function(){t.handleAnimationTimerEnd(),t.adapter.trapFocus(t.adapter.getInitialFocusEl()),t.adapter.notifyOpened()}),$v.DIALOG_ANIMATION_OPEN_TIME_MS)}))},t.prototype.close=function(e){var t=this;void 0===e&&(e=""),this.dialogOpen&&(this.dialogOpen=!1,this.adapter.notifyClosing(e),this.adapter.addClass(Hv.CLOSING),this.adapter.removeClass(Hv.OPEN),this.adapter.removeBodyClass(Hv.SCROLL_LOCK),this.isFullscreen&&this.adapter.deregisterContentEventHandler("scroll",this.contentScrollHandler),this.adapter.deregisterWindowEventHandler("resize",this.windowResizeHandler),this.adapter.deregisterWindowEventHandler("orientationchange",this.windowOrientationChangeHandler),cancelAnimationFrame(this.animationFrame),this.animationFrame=0,clearTimeout(this.animationTimer),this.animationTimer=setTimeout((function(){t.adapter.releaseFocus(),t.handleAnimationTimerEnd(),t.adapter.notifyClosed(e)}),$v.DIALOG_ANIMATION_CLOSE_TIME_MS))},t.prototype.showSurfaceScrim=function(){var e=this;this.adapter.addClass(Hv.SURFACE_SCRIM_SHOWING),this.runNextAnimationFrame((function(){e.adapter.addClass(Hv.SURFACE_SCRIM_SHOWN)}))},t.prototype.hideSurfaceScrim=function(){this.adapter.removeClass(Hv.SURFACE_SCRIM_SHOWN),this.adapter.addClass(Hv.SURFACE_SCRIM_HIDING)},t.prototype.handleSurfaceScrimTransitionEnd=function(){this.adapter.removeClass(Hv.SURFACE_SCRIM_HIDING),this.adapter.removeClass(Hv.SURFACE_SCRIM_SHOWING)},t.prototype.isOpen=function(){return this.dialogOpen},t.prototype.getEscapeKeyAction=function(){return this.escapeKeyAction},t.prototype.setEscapeKeyAction=function(e){this.escapeKeyAction=e},t.prototype.getScrimClickAction=function(){return this.scrimClickAction},t.prototype.setScrimClickAction=function(e){this.scrimClickAction=e},t.prototype.getAutoStackButtons=function(){return this.autoStackButtons},t.prototype.setAutoStackButtons=function(e){this.autoStackButtons=e},t.prototype.getSuppressDefaultPressSelector=function(){return this.suppressDefaultPressSelector},t.prototype.setSuppressDefaultPressSelector=function(e){this.suppressDefaultPressSelector=e},t.prototype.layout=function(){var e=this;this.animFrame.request(Uv.POLL_LAYOUT_CHANGE,(function(){e.layoutInternal()}))},t.prototype.handleClick=function(e){if(this.adapter.eventTargetMatches(e.target,Vv.SCRIM_SELECTOR)&&""!==this.scrimClickAction)this.close(this.scrimClickAction);else{var t=this.adapter.getActionFromEvent(e);t&&this.close(t)}},t.prototype.handleKeydown=function(e){var t="Enter"===e.key||13===e.keyCode;if(t&&!this.adapter.getActionFromEvent(e)){var n=e.composedPath?e.composedPath()[0]:e.target,i=!this.suppressDefaultPressSelector||!this.adapter.eventTargetMatches(n,this.suppressDefaultPressSelector);t&&i&&this.adapter.clickDefaultButton()}},t.prototype.handleDocumentKeydown=function(e){("Escape"===e.key||27===e.keyCode)&&""!==this.escapeKeyAction&&this.close(this.escapeKeyAction)},t.prototype.handleScrollEvent=function(){var e=this;this.animFrame.request(Uv.POLL_SCROLL_POS,(function(){e.toggleScrollDividerHeader(),e.toggleScrollDividerFooter()}))},t.prototype.layoutInternal=function(){this.autoStackButtons&&this.detectStackedButtons(),this.toggleScrollableClasses()},t.prototype.handleAnimationTimerEnd=function(){this.animationTimer=0,this.adapter.removeClass(Hv.OPENING),this.adapter.removeClass(Hv.CLOSING)},t.prototype.runNextAnimationFrame=function(e){var t=this;cancelAnimationFrame(this.animationFrame),this.animationFrame=requestAnimationFrame((function(){t.animationFrame=0,clearTimeout(t.animationTimer),t.animationTimer=setTimeout(e,0)}))},t.prototype.detectStackedButtons=function(){this.adapter.removeClass(Hv.STACKED);var e=this.adapter.areButtonsStacked();e&&this.adapter.addClass(Hv.STACKED),e!==this.areButtonsStacked&&(this.adapter.reverseButtons(),this.areButtonsStacked=e)},t.prototype.toggleScrollableClasses=function(){this.adapter.removeClass(Hv.SCROLLABLE),this.adapter.isContentScrollable()&&(this.adapter.addClass(Hv.SCROLLABLE),this.isFullscreen&&(this.toggleScrollDividerHeader(),this.toggleScrollDividerFooter()))},t.prototype.toggleScrollDividerHeader=function(){this.adapter.isScrollableContentAtTop()?this.adapter.hasClass(Hv.SCROLL_DIVIDER_HEADER)&&this.adapter.removeClass(Hv.SCROLL_DIVIDER_HEADER):this.adapter.addClass(Hv.SCROLL_DIVIDER_HEADER)},t.prototype.toggleScrollDividerFooter=function(){this.adapter.isScrollableContentAtBottom()?this.adapter.hasClass(Hv.SCROLL_DIVIDER_FOOTER)&&this.adapter.removeClass(Hv.SCROLL_DIVIDER_FOOTER):this.adapter.addClass(Hv.SCROLL_DIVIDER_FOOTER)},t}(Zp),zv=Wv.strings,Gv=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Pc(t,e),Object.defineProperty(t.prototype,"isOpen",{get:function(){return this.foundation.isOpen()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"escapeKeyAction",{get:function(){return this.foundation.getEscapeKeyAction()},set:function(e){this.foundation.setEscapeKeyAction(e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"scrimClickAction",{get:function(){return this.foundation.getScrimClickAction()},set:function(e){this.foundation.setScrimClickAction(e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"autoStackButtons",{get:function(){return this.foundation.getAutoStackButtons()},set:function(e){this.foundation.setAutoStackButtons(e)},enumerable:!1,configurable:!0}),t.attachTo=function(e){return new t(e)},t.prototype.initialize=function(e){var t,n;void 0===e&&(e=function(e,t){return new jv(e,t)});var i=this.root.querySelector(zv.CONTAINER_SELECTOR);if(!i)throw new Error("Dialog component requires a "+zv.CONTAINER_SELECTOR+" container element");this.container=i,this.content=this.root.querySelector(zv.CONTENT_SELECTOR),this.buttons=[].slice.call(this.root.querySelectorAll(zv.BUTTON_SELECTOR)),this.defaultButton=this.root.querySelector("["+zv.BUTTON_DEFAULT_ATTRIBUTE+"]"),this.focusTrapFactory=e,this.buttonRipples=[];try{for(var r=Dc(this.buttons),s=r.next();!s.done;s=r.next()){var a=s.value;this.buttonRipples.push(new hf(a))}}catch(o){t={error:o}}finally{try{s&&!s.done&&(n=r.return)&&n.call(r)}finally{if(t)throw t.error}}},t.prototype.initialSyncWithDOM=function(){var e,t,n,i=this;this.focusTrap=(e=this.container,t=this.focusTrapFactory,n=this.getInitialFocusEl()||void 0,t(e,{initialFocusEl:n})),this.handleClick=this.foundation.handleClick.bind(this.foundation),this.handleKeydown=this.foundation.handleKeydown.bind(this.foundation),this.handleDocumentKeydown=this.foundation.handleDocumentKeydown.bind(this.foundation),this.handleOpening=function(){document.addEventListener("keydown",i.handleDocumentKeydown)},this.handleClosing=function(){document.removeEventListener("keydown",i.handleDocumentKeydown)},this.listen("click",this.handleClick),this.listen("keydown",this.handleKeydown),this.listen(zv.OPENING_EVENT,this.handleOpening),this.listen(zv.CLOSING_EVENT,this.handleClosing)},t.prototype.destroy=function(){this.unlisten("click",this.handleClick),this.unlisten("keydown",this.handleKeydown),this.unlisten(zv.OPENING_EVENT,this.handleOpening),this.unlisten(zv.CLOSING_EVENT,this.handleClosing),this.handleClosing(),this.buttonRipples.forEach((function(e){e.destroy()})),e.prototype.destroy.call(this)},t.prototype.layout=function(){this.foundation.layout()},t.prototype.open=function(){this.foundation.open()},t.prototype.close=function(e){void 0===e&&(e=""),this.foundation.close(e)},t.prototype.getDefaultFoundation=function(){var e=this,t={addBodyClass:function(e){return document.body.classList.add(e)},addClass:function(t){return e.root.classList.add(t)},areButtonsStacked:function(){return t=e.buttons,n=new Set,[].forEach.call(t,(function(e){return n.add(e.offsetTop)})),n.size>1;var t,n},clickDefaultButton:function(){e.defaultButton&&!e.defaultButton.disabled&&e.defaultButton.click()},eventTargetMatches:function(e,t){return!!e&&rf(e,t)},getActionFromEvent:function(e){if(!e.target)return"";var t=nf(e.target,"["+zv.ACTION_ATTRIBUTE+"]");return t&&t.getAttribute(zv.ACTION_ATTRIBUTE)},getInitialFocusEl:function(){return e.getInitialFocusEl()},hasClass:function(t){return e.root.classList.contains(t)},isContentScrollable:function(){return function(e){return!!e&&e.scrollHeight>e.offsetHeight}(e.content)},notifyClosed:function(t){return e.emit(zv.CLOSED_EVENT,t?{action:t}:{})},notifyClosing:function(t){return e.emit(zv.CLOSING_EVENT,t?{action:t}:{})},notifyOpened:function(){return e.emit(zv.OPENED_EVENT,{})},notifyOpening:function(){return e.emit(zv.OPENING_EVENT,{})},releaseFocus:function(){e.focusTrap.releaseFocus()},removeBodyClass:function(e){return document.body.classList.remove(e)},removeClass:function(t){return e.root.classList.remove(t)},reverseButtons:function(){e.buttons.reverse(),e.buttons.forEach((function(e){e.parentElement.appendChild(e)}))},trapFocus:function(){e.focusTrap.trapFocus()},registerContentEventHandler:function(t,n){e.content instanceof HTMLElement&&e.content.addEventListener(t,n)},deregisterContentEventHandler:function(t,n){e.content instanceof HTMLElement&&e.content.removeEventListener(t,n)},isScrollableContentAtTop:function(){return function(e){return!!e&&0===e.scrollTop}(e.content)},isScrollableContentAtBottom:function(){return function(e){return!!e&&Math.ceil(e.scrollHeight-e.scrollTop)===e.clientHeight}(e.content)},registerWindowEventHandler:function(e,t){window.addEventListener(e,t)},deregisterWindowEventHandler:function(e,t){window.removeEventListener(e,t)}};return new Wv(t)},t.prototype.getInitialFocusEl=function(){return this.root.querySelector("["+zv.INITIAL_FOCUS_ATTRIBUTE+"]")},t}(ef);function Kv(e,t,n){return console.log(e.title.get()),t.create(pf,{attributes:{"x-transition:enter.duration.250ms":"","x-transition:leave.duration.250ms":""}},t.create(vf,{func:e=>{new Gv(e)}},t.create("div",{class:"mdc-dialog mdc-dialog--fullscreen mdc-dialog--open","x-show":e.dialogopen.get(),"x-data":!0},t.create("div",{class:"mdc-dialog__container"},t.create("div",{class:"mdc-dialog__surface","aria-modal":"true","aria-labelledby":"my-dialog-title","aria-describedby":"my-dialog-content"},t.create("div",{class:"mdc-dialog__header"},t.create("div",{style:"\n                  width: 24px;\n                ","x-show":"!"+e.closeable.get()}),t.create("div",{style:"\n                --mdc-text-button-label-text-color: var(--mdc-theme-secondary);\n                display: flex;\n                ","x-on:click":e.dialogopen.set(!1),"x-show":e.closeable.get()},t.create(vf,{func:e=>{hf.attachTo(e)}},t.create(Tf,{label:t.create("span",{class:"material-symbols-outlined material-icons"},"close"),type:"--text"}))),t.create("h2",{class:"mdc-dialog__title",id:"my-dialog-title",style:"color: var(--mdc-theme-secondary)","x-text":e.title.get()})),t.create("div",{class:"mdc-dialog__content",id:"my-dialog-content"},n),t.create("div",{class:"mdc-dialog__actions",style:"\n                margin-right: 12px;\n              "},e.dialogactions))),t.create("div",{class:"mdc-dialog__scrim"}))))}function Xv(e,t,n){return t.create(vf,{func:e=>{new bm(e)}},t.create("label",{class:"mdc-text-field mdc-text-field--outlined mdc-text-field--textarea mdc-text-field--no-label"},t.create("span",{class:"mdc-notched-outline"},t.create("span",{class:"mdc-notched-outline__leading"}),t.create("span",{class:"mdc-notched-outline__notch"},t.create("span",{class:"mdc-floating-label",style:"color:white;"},e.label.get())),t.create("span",{class:"mdc-notched-outline__trailing"})),t.create("span",{class:"mdc-text-field__resizer"},t.create("textarea",{class:"mdc-text-field__input",rows:"8",cols:"40","aria-label":"Label","x-model":e.model.get(),style:"\n                color:white;\n                "}))))}function Yv(e){return{get:()=>e,set:t=>e+" = "+t}}function Qv(e){return{cloned:structuredClone(e),get(){return this.cloned},set(e){this.cloned=e}}}var Jv={ROOT:"mdc-form-field"},Zv={LABEL_SELECTOR:".mdc-form-field > label"},eb=function(e){function t(n){var i=e.call(this,Lc(Lc({},t.defaultAdapter),n))||this;return i.click=function(){i.handleClick()},i}return Pc(t,e),Object.defineProperty(t,"cssClasses",{get:function(){return Jv},enumerable:!1,configurable:!0}),Object.defineProperty(t,"strings",{get:function(){return Zv},enumerable:!1,configurable:!0}),Object.defineProperty(t,"defaultAdapter",{get:function(){return{activateInputRipple:function(){},deactivateInputRipple:function(){},deregisterInteractionHandler:function(){},registerInteractionHandler:function(){}}},enumerable:!1,configurable:!0}),t.prototype.init=function(){this.adapter.registerInteractionHandler("click",this.click)},t.prototype.destroy=function(){this.adapter.deregisterInteractionHandler("click",this.click)},t.prototype.handleClick=function(){var e=this;this.adapter.activateInputRipple(),requestAnimationFrame((function(){e.adapter.deactivateInputRipple()}))},t}(Zp),tb=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Pc(t,e),t.attachTo=function(e){return new t(e)},t.prototype.labelEl=function(){var e=eb.strings.LABEL_SELECTOR;return this.root.querySelector(e)},t.prototype.getDefaultFoundation=function(){var e=this,t={activateInputRipple:function(){e.input&&e.input.ripple&&e.input.ripple.activate()},deactivateInputRipple:function(){e.input&&e.input.ripple&&e.input.ripple.deactivate()},deregisterInteractionHandler:function(t,n){var i=e.labelEl();i&&i.removeEventListener(t,n)},registerInteractionHandler:function(t,n){var i=e.labelEl();i&&i.addEventListener(t,n)}};return new eb(t)},t}(ef),nb={ANIM_CHECKED_INDETERMINATE:"mdc-checkbox--anim-checked-indeterminate",ANIM_CHECKED_UNCHECKED:"mdc-checkbox--anim-checked-unchecked",ANIM_INDETERMINATE_CHECKED:"mdc-checkbox--anim-indeterminate-checked",ANIM_INDETERMINATE_UNCHECKED:"mdc-checkbox--anim-indeterminate-unchecked",ANIM_UNCHECKED_CHECKED:"mdc-checkbox--anim-unchecked-checked",ANIM_UNCHECKED_INDETERMINATE:"mdc-checkbox--anim-unchecked-indeterminate",BACKGROUND:"mdc-checkbox__background",CHECKED:"mdc-checkbox--checked",CHECKMARK:"mdc-checkbox__checkmark",CHECKMARK_PATH:"mdc-checkbox__checkmark-path",DISABLED:"mdc-checkbox--disabled",INDETERMINATE:"mdc-checkbox--indeterminate",MIXEDMARK:"mdc-checkbox__mixedmark",NATIVE_CONTROL:"mdc-checkbox__native-control",ROOT:"mdc-checkbox",SELECTED:"mdc-checkbox--selected",UPGRADED:"mdc-checkbox--upgraded"},ib={ARIA_CHECKED_ATTR:"aria-checked",ARIA_CHECKED_INDETERMINATE_VALUE:"mixed",DATA_INDETERMINATE_ATTR:"data-indeterminate",NATIVE_CONTROL_SELECTOR:".mdc-checkbox__native-control",TRANSITION_STATE_CHECKED:"checked",TRANSITION_STATE_INDETERMINATE:"indeterminate",TRANSITION_STATE_INIT:"init",TRANSITION_STATE_UNCHECKED:"unchecked"},rb={ANIM_END_LATCH_MS:250},sb=function(e){function t(n){var i=e.call(this,Lc(Lc({},t.defaultAdapter),n))||this;return i.currentCheckState=ib.TRANSITION_STATE_INIT,i.currentAnimationClass="",i.animEndLatchTimer=0,i.enableAnimationEndHandler=!1,i}return Pc(t,e),Object.defineProperty(t,"cssClasses",{get:function(){return nb},enumerable:!1,configurable:!0}),Object.defineProperty(t,"strings",{get:function(){return ib},enumerable:!1,configurable:!0}),Object.defineProperty(t,"numbers",{get:function(){return rb},enumerable:!1,configurable:!0}),Object.defineProperty(t,"defaultAdapter",{get:function(){return{addClass:function(){},forceLayout:function(){},hasNativeControl:function(){return!1},isAttachedToDOM:function(){return!1},isChecked:function(){return!1},isIndeterminate:function(){return!1},removeClass:function(){},removeNativeControlAttr:function(){},setNativeControlAttr:function(){},setNativeControlDisabled:function(){}}},enumerable:!1,configurable:!0}),t.prototype.init=function(){this.currentCheckState=this.determineCheckState(),this.updateAriaChecked(),this.adapter.addClass(nb.UPGRADED)},t.prototype.destroy=function(){clearTimeout(this.animEndLatchTimer)},t.prototype.setDisabled=function(e){this.adapter.setNativeControlDisabled(e),e?this.adapter.addClass(nb.DISABLED):this.adapter.removeClass(nb.DISABLED)},t.prototype.handleAnimationEnd=function(){var e=this;this.enableAnimationEndHandler&&(clearTimeout(this.animEndLatchTimer),this.animEndLatchTimer=setTimeout((function(){e.adapter.removeClass(e.currentAnimationClass),e.enableAnimationEndHandler=!1}),rb.ANIM_END_LATCH_MS))},t.prototype.handleChange=function(){this.transitionCheckState()},t.prototype.transitionCheckState=function(){if(this.adapter.hasNativeControl()){var e=this.currentCheckState,t=this.determineCheckState();if(e!==t){this.updateAriaChecked();var n=nb.SELECTED;t===ib.TRANSITION_STATE_UNCHECKED?this.adapter.removeClass(n):this.adapter.addClass(n),this.currentAnimationClass.length>0&&(clearTimeout(this.animEndLatchTimer),this.adapter.forceLayout(),this.adapter.removeClass(this.currentAnimationClass)),this.currentAnimationClass=this.getTransitionAnimationClass(e,t),this.currentCheckState=t,this.adapter.isAttachedToDOM()&&this.currentAnimationClass.length>0&&(this.adapter.addClass(this.currentAnimationClass),this.enableAnimationEndHandler=!0)}}},t.prototype.determineCheckState=function(){var e=ib.TRANSITION_STATE_INDETERMINATE,t=ib.TRANSITION_STATE_CHECKED,n=ib.TRANSITION_STATE_UNCHECKED;return this.adapter.isIndeterminate()?e:this.adapter.isChecked()?t:n},t.prototype.getTransitionAnimationClass=function(e,n){var i=ib.TRANSITION_STATE_INIT,r=ib.TRANSITION_STATE_CHECKED,s=ib.TRANSITION_STATE_UNCHECKED,a=t.cssClasses,o=a.ANIM_UNCHECKED_CHECKED,l=a.ANIM_UNCHECKED_INDETERMINATE,c=a.ANIM_CHECKED_UNCHECKED,u=a.ANIM_CHECKED_INDETERMINATE,d=a.ANIM_INDETERMINATE_CHECKED,h=a.ANIM_INDETERMINATE_UNCHECKED;switch(e){case i:return n===s?"":n===r?d:h;case s:return n===r?o:l;case r:return n===s?c:u;default:return n===r?d:h}},t.prototype.updateAriaChecked=function(){this.adapter.isIndeterminate()?this.adapter.setNativeControlAttr(ib.ARIA_CHECKED_ATTR,ib.ARIA_CHECKED_INDETERMINATE_VALUE):this.adapter.removeNativeControlAttr(ib.ARIA_CHECKED_ATTR)},t}(Zp),ab=["checked","indeterminate"],ob=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.rippleSurface=t.createRipple(),t}return Pc(t,e),t.attachTo=function(e){return new t(e)},Object.defineProperty(t.prototype,"ripple",{get:function(){return this.rippleSurface},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"checked",{get:function(){return this.getNativeControl().checked},set:function(e){this.getNativeControl().checked=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"indeterminate",{get:function(){return this.getNativeControl().indeterminate},set:function(e){this.getNativeControl().indeterminate=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"disabled",{get:function(){return this.getNativeControl().disabled},set:function(e){this.foundation.setDisabled(e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"value",{get:function(){return this.getNativeControl().value},set:function(e){this.getNativeControl().value=e},enumerable:!1,configurable:!0}),t.prototype.initialize=function(){var e=ib.DATA_INDETERMINATE_ATTR;this.getNativeControl().indeterminate="true"===this.getNativeControl().getAttribute(e),this.getNativeControl().removeAttribute(e)},t.prototype.initialSyncWithDOM=function(){var e=this;this.handleChange=function(){e.foundation.handleChange()},this.handleAnimationEnd=function(){e.foundation.handleAnimationEnd()},this.getNativeControl().addEventListener("change",this.handleChange),this.listen(Pf(window,"animationend"),this.handleAnimationEnd),this.installPropertyChangeHooks()},t.prototype.destroy=function(){this.rippleSurface.destroy(),this.getNativeControl().removeEventListener("change",this.handleChange),this.unlisten(Pf(window,"animationend"),this.handleAnimationEnd),this.uninstallPropertyChangeHooks(),e.prototype.destroy.call(this)},t.prototype.getDefaultFoundation=function(){var e=this,t={addClass:function(t){return e.root.classList.add(t)},forceLayout:function(){return e.root.offsetWidth},hasNativeControl:function(){return!!e.getNativeControl()},isAttachedToDOM:function(){return Boolean(e.root.parentNode)},isChecked:function(){return e.checked},isIndeterminate:function(){return e.indeterminate},removeClass:function(t){e.root.classList.remove(t)},removeNativeControlAttr:function(t){e.getNativeControl().removeAttribute(t)},setNativeControlAttr:function(t,n){e.getNativeControl().setAttribute(t,n)},setNativeControlDisabled:function(t){e.getNativeControl().disabled=t}};return new sb(t)},t.prototype.createRipple=function(){var e=this,t=Lc(Lc({},hf.createAdapter(this)),{deregisterInteractionHandler:function(t,n){e.getNativeControl().removeEventListener(t,n,tf())},isSurfaceActive:function(){return rf(e.getNativeControl(),":active")},isUnbounded:function(){return!0},registerInteractionHandler:function(t,n){e.getNativeControl().addEventListener(t,n,tf())}});return new hf(this.root,new df(t))},t.prototype.installPropertyChangeHooks=function(){var e,t,n=this,i=this.getNativeControl(),r=Object.getPrototypeOf(i),s=function(e){var t=Object.getOwnPropertyDescriptor(r,e);if(!lb(t))return{value:void 0};var s=t.get,a={configurable:t.configurable,enumerable:t.enumerable,get:s,set:function(e){t.set.call(i,e),n.foundation.handleChange()}};Object.defineProperty(i,e,a)};try{for(var a=Dc(ab),o=a.next();!o.done;o=a.next()){var l=s(o.value);if("object"==typeof l)return l.value}}catch(c){e={error:c}}finally{try{o&&!o.done&&(t=a.return)&&t.call(a)}finally{if(e)throw e.error}}},t.prototype.uninstallPropertyChangeHooks=function(){var e,t,n=this.getNativeControl(),i=Object.getPrototypeOf(n);try{for(var r=Dc(ab),s=r.next();!s.done;s=r.next()){var a=s.value,o=Object.getOwnPropertyDescriptor(i,a);if(!lb(o))return;Object.defineProperty(n,a,o)}}catch(l){e={error:l}}finally{try{s&&!s.done&&(t=r.return)&&t.call(r)}finally{if(e)throw e.error}}},t.prototype.getNativeControl=function(){var e=ib.NATIVE_CONTROL_SELECTOR,t=this.root.querySelector(e);if(!t)throw new Error("Checkbox component requires a "+e+" element");return t},t}(ef);function lb(e){return!!e&&"function"==typeof e.set}function cb(e,t,n){let i="ID"+Math.floor(999999*Math.random()).toString();return t.create(vf,{func:e=>{console.log(e);const t=new ob(e.children[0]);new tb(e).input=t}},t.create("div",{class:"mdc-form-field"},t.create("div",{class:"mdc-checkbox"},t.create("input",{type:"checkbox",class:"mdc-checkbox__native-control",id:i,"x-model":e.inputmodel}),t.create("div",{class:"mdc-checkbox__background"},t.create("svg",{class:"mdc-checkbox__checkmark",viewBox:"0 0 24 24"},t.create("path",{class:"mdc-checkbox__checkmark-path",fill:"none",d:"M1.73,12.91 8.1,19.28 22.79,4.59"})),t.create("div",{class:"mdc-checkbox__mixedmark"})),t.create("div",{class:"mdc-checkbox__ripple"})),t.create("label",{for:i},e.label)))}function ub(e,t){let n=[];return e.forEach(((e,i)=>{t!==i&&n.push(e)})),n}function db(e){let t=[],n=!0,i=Object.keys(e).length,r=Object.keys(e);for(let s=0;s<i;s++){const i=e[r[s]];let a=i;if("Object"==i.constructor.name&&(a=db(i)),n){let e=Number(r[s]);if(Number.isNaN(e)){n=!1,t={},s=0;continue}t[e]=a}else t[r[s]]=a}return t}function hb(e){let t={};for(let n in e){let i=e[n];if("Array"==i.constructor.name){let e={};i.forEach(((t,n)=>{e[n]=t})),i=e}"Object"==i.constructor.name&&(i=hb(i)),t[n]=i}return t}function pb(e,t,n){return t.create("div",{"x-data":Sf((function(){return{dialogopen:!1,videodialogopen:!1,sending:!1,status:{message:""},add_programme:{submitcallback:()=>{},title:"",featured:!1,imageurl:"",creatorname:"",description:"",serieses:[]},videomanager:{callback:()=>{},data:[]}}})),style:"\n        overflow-y: scroll;\n        height: calc(calc(var(--vh, 1vh) * 100) - 85px);\n      "},t.create("h2",{style:"\n         padding: 10px\n        "},"Programme List"),t.create("div",{style:"\n          height: 10px;\n          width: calc(100% - 20px);\n          background-color: var(--mdc-theme-secondary);\n          margin-left: 10px;\n          margin-right: 10px;\n          border-radius: 2.5px;\n        "}),t.create("div",{_content:`\n      <template x-for="(item, index) in programmes.data">\n          ${t.create("div",{style:"\n          width: calc(100% - 20px);\n          margin-left: 10px;\n          margin-right: 10px;\n          justify-content: center;\n        "},t.create("div",{style:"\n                            display:flex\n                            "},t.create("img",{style:"\n                          width: 150px;\n                          height: 150px;\n                          margin-top: 10px;\n                        ","x-bind:src":"item.imageurl"}),t.create("div",{style:"\n                                height: 100%;\n                                display: block;\n                              "},t.create("div",{style:"\n                          font-family: BlinkMacSystemFont,-apple-system,'Segoe UI',Roboto,Oxygen,Ubuntu,Cantarell,'Fira Sans','Droid Sans','Helvetica Neue',Helvetica,Arial,sans-serif;\n                          font-size: 2em;\n                          margin-left: 10px;\n                          margin-bottom: 5px;\n                          ","x-text":"item.title"},"Southeast Gear"),t.create("div",{style:"\n                                  margin-left: 10px;\n                                ","x-data":"","x-on:click":Sf((function(){console.log("aaaaa"),this.add_programme=db({submitcallback:()=>{},title:"",featured:!1,imageurl:"",creatorname:"",description:"",serieses:[],...this.item}),this.dialogopen=!0,this.add_programme.submitcallback=e=>{this.sending=!0;let t=Cc();e=hb(e),console.log(e),delete e.submitcallback,tc(Zl(t,"programmes/"+this.index.toString()),e).then((e=>{this.sending=!1,this.dialogopen=!1,this.status.message=""})).catch((e=>{this.sending=!1,this.status.message=e}))}}))},t.create(Tf,{label:"Edit",type:"--raised"})),t.create("div",{style:"\n                                  margin-left: 10px;\n                                  margin-top: 10px;\n                                ","x-data":"","x-on:click":Sf((function(){this.sending=!0,tc(Zl(Cc(),"programmes/"+this.index.toString()),{}).then((e=>{this.sending=!1,this.dialogopen=!1,this.status.message=""})).catch((e=>{this.sending=!1,this.status.message=e}))}))},t.create(Tf,{label:"Remove",type:"--raised"}))))).outerHTML}\n        </template>\n        `}),t.create("div",null,t.create(pf,{attributes:{"x-transition:enter.duration.250ms":"","x-transition:leave.duration.250ms":""}},t.create(Kv,{closeable:Qv("true"),dialogactions:t.create("div",{style:"\n                display: flex;\n              "},t.create("div",{"x-text":"status.message",style:"\n                  width: 280px;\n                ","x-show":"!sending"}),t.create("div",{style:"\n                  padding-top: 18px;\n                  width: 180px;\n                ","x-show":"sending"},t.create(qf,null)),t.create("div",{style:"\n                          width: fit-content;\n                        ","x-on:click":Sf((function(){this.add_programme.submitcallback(this.add_programme)})),"x-show":"!sending"},t.create(Tf,{label:"Submit",type:"--text"}))),dialogopen:Yv("dialogopen"),title:Qv("'Add / Edit programme'")},t.create("div",{style:"\n                margin-top: 12px;\n              "},t.create(cb,{inputmodel:"add_programme['featured']",label:"Featured"})),t.create("div",{style:"\n                margin-top: 12px;\n              "},t.create(Tm,{inputlabel:"Programme name",inputmodel:"add_programme['title']",inputtype:"text"})),t.create("div",{style:"\n                margin-top: 12px;\n              "},t.create(Tm,{inputlabel:"Image URL",inputmodel:"add_programme['imageurl']",inputtype:"text"})),t.create("div",{style:"\n                margin-top: 12px;\n              "},t.create(Tm,{inputlabel:"Creator Name",inputmodel:"add_programme['creatorname']",inputtype:"text"})),t.create("div",{style:"\n                margin-top: 12px;\n              "},t.create(Xv,{label:Qv("Description"),model:Qv("add_programme['description']")})),t.create("div",{style:"\n                margin-top: 12px;\n              "},t.create("div",{style:"\n                    display: flex;\n                    background-color: rgba(var(--mdc-theme-primary-rgb), 0.3);\n                    width: 100%;\n                    min-height: 85px;\n                    padding: 20px;\n                    border-radius: 5px;\n                    position: relative;\n                    align-items: center;\n                  ","x-html":Cf((function(){return t.create("div",{style:"\n                      width: 100%;"},t.create("div",{_content:`<template x-for="(item, index3) in ${Sf((function(){return this.add_programme.serieses}))}">\n                          ${t.create("div",{style:"\n                                  display: block;\n                                  background-color: rgba(var(--mdc-theme-primary-rgb), 0.3);\n                                  width: 100%;\n                                  min-height: 85px;\n                                  padding: 20px;\n                                  border-radius: 5px;\n                                  position: relative;\n                                  align-items: center;\n                                  margin-bottom: 10px;\n                                "},t.create("h3",{style:"\n                                      color: var(--mdc-theme-secondary)\n                                    "},"Series"),t.create("div",{style:"\n                                margin-top: 12px;\n                                width: 100%;\n                                height: 100%;\n                              "},t.create(Tm,{inputlabel:"",inputmodel:"item['seriesname']",inputtype:"text"})),t.create("div",{style:"\n                                margin-top: 12px;\n                                width: 100%;\n                              "},t.create(Tm,{inputlabel:"",inputmodel:"item['imageurl']",inputtype:"text"})),t.create("div",{style:"\n                          width: fit-content;\n                          margin-top: 12px;\n                        ","x-on:click":Sf((function(){this.videomanager.data=this.item.videos||[],this.videodialogopen=!0,this.videomanager.callback=()=>{this.item.videos=this.videomanager.data,this.videodialogopen=!1}}))},t.create(Tf,{label:"Edit Videos",type:"--raised"})),t.create("div",{style:"\n                                margin-top: 12px;\n                                width: fit-content;\n                              ","x-on:click":Sf((function(){this.add_programme.serieses=ub(this.add_programme.serieses,this.index3)}))},t.create(Tf,{label:"Remove series",type:"--raised"}))).outerHTML}\n                          </template>\n                          `}),t.create("div",{style:"\n                          width: fit-content;\n                        ","x-on:click":Sf((function(){this.add_programme.serieses.push({seriesname:"(series name)",imageurl:"(direct image URL, https ONLY)",videos:[]})}))},t.create(Tf,{label:"Add series",type:"--raised"})))}))})))),t.create(pf,{attributes:{"x-transition:enter.duration.250ms":"","x-transition:leave.duration.250ms":""}},t.create(Kv,{closeable:Qv("false"),dialogactions:t.create("div",null,t.create("div",{style:"\n                          width: fit-content;\n                        ","x-on:click":Sf((function(){this.videomanager.callback()}))},t.create(Tf,{label:"Apply",type:"--text"}))),dialogopen:Yv("videodialogopen"),title:Qv("'Video Manager'")},t.create("div",{style:"\n                    display: block;\n                    background-color: rgba(var(--mdc-theme-primary-rgb), 0.3);\n                    width: 100%;\n                    min-height: 85px;\n                    padding: 20px;\n                    border-radius: 5px;\n                    position: relative;\n                    align-items: center;\n                  ",_content:`<template x-for="(item, index2) in videomanager.data">\n                ${t.create("div",null,t.create("div",{style:"\n                                margin-top: 12px;\n                                width: 100%;\n                                display: block;\n                                background-color: rgba(var(--mdc-theme-primary-rgb), 0.3);\n                                width: 100%;\n                                min-height: 85px;\n                                padding: 20px;\n                                border-radius: 5px;\n                                position: relative;\n                                align-items: center;\n                              "},t.create("div",{style:"\n                      margin-top: 12px;\n                    "},t.create(Tm,{inputlabel:"",inputmodel:"item['videourl']",inputtype:"text"})),t.create("div",{style:"\n                      margin-top: 12px;\n                    "},t.create(Tm,{inputlabel:"",inputmodel:"item['directurl']",inputtype:"text"})),t.create("div",{style:"\n                      margin-top: 12px;\n                    "},t.create(Tm,{inputlabel:"",inputmodel:"item['videotitle']",inputtype:"text"})),t.create("div",{"x-html":Cf((function(){return t.create("div",{style:"\n                width: fit-content;\n                margin-top: 12px;\n              ","x-on:click":Sf((function(){this.videomanager.data=ub(this.videomanager.data,this.index2)}))},t.create(Tf,{label:"Remove video",type:"--raised"}))}))}))).outerHTML}\n              </template>`}),t.create("div",{"x-html":Cf((function(){return t.create("div",{style:"\n                width: fit-content;\n                margin-top: 12px;\n              ","x-on:click":Sf((function(){this.videomanager.data.push({videourl:"(youtube URL)",directurl:"(direct https url to the video, optional)",videotitle:"(video title)",description:"(video description)"})}))},t.create(Tf,{label:"Add video",type:"--raised"}))}))})))),t.create("div",{"x-html":Cf((function(){return t.create("div",{style:"\n                width: fit-content;\n                margin-top: 12px;\n                margin-left: 12px;\n              ","x-on:click":Sf((function(){let e=0;for(let t in this.programmes.data)e++;this.add_programme=db({submitcallback:()=>{},title:"",featured:!1,imageurl:"",creatorname:"",description:"",serieses:[]}),this.dialogopen=!0,this.add_programme.submitcallback=t=>{this.sending=!0;let n=Cc();t=hb(t),console.log(t),delete t.submitcallback,tc(Zl(n,"programmes/"+e.toString()),t).then((e=>{this.sending=!1,this.dialogopen=!1,this.status.message=""})).catch((e=>{this.sending=!1,this.status.message=e}))}}))},t.create(Tf,{label:"Add programme",type:"--raised"}))}))}),t.create("div",{style:"\n                width: fit-content;\n                margin-top: 12px;\n                margin-left: 12px;\n              ","x-on:click":Sf((function(){window.abc(),console.log("complete")}))},t.create(Tf,{label:"WASM test",type:"--raised"})),t.create("div",{style:"\n                width: fit-content;\n                margin-top: 12px;\n                margin-left: 12px;\n              ","x-on:click":Sf((function(){tc(Zl(Cc(),"/users2/abc"),{abc:1}).then((e=>{console.log(e)})).catch((e=>{alert(e)}))}))},t.create(Tf,{label:"firebase test",type:"--raised"})),t.create("div",{style:"\n                width: fit-content;\n                margin-top: 12px;\n                margin-left: 12px;\n              ","x-on:click":Sf((function(){window.location.href="https://tsbc-debug/"}))},t.create(Tf,{label:"debugger",type:"--raised"})),t.create("div",{style:"\n                width: fit-content;\n                margin-top: 12px;\n                margin-left: 12px;\n              ","x-on:click":Sf((function(){window.location.href="https://192.168.1.252:5173"}))},t.create(Tf,{label:"Switch to Dev Server",type:"--raised"})),t.create("div",{style:"\n                width: fit-content;\n                margin-top: 12px;\n                margin-left: 12px;\n              ","x-on:click":Sf((function(){window.location.href="https://192.168.1.252:4173"}))},t.create(Tf,{label:"Switch to Pre deployment Server",type:"--raised"})),t.create("div",{style:"\n                width: fit-content;\n                margin-top: 12px;\n                margin-left: 12px;\n              ","x-on:click":Sf((function(){window.top.postMessage({type:"devwebview"},"*")}))},t.create(Tf,{label:"Switch to Dev Webview",type:"--raised"})),t.create("div",{style:"\n                width: fit-content;\n                margin-top: 12px;\n                margin-left: 12px;\n              ","x-on:click":Sf((function(){window.top.postMessage({type:"devwebviewremote"},"*")}))},t.create(Tf,{label:"Switch to Dev Webview (remote)",type:"--raised"})))}var fb="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function mb(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function gb(e){if(e.__esModule)return e;var t=e.default;if("function"==typeof t){var n=function e(){if(this instanceof e){var n=[null];return n.push.apply(n,arguments),new(Function.bind.apply(t,n))}return t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach((function(t){var i=Object.getOwnPropertyDescriptor(e,t);Object.defineProperty(n,t,i.get?i:{enumerable:!0,get:function(){return e[t]}})})),n}var yb={BASIC:"BASIC",MEDIA_SEGMENT:"MEDIA_SEGMENT",MEDIA_PLAYLIST:"MEDIA_PLAYLIST",MASTER_PLAYLIST:"MASTER_PLAYLIST",TRALING_MEDIA_SEGMENT:"TRAILING_MEDIA_SEGMENT",URL_SEGMENT_ENDING:"URL_SEGMENT_ENDING",GROUPING:"GROUPING"},_b={SPACE:" ".charCodeAt(0),COLON:":".charCodeAt(0),COMMA:",".charCodeAt(0),EQUAL:"=".charCodeAt(0),QUOTE:'"'.charCodeAt(0),MINUS:"-".charCodeAt(0),PERIOD:".".charCodeAt(0),NEW_LINE_LF:"\n".charCodeAt(0),NEW_LINE_CR:"\r".charCodeAt(0),BACK_SLASH:"\\".charCodeAt(0),HASH:"#".charCodeAt(0),AT:"@".charCodeAt(0),NUMBER_START:"0".charCodeAt(0),NUMBER_STOP:"9".charCodeAt(0)};const vb=_b;var bb=function(e){let t="",n=0;e=e.toLowerCase();for(let i=0;i<e.length;i++)n=e[i].charCodeAt(0),t+=n!==vb.MINUS?e[i]:(e[++i]||"").toUpperCase();return t};const Tb=/\"/g,Eb=/\W/g,wb=_b,Sb=bb;var Cb=function(e){let t="",n="",i={duration:"",title:""};Tb.lastIndex=0,Eb.lastIndex=0;let r=0,s=e[r].charCodeAt(0);for(;s>=wb.NUMBER_START&&s<=wb.NUMBER_STOP||s===wb.MINUS||s===wb.PERIOD;)i.duration+=e[r],r++,s=r>e.length-1?"":e[r].charCodeAt(0);i.duration=i.duration&&parseFloat(i.duration)||-1;for(let a=r;a<e.length;a++){switch(e[a].charCodeAt(0)){case wb.SPACE:n="";continue;case wb.QUOTE:{Tb.lastIndex=a+1;const r=Tb.exec(e);n=e.slice(a+1,r.index),a=r&&r.index||a,t&&(i[Sb(t)]=n),n="",t="";continue}case wb.EQUAL:{if(t=n,n="",e[a+1].charCodeAt(0)===wb.QUOTE)continue;Eb.lastIndex=a+1;const r=Eb.exec(e);n=e.slice(a+1,r.index),a=e[r.index].charCodeAt(0)===wb.COMMA&&r.index-1||r&&r.index||a,t&&(i[Sb(t)]=n),n="",t="";continue}case wb.COMMA:i.title=e.slice(a+1,e.length).trimLeft(),a=e.length;continue;default:n+=e[a]}}return i};var Ib=function(e){const t={length:0,offset:0};t.length=parseInt(e);const n=e.lastIndexOf("@");return~n&&(t.offset=parseInt(e.slice(n+1))),t};const xb=_b,kb=/\"/g,Ab=bb,Ob={YES:!0,NO:!1};function Pb(e){return e in Ob?Ob[e]:e}var Lb=function(e,t=!1,n){let i=0,r="",s="";const a=n||{};for(let o=0;o<e.length;o++)switch(i=e[o].charCodeAt(0),i){case xb.SPACE:r="";continue;case xb.EQUAL:s=r,r="";continue;case xb.COMMA:s=Ab(s),s&&(a[s]=t?Pb(r):r),s="",r="";continue;case xb.QUOTE:kb.lastIndex=o+1;const n=kb.exec(e),i=e.slice(o+1,n.index);s&&(a[Ab(s)]=i),o=n.index+1;continue;default:r+=e[o]}return r&&s&&(a[Ab(s)]=r),a};const Nb=Lb;var Db=function(e){return Nb(e)};const Rb=Ib,Mb=Lb;var Fb=function(e){const t=Mb(e);return t.byterange&&(t.byterange=Rb(t.byterange)),t};var Ub=function(e){const t=new Date(e.trim());return isNaN(t.getTime()),t};const Bb=Ub;const jb=Lb,qb=Ub;var Hb=function(e){const t=jb(e);return t.startDate&&(t.startDate=qb(t.startDate)),t.endDate&&(t.endDate=qb(t.endDate)),t.duration&&(t.duration=parseFloat(t.duration)),t.plannedDuration&&(t.plannedDuration=parseFloat(t.plannedDuration)),t};const Vb=Lb;var $b=function(e){const t={groupId:"default"};return Vb(e,!0,t),t};const Wb=Lb;var zb=function(e){const t=Wb(e);return"bandwidth"in t&&(t.bandwidth=parseInt(t.bandwidth)),"averageBandwidth"in t&&(t.averageBandwidth=parseInt(t.averageBandwidth)),"resolution"in t&&(t.resolution=parseInt(t.resolution)),"frameRate"in t&&(t.frameRate=parseFloat(t.frameRate)),"codecs"in t&&(t.codecs=t.codecs.split(";")),t};const Gb=Lb;const Kb=Lb;var Xb=function(e){const t=Kb(e,!0);return"timeOffset"in t&&(t.timeOffset=parseFloat(t.timeOffset)),t};const Yb={"#EXTM3U":{key:"isExtendedM3U",parser:()=>!0,scope:yb.BASIC},"#EXT-X-VERSION":{key:"version",parser:function(e){return parseInt(e.trim())||0},scope:yb.BASIC},"#EXTINF":{key:"inf",parser:Cb,scope:yb.MEDIA_SEGMENT},"#EXT-X-BYTERANGE":{key:"byteRange",parser:Ib,scope:yb.MEDIA_SEGMENT},"#EXT-X-DISCONTINUITY":{key:"discontinuity",parser:function(){return!0},scope:yb.MEDIA_SEGMENT},"#EXT-X-KEY":{key:"key",parser:Db,scope:yb.TRALING_MEDIA_SEGMENT},"#EXT-X-MAP":{key:"map",parser:Fb,scope:yb.TRALING_MEDIA_SEGMENT},"#EXT-X-PROGRAM-DATE-TIME":{key:"programDateTime",parser:function(e){return Bb(e)},scope:yb.MEDIA_SEGMENT},"#EXT-X-DATERANGE":{key:"dateRange",parser:Hb,scope:yb.MEDIA_SEGMENT},"#EXT-X-TARGETDURATION":{key:"targetDuration",parser:function(e){return parseInt(e)||-1},scope:yb.MEDIA_PLAYLIST},"#EXT-X-MEDIA-SEQUENCE":{key:"mediaSequence",parser:function(e){return parseInt(e)||0},scope:yb.MEDIA_PLAYLIST},"#EXT-X-DISCONTINUITY-SEQUENCE":{key:"discontinuitySequence",parser:function(e){return parseInt(e)||0},scope:yb.MEDIA_PLAYLIST},"#EXT-X-ENDLIST":{key:"endList",parser:function(e,t){return t.segments.length+1},scope:yb.MEDIA_PLAYLIST},"#EXT-X-PLAYLIST-TYPE":{key:"playlistType",parser:function(e){return e.trim()},scope:yb.MEDIA_PLAYLIST},"#EXT-X-I-FRAMES-ONLY":{key:"iFramesOnly",parser:()=>!0,scope:yb.MEDIA_PLAYLIST},"#EXT-X-MEDIA":{key:"media",parser:$b,scope:yb.GROUPING,group:{root:"media",path:["type","groupId","name"]}},"#EXT-X-STREAM-INF":{key:"streamInf",parser:zb,scope:yb.MASTER_PLAYLIST},"#EXT-X-I-FRAME-STREAM-INF":{key:"iFrameStreamInf",parser:zb,scope:yb.MASTER_PLAYLIST},"#EXT-X-SESSION-DATA":{key:"sessionData",parser:function(e){return Gb(e)},scope:yb.GROUPING,group:{root:"sessionData",path:["dataId","language"]}},"#EXT-X-SESSION-KEY":{key:"sessionKey",parser:Db,scope:yb.MASTER_PLAYLIST},"#EXT-X-INDEPENDENT-SEGMENTS":{key:"independentSegments",parser:()=>!0,scope:yb.MEDIA_PLAYLIST},"#EXT-X-START":{key:"start",parser:Xb,scope:yb.MEDIA_PLAYLIST},URL:{key:"url",parser:e=>e,scope:yb.URL_SEGMENT_ENDING}};const Qb=yb,Jb={get:e=>Yb[e]||null,set:(e,t)=>{Yb[e]=t},add:(e,t)=>{Yb[e]=t}};var Zb=class{constructor(){this.reset()}read(e){const t=e.length;e=e.trim();let n="",i=!1,r=!1,s=0,a=0,o=0,l="";for(let c=0;c<t;c++)a=e.indexOf("\n",c),s=a>-1&&a||e.indexOf("\r",c),s=s>-1&&s||t,l=e.slice(c,s).trim(),c=s,r="#"===l[0],i="#EXT"===l.slice(0,4),o=i&&l.indexOf(":")||-1,n=i&&~o&&l.slice(0,o),!n&&r&&(n=l),this.invokeParser(n,l.slice(o+1),r)}invokeParser(e,t,n){if(e&&t){const n=Jb.get(e);return n?this.dataScope(n,n.parser(t,this.result)):void 0}if((!t||!n)&&t){const e=Jb.get("URL");this.dataScope(e,e.parser(t,this.result))}}dataScope(e,t){switch(e.scope){case Qb.MASTER_PLAYLIST:this.currentSegmentData.isMasterPlaylist=!0;case Qb.MEDIA_SEGMENT:this.currentSegmentData[e.key]=t;break;case Qb.URL_SEGMENT_ENDING:this.currentSegmentData[e.key]=t,this.result.segments.push(this.currentSegmentData),this.currentSegmentData=Object.assign({},this.trailingData);break;case Qb.TRALING_MEDIA_SEGMENT:this.trailingData[e.key]=t,this.currentSegmentData=Object.assign(this.currentSegmentData,this.trailingData);break;case Qb.MEDIA_PLAYLIST:case Qb.BASIC:this.result[e.key]=t;break;case Qb.GROUPING:this.result[e.group.root]||(this.result[e.group.root]={});let n="",i=this.result[e.group.root];const r=e.group.path.length;for(let s=0;s<r-1;s++)n=e.group.path[s],i[t[n]]||(i[t[n]]={}),i=i[t[n]];i[t[e.group.path[r-1]]]=t}}getResult(){return this.result}reset(){this.trailingData={},this.currentSegmentData={},this.result={isExtendedM3U:!1,segments:[]}}};const eT=new(mb(Zb)),tT=async(e,t)=>{try{let{data:n}=await t("get",{url:e});return n}catch(n){return null}},nT=async({url:e,request:t,throwOnError:n=!1})=>{let i=iT({url:e});if(!i)return!1;try{const e=await t("get",{url:"https://www.youtube.com/watch",params:{v:i}});if(!e||200!=e.status||!e.data){const t=new Error("Cannot get youtube video response");throw t.response=e,t}let s=(e=>{if(!e)return"";let t=e.match(/ytInitialPlayerResponse = (.*)}}};/);return t?t[1]+"}}}":""})(e.data),a=JSON.parse(s),o=a.streamingData||{},l=(o.formats||[]).concat(o.adaptiveFormats||[]);if(!!l.find((e=>!!e.signatureCipher))){let n=await(async(e,t)=>{if(!e)return null;let n=e.match(/\/s\/player\/[A-Za-z0-9]+\/[A-Za-z0-9_.]+\/[A-Za-z0-9_]+\/base\.js/);if(!n)return null;let i=await tT(`https://www.youtube.com${n[0]}`,t),r=i.match(/function.*\.split\(\"\"\).*\.join\(\"\"\)}/);if(!r)return null;let s=r[0],a=s.match(/\.split\(\"\"\);([a-zA-Z0-9]+)\./);if(!a)return null;let o=i.match(new RegExp(`(var ${a[1]}={[\\s\\S]+}};)[a-zA-Z0-9]+\\.[a-zA-Z0-9]+\\.prototype`));return o?function(e){let t=new URLSearchParams(e),{s:n,sp:i="signature",url:r}=Object.fromEntries(t),a=new Function(`\n            "use strict";\n            ${o[1]}\n            return (${s})("${n}");\n        `)();return`${r}&${i}=${encodeURIComponent(a)}`}:null})(e.data,t);n&&(l=l.map((e=>(e.url||!e.signatureCipher||(e.url=n(e.signatureCipher),delete e.signatureCipher),e))))}let c={videoDetails:a.videoDetails||{},formats:l.filter((e=>e.url))};if(c.videoDetails.isLiveContent)try{let n=(e=>{if(!e)return null;let t=e.match(/hlsManifestUrl":"(.*\/file\/index\.m3u8)/);return t?t[1]:null})(e.data);if(n){let e=await tT(n,t);eT.read(e),c.liveData={manifestUrl:n,data:eT.getResult()},eT.reset()}}catch(r){if(n)throw r}return c}catch(r){if(n)throw r;return!1}},iT=({url:e})=>{if(/youtu\.?be/.test(e)){let t,n=[/youtu\.be\/([^#\&\?]{11})/,/\?v=([^#\&\?]{11})/,/\&v=([^#\&\?]{11})/,/embed\/([^#\&\?]{11})/,/\/v\/([^#\&\?]{11})/];for(t=0;t<n.length;++t)if(n[t].test(e))return n[t].exec(e)[1];{let n=e.split(/[\/\&\?=#\.\s]/g);for(t=0;t<n.length;++t)if(/^[^#\&\?]{11}$/.test(n[t]))return n[t]}}return null};var rT="undefined"!=typeof window?window:void 0!==fb?fb:"undefined"!=typeof self?self:{};const sT=mb(rT),aT=Object.freeze(Object.defineProperty({__proto__:null,default:{}},Symbol.toStringTag,{value:"Module"}));var oT,lT=void 0!==fb?fb:"undefined"!=typeof window?window:{},cT=gb(aT);"undefined"!=typeof document?oT=document:(oT=lT["__GLOBAL_DOCUMENT_CACHE@4"])||(oT=lT["__GLOBAL_DOCUMENT_CACHE@4"]=cT);var uT=oT;const dT=mb(uT);var hT={exports:{}};!function(e,t){function n(e){if(e&&"object"==typeof e){var t=e.which||e.keyCode||e.charCode;t&&(e=t)}if("number"==typeof e)return a[e];var n,s=String(e);return(n=i[s.toLowerCase()])?n:(n=r[s.toLowerCase()])||(1===s.length?s.charCodeAt(0):void 0)}n.isEventKey=function(e,t){if(e&&"object"==typeof e){var n=e.which||e.keyCode||e.charCode;if(null==n)return!1;if("string"==typeof t){var s;if(s=i[t.toLowerCase()])return s===n;if(s=r[t.toLowerCase()])return s===n}else if("number"==typeof t)return t===n;return!1}};var i=(t=e.exports=n).code=t.codes={backspace:8,tab:9,enter:13,shift:16,ctrl:17,alt:18,"pause/break":19,"caps lock":20,esc:27,space:32,"page up":33,"page down":34,end:35,home:36,left:37,up:38,right:39,down:40,insert:45,delete:46,command:91,"left command":91,"right command":93,"numpad *":106,"numpad +":107,"numpad -":109,"numpad .":110,"numpad /":111,"num lock":144,"scroll lock":145,"my computer":182,"my calculator":183,";":186,"=":187,",":188,"-":189,".":190,"/":191,"`":192,"[":219,"\\":220,"]":221,"'":222},r=t.aliases={windows:91,"⇧":16,"⌥":18,"⌃":17,"⌘":91,ctl:17,control:17,option:18,pause:19,break:19,caps:20,return:13,escape:27,spc:32,spacebar:32,pgup:33,pgdn:34,ins:45,del:46,cmd:91};for(s=97;s<123;s++)i[String.fromCharCode(s)]=s-32;for(var s=48;s<58;s++)i[s-48]=s;for(s=1;s<13;s++)i["f"+s]=s+111;for(s=0;s<10;s++)i["numpad "+s]=s+96;var a=t.names=t.title={};for(s in i)a[i[s]]=s;for(var o in r)i[o]=r[o]}(hT,hT.exports);const pT=mb(hT.exports);const fT=mb((function(e,t){var n,i=null;try{n=JSON.parse(e,t)}catch(r){i=r}return[i,n]}));var mT={exports:{}};const gT=gb(Om);var yT=function(e){if(!e)return!1;var t=_T.call(e);return"[object Function]"===t||"function"==typeof e&&"[object RegExp]"!==t||"undefined"!=typeof window&&(e===window.setTimeout||e===window.alert||e===window.confirm||e===window.prompt)},_T=Object.prototype.toString;var vT=rT;var bT=function(e,t){return void 0===t&&(t=!1),function(n,i,r){if(n)e(n);else if(i.statusCode>=400&&i.statusCode<=599){var s=r;if(t)if(vT.TextDecoder){var a=function(e){void 0===e&&(e="");return e.toLowerCase().split(";").reduce((function(e,t){var n=t.split("="),i=n[0],r=n[1];return"charset"===i.trim()?r.trim():e}),"utf-8")}(i.headers&&i.headers["content-type"]);try{s=new TextDecoder(a).decode(r)}catch(o){}}else s=String.fromCharCode.apply(null,new Uint8Array(r));e({cause:s})}else e(null,r)}},TT=rT,ET=gT,wT=yT;IT.httpHandler=bT;var ST=function(e){var t={};return e?(e.trim().split("\n").forEach((function(e){var n=e.indexOf(":"),i=e.slice(0,n).trim().toLowerCase(),r=e.slice(n+1).trim();void 0===t[i]?t[i]=r:Array.isArray(t[i])?t[i].push(r):t[i]=[t[i],r]})),t):t};function CT(e,t,n){var i=e;return wT(t)?(n=t,"string"==typeof e&&(i={uri:e})):i=ET({},t,{uri:e}),i.callback=n,i}function IT(e,t,n){return xT(t=CT(e,t,n))}function xT(e){if(void 0===e.callback)throw new Error("callback argument missing");var t=!1,n=function(n,i,r){t||(t=!0,e.callback(n,i,r))};function i(){var e=void 0;if(e=l.response?l.response:l.responseText||function(e){try{if("document"===e.responseType)return e.responseXML;var t=e.responseXML&&"parsererror"===e.responseXML.documentElement.nodeName;if(""===e.responseType&&!t)return e.responseXML}catch(n){}return null}(l),m)try{e=JSON.parse(e)}catch(t){}return e}function r(e){return clearTimeout(c),e instanceof Error||(e=new Error(""+(e||"Unknown XMLHttpRequest Error"))),e.statusCode=0,n(e,g)}function s(){if(!o){var t;clearTimeout(c),t=e.useXDR&&void 0===l.status?200:1223===l.status?204:l.status;var r=g,s=null;return 0!==t?(r={body:i(),statusCode:t,method:d,headers:{},url:u,rawRequest:l},l.getAllResponseHeaders&&(r.headers=ST(l.getAllResponseHeaders()))):s=new Error("Internal XMLHttpRequest Error"),n(s,r,r.body)}}var a,o,l=e.xhr||null;l||(l=e.cors||e.useXDR?new IT.XDomainRequest:new IT.XMLHttpRequest);var c,u=l.url=e.uri||e.url,d=l.method=e.method||"GET",h=e.body||e.data,p=l.headers=e.headers||{},f=!!e.sync,m=!1,g={body:void 0,headers:{},statusCode:0,method:d,url:u,rawRequest:l};if("json"in e&&!1!==e.json&&(m=!0,p.accept||p.Accept||(p.Accept="application/json"),"GET"!==d&&"HEAD"!==d&&(p["content-type"]||p["Content-Type"]||(p["Content-Type"]="application/json"),h=JSON.stringify(!0===e.json?h:e.json))),l.onreadystatechange=function(){4===l.readyState&&setTimeout(s,0)},l.onload=s,l.onerror=r,l.onprogress=function(){},l.onabort=function(){o=!0},l.ontimeout=r,l.open(d,u,!f,e.username,e.password),f||(l.withCredentials=!!e.withCredentials),!f&&e.timeout>0&&(c=setTimeout((function(){if(!o){o=!0,l.abort("timeout");var e=new Error("XMLHttpRequest timeout");e.code="ETIMEDOUT",r(e)}}),e.timeout)),l.setRequestHeader)for(a in p)p.hasOwnProperty(a)&&l.setRequestHeader(a,p[a]);else if(e.headers&&!function(e){for(var t in e)if(e.hasOwnProperty(t))return!1;return!0}(e.headers))throw new Error("Headers cannot be set on an XDomainRequest object");return"responseType"in e&&(l.responseType=e.responseType),"beforeSend"in e&&"function"==typeof e.beforeSend&&e.beforeSend(l),l.send(h||null),l}mT.exports=IT,mT.exports.default=IT,IT.XMLHttpRequest=TT.XMLHttpRequest||function(){},IT.XDomainRequest="withCredentials"in new IT.XMLHttpRequest?IT.XMLHttpRequest:TT.XDomainRequest,function(e,t){for(var n=0;n<e.length;n++)t(e[n])}(["get","put","post","patch","head","delete"],(function(e){IT["delete"===e?"del":e]=function(t,n,i){return(n=CT(t,n,i)).method=e.toUpperCase(),xT(n)}}));const kT=mb(mT.exports);var AT={exports:{}},OT=uT,PT=Object.create||function(){function e(){}return function(t){if(1!==arguments.length)throw new Error("Object.create shim only accepts one parameter.");return e.prototype=t,new e}}();function LT(e,t){this.name="ParsingError",this.code=e.code,this.message=t||e.message}function NT(e){function t(e,t,n,i){return 3600*(0|e)+60*(0|t)+(0|n)+(0|i)/1e3}var n=e.match(/^(\d+):(\d{1,2})(:\d{1,2})?\.(\d{3})/);return n?n[3]?t(n[1],n[2],n[3].replace(":",""),n[4]):n[1]>59?t(n[1],n[2],0,n[4]):t(0,n[1],n[2],n[4]):null}function DT(){this.values=PT(null)}function RT(e,t,n,i){var r=i?e.split(i):[e];for(var s in r)if("string"==typeof r[s]){var a=r[s].split(n);if(2===a.length)t(a[0].trim(),a[1].trim())}}function MT(e,t,n){var i=e;function r(){var t=NT(e);if(null===t)throw new LT(LT.Errors.BadTimeStamp,"Malformed timestamp: "+i);return e=e.replace(/^[^\sa-zA-Z-]+/,""),t}function s(){e=e.replace(/^\s+/,"")}if(s(),t.startTime=r(),s(),"--\x3e"!==e.substr(0,3))throw new LT(LT.Errors.BadTimeStamp,"Malformed time stamp (time stamps must be separated by '--\x3e'): "+i);e=e.substr(3),s(),t.endTime=r(),s(),function(e,t){var i=new DT;RT(e,(function(e,t){switch(e){case"region":for(var r=n.length-1;r>=0;r--)if(n[r].id===t){i.set(e,n[r].region);break}break;case"vertical":i.alt(e,t,["rl","lr"]);break;case"line":var s=t.split(","),a=s[0];i.integer(e,a),i.percent(e,a)&&i.set("snapToLines",!1),i.alt(e,a,["auto"]),2===s.length&&i.alt("lineAlign",s[1],["start","center","end"]);break;case"position":s=t.split(","),i.percent(e,s[0]),2===s.length&&i.alt("positionAlign",s[1],["start","center","end"]);break;case"size":i.percent(e,t);break;case"align":i.alt(e,t,["start","center","end","left","right"])}}),/:/,/\s/),t.region=i.get("region",null),t.vertical=i.get("vertical","");try{t.line=i.get("line","auto")}catch(r){}t.lineAlign=i.get("lineAlign","start"),t.snapToLines=i.get("snapToLines",!0),t.size=i.get("size",100);try{t.align=i.get("align","center")}catch(r){t.align=i.get("align","middle")}try{t.position=i.get("position","auto")}catch(r){t.position=i.get("position",{start:0,left:0,center:50,middle:50,end:100,right:100},t.align)}t.positionAlign=i.get("positionAlign",{start:"start",left:"start",center:"center",middle:"center",end:"end",right:"end"},t.align)}(e,t)}LT.prototype=PT(Error.prototype),LT.prototype.constructor=LT,LT.Errors={BadSignature:{code:0,message:"Malformed WebVTT signature."},BadTimeStamp:{code:1,message:"Malformed time stamp."}},DT.prototype={set:function(e,t){this.get(e)||""===t||(this.values[e]=t)},get:function(e,t,n){return n?this.has(e)?this.values[e]:t[n]:this.has(e)?this.values[e]:t},has:function(e){return e in this.values},alt:function(e,t,n){for(var i=0;i<n.length;++i)if(t===n[i]){this.set(e,t);break}},integer:function(e,t){/^-?\d+$/.test(t)&&this.set(e,parseInt(t,10))},percent:function(e,t){return!!(t.match(/^([\d]{1,3})(\.[\d]*)?%$/)&&(t=parseFloat(t))>=0&&t<=100)&&(this.set(e,t),!0)}};var FT=OT.createElement&&OT.createElement("textarea"),UT={c:"span",i:"i",b:"b",u:"u",ruby:"ruby",rt:"rt",v:"span",lang:"span"},BT={white:"rgba(255,255,255,1)",lime:"rgba(0,255,0,1)",cyan:"rgba(0,255,255,1)",red:"rgba(255,0,0,1)",yellow:"rgba(255,255,0,1)",magenta:"rgba(255,0,255,1)",blue:"rgba(0,0,255,1)",black:"rgba(0,0,0,1)"},jT={v:"title",lang:"lang"},qT={rt:"ruby"};function HT(e,t){function n(){if(!t)return null;var e=t.match(/^([^<]*)(<[^>]*>?)?/);return function(e){return t=t.substr(e.length),e}(e[1]?e[1]:e[2])}function i(e,t){return!qT[t.localName]||qT[t.localName]===e.localName}function r(t,n){var i=UT[t];if(!i)return null;var r=e.document.createElement(i),s=jT[t];return s&&n&&(r[s]=n.trim()),r}for(var s,a,o=e.document.createElement("div"),l=o,c=[];null!==(s=n());)if("<"!==s[0])l.appendChild(e.document.createTextNode((a=s,FT.innerHTML=a,a=FT.textContent,FT.textContent="",a)));else{if("/"===s[1]){c.length&&c[c.length-1]===s.substr(2).replace(">","")&&(c.pop(),l=l.parentNode);continue}var u,d=NT(s.substr(1,s.length-2));if(d){u=e.document.createProcessingInstruction("timestamp",d),l.appendChild(u);continue}var h=s.match(/^<([^.\s/0-9>]+)(\.[^\s\\>]+)?([^>\\]+)?(\\?)>?$/);if(!h)continue;if(!(u=r(h[1],h[3])))continue;if(!i(l,u))continue;if(h[2]){var p=h[2].split(".");p.forEach((function(e){var t=/^bg_/.test(e),n=t?e.slice(3):e;if(BT.hasOwnProperty(n)){var i=t?"background-color":"color",r=BT[n];u.style[i]=r}})),u.className=p.join(" ")}c.push(h[1]),l.appendChild(u),l=u}return o}var VT=[[1470,1470],[1472,1472],[1475,1475],[1478,1478],[1488,1514],[1520,1524],[1544,1544],[1547,1547],[1549,1549],[1563,1563],[1566,1610],[1645,1647],[1649,1749],[1765,1766],[1774,1775],[1786,1805],[1807,1808],[1810,1839],[1869,1957],[1969,1969],[1984,2026],[2036,2037],[2042,2042],[2048,2069],[2074,2074],[2084,2084],[2088,2088],[2096,2110],[2112,2136],[2142,2142],[2208,2208],[2210,2220],[8207,8207],[64285,64285],[64287,64296],[64298,64310],[64312,64316],[64318,64318],[64320,64321],[64323,64324],[64326,64449],[64467,64829],[64848,64911],[64914,64967],[65008,65020],[65136,65140],[65142,65276],[67584,67589],[67592,67592],[67594,67637],[67639,67640],[67644,67644],[67647,67669],[67671,67679],[67840,67867],[67872,67897],[67903,67903],[67968,68023],[68030,68031],[68096,68096],[68112,68115],[68117,68119],[68121,68147],[68160,68167],[68176,68184],[68192,68223],[68352,68405],[68416,68437],[68440,68466],[68472,68479],[68608,68680],[126464,126467],[126469,126495],[126497,126498],[126500,126500],[126503,126503],[126505,126514],[126516,126519],[126521,126521],[126523,126523],[126530,126530],[126535,126535],[126537,126537],[126539,126539],[126541,126543],[126545,126546],[126548,126548],[126551,126551],[126553,126553],[126555,126555],[126557,126557],[126559,126559],[126561,126562],[126564,126564],[126567,126570],[126572,126578],[126580,126583],[126585,126588],[126590,126590],[126592,126601],[126603,126619],[126625,126627],[126629,126633],[126635,126651],[1114109,1114109]];function $T(e){for(var t=0;t<VT.length;t++){var n=VT[t];if(e>=n[0]&&e<=n[1])return!0}return!1}function WT(e){var t=[],n="";if(!e||!e.childNodes)return"ltr";function i(e,t){for(var n=t.childNodes.length-1;n>=0;n--)e.push(t.childNodes[n])}function r(e){if(!e||!e.length)return null;var t=e.pop(),n=t.textContent||t.innerText;if(n){var s=n.match(/^.*(\n|\r)/);return s?(e.length=0,s[0]):n}return"ruby"===t.tagName?r(e):t.childNodes?(i(e,t),r(e)):void 0}for(i(t,e);n=r(t);)for(var s=0;s<n.length;s++)if($T(n.charCodeAt(s)))return"rtl";return"ltr"}function zT(){}function GT(e,t,n){zT.call(this),this.cue=t,this.cueDiv=HT(e,t.text);var i={color:"rgba(255, 255, 255, 1)",backgroundColor:"rgba(0, 0, 0, 0.8)",position:"relative",left:0,right:0,top:0,bottom:0,display:"inline",writingMode:""===t.vertical?"horizontal-tb":"lr"===t.vertical?"vertical-lr":"vertical-rl",unicodeBidi:"plaintext"};this.applyStyles(i,this.cueDiv),this.div=e.document.createElement("div"),i={direction:WT(this.cueDiv),writingMode:""===t.vertical?"horizontal-tb":"lr"===t.vertical?"vertical-lr":"vertical-rl",unicodeBidi:"plaintext",textAlign:"middle"===t.align?"center":t.align,font:n.font,whiteSpace:"pre-line",position:"absolute"},this.applyStyles(i),this.div.appendChild(this.cueDiv);var r=0;switch(t.positionAlign){case"start":r=t.position;break;case"center":r=t.position-t.size/2;break;case"end":r=t.position-t.size}""===t.vertical?this.applyStyles({left:this.formatStyle(r,"%"),width:this.formatStyle(t.size,"%")}):this.applyStyles({top:this.formatStyle(r,"%"),height:this.formatStyle(t.size,"%")}),this.move=function(e){this.applyStyles({top:this.formatStyle(e.top,"px"),bottom:this.formatStyle(e.bottom,"px"),left:this.formatStyle(e.left,"px"),right:this.formatStyle(e.right,"px"),height:this.formatStyle(e.height,"px"),width:this.formatStyle(e.width,"px")})}}function KT(e){var t,n,i,r;if(e.div){n=e.div.offsetHeight,i=e.div.offsetWidth,r=e.div.offsetTop;var s=(s=e.div.childNodes)&&(s=s[0])&&s.getClientRects&&s.getClientRects();e=e.div.getBoundingClientRect(),t=s?Math.max(s[0]&&s[0].height||0,e.height/s.length):0}this.left=e.left,this.right=e.right,this.top=e.top||r,this.height=e.height||n,this.bottom=e.bottom||r+(e.height||n),this.width=e.width||i,this.lineHeight=void 0!==t?t:e.lineHeight}function XT(e,t,n,i){var r=new KT(t),s=t.cue,a=function(e){if("number"==typeof e.line&&(e.snapToLines||e.line>=0&&e.line<=100))return e.line;if(!e.track||!e.track.textTrackList||!e.track.textTrackList.mediaElement)return-1;for(var t=e.track,n=t.textTrackList,i=0,r=0;r<n.length&&n[r]!==t;r++)"showing"===n[r].mode&&i++;return-1*++i}(s),o=[];if(s.snapToLines){var l;switch(s.vertical){case"":o=["+y","-y"],l="height";break;case"rl":o=["+x","-x"],l="width";break;case"lr":o=["-x","+x"],l="width"}var c=r.lineHeight,u=c*Math.round(a),d=n[l]+c,h=o[0];Math.abs(u)>d&&(u=u<0?-1:1,u*=Math.ceil(d/c)*c),a<0&&(u+=""===s.vertical?n.height:n.width,o=o.reverse()),r.move(h,u)}else{var p=r.lineHeight/n.height*100;switch(s.lineAlign){case"center":a-=p/2;break;case"end":a-=p}switch(s.vertical){case"":t.applyStyles({top:t.formatStyle(a,"%")});break;case"rl":t.applyStyles({left:t.formatStyle(a,"%")});break;case"lr":t.applyStyles({right:t.formatStyle(a,"%")})}o=["+y","-x","+x","-y"],r=new KT(t)}var f=function(e,t){for(var r,s=new KT(e),a=1,o=0;o<t.length;o++){for(;e.overlapsOppositeAxis(n,t[o])||e.within(n)&&e.overlapsAny(i);)e.move(t[o]);if(e.within(n))return e;var l=e.intersectPercentage(n);a>l&&(r=new KT(e),a=l),e=new KT(s)}return r||s}(r,o);t.move(f.toCSSCompatValues(n))}function YT(){}zT.prototype.applyStyles=function(e,t){for(var n in t=t||this.div,e)e.hasOwnProperty(n)&&(t.style[n]=e[n])},zT.prototype.formatStyle=function(e,t){return 0===e?0:e+t},GT.prototype=PT(zT.prototype),GT.prototype.constructor=GT,KT.prototype.move=function(e,t){switch(t=void 0!==t?t:this.lineHeight,e){case"+x":this.left+=t,this.right+=t;break;case"-x":this.left-=t,this.right-=t;break;case"+y":this.top+=t,this.bottom+=t;break;case"-y":this.top-=t,this.bottom-=t}},KT.prototype.overlaps=function(e){return this.left<e.right&&this.right>e.left&&this.top<e.bottom&&this.bottom>e.top},KT.prototype.overlapsAny=function(e){for(var t=0;t<e.length;t++)if(this.overlaps(e[t]))return!0;return!1},KT.prototype.within=function(e){return this.top>=e.top&&this.bottom<=e.bottom&&this.left>=e.left&&this.right<=e.right},KT.prototype.overlapsOppositeAxis=function(e,t){switch(t){case"+x":return this.left<e.left;case"-x":return this.right>e.right;case"+y":return this.top<e.top;case"-y":return this.bottom>e.bottom}},KT.prototype.intersectPercentage=function(e){return Math.max(0,Math.min(this.right,e.right)-Math.max(this.left,e.left))*Math.max(0,Math.min(this.bottom,e.bottom)-Math.max(this.top,e.top))/(this.height*this.width)},KT.prototype.toCSSCompatValues=function(e){return{top:this.top-e.top,bottom:e.bottom-this.bottom,left:this.left-e.left,right:e.right-this.right,height:this.height,width:this.width}},KT.getSimpleBoxPosition=function(e){var t=e.div?e.div.offsetHeight:e.tagName?e.offsetHeight:0,n=e.div?e.div.offsetWidth:e.tagName?e.offsetWidth:0,i=e.div?e.div.offsetTop:e.tagName?e.offsetTop:0;return{left:(e=e.div?e.div.getBoundingClientRect():e.tagName?e.getBoundingClientRect():e).left,right:e.right,top:e.top||i,height:e.height||t,bottom:e.bottom||i+(e.height||t),width:e.width||n}},YT.StringDecoder=function(){return{decode:function(e){if(!e)return"";if("string"!=typeof e)throw new Error("Error - expected string data.");return decodeURIComponent(encodeURIComponent(e))}}},YT.convertCueToDOMTree=function(e,t){return e&&t?HT(e,t):null};YT.processCues=function(e,t,n){if(!e||!t||!n)return null;for(;n.firstChild;)n.removeChild(n.firstChild);var i=e.document.createElement("div");if(i.style.position="absolute",i.style.left="0",i.style.right="0",i.style.top="0",i.style.bottom="0",i.style.margin="1.5%",n.appendChild(i),function(e){for(var t=0;t<e.length;t++)if(e[t].hasBeenReset||!e[t].displayState)return!0;return!1}(t)){var r=[],s=KT.getSimpleBoxPosition(i),a={font:Math.round(.05*s.height*100)/100+"px sans-serif"};!function(){for(var n,o,l=0;l<t.length;l++)o=t[l],n=new GT(e,o,a),i.appendChild(n.div),XT(0,n,s,r),o.displayState=n.div,r.push(KT.getSimpleBoxPosition(n))}()}else for(var o=0;o<t.length;o++)i.appendChild(t[o].displayState)},YT.Parser=function(e,t,n){n||(n=t,t={}),t||(t={}),this.window=e,this.vttjs=t,this.state="INITIAL",this.buffer="",this.decoder=n||new TextDecoder("utf8"),this.regionList=[]},YT.Parser.prototype={reportOrThrowError:function(e){if(!(e instanceof LT))throw e;this.onparsingerror&&this.onparsingerror(e)},parse:function(e){var t=this;function n(){for(var e=t.buffer,n=0;n<e.length&&"\r"!==e[n]&&"\n"!==e[n];)++n;var i=e.substr(0,n);return"\r"===e[n]&&++n,"\n"===e[n]&&++n,t.buffer=e.substr(n),i}function i(e){e.match(/X-TIMESTAMP-MAP/)?RT(e,(function(e,n){if("X-TIMESTAMP-MAP"===e)!function(e){var n=new DT;RT(e,(function(e,t){switch(e){case"MPEGT":n.integer(e+"S",t);break;case"LOCA":n.set(e+"L",NT(t))}}),/[^\d]:/,/,/),t.ontimestampmap&&t.ontimestampmap({MPEGTS:n.get("MPEGTS"),LOCAL:n.get("LOCAL")})}(n)}),/=/):RT(e,(function(e,n){if("Region"===e)!function(e){var n=new DT;if(RT(e,(function(e,t){switch(e){case"id":n.set(e,t);break;case"width":n.percent(e,t);break;case"lines":n.integer(e,t);break;case"regionanchor":case"viewportanchor":var i=t.split(",");if(2!==i.length)break;var r=new DT;if(r.percent("x",i[0]),r.percent("y",i[1]),!r.has("x")||!r.has("y"))break;n.set(e+"X",r.get("x")),n.set(e+"Y",r.get("y"));break;case"scroll":n.alt(e,t,["up"])}}),/=/,/\s/),n.has("id")){var i=new(t.vttjs.VTTRegion||t.window.VTTRegion);i.width=n.get("width",100),i.lines=n.get("lines",3),i.regionAnchorX=n.get("regionanchorX",0),i.regionAnchorY=n.get("regionanchorY",100),i.viewportAnchorX=n.get("viewportanchorX",0),i.viewportAnchorY=n.get("viewportanchorY",100),i.scroll=n.get("scroll",""),t.onregion&&t.onregion(i),t.regionList.push({id:n.get("id"),region:i})}}(n)}),/:/)}e&&(t.buffer+=t.decoder.decode(e,{stream:!0}));try{var r;if("INITIAL"===t.state){if(!/\r\n|\n/.test(t.buffer))return this;var s=(r=n()).match(/^WEBVTT([ \t].*)?$/);if(!s||!s[0])throw new LT(LT.Errors.BadSignature);t.state="HEADER"}for(var a=!1;t.buffer;){if(!/\r\n|\n/.test(t.buffer))return this;switch(a?a=!1:r=n(),t.state){case"HEADER":/:/.test(r)?i(r):r||(t.state="ID");continue;case"NOTE":r||(t.state="ID");continue;case"ID":if(/^NOTE($|[ \t])/.test(r)){t.state="NOTE";break}if(!r)continue;t.cue=new(t.vttjs.VTTCue||t.window.VTTCue)(0,0,"");try{t.cue.align="center"}catch(l){t.cue.align="middle"}if(t.state="CUE",-1===r.indexOf("--\x3e")){t.cue.id=r;continue}case"CUE":try{MT(r,t.cue,t.regionList)}catch(l){t.reportOrThrowError(l),t.cue=null,t.state="BADCUE";continue}t.state="CUETEXT";continue;case"CUETEXT":var o=-1!==r.indexOf("--\x3e");if(!r||o&&(a=!0)){t.oncue&&t.oncue(t.cue),t.cue=null,t.state="ID";continue}t.cue.text&&(t.cue.text+="\n"),t.cue.text+=r.replace(/\u2028/g,"\n").replace(/u2029/g,"\n");continue;case"BADCUE":r||(t.state="ID");continue}}}catch(l){t.reportOrThrowError(l),"CUETEXT"===t.state&&t.cue&&t.oncue&&t.oncue(t.cue),t.cue=null,t.state="INITIAL"===t.state?"BADWEBVTT":"BADCUE"}return this},flush:function(){var e=this;try{if(e.buffer+=e.decoder.decode(),(e.cue||"HEADER"===e.state)&&(e.buffer+="\n\n",e.parse()),"INITIAL"===e.state)throw new LT(LT.Errors.BadSignature)}catch(t){e.reportOrThrowError(t)}return e.onflush&&e.onflush(),this}};var QT=YT,JT={"":1,lr:1,rl:1},ZT={start:1,center:1,end:1,left:1,right:1,auto:1,"line-left":1,"line-right":1};function eE(e){return"string"==typeof e&&(!!ZT[e.toLowerCase()]&&e.toLowerCase())}function tE(e,t,n){this.hasBeenReset=!1;var i="",r=!1,s=e,a=t,o=n,l=null,c="",u=!0,d="auto",h="start",p="auto",f="auto",m=100,g="center";Object.defineProperties(this,{id:{enumerable:!0,get:function(){return i},set:function(e){i=""+e}},pauseOnExit:{enumerable:!0,get:function(){return r},set:function(e){r=!!e}},startTime:{enumerable:!0,get:function(){return s},set:function(e){if("number"!=typeof e)throw new TypeError("Start time must be set to a number.");s=e,this.hasBeenReset=!0}},endTime:{enumerable:!0,get:function(){return a},set:function(e){if("number"!=typeof e)throw new TypeError("End time must be set to a number.");a=e,this.hasBeenReset=!0}},text:{enumerable:!0,get:function(){return o},set:function(e){o=""+e,this.hasBeenReset=!0}},region:{enumerable:!0,get:function(){return l},set:function(e){l=e,this.hasBeenReset=!0}},vertical:{enumerable:!0,get:function(){return c},set:function(e){var t=function(e){return"string"==typeof e&&!!JT[e.toLowerCase()]&&e.toLowerCase()}(e);if(!1===t)throw new SyntaxError("Vertical: an invalid or illegal direction string was specified.");c=t,this.hasBeenReset=!0}},snapToLines:{enumerable:!0,get:function(){return u},set:function(e){u=!!e,this.hasBeenReset=!0}},line:{enumerable:!0,get:function(){return d},set:function(e){if("number"!=typeof e&&"auto"!==e)throw new SyntaxError("Line: an invalid number or illegal string was specified.");d=e,this.hasBeenReset=!0}},lineAlign:{enumerable:!0,get:function(){return h},set:function(e){var t=eE(e);t?(h=t,this.hasBeenReset=!0):console.warn("lineAlign: an invalid or illegal string was specified.")}},position:{enumerable:!0,get:function(){return p},set:function(e){if(e<0||e>100)throw new Error("Position must be between 0 and 100.");p=e,this.hasBeenReset=!0}},positionAlign:{enumerable:!0,get:function(){return f},set:function(e){var t=eE(e);t?(f=t,this.hasBeenReset=!0):console.warn("positionAlign: an invalid or illegal string was specified.")}},size:{enumerable:!0,get:function(){return m},set:function(e){if(e<0||e>100)throw new Error("Size must be between 0 and 100.");m=e,this.hasBeenReset=!0}},align:{enumerable:!0,get:function(){return g},set:function(e){var t=eE(e);if(!t)throw new SyntaxError("align: an invalid or illegal alignment string was specified.");g=t,this.hasBeenReset=!0}}}),this.displayState=void 0}tE.prototype.getCueAsHTML=function(){return WebVTT.convertCueToDOMTree(window,this.text)};var nE=tE,iE={"":!0,up:!0};function rE(e){return"number"==typeof e&&e>=0&&e<=100}var sE=function(){var e=100,t=3,n=0,i=100,r=0,s=100,a="";Object.defineProperties(this,{width:{enumerable:!0,get:function(){return e},set:function(t){if(!rE(t))throw new Error("Width must be between 0 and 100.");e=t}},lines:{enumerable:!0,get:function(){return t},set:function(e){if("number"!=typeof e)throw new TypeError("Lines must be set to a number.");t=e}},regionAnchorY:{enumerable:!0,get:function(){return i},set:function(e){if(!rE(e))throw new Error("RegionAnchorX must be between 0 and 100.");i=e}},regionAnchorX:{enumerable:!0,get:function(){return n},set:function(e){if(!rE(e))throw new Error("RegionAnchorY must be between 0 and 100.");n=e}},viewportAnchorY:{enumerable:!0,get:function(){return s},set:function(e){if(!rE(e))throw new Error("ViewportAnchorY must be between 0 and 100.");s=e}},viewportAnchorX:{enumerable:!0,get:function(){return r},set:function(e){if(!rE(e))throw new Error("ViewportAnchorX must be between 0 and 100.");r=e}},scroll:{enumerable:!0,get:function(){return a},set:function(e){var t=function(e){return"string"==typeof e&&!!iE[e.toLowerCase()]&&e.toLowerCase()}(e);!1===t?console.warn("Scroll: an invalid or illegal string was specified."):a=t}}})},aE=rT,oE=AT.exports={WebVTT:QT,VTTCue:nE,VTTRegion:sE};aE.vttjs=oE,aE.WebVTT=oE.WebVTT;var lE=oE.VTTCue,cE=oE.VTTRegion,uE=aE.VTTCue,dE=aE.VTTRegion;oE.shim=function(){aE.VTTCue=lE,aE.VTTRegion=cE},oE.restore=function(){aE.VTTCue=uE,aE.VTTRegion=dE},aE.VTTCue||oE.shim();const hE=mb(AT.exports);var pE={exports:{}};!function(e,t){!function(t){var n=/^(?=((?:[a-zA-Z0-9+\-.]+:)?))\1(?=((?:\/\/[^\/?#]*)?))\2(?=((?:(?:[^?#\/]*\/)*[^;?#\/]*)?))\3((?:;[^?#]*)?)(\?[^#]*)?(#[^]*)?$/,i=/^(?=([^\/?#]*))\1([^]*)$/,r=/(?:\/|^)\.(?=\/)/g,s=/(?:\/|^)\.\.\/(?!\.\.\/)[^\/]*(?=\/)/g,a={buildAbsoluteURL:function(e,t,n){if(n=n||{},e=e.trim(),!(t=t.trim())){if(!n.alwaysNormalize)return e;var r=a.parseURL(e);if(!r)throw new Error("Error trying to parse base URL.");return r.path=a.normalizePath(r.path),a.buildURLFromParts(r)}var s=a.parseURL(t);if(!s)throw new Error("Error trying to parse relative URL.");if(s.scheme)return n.alwaysNormalize?(s.path=a.normalizePath(s.path),a.buildURLFromParts(s)):t;var o=a.parseURL(e);if(!o)throw new Error("Error trying to parse base URL.");if(!o.netLoc&&o.path&&"/"!==o.path[0]){var l=i.exec(o.path);o.netLoc=l[1],o.path=l[2]}o.netLoc&&!o.path&&(o.path="/");var c={scheme:o.scheme,netLoc:s.netLoc,path:null,params:s.params,query:s.query,fragment:s.fragment};if(!s.netLoc&&(c.netLoc=o.netLoc,"/"!==s.path[0]))if(s.path){var u=o.path,d=u.substring(0,u.lastIndexOf("/")+1)+s.path;c.path=a.normalizePath(d)}else c.path=o.path,s.params||(c.params=o.params,s.query||(c.query=o.query));return null===c.path&&(c.path=n.alwaysNormalize?a.normalizePath(s.path):s.path),a.buildURLFromParts(c)},parseURL:function(e){var t=n.exec(e);return t?{scheme:t[1]||"",netLoc:t[2]||"",path:t[3]||"",params:t[4]||"",query:t[5]||"",fragment:t[6]||""}:null},normalizePath:function(e){for(e=e.split("").reverse().join("").replace(r,"");e.length!==(e=e.replace(s,"")).length;);return e.split("").reverse().join("")},buildURLFromParts:function(e){return e.scheme+e.netLoc+e.path+e.params+e.query+e.fragment}};e.exports=a}()}(pE);const fE=mb(pE.exports);var mE="http://example.com",gE=function(){function e(){this.listeners={}}var t=e.prototype;return t.on=function(e,t){this.listeners[e]||(this.listeners[e]=[]),this.listeners[e].push(t)},t.off=function(e,t){if(!this.listeners[e])return!1;var n=this.listeners[e].indexOf(t);return this.listeners[e]=this.listeners[e].slice(0),this.listeners[e].splice(n,1),n>-1},t.trigger=function(e){var t=this.listeners[e];if(t)if(2===arguments.length)for(var n=t.length,i=0;i<n;++i)t[i].call(this,arguments[1]);else for(var r=Array.prototype.slice.call(arguments,1),s=t.length,a=0;a<s;++a)t[a].apply(this,r)},t.dispose=function(){this.listeners={}},t.pipe=function(e){this.on("data",(function(t){e.push(t)}))},e}();function yE(e){for(var t,n=(t=e,sT.atob?sT.atob(t):Buffer.from(t,"base64").toString("binary")),i=new Uint8Array(n.length),r=0;r<n.length;r++)i[r]=n.charCodeAt(r);return i}class _E extends gE{constructor(){super(),this.buffer=""}push(e){let t;for(this.buffer+=e,t=this.buffer.indexOf("\n");t>-1;t=this.buffer.indexOf("\n"))this.trigger("data",this.buffer.substring(0,t)),this.buffer=this.buffer.substring(t+1)}}const vE=String.fromCharCode(9),bE=function(e){const t=/([0-9.]*)?@?([0-9.]*)?/.exec(e||""),n={};return t[1]&&(n.length=parseInt(t[1],10)),t[2]&&(n.offset=parseInt(t[2],10)),n},TE=function(e){const t={};if(!e)return t;const n=e.split(new RegExp('(?:^|,)((?:[^=]*)=(?:"[^"]*"|[^,]*))'));let i,r=n.length;for(;r--;)""!==n[r]&&(i=/([^=]*)=(.*)/.exec(n[r]).slice(1),i[0]=i[0].replace(/^\s+|\s+$/g,""),i[1]=i[1].replace(/^\s+|\s+$/g,""),i[1]=i[1].replace(/^['"](.*)['"]$/g,"$1"),t[i[0]]=i[1]);return t};class EE extends gE{constructor(){super(),this.customParsers=[],this.tagMappers=[]}push(e){let t,n;if(0===(e=e.trim()).length)return;if("#"!==e[0])return void this.trigger("data",{type:"uri",uri:e});this.tagMappers.reduce(((t,n)=>{const i=n(e);return i===e?t:t.concat([i])}),[e]).forEach((e=>{for(let t=0;t<this.customParsers.length;t++)if(this.customParsers[t].call(this,e))return;if(0===e.indexOf("#EXT"))if(e=e.replace("\r",""),t=/^#EXTM3U/.exec(e),t)this.trigger("data",{type:"tag",tagType:"m3u"});else{if(t=/^#EXTINF:([0-9\.]*)?,?(.*)?$/.exec(e),t)return n={type:"tag",tagType:"inf"},t[1]&&(n.duration=parseFloat(t[1])),t[2]&&(n.title=t[2]),void this.trigger("data",n);if(t=/^#EXT-X-TARGETDURATION:([0-9.]*)?/.exec(e),t)return n={type:"tag",tagType:"targetduration"},t[1]&&(n.duration=parseInt(t[1],10)),void this.trigger("data",n);if(t=/^#EXT-X-VERSION:([0-9.]*)?/.exec(e),t)return n={type:"tag",tagType:"version"},t[1]&&(n.version=parseInt(t[1],10)),void this.trigger("data",n);if(t=/^#EXT-X-MEDIA-SEQUENCE:(\-?[0-9.]*)?/.exec(e),t)return n={type:"tag",tagType:"media-sequence"},t[1]&&(n.number=parseInt(t[1],10)),void this.trigger("data",n);if(t=/^#EXT-X-DISCONTINUITY-SEQUENCE:(\-?[0-9.]*)?/.exec(e),t)return n={type:"tag",tagType:"discontinuity-sequence"},t[1]&&(n.number=parseInt(t[1],10)),void this.trigger("data",n);if(t=/^#EXT-X-PLAYLIST-TYPE:(.*)?$/.exec(e),t)return n={type:"tag",tagType:"playlist-type"},t[1]&&(n.playlistType=t[1]),void this.trigger("data",n);if(t=/^#EXT-X-BYTERANGE:(.*)?$/.exec(e),t)return n=Am(bE(t[1]),{type:"tag",tagType:"byterange"}),void this.trigger("data",n);if(t=/^#EXT-X-ALLOW-CACHE:(YES|NO)?/.exec(e),t)return n={type:"tag",tagType:"allow-cache"},t[1]&&(n.allowed=!/NO/.test(t[1])),void this.trigger("data",n);if(t=/^#EXT-X-MAP:(.*)$/.exec(e),t){if(n={type:"tag",tagType:"map"},t[1]){const e=TE(t[1]);e.URI&&(n.uri=e.URI),e.BYTERANGE&&(n.byterange=bE(e.BYTERANGE))}this.trigger("data",n)}else if(t=/^#EXT-X-STREAM-INF:(.*)$/.exec(e),t){if(n={type:"tag",tagType:"stream-inf"},t[1]){if(n.attributes=TE(t[1]),n.attributes.RESOLUTION){const e=n.attributes.RESOLUTION.split("x"),t={};e[0]&&(t.width=parseInt(e[0],10)),e[1]&&(t.height=parseInt(e[1],10)),n.attributes.RESOLUTION=t}n.attributes.BANDWIDTH&&(n.attributes.BANDWIDTH=parseInt(n.attributes.BANDWIDTH,10)),n.attributes["FRAME-RATE"]&&(n.attributes["FRAME-RATE"]=parseFloat(n.attributes["FRAME-RATE"])),n.attributes["PROGRAM-ID"]&&(n.attributes["PROGRAM-ID"]=parseInt(n.attributes["PROGRAM-ID"],10))}this.trigger("data",n)}else{if(t=/^#EXT-X-MEDIA:(.*)$/.exec(e),t)return n={type:"tag",tagType:"media"},t[1]&&(n.attributes=TE(t[1])),void this.trigger("data",n);if(t=/^#EXT-X-ENDLIST/.exec(e),t)this.trigger("data",{type:"tag",tagType:"endlist"});else if(t=/^#EXT-X-DISCONTINUITY/.exec(e),t)this.trigger("data",{type:"tag",tagType:"discontinuity"});else{if(t=/^#EXT-X-PROGRAM-DATE-TIME:(.*)$/.exec(e),t)return n={type:"tag",tagType:"program-date-time"},t[1]&&(n.dateTimeString=t[1],n.dateTimeObject=new Date(t[1])),void this.trigger("data",n);if(t=/^#EXT-X-KEY:(.*)$/.exec(e),t)return n={type:"tag",tagType:"key"},t[1]&&(n.attributes=TE(t[1]),n.attributes.IV&&("0x"===n.attributes.IV.substring(0,2).toLowerCase()&&(n.attributes.IV=n.attributes.IV.substring(2)),n.attributes.IV=n.attributes.IV.match(/.{8}/g),n.attributes.IV[0]=parseInt(n.attributes.IV[0],16),n.attributes.IV[1]=parseInt(n.attributes.IV[1],16),n.attributes.IV[2]=parseInt(n.attributes.IV[2],16),n.attributes.IV[3]=parseInt(n.attributes.IV[3],16),n.attributes.IV=new Uint32Array(n.attributes.IV))),void this.trigger("data",n);if(t=/^#EXT-X-START:(.*)$/.exec(e),t)return n={type:"tag",tagType:"start"},t[1]&&(n.attributes=TE(t[1]),n.attributes["TIME-OFFSET"]=parseFloat(n.attributes["TIME-OFFSET"]),n.attributes.PRECISE=/YES/.test(n.attributes.PRECISE)),void this.trigger("data",n);if(t=/^#EXT-X-CUE-OUT-CONT:(.*)?$/.exec(e),t)return n={type:"tag",tagType:"cue-out-cont"},t[1]?n.data=t[1]:n.data="",void this.trigger("data",n);if(t=/^#EXT-X-CUE-OUT:(.*)?$/.exec(e),t)return n={type:"tag",tagType:"cue-out"},t[1]?n.data=t[1]:n.data="",void this.trigger("data",n);if(t=/^#EXT-X-CUE-IN:(.*)?$/.exec(e),t)return n={type:"tag",tagType:"cue-in"},t[1]?n.data=t[1]:n.data="",void this.trigger("data",n);if(t=/^#EXT-X-SKIP:(.*)$/.exec(e),t&&t[1])return n={type:"tag",tagType:"skip"},n.attributes=TE(t[1]),n.attributes.hasOwnProperty("SKIPPED-SEGMENTS")&&(n.attributes["SKIPPED-SEGMENTS"]=parseInt(n.attributes["SKIPPED-SEGMENTS"],10)),n.attributes.hasOwnProperty("RECENTLY-REMOVED-DATERANGES")&&(n.attributes["RECENTLY-REMOVED-DATERANGES"]=n.attributes["RECENTLY-REMOVED-DATERANGES"].split(vE)),void this.trigger("data",n);if(t=/^#EXT-X-PART:(.*)$/.exec(e),t&&t[1])return n={type:"tag",tagType:"part"},n.attributes=TE(t[1]),["DURATION"].forEach((function(e){n.attributes.hasOwnProperty(e)&&(n.attributes[e]=parseFloat(n.attributes[e]))})),["INDEPENDENT","GAP"].forEach((function(e){n.attributes.hasOwnProperty(e)&&(n.attributes[e]=/YES/.test(n.attributes[e]))})),n.attributes.hasOwnProperty("BYTERANGE")&&(n.attributes.byterange=bE(n.attributes.BYTERANGE)),void this.trigger("data",n);if(t=/^#EXT-X-SERVER-CONTROL:(.*)$/.exec(e),t&&t[1])return n={type:"tag",tagType:"server-control"},n.attributes=TE(t[1]),["CAN-SKIP-UNTIL","PART-HOLD-BACK","HOLD-BACK"].forEach((function(e){n.attributes.hasOwnProperty(e)&&(n.attributes[e]=parseFloat(n.attributes[e]))})),["CAN-SKIP-DATERANGES","CAN-BLOCK-RELOAD"].forEach((function(e){n.attributes.hasOwnProperty(e)&&(n.attributes[e]=/YES/.test(n.attributes[e]))})),void this.trigger("data",n);if(t=/^#EXT-X-PART-INF:(.*)$/.exec(e),t&&t[1])return n={type:"tag",tagType:"part-inf"},n.attributes=TE(t[1]),["PART-TARGET"].forEach((function(e){n.attributes.hasOwnProperty(e)&&(n.attributes[e]=parseFloat(n.attributes[e]))})),void this.trigger("data",n);if(t=/^#EXT-X-PRELOAD-HINT:(.*)$/.exec(e),t&&t[1])return n={type:"tag",tagType:"preload-hint"},n.attributes=TE(t[1]),["BYTERANGE-START","BYTERANGE-LENGTH"].forEach((function(e){if(n.attributes.hasOwnProperty(e)){n.attributes[e]=parseInt(n.attributes[e],10);const t="BYTERANGE-LENGTH"===e?"length":"offset";n.attributes.byterange=n.attributes.byterange||{},n.attributes.byterange[t]=n.attributes[e],delete n.attributes[e]}})),void this.trigger("data",n);if(t=/^#EXT-X-RENDITION-REPORT:(.*)$/.exec(e),t&&t[1])return n={type:"tag",tagType:"rendition-report"},n.attributes=TE(t[1]),["LAST-MSN","LAST-PART"].forEach((function(e){n.attributes.hasOwnProperty(e)&&(n.attributes[e]=parseInt(n.attributes[e],10))})),void this.trigger("data",n);if(t=/^#EXT-X-DATERANGE:(.*)$/.exec(e),t&&t[1]){n={type:"tag",tagType:"daterange"},n.attributes=TE(t[1]),["ID","CLASS"].forEach((function(e){n.attributes.hasOwnProperty(e)&&(n.attributes[e]=String(n.attributes[e]))})),["START-DATE","END-DATE"].forEach((function(e){n.attributes.hasOwnProperty(e)&&(n.attributes[e]=new Date(n.attributes[e]))})),["DURATION","PLANNED-DURATION"].forEach((function(e){n.attributes.hasOwnProperty(e)&&(n.attributes[e]=parseFloat(n.attributes[e]))})),["END-ON-NEXT"].forEach((function(e){n.attributes.hasOwnProperty(e)&&(n.attributes[e]=/YES/i.test(n.attributes[e]))})),["SCTE35-CMD"," SCTE35-OUT","SCTE35-IN"].forEach((function(e){n.attributes.hasOwnProperty(e)&&(n.attributes[e]=n.attributes[e].toString(16))}));const e=/^X-([A-Z]+-)+[A-Z]+$/;for(const t in n.attributes){if(!e.test(t))continue;const i=/[0-9A-Fa-f]{6}/g.test(n.attributes[t]),r=/^\d+(\.\d+)?$/.test(n.attributes[t]);n.attributes[t]=i?n.attributes[t].toString(16):r?parseFloat(n.attributes[t]):String(n.attributes[t])}this.trigger("data",n)}else t=/^#EXT-X-INDEPENDENT-SEGMENTS/.exec(e),t?this.trigger("data",{type:"tag",tagType:"independent-segments"}):this.trigger("data",{type:"tag",data:e.slice(4)})}}}else this.trigger("data",{type:"comment",text:e.slice(1)})}))}addParser({expression:e,customType:t,dataParser:n,segment:i}){"function"!=typeof n&&(n=e=>e),this.customParsers.push((r=>{if(e.exec(r))return this.trigger("data",{type:"custom",data:n(r),customType:t,segment:i}),!0}))}addTagMapper({expression:e,map:t}){this.tagMappers.push((n=>e.test(n)?t(n):n))}}const wE=function(e){const t={};return Object.keys(e).forEach((function(n){var i;t[(i=n,i.toLowerCase().replace(/-(\w)/g,(e=>e[1].toUpperCase())))]=e[n]})),t},SE=function(e){const{serverControl:t,targetDuration:n,partTargetDuration:i}=e;if(!t)return;const r="#EXT-X-SERVER-CONTROL",s="holdBack",a="partHoldBack",o=n&&3*n,l=i&&2*i;n&&!t.hasOwnProperty(s)&&(t[s]=o,this.trigger("info",{message:`${r} defaulting HOLD-BACK to targetDuration * 3 (${o}).`})),o&&t[s]<o&&(this.trigger("warn",{message:`${r} clamping HOLD-BACK (${t[s]}) to targetDuration * 3 (${o})`}),t[s]=o),i&&!t.hasOwnProperty(a)&&(t[a]=3*i,this.trigger("info",{message:`${r} defaulting PART-HOLD-BACK to partTargetDuration * 3 (${t[a]}).`})),i&&t[a]<l&&(this.trigger("warn",{message:`${r} clamping PART-HOLD-BACK (${t[a]}) to partTargetDuration * 2 (${l}).`}),t[a]=l)};class CE extends gE{constructor(){super(),this.lineStream=new _E,this.parseStream=new EE,this.lineStream.pipe(this.parseStream);const e=this,t=[];let n,i,r={},s=!1;const a=function(){},o={AUDIO:{},VIDEO:{},"CLOSED-CAPTIONS":{},SUBTITLES:{}};let l=0;this.manifest={allowCache:!0,discontinuityStarts:[],segments:[]};let c=0,u=0;const d={};this.on("end",(()=>{r.uri||!r.parts&&!r.preloadHints||(!r.map&&n&&(r.map=n),!r.key&&i&&(r.key=i),r.timeline||"number"!=typeof l||(r.timeline=l),this.manifest.preloadSegment=r)})),this.parseStream.on("data",(function(h){let p,f;({tag(){({version(){h.version&&(this.manifest.version=h.version)},"allow-cache"(){this.manifest.allowCache=h.allowed,"allowed"in h||(this.trigger("info",{message:"defaulting allowCache to YES"}),this.manifest.allowCache=!0)},byterange(){const e={};"length"in h&&(r.byterange=e,e.length=h.length,"offset"in h||(h.offset=c)),"offset"in h&&(r.byterange=e,e.offset=h.offset),c=e.offset+e.length},endlist(){this.manifest.endList=!0},inf(){"mediaSequence"in this.manifest||(this.manifest.mediaSequence=0,this.trigger("info",{message:"defaulting media sequence to zero"})),"discontinuitySequence"in this.manifest||(this.manifest.discontinuitySequence=0,this.trigger("info",{message:"defaulting discontinuity sequence to zero"})),h.duration>0&&(r.duration=h.duration),0===h.duration&&(r.duration=.01,this.trigger("info",{message:"updating zero segment duration to a small value"})),this.manifest.segments=t},key(){if(h.attributes)if("NONE"!==h.attributes.METHOD)if(h.attributes.URI){if("com.apple.streamingkeydelivery"===h.attributes.KEYFORMAT)return this.manifest.contentProtection=this.manifest.contentProtection||{},void(this.manifest.contentProtection["com.apple.fps.1_0"]={attributes:h.attributes});if("com.microsoft.playready"===h.attributes.KEYFORMAT)return this.manifest.contentProtection=this.manifest.contentProtection||{},void(this.manifest.contentProtection["com.microsoft.playready"]={uri:h.attributes.URI});if("urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed"===h.attributes.KEYFORMAT){return-1===["SAMPLE-AES","SAMPLE-AES-CTR","SAMPLE-AES-CENC"].indexOf(h.attributes.METHOD)?void this.trigger("warn",{message:"invalid key method provided for Widevine"}):("SAMPLE-AES-CENC"===h.attributes.METHOD&&this.trigger("warn",{message:"SAMPLE-AES-CENC is deprecated, please use SAMPLE-AES-CTR instead"}),"data:text/plain;base64,"!==h.attributes.URI.substring(0,23)?void this.trigger("warn",{message:"invalid key URI provided for Widevine"}):h.attributes.KEYID&&"0x"===h.attributes.KEYID.substring(0,2)?(this.manifest.contentProtection=this.manifest.contentProtection||{},void(this.manifest.contentProtection["com.widevine.alpha"]={attributes:{schemeIdUri:h.attributes.KEYFORMAT,keyId:h.attributes.KEYID.substring(2)},pssh:yE(h.attributes.URI.split(",")[1])})):void this.trigger("warn",{message:"invalid key ID provided for Widevine"}))}h.attributes.METHOD||this.trigger("warn",{message:"defaulting key method to AES-128"}),i={method:h.attributes.METHOD||"AES-128",uri:h.attributes.URI},void 0!==h.attributes.IV&&(i.iv=h.attributes.IV)}else this.trigger("warn",{message:"ignoring key declaration without URI"});else i=null;else this.trigger("warn",{message:"ignoring key declaration without attribute list"})},"media-sequence"(){isFinite(h.number)?this.manifest.mediaSequence=h.number:this.trigger("warn",{message:"ignoring invalid media sequence: "+h.number})},"discontinuity-sequence"(){isFinite(h.number)?(this.manifest.discontinuitySequence=h.number,l=h.number):this.trigger("warn",{message:"ignoring invalid discontinuity sequence: "+h.number})},"playlist-type"(){/VOD|EVENT/.test(h.playlistType)?this.manifest.playlistType=h.playlistType:this.trigger("warn",{message:"ignoring unknown playlist type: "+h.playlist})},map(){n={},h.uri&&(n.uri=h.uri),h.byterange&&(n.byterange=h.byterange),i&&(n.key=i)},"stream-inf"(){this.manifest.playlists=t,this.manifest.mediaGroups=this.manifest.mediaGroups||o,h.attributes?(r.attributes||(r.attributes={}),Am(r.attributes,h.attributes)):this.trigger("warn",{message:"ignoring empty stream-inf attributes"})},media(){if(this.manifest.mediaGroups=this.manifest.mediaGroups||o,!(h.attributes&&h.attributes.TYPE&&h.attributes["GROUP-ID"]&&h.attributes.NAME))return void this.trigger("warn",{message:"ignoring incomplete or missing media group"});const e=this.manifest.mediaGroups[h.attributes.TYPE];e[h.attributes["GROUP-ID"]]=e[h.attributes["GROUP-ID"]]||{},p=e[h.attributes["GROUP-ID"]],f={default:/yes/i.test(h.attributes.DEFAULT)},f.default?f.autoselect=!0:f.autoselect=/yes/i.test(h.attributes.AUTOSELECT),h.attributes.LANGUAGE&&(f.language=h.attributes.LANGUAGE),h.attributes.URI&&(f.uri=h.attributes.URI),h.attributes["INSTREAM-ID"]&&(f.instreamId=h.attributes["INSTREAM-ID"]),h.attributes.CHARACTERISTICS&&(f.characteristics=h.attributes.CHARACTERISTICS),h.attributes.FORCED&&(f.forced=/yes/i.test(h.attributes.FORCED)),p[h.attributes.NAME]=f},discontinuity(){l+=1,r.discontinuity=!0,this.manifest.discontinuityStarts.push(t.length)},"program-date-time"(){void 0===this.manifest.dateTimeString&&(this.manifest.dateTimeString=h.dateTimeString,this.manifest.dateTimeObject=h.dateTimeObject),r.dateTimeString=h.dateTimeString,r.dateTimeObject=h.dateTimeObject},targetduration(){!isFinite(h.duration)||h.duration<0?this.trigger("warn",{message:"ignoring invalid target duration: "+h.duration}):(this.manifest.targetDuration=h.duration,SE.call(this,this.manifest))},start(){h.attributes&&!isNaN(h.attributes["TIME-OFFSET"])?this.manifest.start={timeOffset:h.attributes["TIME-OFFSET"],precise:h.attributes.PRECISE}:this.trigger("warn",{message:"ignoring start declaration without appropriate attribute list"})},"cue-out"(){r.cueOut=h.data},"cue-out-cont"(){r.cueOutCont=h.data},"cue-in"(){r.cueIn=h.data},skip(){this.manifest.skip=wE(h.attributes),this.warnOnMissingAttributes_("#EXT-X-SKIP",h.attributes,["SKIPPED-SEGMENTS"])},part(){s=!0;const e=this.manifest.segments.length,t=wE(h.attributes);r.parts=r.parts||[],r.parts.push(t),t.byterange&&(t.byterange.hasOwnProperty("offset")||(t.byterange.offset=u),u=t.byterange.offset+t.byterange.length);const n=r.parts.length-1;this.warnOnMissingAttributes_(`#EXT-X-PART #${n} for segment #${e}`,h.attributes,["URI","DURATION"]),this.manifest.renditionReports&&this.manifest.renditionReports.forEach(((e,t)=>{e.hasOwnProperty("lastPart")||this.trigger("warn",{message:`#EXT-X-RENDITION-REPORT #${t} lacks required attribute(s): LAST-PART`})}))},"server-control"(){const e=this.manifest.serverControl=wE(h.attributes);e.hasOwnProperty("canBlockReload")||(e.canBlockReload=!1,this.trigger("info",{message:"#EXT-X-SERVER-CONTROL defaulting CAN-BLOCK-RELOAD to false"})),SE.call(this,this.manifest),e.canSkipDateranges&&!e.hasOwnProperty("canSkipUntil")&&this.trigger("warn",{message:"#EXT-X-SERVER-CONTROL lacks required attribute CAN-SKIP-UNTIL which is required when CAN-SKIP-DATERANGES is set"})},"preload-hint"(){const e=this.manifest.segments.length,t=wE(h.attributes),n=t.type&&"PART"===t.type;r.preloadHints=r.preloadHints||[],r.preloadHints.push(t),t.byterange&&(t.byterange.hasOwnProperty("offset")||(t.byterange.offset=n?u:0,n&&(u=t.byterange.offset+t.byterange.length)));const i=r.preloadHints.length-1;if(this.warnOnMissingAttributes_(`#EXT-X-PRELOAD-HINT #${i} for segment #${e}`,h.attributes,["TYPE","URI"]),t.type)for(let s=0;s<r.preloadHints.length-1;s++){const n=r.preloadHints[s];n.type&&(n.type===t.type&&this.trigger("warn",{message:`#EXT-X-PRELOAD-HINT #${i} for segment #${e} has the same TYPE ${t.type} as preload hint #${s}`}))}},"rendition-report"(){const e=wE(h.attributes);this.manifest.renditionReports=this.manifest.renditionReports||[],this.manifest.renditionReports.push(e);const t=this.manifest.renditionReports.length-1,n=["LAST-MSN","URI"];s&&n.push("LAST-PART"),this.warnOnMissingAttributes_(`#EXT-X-RENDITION-REPORT #${t}`,h.attributes,n)},"part-inf"(){this.manifest.partInf=wE(h.attributes),this.warnOnMissingAttributes_("#EXT-X-PART-INF",h.attributes,["PART-TARGET"]),this.manifest.partInf.partTarget&&(this.manifest.partTargetDuration=this.manifest.partInf.partTarget),SE.call(this,this.manifest)},daterange(){this.manifest.daterange=this.manifest.daterange||[],this.manifest.daterange.push(wE(h.attributes));const e=this.manifest.daterange.length-1;this.warnOnMissingAttributes_(`#EXT-X-DATERANGE #${e}`,h.attributes,["ID","START-DATE"]);const t=this.manifest.daterange[e];t.endDate&&t.startDate&&new Date(t.endDate)<new Date(t.startDate)&&this.trigger("warn",{message:"EXT-X-DATERANGE END-DATE must be equal to or later than the value of the START-DATE"}),t.duration&&t.duration<0&&this.trigger("warn",{message:"EXT-X-DATERANGE DURATION must not be negative"}),t.plannedDuration&&t.plannedDuration<0&&this.trigger("warn",{message:"EXT-X-DATERANGE PLANNED-DURATION must not be negative"});const n=!!t.endOnNext;if(n&&!t.class&&this.trigger("warn",{message:"EXT-X-DATERANGE with an END-ON-NEXT=YES attribute must have a CLASS attribute"}),n&&(t.duration||t.endDate)&&this.trigger("warn",{message:"EXT-X-DATERANGE with an END-ON-NEXT=YES attribute must not contain DURATION or END-DATE attributes"}),t.duration&&t.endDate){const n=t.startDate,i=n.setSeconds(n.getSeconds()+t.duration);this.manifest.daterange[e].endDate=new Date(i)}if(t&&!this.manifest.dateTimeString&&this.trigger("warn",{message:"A playlist with EXT-X-DATERANGE tag must contain atleast one EXT-X-PROGRAM-DATE-TIME tag"}),d[t.id]){for(const i in d[t.id])if(d[t.id][i]!==t[i]){this.trigger("warn",{message:"EXT-X-DATERANGE tags with the same ID in a playlist must have the same attributes and same attribute values"});break}}else d[t.id]=t},"independent-segments"(){this.manifest.independentSegments=!0}}[h.tagType]||a).call(e)},uri(){r.uri=h.uri,t.push(r),this.manifest.targetDuration&&!("duration"in r)&&(this.trigger("warn",{message:"defaulting segment duration to the target duration"}),r.duration=this.manifest.targetDuration),i&&(r.key=i),r.timeline=l,n&&(r.map=n),u=0,r={}},comment(){},custom(){h.segment?(r.custom=r.custom||{},r.custom[h.customType]=h.data):(this.manifest.custom=this.manifest.custom||{},this.manifest.custom[h.customType]=h.data)}})[h.type].call(e)}))}warnOnMissingAttributes_(e,t,n){const i=[];n.forEach((function(e){t.hasOwnProperty(e)||i.push(e)})),i.length&&this.trigger("warn",{message:`${e} lacks required attribute(s): ${i.join(", ")}`})}push(e){this.lineStream.push(e)}end(){this.lineStream.push("\n"),this.trigger("end")}addParser(e){this.parseStream.addParser(e)}addTagMapper(e){this.parseStream.addTagMapper(e)}}var IE,xE,kE={mp4:/^(av0?1|avc0?[1234]|vp0?9|flac|opus|mp3|mp4a|mp4v|stpp.ttml.im1t)/,webm:/^(vp0?[89]|av0?1|opus|vorbis)/,ogg:/^(vp0?[89]|theora|flac|opus|vorbis)/,video:/^(av0?1|avc0?[1234]|vp0?[89]|hvc1|hev1|theora|mp4v)/,audio:/^(mp4a|flac|vorbis|opus|ac-[34]|ec-3|alac|mp3|speex|aac)/,text:/^(stpp.ttml.im1t)/,muxerVideo:/^(avc0?1)/,muxerAudio:/^(mp4a)/,muxerText:/a^/},AE=["video","audio","text"],OE=["Video","Audio","Text"],PE=function(e){return e?e.replace(/avc1\.(\d+)\.(\d+)/i,(function(e,t,n){return"avc1."+("00"+Number(t).toString(16)).slice(-2)+"00"+("00"+Number(n).toString(16)).slice(-2)})):e},LE=function(e){void 0===e&&(e="");var t=e.split(","),n=[];return t.forEach((function(e){var t;e=e.trim(),AE.forEach((function(i){var r=kE[i].exec(e.toLowerCase());if(r&&!(r.length<=1)){t=i;var s=e.substring(0,r[1].length),a=e.replace(s,"");n.push({type:s,details:a,mediaType:i})}})),t||n.push({type:e,details:"",mediaType:"unknown"})})),n},NE=function(e){return void 0===e&&(e=""),kE.audio.test(e.trim().toLowerCase())},DE=function(e){if(e&&"string"==typeof e){var t,n=e.toLowerCase().split(",").map((function(e){return PE(e.trim())})),i="video";1===n.length&&NE(n[0])?i="audio":1===n.length&&(void 0===(t=n[0])&&(t=""),kE.text.test(t.trim().toLowerCase()))&&(i="application");var r="mp4";return n.every((function(e){return kE.mp4.test(e)}))?r="mp4":n.every((function(e){return kE.webm.test(e)}))?r="webm":n.every((function(e){return kE.ogg.test(e)}))&&(r="ogg"),i+"/"+r+';codecs="'+e+'"'}},RE=function(e){return void 0===e&&(e=""),sT.MediaSource&&sT.MediaSource.isTypeSupported&&sT.MediaSource.isTypeSupported(DE(e))||!1},ME=function(e){return void 0===e&&(e=""),e.toLowerCase().split(",").every((function(e){e=e.trim();for(var t=0;t<OE.length;t++){if(kE["muxer"+OE[t]].test(e))return!0}return!1}))},FE="mp4a.40.2",UE=/^(audio|video|application)\/(x-|vnd\.apple\.)?mpegurl/i,BE=/^application\/dash\+xml/i,jE=function(e){return UE.test(e)?"hls":BE.test(e)?"dash":"application/vnd.videojs.vhs+json"===e?"vhs-json":null},qE=function(e){return"function"===ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer instanceof ArrayBuffer},HE=function(e){return e instanceof Uint8Array?e:(Array.isArray(e)||qE(e)||e instanceof ArrayBuffer||(e="number"!=typeof e||"number"==typeof e&&e!=e?0:[e]),new Uint8Array(e&&e.buffer||e,e&&e.byteOffset||0,e&&e.byteLength||0))},VE=sT.BigInt||Number,$E=[VE("0x1"),VE("0x100"),VE("0x10000"),VE("0x1000000"),VE("0x100000000"),VE("0x10000000000"),VE("0x1000000000000"),VE("0x100000000000000"),VE("0x10000000000000000")];IE=new Uint16Array([65484]),255===(xE=new Uint8Array(IE.buffer,IE.byteOffset,IE.byteLength))[0]||xE[0];var WE=function(e,t){var n=void 0===t?{}:t,i=n.signed,r=void 0!==i&&i,s=n.le,a=void 0!==s&&s;e=HE(e);var o=a?"reduce":"reduceRight",l=(e[o]?e[o]:Array.prototype[o]).call(e,(function(t,n,i){var r=a?i:Math.abs(i+1-e.length);return t+VE(n)*$E[r]}),VE(0));if(r){var c=$E[e.length]/VE(2)-VE(1);(l=VE(l))>c&&(l-=c,l-=c,l-=VE(2))}return Number(l)},zE=function(e,t){var n=(void 0===t?{}:t).le,i=void 0!==n&&n;("bigint"!=typeof e&&"number"!=typeof e||"number"==typeof e&&e!=e)&&(e=0),e=VE(e);for(var r,s=(r=e,Math.ceil(function(e){return e.toString(2).length}(r)/8)),a=new Uint8Array(new ArrayBuffer(s)),o=0;o<s;o++){var l=i?o:Math.abs(o+1-a.length);a[l]=Number(e/$E[o]&VE(255)),e<0&&(a[l]=Math.abs(~a[l]),a[l]-=0===o?1:2)}return a},GE=function(e,t){if("string"!=typeof e&&e&&"function"==typeof e.toString&&(e=e.toString()),"string"!=typeof e)return new Uint8Array;t||(e=unescape(encodeURIComponent(e)));for(var n=new Uint8Array(e.length),i=0;i<e.length;i++)n[i]=e.charCodeAt(i);return n},KE=function(e,t,n){var i=void 0===n?{}:n,r=i.offset,s=void 0===r?0:r,a=i.mask,o=void 0===a?[]:a;e=HE(e);var l=(t=HE(t)).every?t.every:Array.prototype.every;return t.length&&e.length-s>=t.length&&l.call(t,(function(t,n){return t===(o[n]?o[n]&e[s+n]:e[s+n])}))},XE="http://example.com",YE=function(e,t){if(/^[a-z]+:/i.test(t))return t;/^data:/.test(e)&&(e=sT.location&&sT.location.href||"");var n="function"==typeof sT.URL,i=/^\/\//.test(e),r=!sT.location&&!/\/\//i.test(e);if(n?e=new sT.URL(e,sT.location||XE):/\/\//i.test(e)||(e=fE.buildAbsoluteURL(sT.location&&sT.location.href||"",e)),n){var s=new URL(t,e);return r?s.href.slice(18):i?s.href.slice(s.protocol.length):s.href}return fE.buildAbsoluteURL(e,t)};function QE(e){for(var t,n=(t=e,sT.atob?sT.atob(t):Buffer.from(t,"base64").toString("binary")),i=new Uint8Array(n.length),r=0;r<n.length;r++)i[r]=n.charCodeAt(r);return i}var JE={},ZE={};function ew(e,t){return void 0===t&&(t=Object),t&&"function"==typeof t.freeze?t.freeze(e):e}var tw=ew({HTML:"text/html",isHTML:function(e){return e===tw.HTML},XML_APPLICATION:"application/xml",XML_TEXT:"text/xml",XML_XHTML_APPLICATION:"application/xhtml+xml",XML_SVG_IMAGE:"image/svg+xml"}),nw=ew({HTML:"http://www.w3.org/1999/xhtml",isHTML:function(e){return e===nw.HTML},SVG:"http://www.w3.org/2000/svg",XML:"http://www.w3.org/XML/1998/namespace",XMLNS:"http://www.w3.org/2000/xmlns/"});ZE.assign=function(e,t){if(null===e||"object"!=typeof e)throw new TypeError("target is not an object");for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e},ZE.find=function(e,t,n){if(void 0===n&&(n=Array.prototype),e&&"function"==typeof n.find)return n.find.call(e,t);for(var i=0;i<e.length;i++)if(Object.prototype.hasOwnProperty.call(e,i)){var r=e[i];if(t.call(void 0,r,i,e))return r}},ZE.freeze=ew,ZE.MIME_TYPE=tw,ZE.NAMESPACE=nw;var iw=ZE,rw=iw.find,sw=iw.NAMESPACE;function aw(e){return""!==e}function ow(e,t){return e.hasOwnProperty(t)||(e[t]=!0),e}function lw(e){if(!e)return[];var t=function(e){return e?e.split(/[\t\n\f\r ]+/).filter(aw):[]}(e);return Object.keys(t.reduce(ow,{}))}function cw(e,t){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])}function uw(e,t){var n=e.prototype;if(!(n instanceof t)){function i(){}i.prototype=t.prototype,cw(n,i=new i),e.prototype=n=i}n.constructor!=e&&("function"!=typeof e&&console.error("unknown Class:"+e),n.constructor=e)}var dw={},hw=dw.ELEMENT_NODE=1,pw=dw.ATTRIBUTE_NODE=2,fw=dw.TEXT_NODE=3,mw=dw.CDATA_SECTION_NODE=4,gw=dw.ENTITY_REFERENCE_NODE=5,yw=dw.ENTITY_NODE=6,_w=dw.PROCESSING_INSTRUCTION_NODE=7,vw=dw.COMMENT_NODE=8,bw=dw.DOCUMENT_NODE=9,Tw=dw.DOCUMENT_TYPE_NODE=10,Ew=dw.DOCUMENT_FRAGMENT_NODE=11,ww=dw.NOTATION_NODE=12,Sw={},Cw={};Sw.INDEX_SIZE_ERR=(Cw[1]="Index size error",1),Sw.DOMSTRING_SIZE_ERR=(Cw[2]="DOMString size error",2);var Iw=Sw.HIERARCHY_REQUEST_ERR=(Cw[3]="Hierarchy request error",3);Sw.WRONG_DOCUMENT_ERR=(Cw[4]="Wrong document",4),Sw.INVALID_CHARACTER_ERR=(Cw[5]="Invalid character",5),Sw.NO_DATA_ALLOWED_ERR=(Cw[6]="No data allowed",6),Sw.NO_MODIFICATION_ALLOWED_ERR=(Cw[7]="No modification allowed",7);var xw=Sw.NOT_FOUND_ERR=(Cw[8]="Not found",8);Sw.NOT_SUPPORTED_ERR=(Cw[9]="Not supported",9);var kw=Sw.INUSE_ATTRIBUTE_ERR=(Cw[10]="Attribute in use",10);function Aw(e,t){if(t instanceof Error)var n=t;else n=this,Error.call(this,Cw[e]),this.message=Cw[e],Error.captureStackTrace&&Error.captureStackTrace(this,Aw);return n.code=e,t&&(this.message=this.message+": "+t),n}function Ow(){}function Pw(e,t){this._node=e,this._refresh=t,Lw(this)}function Lw(e){var t=e._node._inc||e._node.ownerDocument._inc;if(e._inc!=t){var n=e._refresh(e._node);vS(e,"length",n.length),cw(n,e),e._inc=t}}function Nw(){}function Dw(e,t){for(var n=e.length;n--;)if(e[n]===t)return n}function Rw(e,t,n,i){if(i?t[Dw(t,i)]=n:t[t.length++]=n,e){n.ownerElement=e;var r=e.ownerDocument;r&&(i&&Hw(r,e,i),function(e,t,n){e&&e._inc++;var i=n.namespaceURI;i===sw.XMLNS&&(t._nsMap[n.prefix?n.localName:""]=n.value)}(r,e,n))}}function Mw(e,t,n){var i=Dw(t,n);if(!(i>=0))throw new Aw(xw,new Error(e.tagName+"@"+n));for(var r=t.length-1;i<r;)t[i]=t[++i];if(t.length=r,e){var s=e.ownerDocument;s&&(Hw(s,e,n),n.ownerElement=null)}}function Fw(){}function Uw(){}function Bw(e){return("<"==e?"&lt;":">"==e&&"&gt;")||"&"==e&&"&amp;"||'"'==e&&"&quot;"||"&#"+e.charCodeAt()+";"}function jw(e,t){if(t(e))return!0;if(e=e.firstChild)do{if(jw(e,t))return!0}while(e=e.nextSibling)}function qw(){this.ownerDocument=this}function Hw(e,t,n,i){e&&e._inc++,n.namespaceURI===sw.XMLNS&&delete t._nsMap[n.prefix?n.localName:""]}function Vw(e,t,n){if(e&&e._inc){e._inc++;var i=t.childNodes;if(n)i[i.length++]=n;else{for(var r=t.firstChild,s=0;r;)i[s++]=r,r=r.nextSibling;i.length=s,delete i[i.length]}}}function $w(e,t){var n=t.previousSibling,i=t.nextSibling;return n?n.nextSibling=i:e.firstChild=i,i?i.previousSibling=n:e.lastChild=n,t.parentNode=null,t.previousSibling=null,t.nextSibling=null,Vw(e.ownerDocument,e),t}function Ww(e){return e&&e.nodeType===Uw.DOCUMENT_TYPE_NODE}function zw(e){return e&&e.nodeType===Uw.ELEMENT_NODE}function Gw(e){return e&&e.nodeType===Uw.TEXT_NODE}function Kw(e,t){var n=e.childNodes||[];if(rw(n,zw)||Ww(t))return!1;var i=rw(n,Ww);return!(t&&i&&n.indexOf(i)>n.indexOf(t))}function Xw(e,t){var n=e.childNodes||[];if(rw(n,(function(e){return zw(e)&&e!==t})))return!1;var i=rw(n,Ww);return!(t&&i&&n.indexOf(i)>n.indexOf(t))}function Yw(e,t,n){if(!function(e){return e&&(e.nodeType===Uw.DOCUMENT_NODE||e.nodeType===Uw.DOCUMENT_FRAGMENT_NODE||e.nodeType===Uw.ELEMENT_NODE)}(e))throw new Aw(Iw,"Unexpected parent node type "+e.nodeType);if(n&&n.parentNode!==e)throw new Aw(xw,"child not in parent");if(!function(e){return e&&(zw(e)||Gw(e)||Ww(e)||e.nodeType===Uw.DOCUMENT_FRAGMENT_NODE||e.nodeType===Uw.COMMENT_NODE||e.nodeType===Uw.PROCESSING_INSTRUCTION_NODE)}(t)||Ww(t)&&e.nodeType!==Uw.DOCUMENT_NODE)throw new Aw(Iw,"Unexpected node type "+t.nodeType+" for parent node type "+e.nodeType)}function Qw(e,t,n){var i=e.childNodes||[],r=t.childNodes||[];if(t.nodeType===Uw.DOCUMENT_FRAGMENT_NODE){var s=r.filter(zw);if(s.length>1||rw(r,Gw))throw new Aw(Iw,"More than one element or text in fragment");if(1===s.length&&!Kw(e,n))throw new Aw(Iw,"Element in fragment can not be inserted before doctype")}if(zw(t)&&!Kw(e,n))throw new Aw(Iw,"Only one element can be added and only after doctype");if(Ww(t)){if(rw(i,Ww))throw new Aw(Iw,"Only one doctype is allowed");var a=rw(i,zw);if(n&&i.indexOf(a)<i.indexOf(n))throw new Aw(Iw,"Doctype can only be inserted before an element");if(!n&&a)throw new Aw(Iw,"Doctype can not be appended since element is present")}}function Jw(e,t,n){var i=e.childNodes||[],r=t.childNodes||[];if(t.nodeType===Uw.DOCUMENT_FRAGMENT_NODE){var s=r.filter(zw);if(s.length>1||rw(r,Gw))throw new Aw(Iw,"More than one element or text in fragment");if(1===s.length&&!Xw(e,n))throw new Aw(Iw,"Element in fragment can not be inserted before doctype")}if(zw(t)&&!Xw(e,n))throw new Aw(Iw,"Only one element can be added and only after doctype");if(Ww(t)){if(rw(i,(function(e){return Ww(e)&&e!==n})))throw new Aw(Iw,"Only one doctype is allowed");var a=rw(i,zw);if(n&&i.indexOf(a)<i.indexOf(n))throw new Aw(Iw,"Doctype can only be inserted before an element")}}function Zw(e,t,n,i){Yw(e,t,n),e.nodeType===Uw.DOCUMENT_NODE&&(i||Qw)(e,t,n);var r=t.parentNode;if(r&&r.removeChild(t),t.nodeType===Ew){var s=t.firstChild;if(null==s)return t;var a=t.lastChild}else s=a=t;var o=n?n.previousSibling:e.lastChild;s.previousSibling=o,a.nextSibling=n,o?o.nextSibling=s:e.firstChild=s,null==n?e.lastChild=a:n.previousSibling=a;do{s.parentNode=e}while(s!==a&&(s=s.nextSibling));return Vw(e.ownerDocument||e,e),t.nodeType==Ew&&(t.firstChild=t.lastChild=null),t}function eS(){this._nsMap={}}function tS(){}function nS(){}function iS(){}function rS(){}function sS(){}function aS(){}function oS(){}function lS(){}function cS(){}function uS(){}function dS(){}function hS(){}function pS(e,t){var n=[],i=9==this.nodeType&&this.documentElement||this,r=i.prefix,s=i.namespaceURI;if(s&&null==r&&null==(r=i.lookupPrefix(s)))var a=[{namespace:s,prefix:null}];return gS(this,n,e,t,a),n.join("")}function fS(e,t,n){var i=e.prefix||"",r=e.namespaceURI;if(!r)return!1;if("xml"===i&&r===sw.XML||r===sw.XMLNS)return!1;for(var s=n.length;s--;){var a=n[s];if(a.prefix===i)return a.namespace!==r}return!0}function mS(e,t,n){e.push(" ",t,'="',n.replace(/[<>&"\t\n\r]/g,Bw),'"')}function gS(e,t,n,i,r){if(r||(r=[]),i){if(!(e=i(e)))return;if("string"==typeof e)return void t.push(e)}switch(e.nodeType){case hw:var s=e.attributes,a=s.length,o=e.firstChild,l=e.tagName,c=l;if(!(n=sw.isHTML(e.namespaceURI)||n)&&!e.prefix&&e.namespaceURI){for(var u,d=0;d<s.length;d++)if("xmlns"===s.item(d).name){u=s.item(d).value;break}if(!u)for(var h=r.length-1;h>=0;h--){if(""===(p=r[h]).prefix&&p.namespace===e.namespaceURI){u=p.namespace;break}}if(u!==e.namespaceURI)for(h=r.length-1;h>=0;h--){var p;if((p=r[h]).namespace===e.namespaceURI){p.prefix&&(c=p.prefix+":"+l);break}}}t.push("<",c);for(var f=0;f<a;f++){"xmlns"==(m=s.item(f)).prefix?r.push({prefix:m.localName,namespace:m.value}):"xmlns"==m.nodeName&&r.push({prefix:"",namespace:m.value})}for(f=0;f<a;f++){var m,g,y;if(fS(m=s.item(f),0,r))mS(t,(g=m.prefix||"")?"xmlns:"+g:"xmlns",y=m.namespaceURI),r.push({prefix:g,namespace:y});gS(m,t,n,i,r)}if(l===c&&fS(e,0,r))mS(t,(g=e.prefix||"")?"xmlns:"+g:"xmlns",y=e.namespaceURI),r.push({prefix:g,namespace:y});if(o||n&&!/^(?:meta|link|img|br|hr|input)$/i.test(l)){if(t.push(">"),n&&/^script$/i.test(l))for(;o;)o.data?t.push(o.data):gS(o,t,n,i,r.slice()),o=o.nextSibling;else for(;o;)gS(o,t,n,i,r.slice()),o=o.nextSibling;t.push("</",c,">")}else t.push("/>");return;case bw:case Ew:for(o=e.firstChild;o;)gS(o,t,n,i,r.slice()),o=o.nextSibling;return;case pw:return mS(t,e.name,e.value);case fw:return t.push(e.data.replace(/[<&>]/g,Bw));case mw:return t.push("<![CDATA[",e.data,"]]>");case vw:return t.push("\x3c!--",e.data,"--\x3e");case Tw:var _=e.publicId,v=e.systemId;if(t.push("<!DOCTYPE ",e.name),_)t.push(" PUBLIC ",_),v&&"."!=v&&t.push(" ",v),t.push(">");else if(v&&"."!=v)t.push(" SYSTEM ",v,">");else{var b=e.internalSubset;b&&t.push(" [",b,"]"),t.push(">")}return;case _w:return t.push("<?",e.target," ",e.data,"?>");case gw:return t.push("&",e.nodeName,";");default:t.push("??",e.nodeName)}}function yS(e,t,n){var i;switch(t.nodeType){case hw:(i=t.cloneNode(!1)).ownerDocument=e;case Ew:break;case pw:n=!0}if(i||(i=t.cloneNode(!1)),i.ownerDocument=e,i.parentNode=null,n)for(var r=t.firstChild;r;)i.appendChild(yS(e,r,n)),r=r.nextSibling;return i}function _S(e,t,n){var i=new t.constructor;for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){var s=t[r];"object"!=typeof s&&s!=i[r]&&(i[r]=s)}switch(t.childNodes&&(i.childNodes=new Ow),i.ownerDocument=e,i.nodeType){case hw:var a=t.attributes,o=i.attributes=new Nw,l=a.length;o._ownerElement=i;for(var c=0;c<l;c++)i.setAttributeNode(_S(e,a.item(c),!0));break;case pw:n=!0}if(n)for(var u=t.firstChild;u;)i.appendChild(_S(e,u,n)),u=u.nextSibling;return i}function vS(e,t,n){e[t]=n}Sw.INVALID_STATE_ERR=(Cw[11]="Invalid state",11),Sw.SYNTAX_ERR=(Cw[12]="Syntax error",12),Sw.INVALID_MODIFICATION_ERR=(Cw[13]="Invalid modification",13),Sw.NAMESPACE_ERR=(Cw[14]="Invalid namespace",14),Sw.INVALID_ACCESS_ERR=(Cw[15]="Invalid access",15),Aw.prototype=Error.prototype,cw(Sw,Aw),Ow.prototype={length:0,item:function(e){return this[e]||null},toString:function(e,t){for(var n=[],i=0;i<this.length;i++)gS(this[i],n,e,t);return n.join("")},filter:function(e){return Array.prototype.filter.call(this,e)},indexOf:function(e){return Array.prototype.indexOf.call(this,e)}},Pw.prototype.item=function(e){return Lw(this),this[e]},uw(Pw,Ow),Nw.prototype={length:0,item:Ow.prototype.item,getNamedItem:function(e){for(var t=this.length;t--;){var n=this[t];if(n.nodeName==e)return n}},setNamedItem:function(e){var t=e.ownerElement;if(t&&t!=this._ownerElement)throw new Aw(kw);var n=this.getNamedItem(e.nodeName);return Rw(this._ownerElement,this,e,n),n},setNamedItemNS:function(e){var t,n=e.ownerElement;if(n&&n!=this._ownerElement)throw new Aw(kw);return t=this.getNamedItemNS(e.namespaceURI,e.localName),Rw(this._ownerElement,this,e,t),t},removeNamedItem:function(e){var t=this.getNamedItem(e);return Mw(this._ownerElement,this,t),t},removeNamedItemNS:function(e,t){var n=this.getNamedItemNS(e,t);return Mw(this._ownerElement,this,n),n},getNamedItemNS:function(e,t){for(var n=this.length;n--;){var i=this[n];if(i.localName==t&&i.namespaceURI==e)return i}return null}},Fw.prototype={hasFeature:function(e,t){return!0},createDocument:function(e,t,n){var i=new qw;if(i.implementation=this,i.childNodes=new Ow,i.doctype=n||null,n&&i.appendChild(n),t){var r=i.createElementNS(e,t);i.appendChild(r)}return i},createDocumentType:function(e,t,n){var i=new aS;return i.name=e,i.nodeName=e,i.publicId=t||"",i.systemId=n||"",i}},Uw.prototype={firstChild:null,lastChild:null,previousSibling:null,nextSibling:null,attributes:null,parentNode:null,childNodes:null,ownerDocument:null,nodeValue:null,namespaceURI:null,prefix:null,localName:null,insertBefore:function(e,t){return Zw(this,e,t)},replaceChild:function(e,t){Zw(this,e,t,Jw),t&&this.removeChild(t)},removeChild:function(e){return $w(this,e)},appendChild:function(e){return this.insertBefore(e,null)},hasChildNodes:function(){return null!=this.firstChild},cloneNode:function(e){return _S(this.ownerDocument||this,this,e)},normalize:function(){for(var e=this.firstChild;e;){var t=e.nextSibling;t&&t.nodeType==fw&&e.nodeType==fw?(this.removeChild(t),e.appendData(t.data)):(e.normalize(),e=t)}},isSupported:function(e,t){return this.ownerDocument.implementation.hasFeature(e,t)},hasAttributes:function(){return this.attributes.length>0},lookupPrefix:function(e){for(var t=this;t;){var n=t._nsMap;if(n)for(var i in n)if(Object.prototype.hasOwnProperty.call(n,i)&&n[i]===e)return i;t=t.nodeType==pw?t.ownerDocument:t.parentNode}return null},lookupNamespaceURI:function(e){for(var t=this;t;){var n=t._nsMap;if(n&&Object.prototype.hasOwnProperty.call(n,e))return n[e];t=t.nodeType==pw?t.ownerDocument:t.parentNode}return null},isDefaultNamespace:function(e){return null==this.lookupPrefix(e)}},cw(dw,Uw),cw(dw,Uw.prototype),qw.prototype={nodeName:"#document",nodeType:bw,doctype:null,documentElement:null,_inc:1,insertBefore:function(e,t){if(e.nodeType==Ew){for(var n=e.firstChild;n;){var i=n.nextSibling;this.insertBefore(n,t),n=i}return e}return Zw(this,e,t),e.ownerDocument=this,null===this.documentElement&&e.nodeType===hw&&(this.documentElement=e),e},removeChild:function(e){return this.documentElement==e&&(this.documentElement=null),$w(this,e)},replaceChild:function(e,t){Zw(this,e,t,Jw),e.ownerDocument=this,t&&this.removeChild(t),zw(e)&&(this.documentElement=e)},importNode:function(e,t){return yS(this,e,t)},getElementById:function(e){var t=null;return jw(this.documentElement,(function(n){if(n.nodeType==hw&&n.getAttribute("id")==e)return t=n,!0})),t},getElementsByClassName:function(e){var t=lw(e);return new Pw(this,(function(n){var i=[];return t.length>0&&jw(n.documentElement,(function(r){if(r!==n&&r.nodeType===hw){var s=r.getAttribute("class");if(s){var a=e===s;if(!a){var o=lw(s);a=t.every((l=o,function(e){return l&&-1!==l.indexOf(e)}))}a&&i.push(r)}}var l})),i}))},createElement:function(e){var t=new eS;return t.ownerDocument=this,t.nodeName=e,t.tagName=e,t.localName=e,t.childNodes=new Ow,(t.attributes=new Nw)._ownerElement=t,t},createDocumentFragment:function(){var e=new uS;return e.ownerDocument=this,e.childNodes=new Ow,e},createTextNode:function(e){var t=new iS;return t.ownerDocument=this,t.appendData(e),t},createComment:function(e){var t=new rS;return t.ownerDocument=this,t.appendData(e),t},createCDATASection:function(e){var t=new sS;return t.ownerDocument=this,t.appendData(e),t},createProcessingInstruction:function(e,t){var n=new dS;return n.ownerDocument=this,n.tagName=n.target=e,n.nodeValue=n.data=t,n},createAttribute:function(e){var t=new tS;return t.ownerDocument=this,t.name=e,t.nodeName=e,t.localName=e,t.specified=!0,t},createEntityReference:function(e){var t=new cS;return t.ownerDocument=this,t.nodeName=e,t},createElementNS:function(e,t){var n=new eS,i=t.split(":"),r=n.attributes=new Nw;return n.childNodes=new Ow,n.ownerDocument=this,n.nodeName=t,n.tagName=t,n.namespaceURI=e,2==i.length?(n.prefix=i[0],n.localName=i[1]):n.localName=t,r._ownerElement=n,n},createAttributeNS:function(e,t){var n=new tS,i=t.split(":");return n.ownerDocument=this,n.nodeName=t,n.name=t,n.namespaceURI=e,n.specified=!0,2==i.length?(n.prefix=i[0],n.localName=i[1]):n.localName=t,n}},uw(qw,Uw),eS.prototype={nodeType:hw,hasAttribute:function(e){return null!=this.getAttributeNode(e)},getAttribute:function(e){var t=this.getAttributeNode(e);return t&&t.value||""},getAttributeNode:function(e){return this.attributes.getNamedItem(e)},setAttribute:function(e,t){var n=this.ownerDocument.createAttribute(e);n.value=n.nodeValue=""+t,this.setAttributeNode(n)},removeAttribute:function(e){var t=this.getAttributeNode(e);t&&this.removeAttributeNode(t)},appendChild:function(e){return e.nodeType===Ew?this.insertBefore(e,null):function(e,t){return t.parentNode&&t.parentNode.removeChild(t),t.parentNode=e,t.previousSibling=e.lastChild,t.nextSibling=null,t.previousSibling?t.previousSibling.nextSibling=t:e.firstChild=t,e.lastChild=t,Vw(e.ownerDocument,e,t),t}(this,e)},setAttributeNode:function(e){return this.attributes.setNamedItem(e)},setAttributeNodeNS:function(e){return this.attributes.setNamedItemNS(e)},removeAttributeNode:function(e){return this.attributes.removeNamedItem(e.nodeName)},removeAttributeNS:function(e,t){var n=this.getAttributeNodeNS(e,t);n&&this.removeAttributeNode(n)},hasAttributeNS:function(e,t){return null!=this.getAttributeNodeNS(e,t)},getAttributeNS:function(e,t){var n=this.getAttributeNodeNS(e,t);return n&&n.value||""},setAttributeNS:function(e,t,n){var i=this.ownerDocument.createAttributeNS(e,t);i.value=i.nodeValue=""+n,this.setAttributeNode(i)},getAttributeNodeNS:function(e,t){return this.attributes.getNamedItemNS(e,t)},getElementsByTagName:function(e){return new Pw(this,(function(t){var n=[];return jw(t,(function(i){i===t||i.nodeType!=hw||"*"!==e&&i.tagName!=e||n.push(i)})),n}))},getElementsByTagNameNS:function(e,t){return new Pw(this,(function(n){var i=[];return jw(n,(function(r){r===n||r.nodeType!==hw||"*"!==e&&r.namespaceURI!==e||"*"!==t&&r.localName!=t||i.push(r)})),i}))}},qw.prototype.getElementsByTagName=eS.prototype.getElementsByTagName,qw.prototype.getElementsByTagNameNS=eS.prototype.getElementsByTagNameNS,uw(eS,Uw),tS.prototype.nodeType=pw,uw(tS,Uw),nS.prototype={data:"",substringData:function(e,t){return this.data.substring(e,e+t)},appendData:function(e){e=this.data+e,this.nodeValue=this.data=e,this.length=e.length},insertData:function(e,t){this.replaceData(e,0,t)},appendChild:function(e){throw new Error(Cw[Iw])},deleteData:function(e,t){this.replaceData(e,t,"")},replaceData:function(e,t,n){n=this.data.substring(0,e)+n+this.data.substring(e+t),this.nodeValue=this.data=n,this.length=n.length}},uw(nS,Uw),iS.prototype={nodeName:"#text",nodeType:fw,splitText:function(e){var t=this.data,n=t.substring(e);t=t.substring(0,e),this.data=this.nodeValue=t,this.length=t.length;var i=this.ownerDocument.createTextNode(n);return this.parentNode&&this.parentNode.insertBefore(i,this.nextSibling),i}},uw(iS,nS),rS.prototype={nodeName:"#comment",nodeType:vw},uw(rS,nS),sS.prototype={nodeName:"#cdata-section",nodeType:mw},uw(sS,nS),aS.prototype.nodeType=Tw,uw(aS,Uw),oS.prototype.nodeType=ww,uw(oS,Uw),lS.prototype.nodeType=yw,uw(lS,Uw),cS.prototype.nodeType=gw,uw(cS,Uw),uS.prototype.nodeName="#document-fragment",uS.prototype.nodeType=Ew,uw(uS,Uw),dS.prototype.nodeType=_w,uw(dS,Uw),hS.prototype.serializeToString=function(e,t,n){return pS.call(e,t,n)},Uw.prototype.toString=pS;try{if(Object.defineProperty){function bS(e){switch(e.nodeType){case hw:case Ew:var t=[];for(e=e.firstChild;e;)7!==e.nodeType&&8!==e.nodeType&&t.push(bS(e)),e=e.nextSibling;return t.join("");default:return e.nodeValue}}Object.defineProperty(Pw.prototype,"length",{get:function(){return Lw(this),this.$$length}}),Object.defineProperty(Uw.prototype,"textContent",{get:function(){return bS(this)},set:function(e){switch(this.nodeType){case hw:case Ew:for(;this.firstChild;)this.removeChild(this.firstChild);(e||String(e))&&this.appendChild(this.ownerDocument.createTextNode(e));break;default:this.data=e,this.value=e,this.nodeValue=e}}}),vS=function(e,t,n){e["$$"+t]=n}}}catch(fB){}JE.DocumentType=aS,JE.DOMException=Aw,JE.DOMImplementation=Fw,JE.Element=eS,JE.Node=Uw,JE.NodeList=Ow,JE.XMLSerializer=hS;var TS={},ES={};!function(e){var t=ZE.freeze;e.XML_ENTITIES=t({amp:"&",apos:"'",gt:">",lt:"<",quot:'"'}),e.HTML_ENTITIES=t({Aacute:"Á",aacute:"á",Abreve:"Ă",abreve:"ă",ac:"∾",acd:"∿",acE:"∾̳",Acirc:"Â",acirc:"â",acute:"´",Acy:"А",acy:"а",AElig:"Æ",aelig:"æ",af:"⁡",Afr:"𝔄",afr:"𝔞",Agrave:"À",agrave:"à",alefsym:"ℵ",aleph:"ℵ",Alpha:"Α",alpha:"α",Amacr:"Ā",amacr:"ā",amalg:"⨿",AMP:"&",amp:"&",And:"⩓",and:"∧",andand:"⩕",andd:"⩜",andslope:"⩘",andv:"⩚",ang:"∠",ange:"⦤",angle:"∠",angmsd:"∡",angmsdaa:"⦨",angmsdab:"⦩",angmsdac:"⦪",angmsdad:"⦫",angmsdae:"⦬",angmsdaf:"⦭",angmsdag:"⦮",angmsdah:"⦯",angrt:"∟",angrtvb:"⊾",angrtvbd:"⦝",angsph:"∢",angst:"Å",angzarr:"⍼",Aogon:"Ą",aogon:"ą",Aopf:"𝔸",aopf:"𝕒",ap:"≈",apacir:"⩯",apE:"⩰",ape:"≊",apid:"≋",apos:"'",ApplyFunction:"⁡",approx:"≈",approxeq:"≊",Aring:"Å",aring:"å",Ascr:"𝒜",ascr:"𝒶",Assign:"≔",ast:"*",asymp:"≈",asympeq:"≍",Atilde:"Ã",atilde:"ã",Auml:"Ä",auml:"ä",awconint:"∳",awint:"⨑",backcong:"≌",backepsilon:"϶",backprime:"‵",backsim:"∽",backsimeq:"⋍",Backslash:"∖",Barv:"⫧",barvee:"⊽",Barwed:"⌆",barwed:"⌅",barwedge:"⌅",bbrk:"⎵",bbrktbrk:"⎶",bcong:"≌",Bcy:"Б",bcy:"б",bdquo:"„",becaus:"∵",Because:"∵",because:"∵",bemptyv:"⦰",bepsi:"϶",bernou:"ℬ",Bernoullis:"ℬ",Beta:"Β",beta:"β",beth:"ℶ",between:"≬",Bfr:"𝔅",bfr:"𝔟",bigcap:"⋂",bigcirc:"◯",bigcup:"⋃",bigodot:"⨀",bigoplus:"⨁",bigotimes:"⨂",bigsqcup:"⨆",bigstar:"★",bigtriangledown:"▽",bigtriangleup:"△",biguplus:"⨄",bigvee:"⋁",bigwedge:"⋀",bkarow:"⤍",blacklozenge:"⧫",blacksquare:"▪",blacktriangle:"▴",blacktriangledown:"▾",blacktriangleleft:"◂",blacktriangleright:"▸",blank:"␣",blk12:"▒",blk14:"░",blk34:"▓",block:"█",bne:"=⃥",bnequiv:"≡⃥",bNot:"⫭",bnot:"⌐",Bopf:"𝔹",bopf:"𝕓",bot:"⊥",bottom:"⊥",bowtie:"⋈",boxbox:"⧉",boxDL:"╗",boxDl:"╖",boxdL:"╕",boxdl:"┐",boxDR:"╔",boxDr:"╓",boxdR:"╒",boxdr:"┌",boxH:"═",boxh:"─",boxHD:"╦",boxHd:"╤",boxhD:"╥",boxhd:"┬",boxHU:"╩",boxHu:"╧",boxhU:"╨",boxhu:"┴",boxminus:"⊟",boxplus:"⊞",boxtimes:"⊠",boxUL:"╝",boxUl:"╜",boxuL:"╛",boxul:"┘",boxUR:"╚",boxUr:"╙",boxuR:"╘",boxur:"└",boxV:"║",boxv:"│",boxVH:"╬",boxVh:"╫",boxvH:"╪",boxvh:"┼",boxVL:"╣",boxVl:"╢",boxvL:"╡",boxvl:"┤",boxVR:"╠",boxVr:"╟",boxvR:"╞",boxvr:"├",bprime:"‵",Breve:"˘",breve:"˘",brvbar:"¦",Bscr:"ℬ",bscr:"𝒷",bsemi:"⁏",bsim:"∽",bsime:"⋍",bsol:"\\",bsolb:"⧅",bsolhsub:"⟈",bull:"•",bullet:"•",bump:"≎",bumpE:"⪮",bumpe:"≏",Bumpeq:"≎",bumpeq:"≏",Cacute:"Ć",cacute:"ć",Cap:"⋒",cap:"∩",capand:"⩄",capbrcup:"⩉",capcap:"⩋",capcup:"⩇",capdot:"⩀",CapitalDifferentialD:"ⅅ",caps:"∩︀",caret:"⁁",caron:"ˇ",Cayleys:"ℭ",ccaps:"⩍",Ccaron:"Č",ccaron:"č",Ccedil:"Ç",ccedil:"ç",Ccirc:"Ĉ",ccirc:"ĉ",Cconint:"∰",ccups:"⩌",ccupssm:"⩐",Cdot:"Ċ",cdot:"ċ",cedil:"¸",Cedilla:"¸",cemptyv:"⦲",cent:"¢",CenterDot:"·",centerdot:"·",Cfr:"ℭ",cfr:"𝔠",CHcy:"Ч",chcy:"ч",check:"✓",checkmark:"✓",Chi:"Χ",chi:"χ",cir:"○",circ:"ˆ",circeq:"≗",circlearrowleft:"↺",circlearrowright:"↻",circledast:"⊛",circledcirc:"⊚",circleddash:"⊝",CircleDot:"⊙",circledR:"®",circledS:"Ⓢ",CircleMinus:"⊖",CirclePlus:"⊕",CircleTimes:"⊗",cirE:"⧃",cire:"≗",cirfnint:"⨐",cirmid:"⫯",cirscir:"⧂",ClockwiseContourIntegral:"∲",CloseCurlyDoubleQuote:"”",CloseCurlyQuote:"’",clubs:"♣",clubsuit:"♣",Colon:"∷",colon:":",Colone:"⩴",colone:"≔",coloneq:"≔",comma:",",commat:"@",comp:"∁",compfn:"∘",complement:"∁",complexes:"ℂ",cong:"≅",congdot:"⩭",Congruent:"≡",Conint:"∯",conint:"∮",ContourIntegral:"∮",Copf:"ℂ",copf:"𝕔",coprod:"∐",Coproduct:"∐",COPY:"©",copy:"©",copysr:"℗",CounterClockwiseContourIntegral:"∳",crarr:"↵",Cross:"⨯",cross:"✗",Cscr:"𝒞",cscr:"𝒸",csub:"⫏",csube:"⫑",csup:"⫐",csupe:"⫒",ctdot:"⋯",cudarrl:"⤸",cudarrr:"⤵",cuepr:"⋞",cuesc:"⋟",cularr:"↶",cularrp:"⤽",Cup:"⋓",cup:"∪",cupbrcap:"⩈",CupCap:"≍",cupcap:"⩆",cupcup:"⩊",cupdot:"⊍",cupor:"⩅",cups:"∪︀",curarr:"↷",curarrm:"⤼",curlyeqprec:"⋞",curlyeqsucc:"⋟",curlyvee:"⋎",curlywedge:"⋏",curren:"¤",curvearrowleft:"↶",curvearrowright:"↷",cuvee:"⋎",cuwed:"⋏",cwconint:"∲",cwint:"∱",cylcty:"⌭",Dagger:"‡",dagger:"†",daleth:"ℸ",Darr:"↡",dArr:"⇓",darr:"↓",dash:"‐",Dashv:"⫤",dashv:"⊣",dbkarow:"⤏",dblac:"˝",Dcaron:"Ď",dcaron:"ď",Dcy:"Д",dcy:"д",DD:"ⅅ",dd:"ⅆ",ddagger:"‡",ddarr:"⇊",DDotrahd:"⤑",ddotseq:"⩷",deg:"°",Del:"∇",Delta:"Δ",delta:"δ",demptyv:"⦱",dfisht:"⥿",Dfr:"𝔇",dfr:"𝔡",dHar:"⥥",dharl:"⇃",dharr:"⇂",DiacriticalAcute:"´",DiacriticalDot:"˙",DiacriticalDoubleAcute:"˝",DiacriticalGrave:"`",DiacriticalTilde:"˜",diam:"⋄",Diamond:"⋄",diamond:"⋄",diamondsuit:"♦",diams:"♦",die:"¨",DifferentialD:"ⅆ",digamma:"ϝ",disin:"⋲",div:"÷",divide:"÷",divideontimes:"⋇",divonx:"⋇",DJcy:"Ђ",djcy:"ђ",dlcorn:"⌞",dlcrop:"⌍",dollar:"$",Dopf:"𝔻",dopf:"𝕕",Dot:"¨",dot:"˙",DotDot:"⃜",doteq:"≐",doteqdot:"≑",DotEqual:"≐",dotminus:"∸",dotplus:"∔",dotsquare:"⊡",doublebarwedge:"⌆",DoubleContourIntegral:"∯",DoubleDot:"¨",DoubleDownArrow:"⇓",DoubleLeftArrow:"⇐",DoubleLeftRightArrow:"⇔",DoubleLeftTee:"⫤",DoubleLongLeftArrow:"⟸",DoubleLongLeftRightArrow:"⟺",DoubleLongRightArrow:"⟹",DoubleRightArrow:"⇒",DoubleRightTee:"⊨",DoubleUpArrow:"⇑",DoubleUpDownArrow:"⇕",DoubleVerticalBar:"∥",DownArrow:"↓",Downarrow:"⇓",downarrow:"↓",DownArrowBar:"⤓",DownArrowUpArrow:"⇵",DownBreve:"̑",downdownarrows:"⇊",downharpoonleft:"⇃",downharpoonright:"⇂",DownLeftRightVector:"⥐",DownLeftTeeVector:"⥞",DownLeftVector:"↽",DownLeftVectorBar:"⥖",DownRightTeeVector:"⥟",DownRightVector:"⇁",DownRightVectorBar:"⥗",DownTee:"⊤",DownTeeArrow:"↧",drbkarow:"⤐",drcorn:"⌟",drcrop:"⌌",Dscr:"𝒟",dscr:"𝒹",DScy:"Ѕ",dscy:"ѕ",dsol:"⧶",Dstrok:"Đ",dstrok:"đ",dtdot:"⋱",dtri:"▿",dtrif:"▾",duarr:"⇵",duhar:"⥯",dwangle:"⦦",DZcy:"Џ",dzcy:"џ",dzigrarr:"⟿",Eacute:"É",eacute:"é",easter:"⩮",Ecaron:"Ě",ecaron:"ě",ecir:"≖",Ecirc:"Ê",ecirc:"ê",ecolon:"≕",Ecy:"Э",ecy:"э",eDDot:"⩷",Edot:"Ė",eDot:"≑",edot:"ė",ee:"ⅇ",efDot:"≒",Efr:"𝔈",efr:"𝔢",eg:"⪚",Egrave:"È",egrave:"è",egs:"⪖",egsdot:"⪘",el:"⪙",Element:"∈",elinters:"⏧",ell:"ℓ",els:"⪕",elsdot:"⪗",Emacr:"Ē",emacr:"ē",empty:"∅",emptyset:"∅",EmptySmallSquare:"◻",emptyv:"∅",EmptyVerySmallSquare:"▫",emsp:" ",emsp13:" ",emsp14:" ",ENG:"Ŋ",eng:"ŋ",ensp:" ",Eogon:"Ę",eogon:"ę",Eopf:"𝔼",eopf:"𝕖",epar:"⋕",eparsl:"⧣",eplus:"⩱",epsi:"ε",Epsilon:"Ε",epsilon:"ε",epsiv:"ϵ",eqcirc:"≖",eqcolon:"≕",eqsim:"≂",eqslantgtr:"⪖",eqslantless:"⪕",Equal:"⩵",equals:"=",EqualTilde:"≂",equest:"≟",Equilibrium:"⇌",equiv:"≡",equivDD:"⩸",eqvparsl:"⧥",erarr:"⥱",erDot:"≓",Escr:"ℰ",escr:"ℯ",esdot:"≐",Esim:"⩳",esim:"≂",Eta:"Η",eta:"η",ETH:"Ð",eth:"ð",Euml:"Ë",euml:"ë",euro:"€",excl:"!",exist:"∃",Exists:"∃",expectation:"ℰ",ExponentialE:"ⅇ",exponentiale:"ⅇ",fallingdotseq:"≒",Fcy:"Ф",fcy:"ф",female:"♀",ffilig:"ﬃ",fflig:"ﬀ",ffllig:"ﬄ",Ffr:"𝔉",ffr:"𝔣",filig:"ﬁ",FilledSmallSquare:"◼",FilledVerySmallSquare:"▪",fjlig:"fj",flat:"♭",fllig:"ﬂ",fltns:"▱",fnof:"ƒ",Fopf:"𝔽",fopf:"𝕗",ForAll:"∀",forall:"∀",fork:"⋔",forkv:"⫙",Fouriertrf:"ℱ",fpartint:"⨍",frac12:"½",frac13:"⅓",frac14:"¼",frac15:"⅕",frac16:"⅙",frac18:"⅛",frac23:"⅔",frac25:"⅖",frac34:"¾",frac35:"⅗",frac38:"⅜",frac45:"⅘",frac56:"⅚",frac58:"⅝",frac78:"⅞",frasl:"⁄",frown:"⌢",Fscr:"ℱ",fscr:"𝒻",gacute:"ǵ",Gamma:"Γ",gamma:"γ",Gammad:"Ϝ",gammad:"ϝ",gap:"⪆",Gbreve:"Ğ",gbreve:"ğ",Gcedil:"Ģ",Gcirc:"Ĝ",gcirc:"ĝ",Gcy:"Г",gcy:"г",Gdot:"Ġ",gdot:"ġ",gE:"≧",ge:"≥",gEl:"⪌",gel:"⋛",geq:"≥",geqq:"≧",geqslant:"⩾",ges:"⩾",gescc:"⪩",gesdot:"⪀",gesdoto:"⪂",gesdotol:"⪄",gesl:"⋛︀",gesles:"⪔",Gfr:"𝔊",gfr:"𝔤",Gg:"⋙",gg:"≫",ggg:"⋙",gimel:"ℷ",GJcy:"Ѓ",gjcy:"ѓ",gl:"≷",gla:"⪥",glE:"⪒",glj:"⪤",gnap:"⪊",gnapprox:"⪊",gnE:"≩",gne:"⪈",gneq:"⪈",gneqq:"≩",gnsim:"⋧",Gopf:"𝔾",gopf:"𝕘",grave:"`",GreaterEqual:"≥",GreaterEqualLess:"⋛",GreaterFullEqual:"≧",GreaterGreater:"⪢",GreaterLess:"≷",GreaterSlantEqual:"⩾",GreaterTilde:"≳",Gscr:"𝒢",gscr:"ℊ",gsim:"≳",gsime:"⪎",gsiml:"⪐",Gt:"≫",GT:">",gt:">",gtcc:"⪧",gtcir:"⩺",gtdot:"⋗",gtlPar:"⦕",gtquest:"⩼",gtrapprox:"⪆",gtrarr:"⥸",gtrdot:"⋗",gtreqless:"⋛",gtreqqless:"⪌",gtrless:"≷",gtrsim:"≳",gvertneqq:"≩︀",gvnE:"≩︀",Hacek:"ˇ",hairsp:" ",half:"½",hamilt:"ℋ",HARDcy:"Ъ",hardcy:"ъ",hArr:"⇔",harr:"↔",harrcir:"⥈",harrw:"↭",Hat:"^",hbar:"ℏ",Hcirc:"Ĥ",hcirc:"ĥ",hearts:"♥",heartsuit:"♥",hellip:"…",hercon:"⊹",Hfr:"ℌ",hfr:"𝔥",HilbertSpace:"ℋ",hksearow:"⤥",hkswarow:"⤦",hoarr:"⇿",homtht:"∻",hookleftarrow:"↩",hookrightarrow:"↪",Hopf:"ℍ",hopf:"𝕙",horbar:"―",HorizontalLine:"─",Hscr:"ℋ",hscr:"𝒽",hslash:"ℏ",Hstrok:"Ħ",hstrok:"ħ",HumpDownHump:"≎",HumpEqual:"≏",hybull:"⁃",hyphen:"‐",Iacute:"Í",iacute:"í",ic:"⁣",Icirc:"Î",icirc:"î",Icy:"И",icy:"и",Idot:"İ",IEcy:"Е",iecy:"е",iexcl:"¡",iff:"⇔",Ifr:"ℑ",ifr:"𝔦",Igrave:"Ì",igrave:"ì",ii:"ⅈ",iiiint:"⨌",iiint:"∭",iinfin:"⧜",iiota:"℩",IJlig:"Ĳ",ijlig:"ĳ",Im:"ℑ",Imacr:"Ī",imacr:"ī",image:"ℑ",ImaginaryI:"ⅈ",imagline:"ℐ",imagpart:"ℑ",imath:"ı",imof:"⊷",imped:"Ƶ",Implies:"⇒",in:"∈",incare:"℅",infin:"∞",infintie:"⧝",inodot:"ı",Int:"∬",int:"∫",intcal:"⊺",integers:"ℤ",Integral:"∫",intercal:"⊺",Intersection:"⋂",intlarhk:"⨗",intprod:"⨼",InvisibleComma:"⁣",InvisibleTimes:"⁢",IOcy:"Ё",iocy:"ё",Iogon:"Į",iogon:"į",Iopf:"𝕀",iopf:"𝕚",Iota:"Ι",iota:"ι",iprod:"⨼",iquest:"¿",Iscr:"ℐ",iscr:"𝒾",isin:"∈",isindot:"⋵",isinE:"⋹",isins:"⋴",isinsv:"⋳",isinv:"∈",it:"⁢",Itilde:"Ĩ",itilde:"ĩ",Iukcy:"І",iukcy:"і",Iuml:"Ï",iuml:"ï",Jcirc:"Ĵ",jcirc:"ĵ",Jcy:"Й",jcy:"й",Jfr:"𝔍",jfr:"𝔧",jmath:"ȷ",Jopf:"𝕁",jopf:"𝕛",Jscr:"𝒥",jscr:"𝒿",Jsercy:"Ј",jsercy:"ј",Jukcy:"Є",jukcy:"є",Kappa:"Κ",kappa:"κ",kappav:"ϰ",Kcedil:"Ķ",kcedil:"ķ",Kcy:"К",kcy:"к",Kfr:"𝔎",kfr:"𝔨",kgreen:"ĸ",KHcy:"Х",khcy:"х",KJcy:"Ќ",kjcy:"ќ",Kopf:"𝕂",kopf:"𝕜",Kscr:"𝒦",kscr:"𝓀",lAarr:"⇚",Lacute:"Ĺ",lacute:"ĺ",laemptyv:"⦴",lagran:"ℒ",Lambda:"Λ",lambda:"λ",Lang:"⟪",lang:"⟨",langd:"⦑",langle:"⟨",lap:"⪅",Laplacetrf:"ℒ",laquo:"«",Larr:"↞",lArr:"⇐",larr:"←",larrb:"⇤",larrbfs:"⤟",larrfs:"⤝",larrhk:"↩",larrlp:"↫",larrpl:"⤹",larrsim:"⥳",larrtl:"↢",lat:"⪫",lAtail:"⤛",latail:"⤙",late:"⪭",lates:"⪭︀",lBarr:"⤎",lbarr:"⤌",lbbrk:"❲",lbrace:"{",lbrack:"[",lbrke:"⦋",lbrksld:"⦏",lbrkslu:"⦍",Lcaron:"Ľ",lcaron:"ľ",Lcedil:"Ļ",lcedil:"ļ",lceil:"⌈",lcub:"{",Lcy:"Л",lcy:"л",ldca:"⤶",ldquo:"“",ldquor:"„",ldrdhar:"⥧",ldrushar:"⥋",ldsh:"↲",lE:"≦",le:"≤",LeftAngleBracket:"⟨",LeftArrow:"←",Leftarrow:"⇐",leftarrow:"←",LeftArrowBar:"⇤",LeftArrowRightArrow:"⇆",leftarrowtail:"↢",LeftCeiling:"⌈",LeftDoubleBracket:"⟦",LeftDownTeeVector:"⥡",LeftDownVector:"⇃",LeftDownVectorBar:"⥙",LeftFloor:"⌊",leftharpoondown:"↽",leftharpoonup:"↼",leftleftarrows:"⇇",LeftRightArrow:"↔",Leftrightarrow:"⇔",leftrightarrow:"↔",leftrightarrows:"⇆",leftrightharpoons:"⇋",leftrightsquigarrow:"↭",LeftRightVector:"⥎",LeftTee:"⊣",LeftTeeArrow:"↤",LeftTeeVector:"⥚",leftthreetimes:"⋋",LeftTriangle:"⊲",LeftTriangleBar:"⧏",LeftTriangleEqual:"⊴",LeftUpDownVector:"⥑",LeftUpTeeVector:"⥠",LeftUpVector:"↿",LeftUpVectorBar:"⥘",LeftVector:"↼",LeftVectorBar:"⥒",lEg:"⪋",leg:"⋚",leq:"≤",leqq:"≦",leqslant:"⩽",les:"⩽",lescc:"⪨",lesdot:"⩿",lesdoto:"⪁",lesdotor:"⪃",lesg:"⋚︀",lesges:"⪓",lessapprox:"⪅",lessdot:"⋖",lesseqgtr:"⋚",lesseqqgtr:"⪋",LessEqualGreater:"⋚",LessFullEqual:"≦",LessGreater:"≶",lessgtr:"≶",LessLess:"⪡",lesssim:"≲",LessSlantEqual:"⩽",LessTilde:"≲",lfisht:"⥼",lfloor:"⌊",Lfr:"𝔏",lfr:"𝔩",lg:"≶",lgE:"⪑",lHar:"⥢",lhard:"↽",lharu:"↼",lharul:"⥪",lhblk:"▄",LJcy:"Љ",ljcy:"љ",Ll:"⋘",ll:"≪",llarr:"⇇",llcorner:"⌞",Lleftarrow:"⇚",llhard:"⥫",lltri:"◺",Lmidot:"Ŀ",lmidot:"ŀ",lmoust:"⎰",lmoustache:"⎰",lnap:"⪉",lnapprox:"⪉",lnE:"≨",lne:"⪇",lneq:"⪇",lneqq:"≨",lnsim:"⋦",loang:"⟬",loarr:"⇽",lobrk:"⟦",LongLeftArrow:"⟵",Longleftarrow:"⟸",longleftarrow:"⟵",LongLeftRightArrow:"⟷",Longleftrightarrow:"⟺",longleftrightarrow:"⟷",longmapsto:"⟼",LongRightArrow:"⟶",Longrightarrow:"⟹",longrightarrow:"⟶",looparrowleft:"↫",looparrowright:"↬",lopar:"⦅",Lopf:"𝕃",lopf:"𝕝",loplus:"⨭",lotimes:"⨴",lowast:"∗",lowbar:"_",LowerLeftArrow:"↙",LowerRightArrow:"↘",loz:"◊",lozenge:"◊",lozf:"⧫",lpar:"(",lparlt:"⦓",lrarr:"⇆",lrcorner:"⌟",lrhar:"⇋",lrhard:"⥭",lrm:"‎",lrtri:"⊿",lsaquo:"‹",Lscr:"ℒ",lscr:"𝓁",Lsh:"↰",lsh:"↰",lsim:"≲",lsime:"⪍",lsimg:"⪏",lsqb:"[",lsquo:"‘",lsquor:"‚",Lstrok:"Ł",lstrok:"ł",Lt:"≪",LT:"<",lt:"<",ltcc:"⪦",ltcir:"⩹",ltdot:"⋖",lthree:"⋋",ltimes:"⋉",ltlarr:"⥶",ltquest:"⩻",ltri:"◃",ltrie:"⊴",ltrif:"◂",ltrPar:"⦖",lurdshar:"⥊",luruhar:"⥦",lvertneqq:"≨︀",lvnE:"≨︀",macr:"¯",male:"♂",malt:"✠",maltese:"✠",Map:"⤅",map:"↦",mapsto:"↦",mapstodown:"↧",mapstoleft:"↤",mapstoup:"↥",marker:"▮",mcomma:"⨩",Mcy:"М",mcy:"м",mdash:"—",mDDot:"∺",measuredangle:"∡",MediumSpace:" ",Mellintrf:"ℳ",Mfr:"𝔐",mfr:"𝔪",mho:"℧",micro:"µ",mid:"∣",midast:"*",midcir:"⫰",middot:"·",minus:"−",minusb:"⊟",minusd:"∸",minusdu:"⨪",MinusPlus:"∓",mlcp:"⫛",mldr:"…",mnplus:"∓",models:"⊧",Mopf:"𝕄",mopf:"𝕞",mp:"∓",Mscr:"ℳ",mscr:"𝓂",mstpos:"∾",Mu:"Μ",mu:"μ",multimap:"⊸",mumap:"⊸",nabla:"∇",Nacute:"Ń",nacute:"ń",nang:"∠⃒",nap:"≉",napE:"⩰̸",napid:"≋̸",napos:"ŉ",napprox:"≉",natur:"♮",natural:"♮",naturals:"ℕ",nbsp:" ",nbump:"≎̸",nbumpe:"≏̸",ncap:"⩃",Ncaron:"Ň",ncaron:"ň",Ncedil:"Ņ",ncedil:"ņ",ncong:"≇",ncongdot:"⩭̸",ncup:"⩂",Ncy:"Н",ncy:"н",ndash:"–",ne:"≠",nearhk:"⤤",neArr:"⇗",nearr:"↗",nearrow:"↗",nedot:"≐̸",NegativeMediumSpace:"​",NegativeThickSpace:"​",NegativeThinSpace:"​",NegativeVeryThinSpace:"​",nequiv:"≢",nesear:"⤨",nesim:"≂̸",NestedGreaterGreater:"≫",NestedLessLess:"≪",NewLine:"\n",nexist:"∄",nexists:"∄",Nfr:"𝔑",nfr:"𝔫",ngE:"≧̸",nge:"≱",ngeq:"≱",ngeqq:"≧̸",ngeqslant:"⩾̸",nges:"⩾̸",nGg:"⋙̸",ngsim:"≵",nGt:"≫⃒",ngt:"≯",ngtr:"≯",nGtv:"≫̸",nhArr:"⇎",nharr:"↮",nhpar:"⫲",ni:"∋",nis:"⋼",nisd:"⋺",niv:"∋",NJcy:"Њ",njcy:"њ",nlArr:"⇍",nlarr:"↚",nldr:"‥",nlE:"≦̸",nle:"≰",nLeftarrow:"⇍",nleftarrow:"↚",nLeftrightarrow:"⇎",nleftrightarrow:"↮",nleq:"≰",nleqq:"≦̸",nleqslant:"⩽̸",nles:"⩽̸",nless:"≮",nLl:"⋘̸",nlsim:"≴",nLt:"≪⃒",nlt:"≮",nltri:"⋪",nltrie:"⋬",nLtv:"≪̸",nmid:"∤",NoBreak:"⁠",NonBreakingSpace:" ",Nopf:"ℕ",nopf:"𝕟",Not:"⫬",not:"¬",NotCongruent:"≢",NotCupCap:"≭",NotDoubleVerticalBar:"∦",NotElement:"∉",NotEqual:"≠",NotEqualTilde:"≂̸",NotExists:"∄",NotGreater:"≯",NotGreaterEqual:"≱",NotGreaterFullEqual:"≧̸",NotGreaterGreater:"≫̸",NotGreaterLess:"≹",NotGreaterSlantEqual:"⩾̸",NotGreaterTilde:"≵",NotHumpDownHump:"≎̸",NotHumpEqual:"≏̸",notin:"∉",notindot:"⋵̸",notinE:"⋹̸",notinva:"∉",notinvb:"⋷",notinvc:"⋶",NotLeftTriangle:"⋪",NotLeftTriangleBar:"⧏̸",NotLeftTriangleEqual:"⋬",NotLess:"≮",NotLessEqual:"≰",NotLessGreater:"≸",NotLessLess:"≪̸",NotLessSlantEqual:"⩽̸",NotLessTilde:"≴",NotNestedGreaterGreater:"⪢̸",NotNestedLessLess:"⪡̸",notni:"∌",notniva:"∌",notnivb:"⋾",notnivc:"⋽",NotPrecedes:"⊀",NotPrecedesEqual:"⪯̸",NotPrecedesSlantEqual:"⋠",NotReverseElement:"∌",NotRightTriangle:"⋫",NotRightTriangleBar:"⧐̸",NotRightTriangleEqual:"⋭",NotSquareSubset:"⊏̸",NotSquareSubsetEqual:"⋢",NotSquareSuperset:"⊐̸",NotSquareSupersetEqual:"⋣",NotSubset:"⊂⃒",NotSubsetEqual:"⊈",NotSucceeds:"⊁",NotSucceedsEqual:"⪰̸",NotSucceedsSlantEqual:"⋡",NotSucceedsTilde:"≿̸",NotSuperset:"⊃⃒",NotSupersetEqual:"⊉",NotTilde:"≁",NotTildeEqual:"≄",NotTildeFullEqual:"≇",NotTildeTilde:"≉",NotVerticalBar:"∤",npar:"∦",nparallel:"∦",nparsl:"⫽⃥",npart:"∂̸",npolint:"⨔",npr:"⊀",nprcue:"⋠",npre:"⪯̸",nprec:"⊀",npreceq:"⪯̸",nrArr:"⇏",nrarr:"↛",nrarrc:"⤳̸",nrarrw:"↝̸",nRightarrow:"⇏",nrightarrow:"↛",nrtri:"⋫",nrtrie:"⋭",nsc:"⊁",nsccue:"⋡",nsce:"⪰̸",Nscr:"𝒩",nscr:"𝓃",nshortmid:"∤",nshortparallel:"∦",nsim:"≁",nsime:"≄",nsimeq:"≄",nsmid:"∤",nspar:"∦",nsqsube:"⋢",nsqsupe:"⋣",nsub:"⊄",nsubE:"⫅̸",nsube:"⊈",nsubset:"⊂⃒",nsubseteq:"⊈",nsubseteqq:"⫅̸",nsucc:"⊁",nsucceq:"⪰̸",nsup:"⊅",nsupE:"⫆̸",nsupe:"⊉",nsupset:"⊃⃒",nsupseteq:"⊉",nsupseteqq:"⫆̸",ntgl:"≹",Ntilde:"Ñ",ntilde:"ñ",ntlg:"≸",ntriangleleft:"⋪",ntrianglelefteq:"⋬",ntriangleright:"⋫",ntrianglerighteq:"⋭",Nu:"Ν",nu:"ν",num:"#",numero:"№",numsp:" ",nvap:"≍⃒",nVDash:"⊯",nVdash:"⊮",nvDash:"⊭",nvdash:"⊬",nvge:"≥⃒",nvgt:">⃒",nvHarr:"⤄",nvinfin:"⧞",nvlArr:"⤂",nvle:"≤⃒",nvlt:"<⃒",nvltrie:"⊴⃒",nvrArr:"⤃",nvrtrie:"⊵⃒",nvsim:"∼⃒",nwarhk:"⤣",nwArr:"⇖",nwarr:"↖",nwarrow:"↖",nwnear:"⤧",Oacute:"Ó",oacute:"ó",oast:"⊛",ocir:"⊚",Ocirc:"Ô",ocirc:"ô",Ocy:"О",ocy:"о",odash:"⊝",Odblac:"Ő",odblac:"ő",odiv:"⨸",odot:"⊙",odsold:"⦼",OElig:"Œ",oelig:"œ",ofcir:"⦿",Ofr:"𝔒",ofr:"𝔬",ogon:"˛",Ograve:"Ò",ograve:"ò",ogt:"⧁",ohbar:"⦵",ohm:"Ω",oint:"∮",olarr:"↺",olcir:"⦾",olcross:"⦻",oline:"‾",olt:"⧀",Omacr:"Ō",omacr:"ō",Omega:"Ω",omega:"ω",Omicron:"Ο",omicron:"ο",omid:"⦶",ominus:"⊖",Oopf:"𝕆",oopf:"𝕠",opar:"⦷",OpenCurlyDoubleQuote:"“",OpenCurlyQuote:"‘",operp:"⦹",oplus:"⊕",Or:"⩔",or:"∨",orarr:"↻",ord:"⩝",order:"ℴ",orderof:"ℴ",ordf:"ª",ordm:"º",origof:"⊶",oror:"⩖",orslope:"⩗",orv:"⩛",oS:"Ⓢ",Oscr:"𝒪",oscr:"ℴ",Oslash:"Ø",oslash:"ø",osol:"⊘",Otilde:"Õ",otilde:"õ",Otimes:"⨷",otimes:"⊗",otimesas:"⨶",Ouml:"Ö",ouml:"ö",ovbar:"⌽",OverBar:"‾",OverBrace:"⏞",OverBracket:"⎴",OverParenthesis:"⏜",par:"∥",para:"¶",parallel:"∥",parsim:"⫳",parsl:"⫽",part:"∂",PartialD:"∂",Pcy:"П",pcy:"п",percnt:"%",period:".",permil:"‰",perp:"⊥",pertenk:"‱",Pfr:"𝔓",pfr:"𝔭",Phi:"Φ",phi:"φ",phiv:"ϕ",phmmat:"ℳ",phone:"☎",Pi:"Π",pi:"π",pitchfork:"⋔",piv:"ϖ",planck:"ℏ",planckh:"ℎ",plankv:"ℏ",plus:"+",plusacir:"⨣",plusb:"⊞",pluscir:"⨢",plusdo:"∔",plusdu:"⨥",pluse:"⩲",PlusMinus:"±",plusmn:"±",plussim:"⨦",plustwo:"⨧",pm:"±",Poincareplane:"ℌ",pointint:"⨕",Popf:"ℙ",popf:"𝕡",pound:"£",Pr:"⪻",pr:"≺",prap:"⪷",prcue:"≼",prE:"⪳",pre:"⪯",prec:"≺",precapprox:"⪷",preccurlyeq:"≼",Precedes:"≺",PrecedesEqual:"⪯",PrecedesSlantEqual:"≼",PrecedesTilde:"≾",preceq:"⪯",precnapprox:"⪹",precneqq:"⪵",precnsim:"⋨",precsim:"≾",Prime:"″",prime:"′",primes:"ℙ",prnap:"⪹",prnE:"⪵",prnsim:"⋨",prod:"∏",Product:"∏",profalar:"⌮",profline:"⌒",profsurf:"⌓",prop:"∝",Proportion:"∷",Proportional:"∝",propto:"∝",prsim:"≾",prurel:"⊰",Pscr:"𝒫",pscr:"𝓅",Psi:"Ψ",psi:"ψ",puncsp:" ",Qfr:"𝔔",qfr:"𝔮",qint:"⨌",Qopf:"ℚ",qopf:"𝕢",qprime:"⁗",Qscr:"𝒬",qscr:"𝓆",quaternions:"ℍ",quatint:"⨖",quest:"?",questeq:"≟",QUOT:'"',quot:'"',rAarr:"⇛",race:"∽̱",Racute:"Ŕ",racute:"ŕ",radic:"√",raemptyv:"⦳",Rang:"⟫",rang:"⟩",rangd:"⦒",range:"⦥",rangle:"⟩",raquo:"»",Rarr:"↠",rArr:"⇒",rarr:"→",rarrap:"⥵",rarrb:"⇥",rarrbfs:"⤠",rarrc:"⤳",rarrfs:"⤞",rarrhk:"↪",rarrlp:"↬",rarrpl:"⥅",rarrsim:"⥴",Rarrtl:"⤖",rarrtl:"↣",rarrw:"↝",rAtail:"⤜",ratail:"⤚",ratio:"∶",rationals:"ℚ",RBarr:"⤐",rBarr:"⤏",rbarr:"⤍",rbbrk:"❳",rbrace:"}",rbrack:"]",rbrke:"⦌",rbrksld:"⦎",rbrkslu:"⦐",Rcaron:"Ř",rcaron:"ř",Rcedil:"Ŗ",rcedil:"ŗ",rceil:"⌉",rcub:"}",Rcy:"Р",rcy:"р",rdca:"⤷",rdldhar:"⥩",rdquo:"”",rdquor:"”",rdsh:"↳",Re:"ℜ",real:"ℜ",realine:"ℛ",realpart:"ℜ",reals:"ℝ",rect:"▭",REG:"®",reg:"®",ReverseElement:"∋",ReverseEquilibrium:"⇋",ReverseUpEquilibrium:"⥯",rfisht:"⥽",rfloor:"⌋",Rfr:"ℜ",rfr:"𝔯",rHar:"⥤",rhard:"⇁",rharu:"⇀",rharul:"⥬",Rho:"Ρ",rho:"ρ",rhov:"ϱ",RightAngleBracket:"⟩",RightArrow:"→",Rightarrow:"⇒",rightarrow:"→",RightArrowBar:"⇥",RightArrowLeftArrow:"⇄",rightarrowtail:"↣",RightCeiling:"⌉",RightDoubleBracket:"⟧",RightDownTeeVector:"⥝",RightDownVector:"⇂",RightDownVectorBar:"⥕",RightFloor:"⌋",rightharpoondown:"⇁",rightharpoonup:"⇀",rightleftarrows:"⇄",rightleftharpoons:"⇌",rightrightarrows:"⇉",rightsquigarrow:"↝",RightTee:"⊢",RightTeeArrow:"↦",RightTeeVector:"⥛",rightthreetimes:"⋌",RightTriangle:"⊳",RightTriangleBar:"⧐",RightTriangleEqual:"⊵",RightUpDownVector:"⥏",RightUpTeeVector:"⥜",RightUpVector:"↾",RightUpVectorBar:"⥔",RightVector:"⇀",RightVectorBar:"⥓",ring:"˚",risingdotseq:"≓",rlarr:"⇄",rlhar:"⇌",rlm:"‏",rmoust:"⎱",rmoustache:"⎱",rnmid:"⫮",roang:"⟭",roarr:"⇾",robrk:"⟧",ropar:"⦆",Ropf:"ℝ",ropf:"𝕣",roplus:"⨮",rotimes:"⨵",RoundImplies:"⥰",rpar:")",rpargt:"⦔",rppolint:"⨒",rrarr:"⇉",Rrightarrow:"⇛",rsaquo:"›",Rscr:"ℛ",rscr:"𝓇",Rsh:"↱",rsh:"↱",rsqb:"]",rsquo:"’",rsquor:"’",rthree:"⋌",rtimes:"⋊",rtri:"▹",rtrie:"⊵",rtrif:"▸",rtriltri:"⧎",RuleDelayed:"⧴",ruluhar:"⥨",rx:"℞",Sacute:"Ś",sacute:"ś",sbquo:"‚",Sc:"⪼",sc:"≻",scap:"⪸",Scaron:"Š",scaron:"š",sccue:"≽",scE:"⪴",sce:"⪰",Scedil:"Ş",scedil:"ş",Scirc:"Ŝ",scirc:"ŝ",scnap:"⪺",scnE:"⪶",scnsim:"⋩",scpolint:"⨓",scsim:"≿",Scy:"С",scy:"с",sdot:"⋅",sdotb:"⊡",sdote:"⩦",searhk:"⤥",seArr:"⇘",searr:"↘",searrow:"↘",sect:"§",semi:";",seswar:"⤩",setminus:"∖",setmn:"∖",sext:"✶",Sfr:"𝔖",sfr:"𝔰",sfrown:"⌢",sharp:"♯",SHCHcy:"Щ",shchcy:"щ",SHcy:"Ш",shcy:"ш",ShortDownArrow:"↓",ShortLeftArrow:"←",shortmid:"∣",shortparallel:"∥",ShortRightArrow:"→",ShortUpArrow:"↑",shy:"­",Sigma:"Σ",sigma:"σ",sigmaf:"ς",sigmav:"ς",sim:"∼",simdot:"⩪",sime:"≃",simeq:"≃",simg:"⪞",simgE:"⪠",siml:"⪝",simlE:"⪟",simne:"≆",simplus:"⨤",simrarr:"⥲",slarr:"←",SmallCircle:"∘",smallsetminus:"∖",smashp:"⨳",smeparsl:"⧤",smid:"∣",smile:"⌣",smt:"⪪",smte:"⪬",smtes:"⪬︀",SOFTcy:"Ь",softcy:"ь",sol:"/",solb:"⧄",solbar:"⌿",Sopf:"𝕊",sopf:"𝕤",spades:"♠",spadesuit:"♠",spar:"∥",sqcap:"⊓",sqcaps:"⊓︀",sqcup:"⊔",sqcups:"⊔︀",Sqrt:"√",sqsub:"⊏",sqsube:"⊑",sqsubset:"⊏",sqsubseteq:"⊑",sqsup:"⊐",sqsupe:"⊒",sqsupset:"⊐",sqsupseteq:"⊒",squ:"□",Square:"□",square:"□",SquareIntersection:"⊓",SquareSubset:"⊏",SquareSubsetEqual:"⊑",SquareSuperset:"⊐",SquareSupersetEqual:"⊒",SquareUnion:"⊔",squarf:"▪",squf:"▪",srarr:"→",Sscr:"𝒮",sscr:"𝓈",ssetmn:"∖",ssmile:"⌣",sstarf:"⋆",Star:"⋆",star:"☆",starf:"★",straightepsilon:"ϵ",straightphi:"ϕ",strns:"¯",Sub:"⋐",sub:"⊂",subdot:"⪽",subE:"⫅",sube:"⊆",subedot:"⫃",submult:"⫁",subnE:"⫋",subne:"⊊",subplus:"⪿",subrarr:"⥹",Subset:"⋐",subset:"⊂",subseteq:"⊆",subseteqq:"⫅",SubsetEqual:"⊆",subsetneq:"⊊",subsetneqq:"⫋",subsim:"⫇",subsub:"⫕",subsup:"⫓",succ:"≻",succapprox:"⪸",succcurlyeq:"≽",Succeeds:"≻",SucceedsEqual:"⪰",SucceedsSlantEqual:"≽",SucceedsTilde:"≿",succeq:"⪰",succnapprox:"⪺",succneqq:"⪶",succnsim:"⋩",succsim:"≿",SuchThat:"∋",Sum:"∑",sum:"∑",sung:"♪",Sup:"⋑",sup:"⊃",sup1:"¹",sup2:"²",sup3:"³",supdot:"⪾",supdsub:"⫘",supE:"⫆",supe:"⊇",supedot:"⫄",Superset:"⊃",SupersetEqual:"⊇",suphsol:"⟉",suphsub:"⫗",suplarr:"⥻",supmult:"⫂",supnE:"⫌",supne:"⊋",supplus:"⫀",Supset:"⋑",supset:"⊃",supseteq:"⊇",supseteqq:"⫆",supsetneq:"⊋",supsetneqq:"⫌",supsim:"⫈",supsub:"⫔",supsup:"⫖",swarhk:"⤦",swArr:"⇙",swarr:"↙",swarrow:"↙",swnwar:"⤪",szlig:"ß",Tab:"\t",target:"⌖",Tau:"Τ",tau:"τ",tbrk:"⎴",Tcaron:"Ť",tcaron:"ť",Tcedil:"Ţ",tcedil:"ţ",Tcy:"Т",tcy:"т",tdot:"⃛",telrec:"⌕",Tfr:"𝔗",tfr:"𝔱",there4:"∴",Therefore:"∴",therefore:"∴",Theta:"Θ",theta:"θ",thetasym:"ϑ",thetav:"ϑ",thickapprox:"≈",thicksim:"∼",ThickSpace:"  ",thinsp:" ",ThinSpace:" ",thkap:"≈",thksim:"∼",THORN:"Þ",thorn:"þ",Tilde:"∼",tilde:"˜",TildeEqual:"≃",TildeFullEqual:"≅",TildeTilde:"≈",times:"×",timesb:"⊠",timesbar:"⨱",timesd:"⨰",tint:"∭",toea:"⤨",top:"⊤",topbot:"⌶",topcir:"⫱",Topf:"𝕋",topf:"𝕥",topfork:"⫚",tosa:"⤩",tprime:"‴",TRADE:"™",trade:"™",triangle:"▵",triangledown:"▿",triangleleft:"◃",trianglelefteq:"⊴",triangleq:"≜",triangleright:"▹",trianglerighteq:"⊵",tridot:"◬",trie:"≜",triminus:"⨺",TripleDot:"⃛",triplus:"⨹",trisb:"⧍",tritime:"⨻",trpezium:"⏢",Tscr:"𝒯",tscr:"𝓉",TScy:"Ц",tscy:"ц",TSHcy:"Ћ",tshcy:"ћ",Tstrok:"Ŧ",tstrok:"ŧ",twixt:"≬",twoheadleftarrow:"↞",twoheadrightarrow:"↠",Uacute:"Ú",uacute:"ú",Uarr:"↟",uArr:"⇑",uarr:"↑",Uarrocir:"⥉",Ubrcy:"Ў",ubrcy:"ў",Ubreve:"Ŭ",ubreve:"ŭ",Ucirc:"Û",ucirc:"û",Ucy:"У",ucy:"у",udarr:"⇅",Udblac:"Ű",udblac:"ű",udhar:"⥮",ufisht:"⥾",Ufr:"𝔘",ufr:"𝔲",Ugrave:"Ù",ugrave:"ù",uHar:"⥣",uharl:"↿",uharr:"↾",uhblk:"▀",ulcorn:"⌜",ulcorner:"⌜",ulcrop:"⌏",ultri:"◸",Umacr:"Ū",umacr:"ū",uml:"¨",UnderBar:"_",UnderBrace:"⏟",UnderBracket:"⎵",UnderParenthesis:"⏝",Union:"⋃",UnionPlus:"⊎",Uogon:"Ų",uogon:"ų",Uopf:"𝕌",uopf:"𝕦",UpArrow:"↑",Uparrow:"⇑",uparrow:"↑",UpArrowBar:"⤒",UpArrowDownArrow:"⇅",UpDownArrow:"↕",Updownarrow:"⇕",updownarrow:"↕",UpEquilibrium:"⥮",upharpoonleft:"↿",upharpoonright:"↾",uplus:"⊎",UpperLeftArrow:"↖",UpperRightArrow:"↗",Upsi:"ϒ",upsi:"υ",upsih:"ϒ",Upsilon:"Υ",upsilon:"υ",UpTee:"⊥",UpTeeArrow:"↥",upuparrows:"⇈",urcorn:"⌝",urcorner:"⌝",urcrop:"⌎",Uring:"Ů",uring:"ů",urtri:"◹",Uscr:"𝒰",uscr:"𝓊",utdot:"⋰",Utilde:"Ũ",utilde:"ũ",utri:"▵",utrif:"▴",uuarr:"⇈",Uuml:"Ü",uuml:"ü",uwangle:"⦧",vangrt:"⦜",varepsilon:"ϵ",varkappa:"ϰ",varnothing:"∅",varphi:"ϕ",varpi:"ϖ",varpropto:"∝",vArr:"⇕",varr:"↕",varrho:"ϱ",varsigma:"ς",varsubsetneq:"⊊︀",varsubsetneqq:"⫋︀",varsupsetneq:"⊋︀",varsupsetneqq:"⫌︀",vartheta:"ϑ",vartriangleleft:"⊲",vartriangleright:"⊳",Vbar:"⫫",vBar:"⫨",vBarv:"⫩",Vcy:"В",vcy:"в",VDash:"⊫",Vdash:"⊩",vDash:"⊨",vdash:"⊢",Vdashl:"⫦",Vee:"⋁",vee:"∨",veebar:"⊻",veeeq:"≚",vellip:"⋮",Verbar:"‖",verbar:"|",Vert:"‖",vert:"|",VerticalBar:"∣",VerticalLine:"|",VerticalSeparator:"❘",VerticalTilde:"≀",VeryThinSpace:" ",Vfr:"𝔙",vfr:"𝔳",vltri:"⊲",vnsub:"⊂⃒",vnsup:"⊃⃒",Vopf:"𝕍",vopf:"𝕧",vprop:"∝",vrtri:"⊳",Vscr:"𝒱",vscr:"𝓋",vsubnE:"⫋︀",vsubne:"⊊︀",vsupnE:"⫌︀",vsupne:"⊋︀",Vvdash:"⊪",vzigzag:"⦚",Wcirc:"Ŵ",wcirc:"ŵ",wedbar:"⩟",Wedge:"⋀",wedge:"∧",wedgeq:"≙",weierp:"℘",Wfr:"𝔚",wfr:"𝔴",Wopf:"𝕎",wopf:"𝕨",wp:"℘",wr:"≀",wreath:"≀",Wscr:"𝒲",wscr:"𝓌",xcap:"⋂",xcirc:"◯",xcup:"⋃",xdtri:"▽",Xfr:"𝔛",xfr:"𝔵",xhArr:"⟺",xharr:"⟷",Xi:"Ξ",xi:"ξ",xlArr:"⟸",xlarr:"⟵",xmap:"⟼",xnis:"⋻",xodot:"⨀",Xopf:"𝕏",xopf:"𝕩",xoplus:"⨁",xotime:"⨂",xrArr:"⟹",xrarr:"⟶",Xscr:"𝒳",xscr:"𝓍",xsqcup:"⨆",xuplus:"⨄",xutri:"△",xvee:"⋁",xwedge:"⋀",Yacute:"Ý",yacute:"ý",YAcy:"Я",yacy:"я",Ycirc:"Ŷ",ycirc:"ŷ",Ycy:"Ы",ycy:"ы",yen:"¥",Yfr:"𝔜",yfr:"𝔶",YIcy:"Ї",yicy:"ї",Yopf:"𝕐",yopf:"𝕪",Yscr:"𝒴",yscr:"𝓎",YUcy:"Ю",yucy:"ю",Yuml:"Ÿ",yuml:"ÿ",Zacute:"Ź",zacute:"ź",Zcaron:"Ž",zcaron:"ž",Zcy:"З",zcy:"з",Zdot:"Ż",zdot:"ż",zeetrf:"ℨ",ZeroWidthSpace:"​",Zeta:"Ζ",zeta:"ζ",Zfr:"ℨ",zfr:"𝔷",ZHcy:"Ж",zhcy:"ж",zigrarr:"⇝",Zopf:"ℤ",zopf:"𝕫",Zscr:"𝒵",zscr:"𝓏",zwj:"‍",zwnj:"‌"}),e.entityMap=e.HTML_ENTITIES}(ES);var wS={},SS=ZE.NAMESPACE,CS=/[A-Z_a-z\xC0-\xD6\xD8-\xF6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,IS=new RegExp("[\\-\\.0-9"+CS.source.slice(1,-1)+"\\u00B7\\u0300-\\u036F\\u203F-\\u2040]"),xS=new RegExp("^"+CS.source+IS.source+"*(?::"+CS.source+IS.source+"*)?$"),kS=0,AS=1,OS=2,PS=3,LS=4,NS=5,DS=6,RS=7;function MS(e,t){this.message=e,this.locator=t,Error.captureStackTrace&&Error.captureStackTrace(this,MS)}function FS(){}function US(e,t){return t.lineNumber=e.lineNumber,t.columnNumber=e.columnNumber,t}function BS(e,t,n,i,r,s){function a(e,t,i){n.attributeNames.hasOwnProperty(e)&&s.fatalError("Attribute "+e+" redefined"),n.addValue(e,t.replace(/[\t\n\r]/g," ").replace(/&#?\w+;/g,r),i)}for(var o,l=++t,c=kS;;){var u=e.charAt(l);switch(u){case"=":if(c===AS)o=e.slice(t,l),c=PS;else{if(c!==OS)throw new Error("attribute equal must after attrName");c=PS}break;case"'":case'"':if(c===PS||c===AS){if(c===AS&&(s.warning('attribute value must after "="'),o=e.slice(t,l)),t=l+1,!((l=e.indexOf(u,t))>0))throw new Error("attribute value no end '"+u+"' match");a(o,d=e.slice(t,l),t-1),c=NS}else{if(c!=LS)throw new Error('attribute value must after "="');a(o,d=e.slice(t,l),t),s.warning('attribute "'+o+'" missed start quot('+u+")!!"),t=l+1,c=NS}break;case"/":switch(c){case kS:n.setTagName(e.slice(t,l));case NS:case DS:case RS:c=RS,n.closed=!0;case LS:case AS:break;case OS:n.closed=!0;break;default:throw new Error("attribute invalid close char('/')")}break;case"":return s.error("unexpected end of input"),c==kS&&n.setTagName(e.slice(t,l)),l;case">":switch(c){case kS:n.setTagName(e.slice(t,l));case NS:case DS:case RS:break;case LS:case AS:"/"===(d=e.slice(t,l)).slice(-1)&&(n.closed=!0,d=d.slice(0,-1));case OS:c===OS&&(d=o),c==LS?(s.warning('attribute "'+d+'" missed quot(")!'),a(o,d,t)):(SS.isHTML(i[""])&&d.match(/^(?:disabled|checked|selected)$/i)||s.warning('attribute "'+d+'" missed value!! "'+d+'" instead!!'),a(d,d,t));break;case PS:throw new Error("attribute value missed!!")}return l;case"":u=" ";default:if(u<=" ")switch(c){case kS:n.setTagName(e.slice(t,l)),c=DS;break;case AS:o=e.slice(t,l),c=OS;break;case LS:var d=e.slice(t,l);s.warning('attribute "'+d+'" missed quot(")!!'),a(o,d,t);case NS:c=DS}else switch(c){case OS:n.tagName,SS.isHTML(i[""])&&o.match(/^(?:disabled|checked|selected)$/i)||s.warning('attribute "'+o+'" missed value!! "'+o+'" instead2!!'),a(o,o,t),t=l,c=AS;break;case NS:s.warning('attribute space is required"'+o+'"!!');case DS:c=AS,t=l;break;case PS:c=LS,t=l;break;case RS:throw new Error("elements closed character '/' and '>' must be connected to")}}l++}}function jS(e,t,n){for(var i=e.tagName,r=null,s=e.length;s--;){var a=e[s],o=a.qName,l=a.value;if((h=o.indexOf(":"))>0)var c=a.prefix=o.slice(0,h),u=o.slice(h+1),d="xmlns"===c&&u;else u=o,c=null,d="xmlns"===o&&"";a.localName=u,!1!==d&&(null==r&&(r={},VS(n,n={})),n[d]=r[d]=l,a.uri=SS.XMLNS,t.startPrefixMapping(d,l))}for(s=e.length;s--;){(c=(a=e[s]).prefix)&&("xml"===c&&(a.uri=SS.XML),"xmlns"!==c&&(a.uri=n[c||""]))}var h;(h=i.indexOf(":"))>0?(c=e.prefix=i.slice(0,h),u=e.localName=i.slice(h+1)):(c=null,u=e.localName=i);var p=e.uri=n[c||""];if(t.startElement(p,u,i,e),!e.closed)return e.currentNSMap=n,e.localNSMap=r,!0;if(t.endElement(p,u,i),r)for(c in r)Object.prototype.hasOwnProperty.call(r,c)&&t.endPrefixMapping(c)}function qS(e,t,n,i,r){if(/^(?:script|textarea)$/i.test(n)){var s=e.indexOf("</"+n+">",t),a=e.substring(t+1,s);if(/[&<]/.test(a))return/^script$/i.test(n)?(r.characters(a,0,a.length),s):(a=a.replace(/&#?\w+;/g,i),r.characters(a,0,a.length),s)}return t+1}function HS(e,t,n,i){var r=i[n];return null==r&&((r=e.lastIndexOf("</"+n+">"))<t&&(r=e.lastIndexOf("</"+n)),i[n]=r),r<t}function VS(e,t){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])}function $S(e,t,n,i){if("-"===e.charAt(t+2))return"-"===e.charAt(t+3)?(r=e.indexOf("--\x3e",t+4))>t?(n.comment(e,t+4,r-t-4),r+3):(i.error("Unclosed comment"),-1):-1;if("CDATA["==e.substr(t+3,6)){var r=e.indexOf("]]>",t+9);return n.startCDATA(),n.characters(e,t+9,r-t-9),n.endCDATA(),r+3}var s=function(e,t){var n,i=[],r=/'[^']+'|"[^"]+"|[^\s<>\/=]+=?|(\/?\s*>|<)/g;r.lastIndex=t,r.exec(e);for(;n=r.exec(e);)if(i.push(n),n[1])return i}(e,t),a=s.length;if(a>1&&/!doctype/i.test(s[0][0])){var o=s[1][0],l=!1,c=!1;a>3&&(/^public$/i.test(s[2][0])?(l=s[3][0],c=a>4&&s[4][0]):/^system$/i.test(s[2][0])&&(c=s[3][0]));var u=s[a-1];return n.startDTD(o,l,c),n.endDTD(),u.index+u[0].length}return-1}function WS(e,t,n){var i=e.indexOf("?>",t);if(i){var r=e.substring(t,i).match(/^<\?(\S*)\s*([\s\S]*?)\s*$/);return r?(r[0].length,n.processingInstruction(r[1],r[2]),i+2):-1}return-1}function zS(){this.attributeNames={}}MS.prototype=new Error,MS.prototype.name=MS.name,FS.prototype={parse:function(e,t,n){var i=this.domBuilder;i.startDocument(),VS(t,t={}),function(e,t,n,i,r){function s(e){if(e>65535){var t=55296+((e-=65536)>>10),n=56320+(1023&e);return String.fromCharCode(t,n)}return String.fromCharCode(e)}function a(e){var t=e.slice(1,-1);return Object.hasOwnProperty.call(n,t)?n[t]:"#"===t.charAt(0)?s(parseInt(t.substr(1).replace("x","0x"))):(r.error("entity not found:"+e),e)}function o(t){if(t>m){var n=e.substring(m,t).replace(/&#?\w+;/g,a);h&&l(m),i.characters(n,0,t-m),m=t}}function l(t,n){for(;t>=u&&(n=d.exec(e));)c=n.index,u=c+n[0].length,h.lineNumber++;h.columnNumber=t-c+1}var c=0,u=0,d=/.*(?:\r\n?|\n)|.*$/g,h=i.locator,p=[{currentNSMap:t}],f={},m=0;for(;;){try{var g=e.indexOf("<",m);if(g<0){if(!e.substr(m).match(/^\s*$/)){var y=i.doc,_=y.createTextNode(e.substr(m));y.appendChild(_),i.currentElement=_}return}switch(g>m&&o(g),e.charAt(g+1)){case"/":var v=e.indexOf(">",g+3),b=e.substring(g+2,v).replace(/[ \t\n\r]+$/g,""),T=p.pop();v<0?(b=e.substring(g+2).replace(/[\s<].*/,""),r.error("end tag name: "+b+" is not complete:"+T.tagName),v=g+1+b.length):b.match(/\s</)&&(b=b.replace(/[\s<].*/,""),r.error("end tag name: "+b+" maybe not complete"),v=g+1+b.length);var E=T.localNSMap,w=T.tagName==b;if(w||T.tagName&&T.tagName.toLowerCase()==b.toLowerCase()){if(i.endElement(T.uri,T.localName,b),E)for(var S in E)Object.prototype.hasOwnProperty.call(E,S)&&i.endPrefixMapping(S);w||r.fatalError("end tag name: "+b+" is not match the current start tagName:"+T.tagName)}else p.push(T);v++;break;case"?":h&&l(g),v=WS(e,g,i);break;case"!":h&&l(g),v=$S(e,g,i,r);break;default:h&&l(g);var C=new zS,I=p[p.length-1].currentNSMap,x=(v=BS(e,g,C,I,a,r),C.length);if(!C.closed&&HS(e,v,C.tagName,f)&&(C.closed=!0,n.nbsp||r.warning("unclosed xml attribute")),h&&x){for(var k=US(h,{}),A=0;A<x;A++){var O=C[A];l(O.offset),O.locator=US(h,{})}i.locator=k,jS(C,i,I)&&p.push(C),i.locator=h}else jS(C,i,I)&&p.push(C);SS.isHTML(C.uri)&&!C.closed?v=qS(e,v,C.tagName,a,i):v++}}catch(fB){if(fB instanceof MS)throw fB;r.error("element parse error: "+fB),v=-1}v>m?m=v:o(Math.max(g,m)+1)}}(e,t,n,i,this.errorHandler),i.endDocument()}},zS.prototype={setTagName:function(e){if(!xS.test(e))throw new Error("invalid tagName:"+e);this.tagName=e},addValue:function(e,t,n){if(!xS.test(e))throw new Error("invalid attribute:"+e);this.attributeNames[e]=this.length,this[this.length++]={qName:e,value:t,offset:n}},length:0,getLocalName:function(e){return this[e].localName},getLocator:function(e){return this[e].locator},getQName:function(e){return this[e].qName},getURI:function(e){return this[e].uri},getValue:function(e){return this[e].value}},wS.XMLReader=FS,wS.ParseError=MS;var GS=ZE,KS=ES,XS=wS,YS=JE.DOMImplementation,QS=GS.NAMESPACE,JS=XS.ParseError,ZS=XS.XMLReader;function eC(e){return e.replace(/\r[\n\u0085]/g,"\n").replace(/[\r\u0085\u2028]/g,"\n")}function tC(e){this.options=e||{locator:{}}}function nC(){this.cdata=!1}function iC(e,t){t.lineNumber=e.lineNumber,t.columnNumber=e.columnNumber}function rC(e){if(e)return"\n@"+(e.systemId||"")+"#[line:"+e.lineNumber+",col:"+e.columnNumber+"]"}function sC(e,t,n){return"string"==typeof e?e.substr(t,n):e.length>=t+n||t?new java.lang.String(e,t,n)+"":e}function aC(e,t){e.currentElement?e.currentElement.appendChild(t):e.doc.appendChild(t)}tC.prototype.parseFromString=function(e,t){var n=this.options,i=new ZS,r=n.domBuilder||new nC,s=n.errorHandler,a=n.locator,o=n.xmlns||{},l=/\/x?html?$/.test(t),c=l?KS.HTML_ENTITIES:KS.XML_ENTITIES;a&&r.setDocumentLocator(a),i.errorHandler=function(e,t,n){if(!e){if(t instanceof nC)return t;e=t}var i={},r=e instanceof Function;function s(t){var s=e[t];!s&&r&&(s=2==e.length?function(n){e(t,n)}:e),i[t]=s&&function(e){s("[xmldom "+t+"]\t"+e+rC(n))}||function(){}}return n=n||{},s("warning"),s("error"),s("fatalError"),i}(s,r,a),i.domBuilder=n.domBuilder||r,l&&(o[""]=QS.HTML),o.xml=o.xml||QS.XML;var u=n.normalizeLineEndings||eC;return e&&"string"==typeof e?i.parse(u(e),o,c):i.errorHandler.error("invalid doc source"),r.doc},nC.prototype={startDocument:function(){this.doc=(new YS).createDocument(null,null,null),this.locator&&(this.doc.documentURI=this.locator.systemId)},startElement:function(e,t,n,i){var r=this.doc,s=r.createElementNS(e,n||t),a=i.length;aC(this,s),this.currentElement=s,this.locator&&iC(this.locator,s);for(var o=0;o<a;o++){e=i.getURI(o);var l=i.getValue(o),c=(n=i.getQName(o),r.createAttributeNS(e,n));this.locator&&iC(i.getLocator(o),c),c.value=c.nodeValue=l,s.setAttributeNode(c)}},endElement:function(e,t,n){var i=this.currentElement;i.tagName,this.currentElement=i.parentNode},startPrefixMapping:function(e,t){},endPrefixMapping:function(e){},processingInstruction:function(e,t){var n=this.doc.createProcessingInstruction(e,t);this.locator&&iC(this.locator,n),aC(this,n)},ignorableWhitespace:function(e,t,n){},characters:function(e,t,n){if(e=sC.apply(this,arguments)){if(this.cdata)var i=this.doc.createCDATASection(e);else i=this.doc.createTextNode(e);this.currentElement?this.currentElement.appendChild(i):/^\s*$/.test(e)&&this.doc.appendChild(i),this.locator&&iC(this.locator,i)}},skippedEntity:function(e){},endDocument:function(){this.doc.normalize()},setDocumentLocator:function(e){(this.locator=e)&&(e.lineNumber=0)},comment:function(e,t,n){e=sC.apply(this,arguments);var i=this.doc.createComment(e);this.locator&&iC(this.locator,i),aC(this,i)},startCDATA:function(){this.cdata=!0},endCDATA:function(){this.cdata=!1},startDTD:function(e,t,n){var i=this.doc.implementation;if(i&&i.createDocumentType){var r=i.createDocumentType(e,t,n);this.locator&&iC(this.locator,r),aC(this,r),this.doc.doctype=r}},warning:function(e){console.warn("[xmldom warning]\t"+e,rC(this.locator))},error:function(e){console.error("[xmldom error]\t"+e,rC(this.locator))},fatalError:function(e){throw new JS(e,this.locator)}},"endDTD,startEntity,endEntity,attributeDecl,elementDecl,externalEntityDecl,internalEntityDecl,resolveEntity,getExternalSubset,notationDecl,unparsedEntityDecl".replace(/\w+/g,(function(e){nC.prototype[e]=function(){return null}})),TS.__DOMHandler=nC,TS.normalizeLineEndings=eC,TS.DOMParser=tC;var oC=TS.DOMParser;const lC=e=>!!e&&"object"==typeof e,cC=(...e)=>e.reduce(((e,t)=>("object"!=typeof t||Object.keys(t).forEach((n=>{Array.isArray(e[n])&&Array.isArray(t[n])?e[n]=e[n].concat(t[n]):lC(e[n])&&lC(t[n])?e[n]=cC(e[n],t[n]):e[n]=t[n]})),e)),{}),uC=e=>Object.keys(e).map((t=>e[t])),dC=e=>e.reduce(((e,t)=>e.concat(t)),[]),hC=e=>{if(!e.length)return[];const t=[];for(let n=0;n<e.length;n++)t.push(e[n]);return t};var pC="INVALID_NUMBER_OF_PERIOD",fC="DASH_EMPTY_MANIFEST",mC="DASH_INVALID_XML",gC="NO_BASE_URL",yC="SEGMENT_TIME_UNSPECIFIED",_C="UNSUPPORTED_UTC_TIMING_SCHEME";const vC=({baseUrl:e="",source:t="",range:n="",indexRange:i=""})=>{const r={uri:t,resolvedUri:YE(e||"",t)};if(n||i){const e=(n||i).split("-");let t,s=sT.BigInt?sT.BigInt(e[0]):parseInt(e[0],10),a=sT.BigInt?sT.BigInt(e[1]):parseInt(e[1],10);s<Number.MAX_SAFE_INTEGER&&"bigint"==typeof s&&(s=Number(s)),a<Number.MAX_SAFE_INTEGER&&"bigint"==typeof a&&(a=Number(a)),t="bigint"==typeof a||"bigint"==typeof s?sT.BigInt(a)-sT.BigInt(s)+sT.BigInt(1):a-s+1,"bigint"==typeof t&&t<Number.MAX_SAFE_INTEGER&&(t=Number(t)),r.byterange={length:t,offset:s}}return r},bC=e=>(e&&"number"!=typeof e&&(e=parseInt(e,10)),isNaN(e)?null:e),TC={static(e){const{duration:t,timescale:n=1,sourceDuration:i,periodDuration:r}=e,s=bC(e.endNumber),a=t/n;return"number"==typeof s?{start:0,end:s}:"number"==typeof r?{start:0,end:r/a}:{start:0,end:i/a}},dynamic(e){const{NOW:t,clientOffset:n,availabilityStartTime:i,timescale:r=1,duration:s,periodStart:a=0,minimumUpdatePeriod:o=0,timeShiftBufferDepth:l=1/0}=e,c=bC(e.endNumber),u=(t+n)/1e3,d=i+a,h=u+o-d,p=Math.ceil(h*r/s),f=Math.floor((u-d-l)*r/s),m=Math.floor((u-d)*r/s);return{start:Math.max(0,f),end:"number"==typeof c?c:Math.min(p,m)}}},EC=e=>{const{type:t,duration:n,timescale:i=1,periodDuration:r,sourceDuration:s}=e,{start:a,end:o}=TC[t](e),l=((e,t)=>{const n=[];for(let i=e;i<t;i++)n.push(i);return n})(a,o).map((e=>t=>{const{duration:n,timescale:i=1,periodStart:r,startNumber:s=1}=e;return{number:s+t,duration:n/i,timeline:r,time:t*n}})(e));if("static"===t){const e=l.length-1,t="number"==typeof r?r:s;l[e].duration=t-n/i*e}return l},wC=e=>{const{baseUrl:t,initialization:n={},sourceDuration:i,indexRange:r="",periodStart:s,presentationTime:a,number:o=0,duration:l}=e;if(!t)throw new Error(gC);const c=vC({baseUrl:t,source:n.sourceURL,range:n.range}),u=vC({baseUrl:t,source:t,indexRange:r});if(u.map=c,l){const t=EC(e);t.length&&(u.duration=t[0].duration,u.timeline=t[0].timeline)}else i&&(u.duration=i,u.timeline=s);return u.presentationTime=a||s,u.number=o,[u]},SC=(e,t,n)=>{const i=e.sidx.map?e.sidx.map:null,r=e.sidx.duration,s=e.timeline||0,a=e.sidx.byterange,o=a.offset+a.length,l=t.timescale,c=t.references.filter((e=>1!==e.referenceType)),u=[],d=e.endList?"static":"dynamic",h=e.sidx.timeline;let p,f=h,m=e.mediaSequence||0;p="bigint"==typeof t.firstOffset?sT.BigInt(o)+t.firstOffset:o+t.firstOffset;for(let g=0;g<c.length;g++){const e=t.references[g],a=e.referencedSize,o=e.subsegmentDuration;let c;c="bigint"==typeof p?p+sT.BigInt(a)-sT.BigInt(1):p+a-1;const y=wC({baseUrl:n,timescale:l,timeline:s,periodStart:h,presentationTime:f,number:m,duration:o,sourceDuration:r,indexRange:`${p}-${c}`,type:d})[0];i&&(y.map=i),u.push(y),p+="bigint"==typeof p?sT.BigInt(a):a,f+=o/l,m++}return e.segments=u,e},CC=["AUDIO","SUBTITLES"],IC=e=>{return(t=e,n=({timeline:e})=>e,uC(t.reduce(((e,t)=>(t.forEach((t=>{e[n(t)]=t})),e)),{}))).sort(((e,t)=>e.timeline>t.timeline?1:-1));var t,n},xC=e=>{let t=[];return function(e,t,n){t.forEach((function(t){for(var i in e.mediaGroups[t])for(var r in e.mediaGroups[t][i]){var s=e.mediaGroups[t][i][r];n(s,t,i,r)}}))}(e,CC,((e,n,i,r)=>{t=t.concat(e.playlists||[])})),t},kC=({playlist:e,mediaSequence:t})=>{e.mediaSequence=t,e.segments.forEach(((t,n)=>{t.number=e.mediaSequence+n}))},AC=({oldManifest:e,newManifest:t})=>{const n=e.playlists.concat(xC(e)),i=t.playlists.concat(xC(t));return t.timelineStarts=IC([e.timelineStarts,t.timelineStarts]),(({oldPlaylists:e,newPlaylists:t,timelineStarts:n})=>{t.forEach((t=>{t.discontinuitySequence=n.findIndex((function({timeline:e}){return e===t.timeline}));const i=((e,t)=>{for(let n=0;n<e.length;n++)if(e[n].attributes.NAME===t)return e[n];return null})(e,t.attributes.NAME);if(!i)return;if(t.sidx)return;const r=t.segments[0],s=i.segments.findIndex((function(e){return Math.abs(e.presentationTime-r.presentationTime)<.016666666666666666}));if(-1===s)return kC({playlist:t,mediaSequence:i.mediaSequence+i.segments.length}),t.segments[0].discontinuity=!0,t.discontinuityStarts.unshift(0),void((!i.segments.length&&t.timeline>i.timeline||i.segments.length&&t.timeline>i.segments[i.segments.length-1].timeline)&&t.discontinuitySequence--);i.segments[s].discontinuity&&!r.discontinuity&&(r.discontinuity=!0,t.discontinuityStarts.unshift(0),t.discontinuitySequence--),kC({playlist:t,mediaSequence:i.segments[s].number})}))})({oldPlaylists:n,newPlaylists:i,timelineStarts:t.timelineStarts}),t},OC=e=>e&&e.uri+"-"+(e=>{let t;return t="bigint"==typeof e.offset||"bigint"==typeof e.length?sT.BigInt(e.offset)+sT.BigInt(e.length)-sT.BigInt(1):e.offset+e.length-1,`${e.offset}-${t}`})(e.byterange),PC=e=>{const t=uC(e.reduce(((e,t)=>{const n=t.attributes.id+(t.attributes.lang||"");return e[n]?(t.segments&&(t.segments[0]&&(t.segments[0].discontinuity=!0),e[n].segments.push(...t.segments)),t.attributes.contentProtection&&(e[n].attributes.contentProtection=t.attributes.contentProtection)):(e[n]=t,e[n].attributes.timelineStarts=[]),e[n].attributes.timelineStarts.push({start:t.attributes.periodStart,timeline:t.attributes.periodStart}),e}),{}));return t.map((e=>(e.discontinuityStarts=((e,t)=>e.reduce(((e,n,i)=>(n[t]&&e.push(i),e)),[]))(e.segments||[],"discontinuity"),e)))},LC=(e,t)=>{const n=OC(e.sidx),i=n&&t[n]&&t[n].sidx;return i&&SC(e,i,e.sidx.resolvedUri),e},NC=(e,t={})=>{if(!Object.keys(t).length)return e;for(const n in e)e[n]=LC(e[n],t);return e},DC=({attributes:e,segments:t,sidx:n,discontinuityStarts:i})=>{const r={attributes:{NAME:e.id,AUDIO:"audio",SUBTITLES:"subs",RESOLUTION:{width:e.width,height:e.height},CODECS:e.codecs,BANDWIDTH:e.bandwidth,"PROGRAM-ID":1},uri:"",endList:"static"===e.type,timeline:e.periodStart,resolvedUri:"",targetDuration:e.duration,discontinuityStarts:i,timelineStarts:e.timelineStarts,segments:t};return e.frameRate&&(r.attributes["FRAME-RATE"]=e.frameRate),e.contentProtection&&(r.contentProtection=e.contentProtection),n&&(r.sidx=n),r},RC=({attributes:e})=>"video/mp4"===e.mimeType||"video/webm"===e.mimeType||"video"===e.contentType,MC=({attributes:e})=>"audio/mp4"===e.mimeType||"audio/webm"===e.mimeType||"audio"===e.contentType,FC=({attributes:e})=>"text/vtt"===e.mimeType||"text"===e.contentType,UC=e=>e?Object.keys(e).reduce(((t,n)=>{const i=e[n];return t.concat(i.playlists)}),[]):[],BC=({dashPlaylists:e,locations:t,sidxMapping:n={},previousManifest:i,eventStream:r})=>{if(!e.length)return{};const{sourceDuration:s,type:a,suggestedPresentationDelay:o,minimumUpdatePeriod:l}=e[0].attributes,c=PC(e.filter(RC)).map(DC),u=PC(e.filter(MC)),d=PC(e.filter(FC)),h=e.map((e=>e.attributes.captionServices)).filter(Boolean),p={allowCache:!0,discontinuityStarts:[],segments:[],endList:!0,mediaGroups:{AUDIO:{},VIDEO:{},"CLOSED-CAPTIONS":{},SUBTITLES:{}},uri:"",duration:s,playlists:NC(c,n)};l>=0&&(p.minimumUpdatePeriod=1e3*l),t&&(p.locations=t),"dynamic"===a&&(p.suggestedPresentationDelay=o),r&&r.length>0&&(p.eventStream=r);const f=0===p.playlists.length,m=u.length?((e,t={},n=!1)=>{let i;const r=e.reduce(((e,r)=>{const s=r.attributes.role&&r.attributes.role.value||"",a=r.attributes.lang||"";let o=r.attributes.label||"main";if(a&&!r.attributes.label){const e=s?` (${s})`:"";o=`${r.attributes.lang}${e}`}e[o]||(e[o]={language:a,autoselect:!0,default:"main"===s,playlists:[],uri:""});const l=LC((({attributes:e,segments:t,sidx:n,mediaSequence:i,discontinuitySequence:r,discontinuityStarts:s},a)=>{const o={attributes:{NAME:e.id,BANDWIDTH:e.bandwidth,CODECS:e.codecs,"PROGRAM-ID":1},uri:"",endList:"static"===e.type,timeline:e.periodStart,resolvedUri:"",targetDuration:e.duration,discontinuitySequence:r,discontinuityStarts:s,timelineStarts:e.timelineStarts,mediaSequence:i,segments:t};return e.contentProtection&&(o.contentProtection=e.contentProtection),n&&(o.sidx=n),a&&(o.attributes.AUDIO="audio",o.attributes.SUBTITLES="subs"),o})(r,n),t);return e[o].playlists.push(l),void 0===i&&"main"===s&&(i=r,i.default=!0),e}),{});i||(r[Object.keys(r)[0]].default=!0);return r})(u,n,f):null,g=d.length?((e,t={})=>e.reduce(((e,n)=>{const i=n.attributes.label||n.attributes.lang||"text";return e[i]||(e[i]={language:i,default:!1,autoselect:!1,playlists:[],uri:""}),e[i].playlists.push(LC((({attributes:e,segments:t,mediaSequence:n,discontinuityStarts:i,discontinuitySequence:r})=>{void 0===t&&(t=[{uri:e.baseUrl,timeline:e.periodStart,resolvedUri:e.baseUrl||"",duration:e.sourceDuration,number:0}],e.duration=e.sourceDuration);const s={NAME:e.id,BANDWIDTH:e.bandwidth,"PROGRAM-ID":1};return e.codecs&&(s.CODECS=e.codecs),{attributes:s,uri:"",endList:"static"===e.type,timeline:e.periodStart,resolvedUri:e.baseUrl||"",targetDuration:e.duration,timelineStarts:e.timelineStarts,discontinuityStarts:i,discontinuitySequence:r,mediaSequence:n,segments:t}})(n),t)),e}),{}))(d,n):null,y=c.concat(UC(m),UC(g)),_=y.map((({timelineStarts:e})=>e));var v,b;return p.timelineStarts=IC(_),v=y,b=p.timelineStarts,v.forEach((e=>{e.mediaSequence=0,e.discontinuitySequence=b.findIndex((function({timeline:t}){return t===e.timeline})),e.segments&&e.segments.forEach(((e,t)=>{e.number=t}))})),m&&(p.mediaGroups.AUDIO.audio=m),g&&(p.mediaGroups.SUBTITLES.subs=g),h.length&&(p.mediaGroups["CLOSED-CAPTIONS"].cc=h.reduce(((e,t)=>t?(t.forEach((t=>{const{channel:n,language:i}=t;e[i]={autoselect:!1,default:!1,instreamId:n,language:i},t.hasOwnProperty("aspectRatio")&&(e[i].aspectRatio=t.aspectRatio),t.hasOwnProperty("easyReader")&&(e[i].easyReader=t.easyReader),t.hasOwnProperty("3D")&&(e[i]["3D"]=t["3D"])})),e):e),{})),i?AC({oldManifest:i,newManifest:p}):p},jC=(e,t,n)=>{const{NOW:i,clientOffset:r,availabilityStartTime:s,timescale:a=1,periodStart:o=0,minimumUpdatePeriod:l=0}=e,c=(i+r)/1e3+l-(s+o);return Math.ceil((c*a-t)/n)},qC=(e,t)=>{const{type:n,minimumUpdatePeriod:i=0,media:r="",sourceDuration:s,timescale:a=1,startNumber:o=1,periodStart:l}=e,c=[];let u=-1;for(let d=0;d<t.length;d++){const h=t[d],p=h.d,f=h.r||0,m=h.t||0;let g;if(u<0&&(u=m),m&&m>u&&(u=m),f<0){const o=d+1;g=o===t.length?"dynamic"===n&&i>0&&r.indexOf("$Number$")>0?jC(e,u,p):(s*a-u)/p:(t[o].t-u)/p}else g=f+1;const y=o+c.length+g;let _=o+c.length;for(;_<y;)c.push({number:_,duration:p/a,time:u,timeline:l}),u+=p,_++}return c},HC=/\$([A-z]*)(?:(%0)([0-9]+)d)?\$/g,VC=(e,t)=>e.replace(HC,(e=>(t,n,i,r)=>{if("$$"===t)return"$";if(void 0===e[n])return t;const s=""+e[n];return"RepresentationID"===n?s:(r=i?parseInt(r,10):1,s.length>=r?s:`${new Array(r-s.length+1).join("0")}${s}`)})(t)),$C=(e,t)=>{const n={RepresentationID:e.id,Bandwidth:e.bandwidth||0},{initialization:i={sourceURL:"",range:""}}=e,r=vC({baseUrl:e.baseUrl,source:VC(i.sourceURL,n),range:i.range}),s=((e,t)=>e.duration||t?e.duration?EC(e):qC(e,t):[{number:e.startNumber||1,duration:e.sourceDuration,time:0,timeline:e.periodStart}])(e,t);return s.map((t=>{n.Number=t.number,n.Time=t.time;const i=VC(e.media||"",n),s=e.timescale||1,a=e.presentationTimeOffset||0,o=e.periodStart+(t.time-a)/s;return{uri:i,timeline:t.timeline,duration:t.duration,resolvedUri:YE(e.baseUrl||"",i),map:r,number:t.number,presentationTime:o}}))},WC=(e,t)=>{const{duration:n,segmentUrls:i=[],periodStart:r}=e;if(!n&&!t||n&&t)throw new Error(yC);const s=i.map((t=>((e,t)=>{const{baseUrl:n,initialization:i={}}=e,r=vC({baseUrl:n,source:i.sourceURL,range:i.range}),s=vC({baseUrl:n,source:t.media,range:t.mediaRange});return s.map=r,s})(e,t)));let a;n&&(a=EC(e)),t&&(a=qC(e,t));const o=a.map(((t,n)=>{if(s[n]){const i=s[n],a=e.timescale||1,o=e.presentationTimeOffset||0;return i.timeline=t.timeline,i.duration=t.duration,i.number=t.number,i.presentationTime=r+(t.time-o)/a,i}})).filter((e=>e));return o},zC=({attributes:e,segmentInfo:t})=>{let n,i;t.template?(i=$C,n=cC(e,t.template)):t.base?(i=wC,n=cC(e,t.base)):t.list&&(i=WC,n=cC(e,t.list));const r={attributes:e};if(!i)return r;const s=i(n,t.segmentTimeline);if(n.duration){const{duration:e,timescale:t=1}=n;n.duration=e/t}else s.length?n.duration=s.reduce(((e,t)=>Math.max(e,Math.ceil(t.duration))),0):n.duration=0;return r.attributes=n,r.segments=s,t.base&&n.indexRange&&(r.sidx=s[0],r.segments=[]),r},GC=(e,t)=>hC(e.childNodes).filter((({tagName:e})=>e===t)),KC=e=>e.textContent.trim(),XC=e=>{const t=/P(?:(\d*)Y)?(?:(\d*)M)?(?:(\d*)D)?(?:T(?:(\d*)H)?(?:(\d*)M)?(?:([\d.]*)S)?)?/.exec(e);if(!t)return 0;const[n,i,r,s,a,o]=t.slice(1);return 31536e3*parseFloat(n||0)+2592e3*parseFloat(i||0)+86400*parseFloat(r||0)+3600*parseFloat(s||0)+60*parseFloat(a||0)+parseFloat(o||0)},YC={mediaPresentationDuration:e=>XC(e),availabilityStartTime(e){return/^\d+-\d+-\d+T\d+:\d+:\d+(\.\d+)?$/.test(t=e)&&(t+="Z"),Date.parse(t)/1e3;var t},minimumUpdatePeriod:e=>XC(e),suggestedPresentationDelay:e=>XC(e),type:e=>e,timeShiftBufferDepth:e=>XC(e),start:e=>XC(e),width:e=>parseInt(e,10),height:e=>parseInt(e,10),bandwidth:e=>parseInt(e,10),frameRate:e=>(e=>parseFloat(e.split("/").reduce(((e,t)=>e/t))))(e),startNumber:e=>parseInt(e,10),timescale:e=>parseInt(e,10),presentationTimeOffset:e=>parseInt(e,10),duration(e){const t=parseInt(e,10);return isNaN(t)?XC(e):t},d:e=>parseInt(e,10),t:e=>parseInt(e,10),r:e=>parseInt(e,10),presentationTime:e=>parseInt(e,10),DEFAULT:e=>e},QC=e=>e&&e.attributes?hC(e.attributes).reduce(((e,t)=>{const n=YC[t.name]||YC.DEFAULT;return e[t.name]=n(t.value),e}),{}):{},JC={"urn:uuid:1077efec-c0b2-4d02-ace3-3c1e52e2fb4b":"org.w3.clearkey","urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed":"com.widevine.alpha","urn:uuid:9a04f079-9840-4286-ab92-e65be0885f95":"com.microsoft.playready","urn:uuid:f239e769-efa3-4850-9c16-a903c6932efb":"com.adobe.primetime"},ZC=(e,t)=>t.length?dC(e.map((function(e){return t.map((function(t){return YE(e,KC(t))}))}))):e,eI=e=>{const t=GC(e,"SegmentTemplate")[0],n=GC(e,"SegmentList")[0],i=n&&GC(n,"SegmentURL").map((e=>cC({tag:"SegmentURL"},QC(e)))),r=GC(e,"SegmentBase")[0],s=n||t,a=s&&GC(s,"SegmentTimeline")[0],o=n||r||t,l=o&&GC(o,"Initialization")[0],c=t&&QC(t);c&&l?c.initialization=l&&QC(l):c&&c.initialization&&(c.initialization={sourceURL:c.initialization});const u={template:c,segmentTimeline:a&&GC(a,"S").map((e=>QC(e))),list:n&&cC(QC(n),{segmentUrls:i,initialization:QC(l)}),base:r&&cC(QC(r),{initialization:QC(l)})};return Object.keys(u).forEach((e=>{u[e]||delete u[e]})),u},tI=e=>dC(GC(e.node,"EventStream").map((t=>{const n=QC(t),i=n.schemeIdUri;return GC(t,"Event").map((t=>{const r=QC(t),s=r.presentationTime||0,a=n.timescale||1,o=r.duration||0,l=s/a+e.attributes.start;return{schemeIdUri:i,value:n.value,id:r.id,start:l,end:l+o/a,messageData:KC(t)||r.messageData,contentEncoding:n.contentEncoding,presentationTimeOffset:n.presentationTimeOffset||0}}))}))),nI=(e,t,n)=>i=>{const r=QC(i),s=ZC(t,GC(i,"BaseURL")),a=GC(i,"Role")[0],o={role:QC(a)};let l=cC(e,r,o);const c=GC(i,"Accessibility")[0],u=(e=>{if("urn:scte:dash:cc:cea-608:2015"===e.schemeIdUri)return("string"!=typeof e.value?[]:e.value.split(";")).map((e=>{let t,n;return n=e,/^CC\d=/.test(e)?[t,n]=e.split("="):/^CC\d$/.test(e)&&(t=e),{channel:t,language:n}}));if("urn:scte:dash:cc:cea-708:2015"===e.schemeIdUri)return("string"!=typeof e.value?[]:e.value.split(";")).map((e=>{const t={channel:void 0,language:void 0,aspectRatio:1,easyReader:0,"3D":0};if(/=/.test(e)){const[n,i=""]=e.split("=");t.channel=n,t.language=e,i.split(",").forEach((e=>{const[n,i]=e.split(":");"lang"===n?t.language=i:"er"===n?t.easyReader=Number(i):"war"===n?t.aspectRatio=Number(i):"3D"===n&&(t["3D"]=Number(i))}))}else t.language=e;return t.channel&&(t.channel="SERVICE"+t.channel),t}))})(QC(c));u&&(l=cC(l,{captionServices:u}));const d=GC(i,"Label")[0];if(d&&d.childNodes.length){const e=d.childNodes[0].nodeValue.trim();l=cC(l,{label:e})}const h=GC(i,"ContentProtection").reduce(((e,t)=>{const n=QC(t);n.schemeIdUri&&(n.schemeIdUri=n.schemeIdUri.toLowerCase());const i=JC[n.schemeIdUri];if(i){e[i]={attributes:n};const r=GC(t,"cenc:pssh")[0];if(r){const t=KC(r);e[i].pssh=t&&QE(t)}}return e}),{});Object.keys(h).length&&(l=cC(l,{contentProtection:h}));const p=eI(i),f=GC(i,"Representation"),m=cC(n,p);return dC(f.map(((e,t,n)=>i=>{const r=GC(i,"BaseURL"),s=ZC(t,r),a=cC(e,QC(i)),o=eI(i);return s.map((e=>({segmentInfo:cC(n,o),attributes:cC(a,{baseUrl:e})})))})(l,s,m)))},iI=(e,t)=>(n,i)=>{const r=ZC(t,GC(n.node,"BaseURL")),s=cC(e,{periodStart:n.attributes.start});"number"==typeof n.attributes.duration&&(s.periodDuration=n.attributes.duration);const a=GC(n.node,"AdaptationSet"),o=eI(n.node);return dC(a.map(nI(s,r,o)))},rI=e=>{if(""===e)throw new Error(fC);const t=new oC;let n,i;try{n=t.parseFromString(e,"application/xml"),i=n&&"MPD"===n.documentElement.tagName?n.documentElement:null}catch(fB){}if(!i||i&&i.getElementsByTagName("parsererror").length>0)throw new Error(mC);return i},sI=(e,t={})=>{const n=((e,t={})=>{const{manifestUri:n="",NOW:i=Date.now(),clientOffset:r=0}=t,s=GC(e,"Period");if(!s.length)throw new Error(pC);const a=GC(e,"Location"),o=QC(e),l=ZC([n],GC(e,"BaseURL"));o.type=o.type||"static",o.sourceDuration=o.mediaPresentationDuration||0,o.NOW=i,o.clientOffset=r,a.length&&(o.locations=a.map(KC));const c=[];return s.forEach(((e,t)=>{const n=QC(e),i=c[t-1];n.start=(({attributes:e,priorPeriodAttributes:t,mpdType:n})=>"number"==typeof e.start?e.start:t&&"number"==typeof t.start&&"number"==typeof t.duration?t.start+t.duration:t||"static"!==n?null:0)({attributes:n,priorPeriodAttributes:i?i.attributes:null,mpdType:o.type}),c.push({node:e,attributes:n})})),{locations:o.locations,representationInfo:dC(c.map(iI(o,l))),eventStream:dC(c.map(tI))}})(rI(e),t),i=n.representationInfo.map(zC);return BC({dashPlaylists:i,locations:n.locations,sidxMapping:t.sidxMapping,previousManifest:t.previousManifest,eventStream:n.eventStream})},aI=e=>(e=>{const t=GC(e,"UTCTiming")[0];if(!t)return null;const n=QC(t);switch(n.schemeIdUri){case"urn:mpeg:dash:utc:http-head:2014":case"urn:mpeg:dash:utc:http-head:2012":n.method="HEAD";break;case"urn:mpeg:dash:utc:http-xsdate:2014":case"urn:mpeg:dash:utc:http-iso:2014":case"urn:mpeg:dash:utc:http-xsdate:2012":case"urn:mpeg:dash:utc:http-iso:2012":n.method="GET";break;case"urn:mpeg:dash:utc:direct:2014":case"urn:mpeg:dash:utc:direct:2012":n.method="DIRECT",n.value=Date.parse(n.value);break;default:throw new Error(_C)}return n})(rI(e));var oI=Math.pow(2,32),lI=function(e){var t,n=new DataView(e.buffer,e.byteOffset,e.byteLength);return n.getBigUint64?(t=n.getBigUint64(0))<Number.MAX_SAFE_INTEGER?Number(t):t:n.getUint32(0)*oI+n.getUint32(4)},cI=function(e){var t=new DataView(e.buffer,e.byteOffset,e.byteLength),n={version:e[0],flags:new Uint8Array(e.subarray(1,4)),references:[],referenceId:t.getUint32(4),timescale:t.getUint32(8)},i=12;0===n.version?(n.earliestPresentationTime=t.getUint32(i),n.firstOffset=t.getUint32(i+4),i+=8):(n.earliestPresentationTime=lI(e.subarray(i)),n.firstOffset=lI(e.subarray(i+8)),i+=16),i+=2;var r=t.getUint16(i);for(i+=2;r>0;i+=12,r--)n.references.push({referenceType:(128&e[i])>>>7,referencedSize:2147483647&t.getUint32(i),subsegmentDuration:t.getUint32(i+4),startsWithSap:!!(128&e[i+8]),sapType:(112&e[i+8])>>>4,sapDeltaTime:268435455&t.getUint32(i+8)});return n};const uI=mb(cI);var dI=HE([73,68,51]),hI=function e(t,n){return void 0===n&&(n=0),(t=HE(t)).length-n<10||!KE(t,dI,{offset:n})?n:(n+=function(e,t){void 0===t&&(t=0);var n=(e=HE(e))[t+5],i=e[t+6]<<21|e[t+7]<<14|e[t+8]<<7|e[t+9];return(16&n)>>4?i+20:i+10}(t,n),e(t,n))},pI=function(e){return"string"==typeof e?GE(e):e},fI=function e(t,n,i){void 0===i&&(i=!1),n=function(e){return Array.isArray(e)?e.map((function(e){return pI(e)})):[pI(e)]}(n),t=HE(t);var r=[];if(!n.length)return r;for(var s=0;s<t.length;){var a=(t[s]<<24|t[s+1]<<16|t[s+2]<<8|t[s+3])>>>0,o=t.subarray(s+4,s+8);if(0===a)break;var l=s+a;if(l>t.length){if(i)break;l=t.length}var c=t.subarray(s+8,l);KE(o,n[0])&&(1===n.length?r.push(c):r.push.apply(r,e(c,n.slice(1),i))),s=l}return r},mI={EBML:HE([26,69,223,163]),DocType:HE([66,130]),Segment:HE([24,83,128,103]),SegmentInfo:HE([21,73,169,102]),Tracks:HE([22,84,174,107]),Track:HE([174]),TrackNumber:HE([215]),DefaultDuration:HE([35,227,131]),TrackEntry:HE([174]),TrackType:HE([131]),FlagDefault:HE([136]),CodecID:HE([134]),CodecPrivate:HE([99,162]),VideoTrack:HE([224]),AudioTrack:HE([225]),Cluster:HE([31,67,182,117]),Timestamp:HE([231]),TimestampScale:HE([42,215,177]),BlockGroup:HE([160]),BlockDuration:HE([155]),Block:HE([161]),SimpleBlock:HE([163])},gI=[128,64,32,16,8,4,2,1],yI=function(e,t,n,i){void 0===n&&(n=!0),void 0===i&&(i=!1);var r=function(e){for(var t=1,n=0;n<gI.length&&!(e&gI[n]);n++)t++;return t}(e[t]),s=e.subarray(t,t+r);return n&&((s=Array.prototype.slice.call(e,t,t+r))[0]^=gI[r-1]),{length:r,value:WE(s,{signed:i}),bytes:s}},_I=function e(t){return"string"==typeof t?t.match(/.{1,2}/g).map((function(t){return e(t)})):"number"==typeof t?zE(t):t},vI=function e(t,n,i){if(i>=n.length)return n.length;var r=yI(n,i,!1);if(KE(t.bytes,r.bytes))return i;var s=yI(n,i+r.length);return e(t,n,i+s.length+s.value+r.length)},bI=function e(t,n){n=function(e){return Array.isArray(e)?e.map((function(e){return _I(e)})):[_I(e)]}(n),t=HE(t);var i=[];if(!n.length)return i;for(var r=0;r<t.length;){var s=yI(t,r,!1),a=yI(t,r+s.length),o=r+s.length+a.length;127===a.value&&(a.value=vI(s,t,o),a.value!==t.length&&(a.value-=o));var l=o+a.value>t.length?t.length:o+a.value,c=t.subarray(o,l);KE(n[0],s.bytes)&&(1===n.length?i.push(c):i=i.concat(e(c,n.slice(1)))),r+=s.length+a.length+c.length}return i},TI=HE([0,0,0,1]),EI=HE([0,0,1]),wI=HE([0,0,3]),SI=function(e){for(var t=[],n=1;n<e.length-2;)KE(e.subarray(n,n+3),wI)&&(t.push(n+2),n++),n++;if(0===t.length)return e;var i=e.length-t.length,r=new Uint8Array(i),s=0;for(n=0;n<i;s++,n++)s===t[0]&&(s++,t.shift()),r[n]=e[s];return r},CI=function(e,t,n,i){void 0===i&&(i=1/0),e=HE(e),n=[].concat(n);for(var r,s=0,a=0;s<e.length&&(a<i||r);){var o=void 0;if(KE(e.subarray(s),TI)?o=4:KE(e.subarray(s),EI)&&(o=3),o){if(a++,r)return SI(e.subarray(r,s));var l=void 0;"h264"===t?l=31&e[s+o]:"h265"===t&&(l=e[s+o]>>1&63),-1!==n.indexOf(l)&&(r=s+o),s+=o+("h264"===t?1:2)}else s++}return e.subarray(0,0)},II={webm:HE([119,101,98,109]),matroska:HE([109,97,116,114,111,115,107,97]),flac:HE([102,76,97,67]),ogg:HE([79,103,103,83]),ac3:HE([11,119]),riff:HE([82,73,70,70]),avi:HE([65,86,73]),wav:HE([87,65,86,69]),"3gp":HE([102,116,121,112,51,103]),mp4:HE([102,116,121,112]),fmp4:HE([115,116,121,112]),mov:HE([102,116,121,112,113,116]),moov:HE([109,111,111,118]),moof:HE([109,111,111,102])},xI={aac:function(e){var t=hI(e);return KE(e,[255,16],{offset:t,mask:[255,22]})},mp3:function(e){var t=hI(e);return KE(e,[255,2],{offset:t,mask:[255,6]})},webm:function(e){var t=bI(e,[mI.EBML,mI.DocType])[0];return KE(t,II.webm)},mkv:function(e){var t=bI(e,[mI.EBML,mI.DocType])[0];return KE(t,II.matroska)},mp4:function(e){return!xI["3gp"](e)&&!xI.mov(e)&&(!(!KE(e,II.mp4,{offset:4})&&!KE(e,II.fmp4,{offset:4}))||(!(!KE(e,II.moof,{offset:4})&&!KE(e,II.moov,{offset:4}))||void 0))},mov:function(e){return KE(e,II.mov,{offset:4})},"3gp":function(e){return KE(e,II["3gp"],{offset:4})},ac3:function(e){var t=hI(e);return KE(e,II.ac3,{offset:t})},ts:function(e){if(e.length<189&&e.length>=1)return 71===e[0];for(var t=0;t+188<e.length&&t<188;){if(71===e[t]&&71===e[t+188])return!0;t+=1}return!1},flac:function(e){var t=hI(e);return KE(e,II.flac,{offset:t})},ogg:function(e){return KE(e,II.ogg)},avi:function(e){return KE(e,II.riff)&&KE(e,II.avi,{offset:8})},wav:function(e){return KE(e,II.riff)&&KE(e,II.wav,{offset:8})},h264:function(e){return function(e,t,n){return CI(e,"h264",t,n)}(e,7,3).length},h265:function(e){return function(e,t,n){return CI(e,"h265",t,n)}(e,[32,33],3).length}},kI=Object.keys(xI).filter((function(e){return"ts"!==e&&"h264"!==e&&"h265"!==e})).concat(["ts","h264","h265"]);kI.forEach((function(e){var t=xI[e];xI[e]=function(e){return t(HE(e))}}));var AI,OI,PI,LI,NI=xI,DI=function(e){e=HE(e);for(var t=0;t<kI.length;t++){var n=kI[t];if(NI[n](e))return n}return""},RI=9e4;var MI=RI,FI=(AI=function(e){return e*RI},OI=function(e,t){return e*t},PI=function(e){return e/RI},LI=function(e,t){return e/t},"8.3.0");const UI={},BI=function(e,t){return UI[e]=UI[e]||[],t&&(UI[e]=UI[e].concat(t)),UI[e]},jI=function(e,t){const n=BI(e).indexOf(t);return!(n<=-1)&&(UI[e]=UI[e].slice(),UI[e].splice(n,1),!0)},qI={prefixed:!0},HI=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror","fullscreen"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror","-webkit-full-screen"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror","-moz-full-screen"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError","-ms-fullscreen"]],VI=HI[0];let $I;for(let mB=0;mB<HI.length;mB++)if(HI[mB][1]in dT){$I=HI[mB];break}if($I){for(let gB=0;gB<$I.length;gB++)qI[VI[gB]]=$I[gB];qI.prefixed=$I[0]!==VI[0]}let WI=[];const zI=function e(t){let n,i="info";const r=function(...e){n("log",i,e)};return n=((e,t)=>(n,i,r)=>{const s=t.levels[i],a=new RegExp(`^(${s})$`);if("log"!==n&&r.unshift(n.toUpperCase()+":"),r.unshift(e+":"),WI){WI.push([].concat(r));const e=WI.length-1e3;WI.splice(0,e>0?e:0)}if(!sT.console)return;let o=sT.console[n];o||"debug"!==n||(o=sT.console.info||sT.console.log),o&&s&&a.test(n)&&o[Array.isArray(r)?"apply":"call"](sT.console,r)})(t,r),r.createLogger=n=>e(t+": "+n),r.levels={all:"debug|log|warn|error",off:"",debug:"debug|log|warn|error",info:"log|warn|error",warn:"warn|error",error:"error",DEFAULT:i},r.level=e=>{if("string"==typeof e){if(!r.levels.hasOwnProperty(e))throw new Error(`"${e}" in not a valid log level`);i=e}return i},(r.history=()=>WI?[].concat(WI):[]).filter=e=>(WI||[]).filter((t=>new RegExp(`.*${e}.*`).test(t[0]))),r.history.clear=()=>{WI&&(WI.length=0)},r.history.disable=()=>{null!==WI&&(WI.length=0,WI=null)},r.history.enable=()=>{null===WI&&(WI=[])},r.error=(...e)=>n("error",i,e),r.warn=(...e)=>n("warn",i,e),r.debug=(...e)=>n("debug",i,e),r}("VIDEOJS"),GI=zI.createLogger,KI=Object.prototype.toString,XI=function(e){return JI(e)?Object.keys(e):[]};function YI(e,t){XI(e).forEach((n=>t(e[n],n)))}function QI(e,t,n=0){return XI(e).reduce(((n,i)=>t(n,e[i],i)),n)}function JI(e){return!!e&&"object"==typeof e}function ZI(e){return JI(e)&&"[object Object]"===KI.call(e)&&e.constructor===Object}function ex(...e){const t={};return e.forEach((e=>{e&&YI(e,((e,n)=>{ZI(e)?(ZI(t[n])||(t[n]={}),t[n]=ex(t[n],e)):t[n]=e}))})),t}function tx(e,t,n,i=!0){const r=n=>Object.defineProperty(e,t,{value:n,enumerable:!0,writable:!0}),s={configurable:!0,enumerable:!0,get(){const e=n();return r(e),e}};return i&&(s.set=r),Object.defineProperty(e,t,s)}var nx=Object.freeze({__proto__:null,each:YI,reduce:QI,isObject:JI,isPlain:ZI,merge:ex,defineLazyProperty:tx});let ix,rx=!1,sx=null,ax=!1,ox=!1,lx=!1,cx=!1,ux=!1,dx=null,hx=null,px=null,fx=!1,mx=!1,gx=!1,yx=!1;const _x=Boolean(Sx()&&("ontouchstart"in sT||sT.navigator.maxTouchPoints||sT.DocumentTouch&&sT.document instanceof sT.DocumentTouch)),vx=sT.navigator&&sT.navigator.userAgentData;if(vx&&(ax="Android"===vx.platform,lx=Boolean(vx.brands.find((e=>"Microsoft Edge"===e.brand))),cx=Boolean(vx.brands.find((e=>"Chromium"===e.brand))),ux=!lx&&cx,dx=hx=(vx.brands.find((e=>"Chromium"===e.brand))||{}).version||null,mx="Windows"===vx.platform),!cx){const yB=sT.navigator&&sT.navigator.userAgent||"";rx=/iPod/i.test(yB),sx=function(){const e=yB.match(/OS (\d+)_/i);return e&&e[1]?e[1]:null}(),ax=/Android/i.test(yB),ix=function(){const e=yB.match(/Android (\d+)(?:\.(\d+))?(?:\.(\d+))*/i);if(!e)return null;const t=e[1]&&parseFloat(e[1]),n=e[2]&&parseFloat(e[2]);return t&&n?parseFloat(e[1]+"."+e[2]):t||null}(),ox=/Firefox/i.test(yB),lx=/Edg/i.test(yB),cx=/Chrome/i.test(yB)||/CriOS/i.test(yB),ux=!lx&&cx,dx=hx=function(){const e=yB.match(/(Chrome|CriOS)\/(\d+)/);return e&&e[2]?parseFloat(e[2]):null}(),px=function(){const e=/MSIE\s(\d+)\.\d/.exec(yB);let t=e&&parseFloat(e[1]);return!t&&/Trident\/7.0/i.test(yB)&&/rv:11.0/.test(yB)&&(t=11),t}(),fx=/Safari/i.test(yB)&&!ux&&!ax&&!lx,mx=/Windows/i.test(yB),gx=/iPad/i.test(yB)||fx&&_x&&!/iPhone/i.test(yB),yx=/iPhone/i.test(yB)&&!gx}const bx=yx||gx||rx,Tx=(fx||bx)&&!ux;var Ex=Object.freeze({__proto__:null,get IS_IPOD(){return rx},get IOS_VERSION(){return sx},get IS_ANDROID(){return ax},get ANDROID_VERSION(){return ix},get IS_FIREFOX(){return ox},get IS_EDGE(){return lx},get IS_CHROMIUM(){return cx},get IS_CHROME(){return ux},get CHROMIUM_VERSION(){return dx},get CHROME_VERSION(){return hx},get IE_VERSION(){return px},get IS_SAFARI(){return fx},get IS_WINDOWS(){return mx},get IS_IPAD(){return gx},get IS_IPHONE(){return yx},TOUCH_ENABLED:_x,IS_IOS:bx,IS_ANY_SAFARI:Tx});function wx(e){return"string"==typeof e&&Boolean(e.trim())}function Sx(){return dT===sT.document}function Cx(e){return JI(e)&&1===e.nodeType}function Ix(){try{return sT.parent!==sT.self}catch(e){return!0}}function xx(e){return function(t,n){if(!wx(t))return dT[e](null);wx(n)&&(n=dT.querySelector(n));const i=Cx(n)?n:dT;return i[e]&&i[e](t)}}function kx(e="div",t={},n={},i){const r=dT.createElement(e);return Object.getOwnPropertyNames(t).forEach((function(e){const n=t[e];"textContent"===e?Ax(r,n):r[e]===n&&"tabIndex"!==e||(r[e]=n)})),Object.getOwnPropertyNames(n).forEach((function(e){r.setAttribute(e,n[e])})),i&&Kx(r,i),r}function Ax(e,t){return void 0===e.textContent?e.innerText=t:e.textContent=t,e}function Ox(e,t){t.firstChild?t.insertBefore(e,t.firstChild):t.appendChild(e)}function Px(e,t){return function(e){if(e.indexOf(" ")>=0)throw new Error("class has illegal whitespace characters")}(t),e.classList.contains(t)}function Lx(e,...t){return e.classList.add(...t.reduce(((e,t)=>e.concat(t.split(/\s+/))),[])),e}function Nx(e,...t){return e?(e.classList.remove(...t.reduce(((e,t)=>e.concat(t.split(/\s+/))),[])),e):(zI.warn("removeClass was called with an element that doesn't exist"),null)}function Dx(e,t,n){return"function"==typeof n&&(n=n(e,t)),"boolean"!=typeof n&&(n=void 0),t.split(/\s+/).forEach((t=>e.classList.toggle(t,n))),e}function Rx(e,t){Object.getOwnPropertyNames(t).forEach((function(n){const i=t[n];null==i||!1===i?e.removeAttribute(n):e.setAttribute(n,!0===i?"":i)}))}function Mx(e){const t={},n=",autoplay,controls,playsinline,loop,muted,default,defaultMuted,";if(e&&e.attributes&&e.attributes.length>0){const i=e.attributes;for(let r=i.length-1;r>=0;r--){const s=i[r].name;let a=i[r].value;"boolean"!=typeof e[s]&&-1===n.indexOf(","+s+",")||(a=null!==a),t[s]=a}}return t}function Fx(e,t){return e.getAttribute(t)}function Ux(e,t,n){e.setAttribute(t,n)}function Bx(e,t){e.removeAttribute(t)}function jx(){dT.body.focus(),dT.onselectstart=function(){return!1}}function qx(){dT.onselectstart=function(){return!0}}function Hx(e){if(e&&e.getBoundingClientRect&&e.parentNode){const t=e.getBoundingClientRect(),n={};return["bottom","height","left","right","top","width"].forEach((e=>{void 0!==t[e]&&(n[e]=t[e])})),n.height||(n.height=parseFloat(Zx(e,"height"))),n.width||(n.width=parseFloat(Zx(e,"width"))),n}}function Vx(e){if(!e||e&&!e.offsetParent)return{left:0,top:0,width:0,height:0};const t=e.offsetWidth,n=e.offsetHeight;let i=0,r=0;for(;e.offsetParent&&e!==dT[qI.fullscreenElement];)i+=e.offsetLeft,r+=e.offsetTop,e=e.offsetParent;return{left:i,top:r,width:t,height:n}}function $x(e,t){const n={x:0,y:0};if(bx){let t=e;for(;t&&"html"!==t.nodeName.toLowerCase();){const e=Zx(t,"transform");if(/^matrix/.test(e)){const t=e.slice(7,-1).split(/,\s/).map(Number);n.x+=t[4],n.y+=t[5]}else if(/^matrix3d/.test(e)){const t=e.slice(9,-1).split(/,\s/).map(Number);n.x+=t[12],n.y+=t[13]}t=t.parentNode}}const i={},r=Vx(t.target),s=Vx(e),a=s.width,o=s.height;let l=t.offsetY-(s.top-r.top),c=t.offsetX-(s.left-r.left);return t.changedTouches&&(c=t.changedTouches[0].pageX-s.left,l=t.changedTouches[0].pageY+s.top,bx&&(c-=n.x,l-=n.y)),i.y=1-Math.max(0,Math.min(1,l/o)),i.x=Math.max(0,Math.min(1,c/a)),i}function Wx(e){return JI(e)&&3===e.nodeType}function zx(e){for(;e.firstChild;)e.removeChild(e.firstChild);return e}function Gx(e){return"function"==typeof e&&(e=e()),(Array.isArray(e)?e:[e]).map((e=>("function"==typeof e&&(e=e()),Cx(e)||Wx(e)?e:"string"==typeof e&&/\S/.test(e)?dT.createTextNode(e):void 0))).filter((e=>e))}function Kx(e,t){return Gx(t).forEach((t=>e.appendChild(t))),e}function Xx(e,t){return Kx(zx(e),t)}function Yx(e){return void 0===e.button&&void 0===e.buttons||(0===e.button&&void 0===e.buttons||("mouseup"===e.type&&0===e.button&&0===e.buttons||0===e.button&&1===e.buttons))}const Qx=xx("querySelector"),Jx=xx("querySelectorAll");function Zx(e,t){if(!e||!t)return"";if("function"==typeof sT.getComputedStyle){let n;try{n=sT.getComputedStyle(e)}catch(fB){return""}return n?n.getPropertyValue(t)||n[t]:""}return""}var ek=Object.freeze({__proto__:null,isReal:Sx,isEl:Cx,isInFrame:Ix,createEl:kx,textContent:Ax,prependTo:Ox,hasClass:Px,addClass:Lx,removeClass:Nx,toggleClass:Dx,setAttributes:Rx,getAttributes:Mx,getAttribute:Fx,setAttribute:Ux,removeAttribute:Bx,blockTextSelection:jx,unblockTextSelection:qx,getBoundingClientRect:Hx,findPosition:Vx,getPointerPosition:$x,isTextNode:Wx,emptyEl:zx,normalizeContent:Gx,appendContent:Kx,insertContent:Xx,isSingleLeftClick:Yx,$:Qx,$$:Jx,computedStyle:Zx});let tk,nk=!1;const ik=function(){if(!1===tk.options.autoSetup)return;const e=Array.prototype.slice.call(dT.getElementsByTagName("video")),t=Array.prototype.slice.call(dT.getElementsByTagName("audio")),n=Array.prototype.slice.call(dT.getElementsByTagName("video-js")),i=e.concat(t,n);if(i&&i.length>0)for(let r=0,s=i.length;r<s;r++){const e=i[r];if(!e||!e.getAttribute){rk(1);break}if(void 0===e.player){null!==e.getAttribute("data-setup")&&tk(e)}}else nk||rk(1)};function rk(e,t){Sx()&&(t&&(tk=t),sT.setTimeout(ik,e))}function sk(){nk=!0,sT.removeEventListener("load",sk)}Sx()&&("complete"===dT.readyState?sk():sT.addEventListener("load",sk));const ak=function(e){const t=dT.createElement("style");return t.className=e,t},ok=function(e,t){e.styleSheet?e.styleSheet.cssText=t:e.textContent=t};var lk=new WeakMap;let ck,uk=3;function dk(){return uk++}function hk(e,t){if(!lk.has(e))return;const n=lk.get(e);0===n.handlers[t].length&&(delete n.handlers[t],e.removeEventListener?e.removeEventListener(t,n.dispatcher,!1):e.detachEvent&&e.detachEvent("on"+t,n.dispatcher)),Object.getOwnPropertyNames(n.handlers).length<=0&&(delete n.handlers,delete n.dispatcher,delete n.disabled),0===Object.getOwnPropertyNames(n).length&&lk.delete(e)}function pk(e,t,n,i){n.forEach((function(n){e(t,n,i)}))}function fk(e){if(e.fixed_)return e;function t(){return!0}function n(){return!1}if(!e||!e.isPropagationStopped||!e.isImmediatePropagationStopped){const i=e||sT.event;e={};for(const t in i)"layerX"!==t&&"layerY"!==t&&"keyLocation"!==t&&"webkitMovementX"!==t&&"webkitMovementY"!==t&&"path"!==t&&("returnValue"===t&&i.preventDefault||(e[t]=i[t]));if(e.target||(e.target=e.srcElement||dT),e.relatedTarget||(e.relatedTarget=e.fromElement===e.target?e.toElement:e.fromElement),e.preventDefault=function(){i.preventDefault&&i.preventDefault(),e.returnValue=!1,i.returnValue=!1,e.defaultPrevented=!0},e.defaultPrevented=!1,e.stopPropagation=function(){i.stopPropagation&&i.stopPropagation(),e.cancelBubble=!0,i.cancelBubble=!0,e.isPropagationStopped=t},e.isPropagationStopped=n,e.stopImmediatePropagation=function(){i.stopImmediatePropagation&&i.stopImmediatePropagation(),e.isImmediatePropagationStopped=t,e.stopPropagation()},e.isImmediatePropagationStopped=n,null!==e.clientX&&void 0!==e.clientX){const t=dT.documentElement,n=dT.body;e.pageX=e.clientX+(t&&t.scrollLeft||n&&n.scrollLeft||0)-(t&&t.clientLeft||n&&n.clientLeft||0),e.pageY=e.clientY+(t&&t.scrollTop||n&&n.scrollTop||0)-(t&&t.clientTop||n&&n.clientTop||0)}e.which=e.charCode||e.keyCode,null!==e.button&&void 0!==e.button&&(e.button=1&e.button?0:4&e.button?1:2&e.button?2:0)}return e.fixed_=!0,e}const mk=function(){if("boolean"!=typeof ck){ck=!1;try{const e=Object.defineProperty({},"passive",{get(){ck=!0}});sT.addEventListener("test",null,e),sT.removeEventListener("test",null,e)}catch(fB){}}return ck},gk=["touchstart","touchmove"];function yk(e,t,n){if(Array.isArray(t))return pk(yk,e,t,n);lk.has(e)||lk.set(e,{});const i=lk.get(e);if(i.handlers||(i.handlers={}),i.handlers[t]||(i.handlers[t]=[]),n.guid||(n.guid=dk()),i.handlers[t].push(n),i.dispatcher||(i.disabled=!1,i.dispatcher=function(t,n){if(i.disabled)return;t=fk(t);const r=i.handlers[t.type];if(r){const i=r.slice(0);for(let r=0,s=i.length;r<s&&!t.isImmediatePropagationStopped();r++)try{i[r].call(e,t,n)}catch(fB){zI.error(fB)}}}),1===i.handlers[t].length)if(e.addEventListener){let n=!1;mk()&&gk.indexOf(t)>-1&&(n={passive:!0}),e.addEventListener(t,i.dispatcher,n)}else e.attachEvent&&e.attachEvent("on"+t,i.dispatcher)}function _k(e,t,n){if(!lk.has(e))return;const i=lk.get(e);if(!i.handlers)return;if(Array.isArray(t))return pk(_k,e,t,n);const r=function(e,t){i.handlers[t]=[],hk(e,t)};if(void 0===t){for(const t in i.handlers)Object.prototype.hasOwnProperty.call(i.handlers||{},t)&&r(e,t);return}const s=i.handlers[t];if(s)if(n){if(n.guid)for(let e=0;e<s.length;e++)s[e].guid===n.guid&&s.splice(e--,1);hk(e,t)}else r(e,t)}function vk(e,t,n){const i=lk.has(e)?lk.get(e):{},r=e.parentNode||e.ownerDocument;if("string"==typeof t?t={type:t,target:e}:t.target||(t.target=e),t=fk(t),i.dispatcher&&i.dispatcher.call(e,t,n),r&&!t.isPropagationStopped()&&!0===t.bubbles)vk.call(null,r,t,n);else if(!r&&!t.defaultPrevented&&t.target&&t.target[t.type]){lk.has(t.target)||lk.set(t.target,{});const e=lk.get(t.target);t.target[t.type]&&(e.disabled=!0,"function"==typeof t.target[t.type]&&t.target[t.type](),e.disabled=!1)}return!t.defaultPrevented}function bk(e,t,n){if(Array.isArray(t))return pk(bk,e,t,n);const i=function(){_k(e,t,i),n.apply(this,arguments)};i.guid=n.guid=n.guid||dk(),yk(e,t,i)}function Tk(e,t,n){const i=function(){_k(e,t,i),n.apply(this,arguments)};i.guid=n.guid=n.guid||dk(),yk(e,t,i)}var Ek=Object.freeze({__proto__:null,fixEvent:fk,on:yk,off:_k,trigger:vk,one:bk,any:Tk});const wk=30,Sk=function(e,t,n){t.guid||(t.guid=dk());const i=t.bind(e);return i.guid=n?n+"_"+t.guid:t.guid,i},Ck=function(e,t){let n=sT.performance.now();return function(...i){const r=sT.performance.now();r-n>=t&&(e(...i),n=r)}},Ik=function(e,t,n,i=sT){let r;const s=function(){const s=this,a=arguments;let o=function(){r=null,o=null,n||e.apply(s,a)};!r&&n&&e.apply(s,a),i.clearTimeout(r),r=i.setTimeout(o,t)};return s.cancel=()=>{i.clearTimeout(r),r=null},s};var xk=Object.freeze({__proto__:null,UPDATE_REFRESH_INTERVAL:wk,bind_:Sk,throttle:Ck,debounce:Ik});let kk;class Ak{on(e,t){const n=this.addEventListener;this.addEventListener=()=>{},yk(this,e,t),this.addEventListener=n}off(e,t){_k(this,e,t)}one(e,t){const n=this.addEventListener;this.addEventListener=()=>{},bk(this,e,t),this.addEventListener=n}any(e,t){const n=this.addEventListener;this.addEventListener=()=>{},Tk(this,e,t),this.addEventListener=n}trigger(e){const t=e.type||e;"string"==typeof e&&(e={type:t}),e=fk(e),this.allowedEvents_[t]&&this["on"+t]&&this["on"+t](e),vk(this,e)}queueTrigger(e){kk||(kk=new Map);const t=e.type||e;let n=kk.get(this);n||(n=new Map,kk.set(this,n));const i=n.get(t);n.delete(t),sT.clearTimeout(i);const r=sT.setTimeout((()=>{n.delete(t),0===n.size&&(n=null,kk.delete(this)),this.trigger(e)}),0);n.set(t,r)}}Ak.prototype.allowedEvents_={},Ak.prototype.addEventListener=Ak.prototype.on,Ak.prototype.removeEventListener=Ak.prototype.off,Ak.prototype.dispatchEvent=Ak.prototype.trigger;const Ok=e=>"function"==typeof e.name?e.name():"string"==typeof e.name?e.name:e.name_?e.name_:e.constructor&&e.constructor.name?e.constructor.name:typeof e,Pk=e=>e instanceof Ak||!!e.eventBusEl_&&["on","one","off","trigger"].every((t=>"function"==typeof e[t])),Lk=e=>"string"==typeof e&&/\S/.test(e)||Array.isArray(e)&&!!e.length,Nk=(e,t,n)=>{if(!e||!e.nodeName&&!Pk(e))throw new Error(`Invalid target for ${Ok(t)}#${n}; must be a DOM node or evented object.`)},Dk=(e,t,n)=>{if(!Lk(e))throw new Error(`Invalid event type for ${Ok(t)}#${n}; must be a non-empty string or array.`)},Rk=(e,t,n)=>{if("function"!=typeof e)throw new Error(`Invalid listener for ${Ok(t)}#${n}; must be a function.`)},Mk=(e,t,n)=>{const i=t.length<3||t[0]===e||t[0]===e.eventBusEl_;let r,s,a;return i?(r=e.eventBusEl_,t.length>=3&&t.shift(),[s,a]=t):[r,s,a]=t,Nk(r,e,n),Dk(s,e,n),Rk(a,e,n),a=Sk(e,a),{isTargetingSelf:i,target:r,type:s,listener:a}},Fk=(e,t,n,i)=>{Nk(e,e,t),e.nodeName?Ek[t](e,n,i):e[t](n,i)},Uk={on(...e){const{isTargetingSelf:t,target:n,type:i,listener:r}=Mk(this,e,"on");if(Fk(n,"on",i,r),!t){const e=()=>this.off(n,i,r);e.guid=r.guid;const t=()=>this.off("dispose",e);t.guid=r.guid,Fk(this,"on","dispose",e),Fk(n,"on","dispose",t)}},one(...e){const{isTargetingSelf:t,target:n,type:i,listener:r}=Mk(this,e,"one");if(t)Fk(n,"one",i,r);else{const e=(...t)=>{this.off(n,i,e),r.apply(null,t)};e.guid=r.guid,Fk(n,"one",i,e)}},any(...e){const{isTargetingSelf:t,target:n,type:i,listener:r}=Mk(this,e,"any");if(t)Fk(n,"any",i,r);else{const e=(...t)=>{this.off(n,i,e),r.apply(null,t)};e.guid=r.guid,Fk(n,"any",i,e)}},off(e,t,n){if(!e||Lk(e))_k(this.eventBusEl_,e,t);else{const i=e,r=t;Nk(i,this,"off"),Dk(r,this,"off"),Rk(n,this,"off"),n=Sk(this,n),this.off("dispose",n),i.nodeName?(_k(i,r,n),_k(i,"dispose",n)):Pk(i)&&(i.off(r,n),i.off("dispose",n))}},trigger(e,t){Nk(this.eventBusEl_,this,"trigger");const n=e&&"string"!=typeof e?e.type:e;if(!Lk(n))throw new Error(`Invalid event type for ${Ok(this)}#trigger; must be a non-empty string or object with a type key that has a non-empty value.`);return vk(this.eventBusEl_,e,t)}};function Bk(e,t={}){const{eventBusKey:n}=t;if(n){if(!e[n].nodeName)throw new Error(`The eventBusKey "${n}" does not refer to an element.`);e.eventBusEl_=e[n]}else e.eventBusEl_=kx("span",{className:"vjs-event-bus"});return Object.assign(e,Uk),e.eventedCallbacks&&e.eventedCallbacks.forEach((e=>{e()})),e.on("dispose",(()=>{e.off(),[e,e.el_,e.eventBusEl_].forEach((function(e){e&&lk.has(e)&&lk.delete(e)})),sT.setTimeout((()=>{e.eventBusEl_=null}),0)})),e}const jk={state:{},setState(e){let t;return"function"==typeof e&&(e=e()),YI(e,((e,n)=>{this.state[n]!==e&&(t=t||{},t[n]={from:this.state[n],to:e}),this.state[n]=e})),t&&Pk(this)&&this.trigger({changes:t,type:"statechanged"}),t}};function qk(e,t){return Object.assign(e,jk),e.state=Object.assign({},e.state,t),"function"==typeof e.handleStateChanged&&Pk(e)&&e.on("statechanged",e.handleStateChanged),e}const Hk=function(e){return"string"!=typeof e?e:e.replace(/./,(e=>e.toLowerCase()))},Vk=function(e){return"string"!=typeof e?e:e.replace(/./,(e=>e.toUpperCase()))},$k=function(e,t){return Vk(e)===Vk(t)};var Wk=Object.freeze({__proto__:null,toLowerCase:Hk,toTitleCase:Vk,titleCaseEquals:$k});class zk{constructor(e,t,n){if(!e&&this.play?this.player_=e=this:this.player_=e,this.isDisposed_=!1,this.parentComponent_=null,this.options_=ex({},this.options_),t=this.options_=ex(this.options_,t),this.id_=t.id||t.el&&t.el.id,!this.id_){const t=e&&e.id&&e.id()||"no_player";this.id_=`${t}_component_${dk()}`}this.name_=t.name||null,t.el?this.el_=t.el:!1!==t.createEl&&(this.el_=this.createEl()),t.className&&this.el_&&t.className.split(" ").forEach((e=>this.addClass(e))),["on","off","one","any","trigger"].forEach((e=>{this[e]=void 0})),!1!==t.evented&&(Bk(this,{eventBusKey:this.el_?"el_":null}),this.handleLanguagechange=this.handleLanguagechange.bind(this),this.on(this.player_,"languagechange",this.handleLanguagechange)),qk(this,this.constructor.defaultState),this.children_=[],this.childIndex_={},this.childNameIndex_={},this.setTimeoutIds_=new Set,this.setIntervalIds_=new Set,this.rafIds_=new Set,this.namedRafs_=new Map,this.clearingTimersOnDispose_=!1,!1!==t.initChildren&&this.initChildren(),this.ready(n),!1!==t.reportTouchActivity&&this.enableTouchActivity()}on(e,t){}off(e,t){}one(e,t){}any(e,t){}trigger(e){}dispose(e={}){if(!this.isDisposed_){if(this.readyQueue_&&(this.readyQueue_.length=0),this.trigger({type:"dispose",bubbles:!1}),this.isDisposed_=!0,this.children_)for(let e=this.children_.length-1;e>=0;e--)this.children_[e].dispose&&this.children_[e].dispose();this.children_=null,this.childIndex_=null,this.childNameIndex_=null,this.parentComponent_=null,this.el_&&(this.el_.parentNode&&(e.restoreEl?this.el_.parentNode.replaceChild(e.restoreEl,this.el_):this.el_.parentNode.removeChild(this.el_)),this.el_=null),this.player_=null}}isDisposed(){return Boolean(this.isDisposed_)}player(){return this.player_}options(e){return e?(this.options_=ex(this.options_,e),this.options_):this.options_}el(){return this.el_}createEl(e,t,n){return kx(e,t,n)}localize(e,t,n=e){const i=this.player_.language&&this.player_.language(),r=this.player_.languages&&this.player_.languages(),s=r&&r[i],a=i&&i.split("-")[0],o=r&&r[a];let l=n;return s&&s[e]?l=s[e]:o&&o[e]&&(l=o[e]),t&&(l=l.replace(/\{(\d+)\}/g,(function(e,n){const i=t[n-1];let r=i;return void 0===i&&(r=e),r}))),l}handleLanguagechange(){}contentEl(){return this.contentEl_||this.el_}id(){return this.id_}name(){return this.name_}children(){return this.children_}getChildById(e){return this.childIndex_[e]}getChild(e){if(e)return this.childNameIndex_[e]}getDescendant(...e){e=e.reduce(((e,t)=>e.concat(t)),[]);let t=this;for(let n=0;n<e.length;n++)if(t=t.getChild(e[n]),!t||!t.getChild)return;return t}addChild(e,t={},n=this.children_.length){let i,r;if("string"==typeof e){r=Vk(e);const n=t.componentClass||r;t.name=r;const s=zk.getComponent(n);if(!s)throw new Error(`Component ${n} does not exist`);if("function"!=typeof s)return null;i=new s(this.player_||this,t)}else i=e;if(i.parentComponent_&&i.parentComponent_.removeChild(i),this.children_.splice(n,0,i),i.parentComponent_=this,"function"==typeof i.id&&(this.childIndex_[i.id()]=i),r=r||i.name&&Vk(i.name()),r&&(this.childNameIndex_[r]=i,this.childNameIndex_[Hk(r)]=i),"function"==typeof i.el&&i.el()){let e=null;this.children_[n+1]&&(this.children_[n+1].el_?e=this.children_[n+1].el_:Cx(this.children_[n+1])&&(e=this.children_[n+1])),this.contentEl().insertBefore(i.el(),e)}return i}removeChild(e){if("string"==typeof e&&(e=this.getChild(e)),!e||!this.children_)return;let t=!1;for(let i=this.children_.length-1;i>=0;i--)if(this.children_[i]===e){t=!0,this.children_.splice(i,1);break}if(!t)return;e.parentComponent_=null,this.childIndex_[e.id()]=null,this.childNameIndex_[Vk(e.name())]=null,this.childNameIndex_[Hk(e.name())]=null;const n=e.el();n&&n.parentNode===this.contentEl()&&this.contentEl().removeChild(e.el())}initChildren(){const e=this.options_.children;if(e){const t=this.options_,n=e=>{const n=e.name;let i=e.opts;if(void 0!==t[n]&&(i=t[n]),!1===i)return;!0===i&&(i={}),i.playerOptions=this.options_.playerOptions;const r=this.addChild(n,i);r&&(this[n]=r)};let i;const r=zk.getComponent("Tech");i=Array.isArray(e)?e:Object.keys(e),i.concat(Object.keys(this.options_).filter((function(e){return!i.some((function(t){return"string"==typeof t?e===t:e===t.name}))}))).map((t=>{let n,i;return"string"==typeof t?(n=t,i=e[n]||this.options_[n]||{}):(n=t.name,i=t),{name:n,opts:i}})).filter((e=>{const t=zk.getComponent(e.opts.componentClass||Vk(e.name));return t&&!r.isTech(t)})).forEach(n)}}buildCSSClass(){return""}ready(e,t=!1){if(e)return this.isReady_?void(t?e.call(this):this.setTimeout(e,1)):(this.readyQueue_=this.readyQueue_||[],void this.readyQueue_.push(e))}triggerReady(){this.isReady_=!0,this.setTimeout((function(){const e=this.readyQueue_;this.readyQueue_=[],e&&e.length>0&&e.forEach((function(e){e.call(this)}),this),this.trigger("ready")}),1)}$(e,t){return Qx(e,t||this.contentEl())}$$(e,t){return Jx(e,t||this.contentEl())}hasClass(e){return Px(this.el_,e)}addClass(...e){Lx(this.el_,...e)}removeClass(...e){Nx(this.el_,...e)}toggleClass(e,t){Dx(this.el_,e,t)}show(){this.removeClass("vjs-hidden")}hide(){this.addClass("vjs-hidden")}lockShowing(){this.addClass("vjs-lock-showing")}unlockShowing(){this.removeClass("vjs-lock-showing")}getAttribute(e){return Fx(this.el_,e)}setAttribute(e,t){Ux(this.el_,e,t)}removeAttribute(e){Bx(this.el_,e)}width(e,t){return this.dimension("width",e,t)}height(e,t){return this.dimension("height",e,t)}dimensions(e,t){this.width(e,!0),this.height(t)}dimension(e,t,n){if(void 0!==t)return null!==t&&t==t||(t=0),-1!==(""+t).indexOf("%")||-1!==(""+t).indexOf("px")?this.el_.style[e]=t:this.el_.style[e]="auto"===t?"":t+"px",void(n||this.trigger("componentresize"));if(!this.el_)return 0;const i=this.el_.style[e],r=i.indexOf("px");return-1!==r?parseInt(i.slice(0,r),10):parseInt(this.el_["offset"+Vk(e)],10)}currentDimension(e){let t=0;if("width"!==e&&"height"!==e)throw new Error("currentDimension only accepts width or height value");if(t=Zx(this.el_,e),t=parseFloat(t),0===t||isNaN(t)){const n=`offset${Vk(e)}`;t=this.el_[n]}return t}currentDimensions(){return{width:this.currentDimension("width"),height:this.currentDimension("height")}}currentWidth(){return this.currentDimension("width")}currentHeight(){return this.currentDimension("height")}focus(){this.el_.focus()}blur(){this.el_.blur()}handleKeyDown(e){this.player_&&(pT.isEventKey(e,"Tab")||e.stopPropagation(),this.player_.handleKeyDown(e))}handleKeyPress(e){this.handleKeyDown(e)}emitTapEvents(){let e=0,t=null;let n;this.on("touchstart",(function(i){1===i.touches.length&&(t={pageX:i.touches[0].pageX,pageY:i.touches[0].pageY},e=sT.performance.now(),n=!0)})),this.on("touchmove",(function(e){if(e.touches.length>1)n=!1;else if(t){const i=e.touches[0].pageX-t.pageX,r=e.touches[0].pageY-t.pageY;Math.sqrt(i*i+r*r)>10&&(n=!1)}}));const i=function(){n=!1};this.on("touchleave",i),this.on("touchcancel",i),this.on("touchend",(function(i){if(t=null,!0===n){sT.performance.now()-e<200&&(i.preventDefault(),this.trigger("tap"))}}))}enableTouchActivity(){if(!this.player()||!this.player().reportUserActivity)return;const e=Sk(this.player(),this.player().reportUserActivity);let t;this.on("touchstart",(function(){e(),this.clearInterval(t),t=this.setInterval(e,250)}));const n=function(n){e(),this.clearInterval(t)};this.on("touchmove",e),this.on("touchend",n),this.on("touchcancel",n)}setTimeout(e,t){var n;return e=Sk(this,e),this.clearTimersOnDispose_(),n=sT.setTimeout((()=>{this.setTimeoutIds_.has(n)&&this.setTimeoutIds_.delete(n),e()}),t),this.setTimeoutIds_.add(n),n}clearTimeout(e){return this.setTimeoutIds_.has(e)&&(this.setTimeoutIds_.delete(e),sT.clearTimeout(e)),e}setInterval(e,t){e=Sk(this,e),this.clearTimersOnDispose_();const n=sT.setInterval(e,t);return this.setIntervalIds_.add(n),n}clearInterval(e){return this.setIntervalIds_.has(e)&&(this.setIntervalIds_.delete(e),sT.clearInterval(e)),e}requestAnimationFrame(e){var t;return this.clearTimersOnDispose_(),e=Sk(this,e),t=sT.requestAnimationFrame((()=>{this.rafIds_.has(t)&&this.rafIds_.delete(t),e()})),this.rafIds_.add(t),t}requestNamedAnimationFrame(e,t){if(this.namedRafs_.has(e))return;this.clearTimersOnDispose_(),t=Sk(this,t);const n=this.requestAnimationFrame((()=>{t(),this.namedRafs_.has(e)&&this.namedRafs_.delete(e)}));return this.namedRafs_.set(e,n),e}cancelNamedAnimationFrame(e){this.namedRafs_.has(e)&&(this.cancelAnimationFrame(this.namedRafs_.get(e)),this.namedRafs_.delete(e))}cancelAnimationFrame(e){return this.rafIds_.has(e)&&(this.rafIds_.delete(e),sT.cancelAnimationFrame(e)),e}clearTimersOnDispose_(){this.clearingTimersOnDispose_||(this.clearingTimersOnDispose_=!0,this.one("dispose",(()=>{[["namedRafs_","cancelNamedAnimationFrame"],["rafIds_","cancelAnimationFrame"],["setTimeoutIds_","clearTimeout"],["setIntervalIds_","clearInterval"]].forEach((([e,t])=>{this[e].forEach(((e,n)=>this[t](n)))})),this.clearingTimersOnDispose_=!1})))}static registerComponent(e,t){if("string"!=typeof e||!e)throw new Error(`Illegal component name, "${e}"; must be a non-empty string.`);const n=zk.getComponent("Tech"),i=n&&n.isTech(t),r=zk===t||zk.prototype.isPrototypeOf(t.prototype);if(i||!r){let t;throw t=i?"techs must be registered using Tech.registerTech()":"must be a Component subclass",new Error(`Illegal component, "${e}"; ${t}.`)}e=Vk(e),zk.components_||(zk.components_={});const s=zk.getComponent("Player");if("Player"===e&&s&&s.players){const e=s.players,t=Object.keys(e);if(e&&t.length>0&&t.map((t=>e[t])).every(Boolean))throw new Error("Can not register Player component after player has been created.")}return zk.components_[e]=t,zk.components_[Hk(e)]=t,t}static getComponent(e){if(e&&zk.components_)return zk.components_[e]}}function Gk(e,t,n,i){return function(e,t,n){if("number"!=typeof t||t<0||t>n)throw new Error(`Failed to execute '${e}' on 'TimeRanges': The index provided (${t}) is non-numeric or out of bounds (0-${n}).`)}(e,i,n.length-1),n[i][t]}function Kk(e){let t;return t=void 0===e||0===e.length?{length:0,start(){throw new Error("This TimeRanges object is empty")},end(){throw new Error("This TimeRanges object is empty")}}:{length:e.length,start:Gk.bind(null,"start",0,e),end:Gk.bind(null,"end",1,e)},sT.Symbol&&sT.Symbol.iterator&&(t[sT.Symbol.iterator]=()=>(e||[]).values()),t}function Xk(e,t){return Array.isArray(e)?Kk(e):void 0===e||void 0===t?Kk():Kk([[e,t]])}zk.registerComponent("Component",zk);const Yk=function(e,t){e=e<0?0:e;let n=Math.floor(e%60),i=Math.floor(e/60%60),r=Math.floor(e/3600);const s=Math.floor(t/60%60),a=Math.floor(t/3600);return(isNaN(e)||e===1/0)&&(r=i=n="-"),r=r>0||a>0?r+":":"",i=((r||s>=10)&&i<10?"0"+i:i)+":",n=n<10?"0"+n:n,r+i+n};let Qk=Yk;function Jk(e){Qk=e}function Zk(){Qk=Yk}function eA(e,t=e){return Qk(e,t)}var tA=Object.freeze({__proto__:null,createTimeRanges:Xk,createTimeRange:Xk,setFormatTime:Jk,resetFormatTime:Zk,formatTime:eA});function nA(e,t){let n,i,r=0;if(!t)return 0;e&&e.length||(e=Xk(0,0));for(let s=0;s<e.length;s++)n=e.start(s),i=e.end(s),i>t&&(i=t),r+=i-n;return r/t}function iA(e){if(e instanceof iA)return e;"number"==typeof e?this.code=e:"string"==typeof e?this.message=e:JI(e)&&("number"==typeof e.code&&(this.code=e.code),Object.assign(this,e)),this.message||(this.message=iA.defaultMessages[this.code]||"")}iA.prototype.code=0,iA.prototype.message="",iA.prototype.status=null,iA.errorTypes=["MEDIA_ERR_CUSTOM","MEDIA_ERR_ABORTED","MEDIA_ERR_NETWORK","MEDIA_ERR_DECODE","MEDIA_ERR_SRC_NOT_SUPPORTED","MEDIA_ERR_ENCRYPTED"],iA.defaultMessages={1:"You aborted the media playback",2:"A network error caused the media download to fail part-way.",3:"The media playback was aborted due to a corruption problem or because the media used features your browser did not support.",4:"The media could not be loaded, either because the server or network failed or because the format is not supported.",5:"The media is encrypted and we do not have the keys to decrypt it."};for(let _B=0;_B<iA.errorTypes.length;_B++)iA[iA.errorTypes[_B]]=_B,iA.prototype[iA.errorTypes[_B]]=_B;function rA(e){return null!=e&&"function"==typeof e.then}function sA(e){rA(e)&&e.then(null,(e=>{}))}const aA=function(e){return["kind","label","language","id","inBandMetadataTrackDispatchType","mode","src"].reduce(((t,n,i)=>(e[n]&&(t[n]=e[n]),t)),{cues:e.cues&&Array.prototype.map.call(e.cues,(function(e){return{startTime:e.startTime,endTime:e.endTime,text:e.text,id:e.id}}))})};var oA=function(e){const t=e.$$("track"),n=Array.prototype.map.call(t,(e=>e.track));return Array.prototype.map.call(t,(function(e){const t=aA(e.track);return e.src&&(t.src=e.src),t})).concat(Array.prototype.filter.call(e.textTracks(),(function(e){return-1===n.indexOf(e)})).map(aA))},lA=function(e,t){return e.forEach((function(e){const n=t.addRemoteTextTrack(e).track;!e.src&&e.cues&&e.cues.forEach((e=>n.addCue(e)))})),t.textTracks()};const cA="vjs-modal-dialog";class uA extends zk{constructor(e,t){super(e,t),this.handleKeyDown_=e=>this.handleKeyDown(e),this.close_=e=>this.close(e),this.opened_=this.hasBeenOpened_=this.hasBeenFilled_=!1,this.closeable(!this.options_.uncloseable),this.content(this.options_.content),this.contentEl_=kx("div",{className:`${cA}-content`},{role:"document"}),this.descEl_=kx("p",{className:`${cA}-description vjs-control-text`,id:this.el().getAttribute("aria-describedby")}),Ax(this.descEl_,this.description()),this.el_.appendChild(this.descEl_),this.el_.appendChild(this.contentEl_)}createEl(){return super.createEl("div",{className:this.buildCSSClass(),tabIndex:-1},{"aria-describedby":`${this.id()}_description`,"aria-hidden":"true","aria-label":this.label(),role:"dialog"})}dispose(){this.contentEl_=null,this.descEl_=null,this.previouslyActiveEl_=null,super.dispose()}buildCSSClass(){return`${cA} vjs-hidden ${super.buildCSSClass()}`}label(){return this.localize(this.options_.label||"Modal Window")}description(){let e=this.options_.description||this.localize("This is a modal window.");return this.closeable()&&(e+=" "+this.localize("This modal can be closed by pressing the Escape key or activating the close button.")),e}open(){if(!this.opened_){const e=this.player();this.trigger("beforemodalopen"),this.opened_=!0,(this.options_.fillAlways||!this.hasBeenOpened_&&!this.hasBeenFilled_)&&this.fill(),this.wasPlaying_=!e.paused(),this.options_.pauseOnOpen&&this.wasPlaying_&&e.pause(),this.on("keydown",this.handleKeyDown_),this.hadControls_=e.controls(),e.controls(!1),this.show(),this.conditionalFocus_(),this.el().setAttribute("aria-hidden","false"),this.trigger("modalopen"),this.hasBeenOpened_=!0}}opened(e){return"boolean"==typeof e&&this[e?"open":"close"](),this.opened_}close(){if(!this.opened_)return;const e=this.player();this.trigger("beforemodalclose"),this.opened_=!1,this.wasPlaying_&&this.options_.pauseOnOpen&&e.play(),this.off("keydown",this.handleKeyDown_),this.hadControls_&&e.controls(!0),this.hide(),this.el().setAttribute("aria-hidden","true"),this.trigger("modalclose"),this.conditionalBlur_(),this.options_.temporary&&this.dispose()}closeable(e){if("boolean"==typeof e){const t=this.closeable_=!!e;let n=this.getChild("closeButton");if(t&&!n){const e=this.contentEl_;this.contentEl_=this.el_,n=this.addChild("closeButton",{controlText:"Close Modal Dialog"}),this.contentEl_=e,this.on(n,"close",this.close_)}!t&&n&&(this.off(n,"close",this.close_),this.removeChild(n),n.dispose())}return this.closeable_}fill(){this.fillWith(this.content())}fillWith(e){const t=this.contentEl(),n=t.parentNode,i=t.nextSibling;this.trigger("beforemodalfill"),this.hasBeenFilled_=!0,n.removeChild(t),this.empty(),Xx(t,e),this.trigger("modalfill"),i?n.insertBefore(t,i):n.appendChild(t);const r=this.getChild("closeButton");r&&n.appendChild(r.el_)}empty(){this.trigger("beforemodalempty"),zx(this.contentEl()),this.trigger("modalempty")}content(e){return void 0!==e&&(this.content_=e),this.content_}conditionalFocus_(){const e=dT.activeElement,t=this.player_.el_;this.previouslyActiveEl_=null,(t.contains(e)||t===e)&&(this.previouslyActiveEl_=e,this.focus())}conditionalBlur_(){this.previouslyActiveEl_&&(this.previouslyActiveEl_.focus(),this.previouslyActiveEl_=null)}handleKeyDown(e){if(e.stopPropagation(),pT.isEventKey(e,"Escape")&&this.closeable())return e.preventDefault(),void this.close();if(!pT.isEventKey(e,"Tab"))return;const t=this.focusableEls_(),n=this.el_.querySelector(":focus");let i;for(let r=0;r<t.length;r++)if(n===t[r]){i=r;break}dT.activeElement===this.el_&&(i=0),e.shiftKey&&0===i?(t[t.length-1].focus(),e.preventDefault()):e.shiftKey||i!==t.length-1||(t[0].focus(),e.preventDefault())}focusableEls_(){const e=this.el_.querySelectorAll("*");return Array.prototype.filter.call(e,(e=>(e instanceof sT.HTMLAnchorElement||e instanceof sT.HTMLAreaElement)&&e.hasAttribute("href")||(e instanceof sT.HTMLInputElement||e instanceof sT.HTMLSelectElement||e instanceof sT.HTMLTextAreaElement||e instanceof sT.HTMLButtonElement)&&!e.hasAttribute("disabled")||e instanceof sT.HTMLIFrameElement||e instanceof sT.HTMLObjectElement||e instanceof sT.HTMLEmbedElement||e.hasAttribute("tabindex")&&-1!==e.getAttribute("tabindex")||e.hasAttribute("contenteditable")))}}uA.prototype.options_={pauseOnOpen:!0,temporary:!0},zk.registerComponent("ModalDialog",uA);class dA extends Ak{constructor(e=[]){super(),this.tracks_=[],Object.defineProperty(this,"length",{get(){return this.tracks_.length}});for(let t=0;t<e.length;t++)this.addTrack(e[t])}addTrack(e){const t=this.tracks_.length;""+t in this||Object.defineProperty(this,t,{get(){return this.tracks_[t]}}),-1===this.tracks_.indexOf(e)&&(this.tracks_.push(e),this.trigger({track:e,type:"addtrack",target:this})),e.labelchange_=()=>{this.trigger({track:e,type:"labelchange",target:this})},Pk(e)&&e.addEventListener("labelchange",e.labelchange_)}removeTrack(e){let t;for(let n=0,i=this.length;n<i;n++)if(this[n]===e){t=this[n],t.off&&t.off(),this.tracks_.splice(n,1);break}t&&this.trigger({track:t,type:"removetrack",target:this})}getTrackById(e){let t=null;for(let n=0,i=this.length;n<i;n++){const i=this[n];if(i.id===e){t=i;break}}return t}}dA.prototype.allowedEvents_={change:"change",addtrack:"addtrack",removetrack:"removetrack",labelchange:"labelchange"};for(const vB in dA.prototype.allowedEvents_)dA.prototype["on"+vB]=null;const hA=function(e,t){for(let n=0;n<e.length;n++)Object.keys(e[n]).length&&t.id!==e[n].id&&(e[n].enabled=!1)};const pA=function(e,t){for(let n=0;n<e.length;n++)Object.keys(e[n]).length&&t.id!==e[n].id&&(e[n].selected=!1)};class fA extends dA{addTrack(e){super.addTrack(e),this.queueChange_||(this.queueChange_=()=>this.queueTrigger("change")),this.triggerSelectedlanguagechange||(this.triggerSelectedlanguagechange_=()=>this.trigger("selectedlanguagechange")),e.addEventListener("modechange",this.queueChange_);-1===["metadata","chapters"].indexOf(e.kind)&&e.addEventListener("modechange",this.triggerSelectedlanguagechange_)}removeTrack(e){super.removeTrack(e),e.removeEventListener&&(this.queueChange_&&e.removeEventListener("modechange",this.queueChange_),this.selectedlanguagechange_&&e.removeEventListener("modechange",this.triggerSelectedlanguagechange_))}}class mA{constructor(e){mA.prototype.setCues_.call(this,e),Object.defineProperty(this,"length",{get(){return this.length_}})}setCues_(e){const t=this.length||0;let n=0;const i=e.length;this.cues_=e,this.length_=e.length;const r=function(e){""+e in this||Object.defineProperty(this,""+e,{get(){return this.cues_[e]}})};if(t<i)for(n=t;n<i;n++)r.call(this,n)}getCueById(e){let t=null;for(let n=0,i=this.length;n<i;n++){const i=this[n];if(i.id===e){t=i;break}}return t}}const gA={alternative:"alternative",captions:"captions",main:"main",sign:"sign",subtitles:"subtitles",commentary:"commentary"},yA={alternative:"alternative",descriptions:"descriptions",main:"main","main-desc":"main-desc",translation:"translation",commentary:"commentary"},_A={subtitles:"subtitles",captions:"captions",descriptions:"descriptions",chapters:"chapters",metadata:"metadata"},vA={disabled:"disabled",hidden:"hidden",showing:"showing"};class bA extends Ak{constructor(e={}){super();const t={id:e.id||"vjs_track_"+dk(),kind:e.kind||"",language:e.language||""};let n=e.label||"";for(const i in t)Object.defineProperty(this,i,{get:()=>t[i],set(){}});Object.defineProperty(this,"label",{get:()=>n,set(e){e!==n&&(n=e,this.trigger("labelchange"))}})}}const TA=function(e){const t=["protocol","hostname","port","pathname","search","hash","host"],n=dT.createElement("a");n.href=e;const i={};for(let r=0;r<t.length;r++)i[t[r]]=n[t[r]];return"http:"===i.protocol&&(i.host=i.host.replace(/:80$/,"")),"https:"===i.protocol&&(i.host=i.host.replace(/:443$/,"")),i.protocol||(i.protocol=sT.location.protocol),i.host||(i.host=sT.location.host),i},EA=function(e){if(!e.match(/^https?:\/\//)){const t=dT.createElement("a");t.href=e,e=t.href}return e},wA=function(e){if("string"==typeof e){const t=/^(\/?)([\s\S]*?)((?:\.{1,2}|[^\/]+?)(\.([^\.\/\?]+)))(?:[\/]*|[\?].*)$/.exec(e);if(t)return t.pop().toLowerCase()}return""},SA=function(e,t=sT.location){const n=TA(e);return(":"===n.protocol?t.protocol:n.protocol)+n.host!==t.protocol+t.host};var CA=Object.freeze({__proto__:null,parseUrl:TA,getAbsoluteURL:EA,getFileExtension:wA,isCrossOrigin:SA});const IA=function(e,t){const n=new sT.WebVTT.Parser(sT,sT.vttjs,sT.WebVTT.StringDecoder()),i=[];n.oncue=function(e){t.addCue(e)},n.onparsingerror=function(e){i.push(e)},n.onflush=function(){t.trigger({type:"loadeddata",target:t})},n.parse(e),i.length>0&&(sT.console&&sT.console.groupCollapsed&&sT.console.groupCollapsed(`Text Track parsing errors for ${t.src}`),i.forEach((e=>zI.error(e))),sT.console&&sT.console.groupEnd&&sT.console.groupEnd()),n.flush()},xA=function(e,t){const n={uri:e},i=SA(e);i&&(n.cors=i);const r="use-credentials"===t.tech_.crossOrigin();r&&(n.withCredentials=r),kT(n,Sk(this,(function(e,n,i){if(e)return zI.error(e,n);t.loaded_=!0,"function"!=typeof sT.WebVTT?t.tech_&&t.tech_.any(["vttjsloaded","vttjserror"],(e=>{if("vttjserror"!==e.type)return IA(i,t);zI.error(`vttjs failed to load, stopping trying to process ${t.src}`)})):IA(i,t)})))};class kA extends bA{constructor(e={}){if(!e.tech)throw new Error("A tech was not provided.");const t=ex(e,{kind:_A[e.kind]||"subtitles",language:e.language||e.srclang||""});let n=vA[t.mode]||"disabled";const i=t.default;"metadata"!==t.kind&&"chapters"!==t.kind||(n="hidden"),super(t),this.tech_=t.tech,this.cues_=[],this.activeCues_=[],this.preload_=!1!==this.tech_.preloadTextTracks;const r=new mA(this.cues_),s=new mA(this.activeCues_);let a=!1;this.timeupdateHandler=Sk(this,(function(e={}){this.tech_.isDisposed()||(this.tech_.isReady_?(this.activeCues=this.activeCues,a&&(this.trigger("cuechange"),a=!1),"timeupdate"!==e.type&&(this.rvf_=this.tech_.requestVideoFrameCallback(this.timeupdateHandler))):"timeupdate"!==e.type&&(this.rvf_=this.tech_.requestVideoFrameCallback(this.timeupdateHandler)))}));this.tech_.one("dispose",(()=>{this.stopTracking()})),"disabled"!==n&&this.startTracking(),Object.defineProperties(this,{default:{get:()=>i,set(){}},mode:{get:()=>n,set(e){vA[e]&&n!==e&&(n=e,this.preload_||"disabled"===n||0!==this.cues.length||xA(this.src,this),this.stopTracking(),"disabled"!==n&&this.startTracking(),this.trigger("modechange"))}},cues:{get(){return this.loaded_?r:null},set(){}},activeCues:{get(){if(!this.loaded_)return null;if(0===this.cues.length)return s;const e=this.tech_.currentTime(),t=[];for(let n=0,i=this.cues.length;n<i;n++){const i=this.cues[n];i.startTime<=e&&i.endTime>=e&&t.push(i)}if(a=!1,t.length!==this.activeCues_.length)a=!0;else for(let n=0;n<t.length;n++)-1===this.activeCues_.indexOf(t[n])&&(a=!0);return this.activeCues_=t,s.setCues_(this.activeCues_),s},set(){}}}),t.src?(this.src=t.src,this.preload_||(this.loaded_=!0),(this.preload_||"subtitles"!==t.kind&&"captions"!==t.kind)&&xA(this.src,this)):this.loaded_=!0}startTracking(){this.rvf_=this.tech_.requestVideoFrameCallback(this.timeupdateHandler),this.tech_.on("timeupdate",this.timeupdateHandler)}stopTracking(){this.rvf_&&(this.tech_.cancelVideoFrameCallback(this.rvf_),this.rvf_=void 0),this.tech_.off("timeupdate",this.timeupdateHandler)}addCue(e){let t=e;if(sT.vttjs&&!(e instanceof sT.vttjs.VTTCue)){t=new sT.vttjs.VTTCue(e.startTime,e.endTime,e.text);for(const n in e)n in t||(t[n]=e[n]);t.id=e.id,t.originalCue_=e}const n=this.tech_.textTracks();for(let i=0;i<n.length;i++)n[i]!==this&&n[i].removeCue(t);this.cues_.push(t),this.cues.setCues_(this.cues_)}removeCue(e){let t=this.cues_.length;for(;t--;){const n=this.cues_[t];if(n===e||n.originalCue_&&n.originalCue_===e){this.cues_.splice(t,1),this.cues.setCues_(this.cues_);break}}}}kA.prototype.allowedEvents_={cuechange:"cuechange"};class AA extends bA{constructor(e={}){const t=ex(e,{kind:yA[e.kind]||""});super(t);let n=!1;Object.defineProperty(this,"enabled",{get:()=>n,set(e){"boolean"==typeof e&&e!==n&&(n=e,this.trigger("enabledchange"))}}),t.enabled&&(this.enabled=t.enabled),this.loaded_=!0}}class OA extends bA{constructor(e={}){const t=ex(e,{kind:gA[e.kind]||""});super(t);let n=!1;Object.defineProperty(this,"selected",{get:()=>n,set(e){"boolean"==typeof e&&e!==n&&(n=e,this.trigger("selectedchange"))}}),t.selected&&(this.selected=t.selected)}}class PA extends Ak{constructor(e={}){let t;super();const n=new kA(e);this.kind=n.kind,this.src=n.src,this.srclang=n.language,this.label=n.label,this.default=n.default,Object.defineProperties(this,{readyState:{get:()=>t},track:{get:()=>n}}),t=PA.NONE,n.addEventListener("loadeddata",(()=>{t=PA.LOADED,this.trigger({type:"load",target:this})}))}}PA.prototype.allowedEvents_={load:"load"},PA.NONE=0,PA.LOADING=1,PA.LOADED=2,PA.ERROR=3;const LA={audio:{ListClass:class extends dA{constructor(e=[]){for(let t=e.length-1;t>=0;t--)if(e[t].enabled){hA(e,e[t]);break}super(e),this.changing_=!1}addTrack(e){e.enabled&&hA(this,e),super.addTrack(e),e.addEventListener&&(e.enabledChange_=()=>{this.changing_||(this.changing_=!0,hA(this,e),this.changing_=!1,this.trigger("change"))},e.addEventListener("enabledchange",e.enabledChange_))}removeTrack(e){super.removeTrack(e),e.removeEventListener&&e.enabledChange_&&(e.removeEventListener("enabledchange",e.enabledChange_),e.enabledChange_=null)}},TrackClass:AA,capitalName:"Audio"},video:{ListClass:class extends dA{constructor(e=[]){for(let t=e.length-1;t>=0;t--)if(e[t].selected){pA(e,e[t]);break}super(e),this.changing_=!1,Object.defineProperty(this,"selectedIndex",{get(){for(let e=0;e<this.length;e++)if(this[e].selected)return e;return-1},set(){}})}addTrack(e){e.selected&&pA(this,e),super.addTrack(e),e.addEventListener&&(e.selectedChange_=()=>{this.changing_||(this.changing_=!0,pA(this,e),this.changing_=!1,this.trigger("change"))},e.addEventListener("selectedchange",e.selectedChange_))}removeTrack(e){super.removeTrack(e),e.removeEventListener&&e.selectedChange_&&(e.removeEventListener("selectedchange",e.selectedChange_),e.selectedChange_=null)}},TrackClass:OA,capitalName:"Video"},text:{ListClass:fA,TrackClass:kA,capitalName:"Text"}};Object.keys(LA).forEach((function(e){LA[e].getterName=`${e}Tracks`,LA[e].privateName=`${e}Tracks_`}));const NA={remoteText:{ListClass:fA,TrackClass:kA,capitalName:"RemoteText",getterName:"remoteTextTracks",privateName:"remoteTextTracks_"},remoteTextEl:{ListClass:class{constructor(e=[]){this.trackElements_=[],Object.defineProperty(this,"length",{get(){return this.trackElements_.length}});for(let t=0,n=e.length;t<n;t++)this.addTrackElement_(e[t])}addTrackElement_(e){const t=this.trackElements_.length;""+t in this||Object.defineProperty(this,t,{get(){return this.trackElements_[t]}}),-1===this.trackElements_.indexOf(e)&&this.trackElements_.push(e)}getTrackElementByTrack_(e){let t;for(let n=0,i=this.trackElements_.length;n<i;n++)if(e===this.trackElements_[n].track){t=this.trackElements_[n];break}return t}removeTrackElement_(e){for(let t=0,n=this.trackElements_.length;t<n;t++)if(e===this.trackElements_[t]){this.trackElements_[t].track&&"function"==typeof this.trackElements_[t].track.off&&this.trackElements_[t].track.off(),"function"==typeof this.trackElements_[t].off&&this.trackElements_[t].off(),this.trackElements_.splice(t,1);break}}},TrackClass:PA,capitalName:"RemoteTextTrackEls",getterName:"remoteTextTrackEls",privateName:"remoteTextTrackEls_"}},DA=Object.assign({},LA,NA);NA.names=Object.keys(NA),LA.names=Object.keys(LA),DA.names=[].concat(NA.names).concat(LA.names);class RA extends zk{constructor(e={},t=function(){}){e.reportTouchActivity=!1,super(null,e,t),this.onDurationChange_=e=>this.onDurationChange(e),this.trackProgress_=e=>this.trackProgress(e),this.trackCurrentTime_=e=>this.trackCurrentTime(e),this.stopTrackingCurrentTime_=e=>this.stopTrackingCurrentTime(e),this.disposeSourceHandler_=e=>this.disposeSourceHandler(e),this.queuedHanders_=new Set,this.hasStarted_=!1,this.on("playing",(function(){this.hasStarted_=!0})),this.on("loadstart",(function(){this.hasStarted_=!1})),DA.names.forEach((t=>{const n=DA[t];e&&e[n.getterName]&&(this[n.privateName]=e[n.getterName])})),this.featuresProgressEvents||this.manualProgressOn(),this.featuresTimeupdateEvents||this.manualTimeUpdatesOn(),["Text","Audio","Video"].forEach((t=>{!1===e[`native${t}Tracks`]&&(this[`featuresNative${t}Tracks`]=!1)})),!1===e.nativeCaptions||!1===e.nativeTextTracks?this.featuresNativeTextTracks=!1:!0!==e.nativeCaptions&&!0!==e.nativeTextTracks||(this.featuresNativeTextTracks=!0),this.featuresNativeTextTracks||this.emulateTextTracks(),this.preloadTextTracks=!1!==e.preloadTextTracks,this.autoRemoteTextTracks_=new DA.text.ListClass,this.initTrackListeners(),e.nativeControlsForTouch||this.emitTapEvents(),this.constructor&&(this.name_=this.constructor.name||"Unknown Tech")}triggerSourceset(e){this.isReady_||this.one("ready",(()=>this.setTimeout((()=>this.triggerSourceset(e)),1))),this.trigger({src:e,type:"sourceset"})}manualProgressOn(){this.on("durationchange",this.onDurationChange_),this.manualProgress=!0,this.one("ready",this.trackProgress_)}manualProgressOff(){this.manualProgress=!1,this.stopTrackingProgress(),this.off("durationchange",this.onDurationChange_)}trackProgress(e){this.stopTrackingProgress(),this.progressInterval=this.setInterval(Sk(this,(function(){const e=this.bufferedPercent();this.bufferedPercent_!==e&&this.trigger("progress"),this.bufferedPercent_=e,1===e&&this.stopTrackingProgress()})),500)}onDurationChange(e){this.duration_=this.duration()}buffered(){return Xk(0,0)}bufferedPercent(){return nA(this.buffered(),this.duration_)}stopTrackingProgress(){this.clearInterval(this.progressInterval)}manualTimeUpdatesOn(){this.manualTimeUpdates=!0,this.on("play",this.trackCurrentTime_),this.on("pause",this.stopTrackingCurrentTime_)}manualTimeUpdatesOff(){this.manualTimeUpdates=!1,this.stopTrackingCurrentTime(),this.off("play",this.trackCurrentTime_),this.off("pause",this.stopTrackingCurrentTime_)}trackCurrentTime(){this.currentTimeInterval&&this.stopTrackingCurrentTime(),this.currentTimeInterval=this.setInterval((function(){this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})}),250)}stopTrackingCurrentTime(){this.clearInterval(this.currentTimeInterval),this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})}dispose(){this.clearTracks(LA.names),this.manualProgress&&this.manualProgressOff(),this.manualTimeUpdates&&this.manualTimeUpdatesOff(),super.dispose()}clearTracks(e){(e=[].concat(e)).forEach((e=>{const t=this[`${e}Tracks`]()||[];let n=t.length;for(;n--;){const i=t[n];"text"===e&&this.removeRemoteTextTrack(i),t.removeTrack(i)}}))}cleanupAutoTextTracks(){const e=this.autoRemoteTextTracks_||[];let t=e.length;for(;t--;){const n=e[t];this.removeRemoteTextTrack(n)}}reset(){}crossOrigin(){}setCrossOrigin(){}error(e){return void 0!==e&&(this.error_=new iA(e),this.trigger("error")),this.error_}played(){return this.hasStarted_?Xk(0,0):Xk()}play(){}setScrubbing(e){}scrubbing(){}setCurrentTime(e){this.manualTimeUpdates&&this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})}initTrackListeners(){LA.names.forEach((e=>{const t=LA[e],n=()=>{this.trigger(`${e}trackchange`)},i=this[t.getterName]();i.addEventListener("removetrack",n),i.addEventListener("addtrack",n),this.on("dispose",(()=>{i.removeEventListener("removetrack",n),i.removeEventListener("addtrack",n)}))}))}addWebVttScript_(){if(!sT.WebVTT)if(dT.body.contains(this.el())){if(!this.options_["vtt.js"]&&ZI(hE)&&Object.keys(hE).length>0)return void this.trigger("vttjsloaded");const e=dT.createElement("script");e.src=this.options_["vtt.js"]||"https://vjs.zencdn.net/vttjs/0.14.1/vtt.min.js",e.onload=()=>{this.trigger("vttjsloaded")},e.onerror=()=>{this.trigger("vttjserror")},this.on("dispose",(()=>{e.onload=null,e.onerror=null})),sT.WebVTT=!0,this.el().parentNode.appendChild(e)}else this.ready(this.addWebVttScript_)}emulateTextTracks(){const e=this.textTracks(),t=this.remoteTextTracks(),n=t=>e.addTrack(t.track),i=t=>e.removeTrack(t.track);t.on("addtrack",n),t.on("removetrack",i),this.addWebVttScript_();const r=()=>this.trigger("texttrackchange"),s=()=>{r();for(let t=0;t<e.length;t++){const n=e[t];n.removeEventListener("cuechange",r),"showing"===n.mode&&n.addEventListener("cuechange",r)}};s(),e.addEventListener("change",s),e.addEventListener("addtrack",s),e.addEventListener("removetrack",s),this.on("dispose",(function(){t.off("addtrack",n),t.off("removetrack",i),e.removeEventListener("change",s),e.removeEventListener("addtrack",s),e.removeEventListener("removetrack",s);for(let t=0;t<e.length;t++){e[t].removeEventListener("cuechange",r)}}))}addTextTrack(e,t,n){if(!e)throw new Error("TextTrack kind is required but was not provided");return function(e,t,n,i,r={}){const s=e.textTracks();r.kind=t,n&&(r.label=n),i&&(r.language=i),r.tech=e;const a=new DA.text.TrackClass(r);return s.addTrack(a),a}(this,e,t,n)}createRemoteTextTrack(e){const t=ex(e,{tech:this});return new NA.remoteTextEl.TrackClass(t)}addRemoteTextTrack(e={},t){const n=this.createRemoteTextTrack(e);return"boolean"!=typeof t&&(t=!1),this.remoteTextTrackEls().addTrackElement_(n),this.remoteTextTracks().addTrack(n.track),!1===t&&this.ready((()=>this.autoRemoteTextTracks_.addTrack(n.track))),n}removeRemoteTextTrack(e){const t=this.remoteTextTrackEls().getTrackElementByTrack_(e);this.remoteTextTrackEls().removeTrackElement_(t),this.remoteTextTracks().removeTrack(e),this.autoRemoteTextTracks_.removeTrack(e)}getVideoPlaybackQuality(){return{}}requestPictureInPicture(){return Promise.reject()}disablePictureInPicture(){return!0}setDisablePictureInPicture(){}requestVideoFrameCallback(e){const t=dk();return!this.isReady_||this.paused()?(this.queuedHanders_.add(t),this.one("playing",(()=>{this.queuedHanders_.has(t)&&(this.queuedHanders_.delete(t),e())}))):this.requestNamedAnimationFrame(t,e),t}cancelVideoFrameCallback(e){this.queuedHanders_.has(e)?this.queuedHanders_.delete(e):this.cancelNamedAnimationFrame(e)}setPoster(){}playsinline(){}setPlaysinline(){}overrideNativeAudioTracks(e){}overrideNativeVideoTracks(e){}canPlayType(e){return""}static canPlayType(e){return""}static canPlaySource(e,t){return RA.canPlayType(e.type)}static isTech(e){return e.prototype instanceof RA||e instanceof RA||e===RA}static registerTech(e,t){if(RA.techs_||(RA.techs_={}),!RA.isTech(t))throw new Error(`Tech ${e} must be a Tech`);if(!RA.canPlayType)throw new Error("Techs must have a static canPlayType method on them");if(!RA.canPlaySource)throw new Error("Techs must have a static canPlaySource method on them");return e=Vk(e),RA.techs_[e]=t,RA.techs_[Hk(e)]=t,"Tech"!==e&&RA.defaultTechOrder_.push(e),t}static getTech(e){if(e)return RA.techs_&&RA.techs_[e]?RA.techs_[e]:(e=Vk(e),sT&&sT.videojs&&sT.videojs[e]?(zI.warn(`The ${e} tech was added to the videojs object when it should be registered using videojs.registerTech(name, tech)`),sT.videojs[e]):void 0)}}DA.names.forEach((function(e){const t=DA[e];RA.prototype[t.getterName]=function(){return this[t.privateName]=this[t.privateName]||new t.ListClass,this[t.privateName]}})),RA.prototype.featuresVolumeControl=!0,RA.prototype.featuresMuteControl=!0,RA.prototype.featuresFullscreenResize=!1,RA.prototype.featuresPlaybackRate=!1,RA.prototype.featuresProgressEvents=!1,RA.prototype.featuresSourceset=!1,RA.prototype.featuresTimeupdateEvents=!1,RA.prototype.featuresNativeTextTracks=!1,RA.prototype.featuresVideoFrameCallback=!1,RA.withSourceHandlers=function(e){e.registerSourceHandler=function(t,n){let i=e.sourceHandlers;i||(i=e.sourceHandlers=[]),void 0===n&&(n=i.length),i.splice(n,0,t)},e.canPlayType=function(t){const n=e.sourceHandlers||[];let i;for(let e=0;e<n.length;e++)if(i=n[e].canPlayType(t),i)return i;return""},e.selectSourceHandler=function(t,n){const i=e.sourceHandlers||[];let r;for(let e=0;e<i.length;e++)if(r=i[e].canHandleSource(t,n),r)return i[e];return null},e.canPlaySource=function(t,n){const i=e.selectSourceHandler(t,n);return i?i.canHandleSource(t,n):""};["seekable","seeking","duration"].forEach((function(e){const t=this[e];"function"==typeof t&&(this[e]=function(){return this.sourceHandler_&&this.sourceHandler_[e]?this.sourceHandler_[e].apply(this.sourceHandler_,arguments):t.apply(this,arguments)})}),e.prototype),e.prototype.setSource=function(t){let n=e.selectSourceHandler(t,this.options_);n||(e.nativeSourceHandler?n=e.nativeSourceHandler:zI.error("No source handler found for the current source.")),this.disposeSourceHandler(),this.off("dispose",this.disposeSourceHandler_),n!==e.nativeSourceHandler&&(this.currentSource_=t),this.sourceHandler_=n.handleSource(t,this,this.options_),this.one("dispose",this.disposeSourceHandler_)},e.prototype.disposeSourceHandler=function(){this.currentSource_&&(this.clearTracks(["audio","video"]),this.currentSource_=null),this.cleanupAutoTextTracks(),this.sourceHandler_&&(this.sourceHandler_.dispose&&this.sourceHandler_.dispose(),this.sourceHandler_=null)}},zk.registerComponent("Tech",RA),RA.registerTech("Tech",RA),RA.defaultTechOrder_=[];const MA={},FA={},UA={};function BA(e,t,n){e.setTimeout((()=>WA(t,MA[t.type],n,e)),1)}function jA(e,t,n,i=null){const r="call"+Vk(n),s=e.reduce($A(r),i),a=s===UA,o=a?null:t[n](s);return function(e,t,n,i){for(let r=e.length-1;r>=0;r--){const s=e[r];s[t]&&s[t](i,n)}}(e,n,o,a),o}const qA={buffered:1,currentTime:1,duration:1,muted:1,played:1,paused:1,seekable:1,volume:1,ended:1},HA={setCurrentTime:1,setMuted:1,setVolume:1},VA={play:1,pause:1};function $A(e){return(t,n)=>t===UA?UA:n[e]?n[e](t):t}function WA(e={},t=[],n,i,r=[],s=!1){const[a,...o]=t;if("string"==typeof a)WA(e,MA[a],n,i,r,s);else if(a){const t=function(e,t){const n=FA[e.id()];let i=null;if(null==n)return i=t(e),FA[e.id()]=[[t,i]],i;for(let r=0;r<n.length;r++){const[e,s]=n[r];e===t&&(i=s)}return null===i&&(i=t(e),n.push([t,i])),i}(i,a);if(!t.setSource)return r.push(t),WA(e,o,n,i,r,s);t.setSource(Object.assign({},e),(function(a,l){if(a)return WA(e,o,n,i,r,s);r.push(t),WA(l,e.type===l.type?o:MA[l.type],n,i,r,s)}))}else o.length?WA(e,o,n,i,r,s):s?n(e,r):WA(e,MA["*"],n,i,r,!0)}const zA={opus:"video/ogg",ogv:"video/ogg",mp4:"video/mp4",mov:"video/mp4",m4v:"video/mp4",mkv:"video/x-matroska",m4a:"audio/mp4",mp3:"audio/mpeg",aac:"audio/aac",caf:"audio/x-caf",flac:"audio/flac",oga:"audio/ogg",wav:"audio/wav",m3u8:"application/x-mpegURL",mpd:"application/dash+xml",jpg:"image/jpeg",jpeg:"image/jpeg",gif:"image/gif",png:"image/png",svg:"image/svg+xml",webp:"image/webp"},GA=function(e=""){const t=wA(e);return zA[t.toLowerCase()]||""},KA=function(e){if(Array.isArray(e)){let t=[];e.forEach((function(e){e=KA(e),Array.isArray(e)?t=t.concat(e):JI(e)&&t.push(e)})),e=t}else e="string"==typeof e&&e.trim()?[XA({src:e})]:JI(e)&&"string"==typeof e.src&&e.src&&e.src.trim()?[XA(e)]:[];return e};function XA(e){if(!e.type){const t=GA(e.src);t&&(e.type=t)}return e}zk.registerComponent("MediaLoader",class extends zk{constructor(e,t,n){if(super(e,ex({createEl:!1},t),n),t.playerOptions.sources&&0!==t.playerOptions.sources.length)e.src(t.playerOptions.sources);else for(let i=0,r=t.playerOptions.techOrder;i<r.length;i++){const t=Vk(r[i]);let n=RA.getTech(t);if(t||(n=zk.getComponent(t)),n&&n.isSupported()){e.loadTech_(t);break}}}});class YA extends zk{constructor(e,t){super(e,t),this.options_.controlText&&this.controlText(this.options_.controlText),this.handleMouseOver_=e=>this.handleMouseOver(e),this.handleMouseOut_=e=>this.handleMouseOut(e),this.handleClick_=e=>this.handleClick(e),this.handleKeyDown_=e=>this.handleKeyDown(e),this.emitTapEvents(),this.enable()}createEl(e="div",t={},n={}){t=Object.assign({className:this.buildCSSClass(),tabIndex:0},t),"button"===e&&zI.error(`Creating a ClickableComponent with an HTML element of ${e} is not supported; use a Button instead.`),n=Object.assign({role:"button"},n),this.tabIndex_=t.tabIndex;const i=kx(e,t,n);return i.appendChild(kx("span",{className:"vjs-icon-placeholder"},{"aria-hidden":!0})),this.createControlTextEl(i),i}dispose(){this.controlTextEl_=null,super.dispose()}createControlTextEl(e){return this.controlTextEl_=kx("span",{className:"vjs-control-text"},{"aria-live":"polite"}),e&&e.appendChild(this.controlTextEl_),this.controlText(this.controlText_,e),this.controlTextEl_}controlText(e,t=this.el()){if(void 0===e)return this.controlText_||"Need Text";const n=this.localize(e);this.controlText_=e,Ax(this.controlTextEl_,n),this.nonIconControl||this.player_.options_.noUITitleAttributes||t.setAttribute("title",n)}buildCSSClass(){return`vjs-control vjs-button ${super.buildCSSClass()}`}enable(){this.enabled_||(this.enabled_=!0,this.removeClass("vjs-disabled"),this.el_.setAttribute("aria-disabled","false"),void 0!==this.tabIndex_&&this.el_.setAttribute("tabIndex",this.tabIndex_),this.on(["tap","click"],this.handleClick_),this.on("keydown",this.handleKeyDown_))}disable(){this.enabled_=!1,this.addClass("vjs-disabled"),this.el_.setAttribute("aria-disabled","true"),void 0!==this.tabIndex_&&this.el_.removeAttribute("tabIndex"),this.off("mouseover",this.handleMouseOver_),this.off("mouseout",this.handleMouseOut_),this.off(["tap","click"],this.handleClick_),this.off("keydown",this.handleKeyDown_)}handleLanguagechange(){this.controlText(this.controlText_)}handleClick(e){this.options_.clickHandler&&this.options_.clickHandler.call(this,arguments)}handleKeyDown(e){pT.isEventKey(e,"Space")||pT.isEventKey(e,"Enter")?(e.preventDefault(),e.stopPropagation(),this.trigger("click")):super.handleKeyDown(e)}}zk.registerComponent("ClickableComponent",YA);class QA extends YA{constructor(e,t){super(e,t),this.update(),this.update_=e=>this.update(e),e.on("posterchange",this.update_)}dispose(){this.player().off("posterchange",this.update_),super.dispose()}createEl(){return kx("div",{className:"vjs-poster"})}crossOrigin(e){if(void 0===e)return this.$("img")?this.$("img").crossOrigin:this.player_.tech_&&this.player_.tech_.isReady_?this.player_.crossOrigin():this.player_.options_.crossOrigin||this.player_.options_.crossorigin||null;null===e||"anonymous"===e||"use-credentials"===e?this.$("img")&&(this.$("img").crossOrigin=e):this.player_.log.warn(`crossOrigin must be null,  "anonymous" or "use-credentials", given "${e}"`)}update(e){const t=this.player().poster();this.setSrc(t),t?this.show():this.hide()}setSrc(e){e?(this.$("img")||this.el_.appendChild(kx("picture",{className:"vjs-poster",tabIndex:-1},{},kx("img",{loading:"lazy",crossOrigin:this.crossOrigin()},{alt:""}))),this.$("img").src=e):this.el_.textContent=""}handleClick(e){this.player_.controls()&&(this.player_.tech(!0)&&this.player_.tech(!0).focus(),this.player_.paused()?sA(this.player_.play()):this.player_.pause())}}QA.prototype.crossorigin=QA.prototype.crossOrigin,zk.registerComponent("PosterImage",QA);const JA="#222",ZA="#ccc",eO={monospace:"monospace",sansSerif:"sans-serif",serif:"serif",monospaceSansSerif:'"Andale Mono", "Lucida Console", monospace',monospaceSerif:'"Courier New", monospace',proportionalSansSerif:"sans-serif",proportionalSerif:"serif",casual:'"Comic Sans MS", Impact, fantasy',script:'"Monotype Corsiva", cursive',smallcaps:'"Andale Mono", "Lucida Console", monospace, sans-serif'};function tO(e,t){let n;if(4===e.length)n=e[1]+e[1]+e[2]+e[2]+e[3]+e[3];else{if(7!==e.length)throw new Error("Invalid color code provided, "+e+"; must be formatted as e.g. #f0e or #f604e2.");n=e.slice(1)}return"rgba("+parseInt(n.slice(0,2),16)+","+parseInt(n.slice(2,4),16)+","+parseInt(n.slice(4,6),16)+","+t+")"}function nO(e,t,n){try{e.style[t]=n}catch(fB){return}}zk.registerComponent("TextTrackDisplay",class extends zk{constructor(e,t,n){super(e,t,n);const i=e=>this.updateDisplay(e);e.on("loadstart",(e=>this.toggleDisplay(e))),e.on("texttrackchange",i),e.on("loadedmetadata",(e=>this.preselectTrack(e))),e.ready(Sk(this,(function(){if(e.tech_&&e.tech_.featuresNativeTextTracks)return void this.hide();e.on("fullscreenchange",i),e.on("playerresize",i);const t=sT.screen.orientation||sT,n=sT.screen.orientation?"change":"orientationchange";t.addEventListener(n,i),e.on("dispose",(()=>t.removeEventListener(n,i)));const r=this.options_.playerOptions.tracks||[];for(let e=0;e<r.length;e++)this.player_.addRemoteTextTrack(r[e],!0);this.preselectTrack()})))}preselectTrack(){const e={captions:1,subtitles:1},t=this.player_.textTracks(),n=this.player_.cache_.selectedLanguage;let i,r,s;for(let a=0;a<t.length;a++){const o=t[a];n&&n.enabled&&n.language&&n.language===o.language&&o.kind in e?o.kind===n.kind?s=o:s||(s=o):n&&!n.enabled?(s=null,i=null,r=null):o.default&&("descriptions"!==o.kind||i?o.kind in e&&!r&&(r=o):i=o)}s?s.mode="showing":r?r.mode="showing":i&&(i.mode="showing")}toggleDisplay(){this.player_.tech_&&this.player_.tech_.featuresNativeTextTracks?this.hide():this.show()}createEl(){return super.createEl("div",{className:"vjs-text-track-display"},{translate:"yes","aria-live":"off","aria-atomic":"true"})}clearDisplay(){"function"==typeof sT.WebVTT&&sT.WebVTT.processCues(sT,[],this.el_)}updateDisplay(){const e=this.player_.textTracks(),t=this.options_.allowMultipleShowingTracks;if(this.clearDisplay(),t){const t=[];for(let n=0;n<e.length;++n){const i=e[n];"showing"===i.mode&&t.push(i)}return void this.updateForTrack(t)}let n=null,i=null,r=e.length;for(;r--;){const t=e[r];"showing"===t.mode&&("descriptions"===t.kind?n=t:i=t)}i?("off"!==this.getAttribute("aria-live")&&this.setAttribute("aria-live","off"),this.updateForTrack(i)):n&&("assertive"!==this.getAttribute("aria-live")&&this.setAttribute("aria-live","assertive"),this.updateForTrack(n))}updateDisplayState(e){const t=this.player_.textTrackSettings.getValues(),n=e.activeCues;let i=n.length;for(;i--;){const e=n[i];if(!e)continue;const r=e.displayState;if(t.color&&(r.firstChild.style.color=t.color),t.textOpacity&&nO(r.firstChild,"color",tO(t.color||"#fff",t.textOpacity)),t.backgroundColor&&(r.firstChild.style.backgroundColor=t.backgroundColor),t.backgroundOpacity&&nO(r.firstChild,"backgroundColor",tO(t.backgroundColor||"#000",t.backgroundOpacity)),t.windowColor&&(t.windowOpacity?nO(r,"backgroundColor",tO(t.windowColor,t.windowOpacity)):r.style.backgroundColor=t.windowColor),t.edgeStyle&&("dropshadow"===t.edgeStyle?r.firstChild.style.textShadow=`2px 2px 3px ${JA}, 2px 2px 4px ${JA}, 2px 2px 5px ${JA}`:"raised"===t.edgeStyle?r.firstChild.style.textShadow=`1px 1px ${JA}, 2px 2px ${JA}, 3px 3px ${JA}`:"depressed"===t.edgeStyle?r.firstChild.style.textShadow=`1px 1px ${ZA}, 0 1px ${ZA}, -1px -1px ${JA}, 0 -1px ${JA}`:"uniform"===t.edgeStyle&&(r.firstChild.style.textShadow=`0 0 4px ${JA}, 0 0 4px ${JA}, 0 0 4px ${JA}, 0 0 4px ${JA}`)),t.fontPercent&&1!==t.fontPercent){const e=sT.parseFloat(r.style.fontSize);r.style.fontSize=e*t.fontPercent+"px",r.style.height="auto",r.style.top="auto"}t.fontFamily&&"default"!==t.fontFamily&&("small-caps"===t.fontFamily?r.firstChild.style.fontVariant="small-caps":r.firstChild.style.fontFamily=eO[t.fontFamily])}}updateForTrack(e){if(Array.isArray(e)||(e=[e]),"function"!=typeof sT.WebVTT||e.every((e=>!e.activeCues)))return;const t=[];for(let n=0;n<e.length;++n){const i=e[n];for(let e=0;e<i.activeCues.length;++e)t.push(i.activeCues[e])}sT.WebVTT.processCues(sT,t,this.el_);for(let n=0;n<e.length;++n){const t=e[n];for(let e=0;e<t.activeCues.length;++e){const i=t.activeCues[e].displayState;Lx(i,"vjs-text-track-cue","vjs-text-track-cue-"+(t.language?t.language:n)),t.language&&Ux(i,"lang",t.language)}this.player_.textTrackSettings&&this.updateDisplayState(t)}}});zk.registerComponent("LoadingSpinner",class extends zk{createEl(){const e=this.player_.isAudio(),t=this.localize(e?"Audio Player":"Video Player"),n=kx("span",{className:"vjs-control-text",textContent:this.localize("{1} is loading.",[t])}),i=super.createEl("div",{className:"vjs-loading-spinner",dir:"ltr"});return i.appendChild(n),i}handleLanguagechange(){this.$(".vjs-control-text").textContent=this.localize("{1} is loading.",[this.player_.isAudio()?"Audio Player":"Video Player"])}});class iO extends YA{createEl(e,t={},n={}){const i=kx("button",t=Object.assign({className:this.buildCSSClass()},t),n=Object.assign({type:"button"},n));return i.appendChild(kx("span",{className:"vjs-icon-placeholder"},{"aria-hidden":!0})),this.createControlTextEl(i),i}addChild(e,t={}){const n=this.constructor.name;return zI.warn(`Adding an actionable (user controllable) child to a Button (${n}) is not supported; use a ClickableComponent instead.`),zk.prototype.addChild.call(this,e,t)}enable(){super.enable(),this.el_.removeAttribute("disabled")}disable(){super.disable(),this.el_.setAttribute("disabled","disabled")}handleKeyDown(e){pT.isEventKey(e,"Space")||pT.isEventKey(e,"Enter")?e.stopPropagation():super.handleKeyDown(e)}}zk.registerComponent("Button",iO);class rO extends iO{constructor(e,t){super(e,t),this.mouseused_=!1,this.on("mousedown",(e=>this.handleMouseDown(e)))}buildCSSClass(){return"vjs-big-play-button"}handleClick(e){const t=this.player_.play();if(this.mouseused_&&e.clientX&&e.clientY)return sA(t),void(this.player_.tech(!0)&&this.player_.tech(!0).focus());const n=this.player_.getChild("controlBar"),i=n&&n.getChild("playToggle");if(!i)return void this.player_.tech(!0).focus();const r=()=>i.focus();rA(t)?t.then(r,(()=>{})):this.setTimeout(r,1)}handleKeyDown(e){this.mouseused_=!1,super.handleKeyDown(e)}handleMouseDown(e){this.mouseused_=!0}}rO.prototype.controlText_="Play Video",zk.registerComponent("BigPlayButton",rO);zk.registerComponent("CloseButton",class extends iO{constructor(e,t){super(e,t),this.controlText(t&&t.controlText||this.localize("Close"))}buildCSSClass(){return`vjs-close-button ${super.buildCSSClass()}`}handleClick(e){this.trigger({type:"close",bubbles:!1})}handleKeyDown(e){pT.isEventKey(e,"Esc")?(e.preventDefault(),e.stopPropagation(),this.trigger("click")):super.handleKeyDown(e)}});class sO extends iO{constructor(e,t={}){super(e,t),t.replay=void 0===t.replay||t.replay,this.on(e,"play",(e=>this.handlePlay(e))),this.on(e,"pause",(e=>this.handlePause(e))),t.replay&&this.on(e,"ended",(e=>this.handleEnded(e)))}buildCSSClass(){return`vjs-play-control ${super.buildCSSClass()}`}handleClick(e){this.player_.paused()?sA(this.player_.play()):this.player_.pause()}handleSeeked(e){this.removeClass("vjs-ended"),this.player_.paused()?this.handlePause(e):this.handlePlay(e)}handlePlay(e){this.removeClass("vjs-ended","vjs-paused"),this.addClass("vjs-playing"),this.controlText("Pause")}handlePause(e){this.removeClass("vjs-playing"),this.addClass("vjs-paused"),this.controlText("Play")}handleEnded(e){this.removeClass("vjs-playing"),this.addClass("vjs-ended"),this.controlText("Replay"),this.one(this.player_,"seeked",(e=>this.handleSeeked(e)))}}sO.prototype.controlText_="Play",zk.registerComponent("PlayToggle",sO);class aO extends zk{constructor(e,t){super(e,t),this.on(e,["timeupdate","ended"],(e=>this.updateContent(e))),this.updateTextNode_()}createEl(){const e=this.buildCSSClass(),t=super.createEl("div",{className:`${e} vjs-time-control vjs-control`}),n=kx("span",{className:"vjs-control-text",textContent:`${this.localize(this.labelText_)} `},{role:"presentation"});return t.appendChild(n),this.contentEl_=kx("span",{className:`${e}-display`},{role:"presentation"}),t.appendChild(this.contentEl_),t}dispose(){this.contentEl_=null,this.textNode_=null,super.dispose()}updateTextNode_(e=0){e=eA(e),this.formattedTime_!==e&&(this.formattedTime_=e,this.requestNamedAnimationFrame("TimeDisplay#updateTextNode_",(()=>{if(!this.contentEl_)return;let e=this.textNode_;e&&this.contentEl_.firstChild!==e&&(e=null,zI.warn("TimeDisplay#updateTextnode_: Prevented replacement of text node element since it was no longer a child of this node. Appending a new node instead.")),this.textNode_=dT.createTextNode(this.formattedTime_),this.textNode_&&(e?this.contentEl_.replaceChild(this.textNode_,e):this.contentEl_.appendChild(this.textNode_))})))}updateContent(e){}}aO.prototype.labelText_="Time",aO.prototype.controlText_="Time",zk.registerComponent("TimeDisplay",aO);class oO extends aO{buildCSSClass(){return"vjs-current-time"}updateContent(e){let t;t=this.player_.ended()?this.player_.duration():this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime(),this.updateTextNode_(t)}}oO.prototype.labelText_="Current Time",oO.prototype.controlText_="Current Time",zk.registerComponent("CurrentTimeDisplay",oO);class lO extends aO{constructor(e,t){super(e,t);const n=e=>this.updateContent(e);this.on(e,"durationchange",n),this.on(e,"loadstart",n),this.on(e,"loadedmetadata",n)}buildCSSClass(){return"vjs-duration"}updateContent(e){const t=this.player_.duration();this.updateTextNode_(t)}}lO.prototype.labelText_="Duration",lO.prototype.controlText_="Duration",zk.registerComponent("DurationDisplay",lO);zk.registerComponent("TimeDivider",class extends zk{createEl(){const e=super.createEl("div",{className:"vjs-time-control vjs-time-divider"},{"aria-hidden":!0}),t=super.createEl("div"),n=super.createEl("span",{textContent:"/"});return t.appendChild(n),e.appendChild(t),e}});class cO extends aO{constructor(e,t){super(e,t),this.on(e,"durationchange",(e=>this.updateContent(e)))}buildCSSClass(){return"vjs-remaining-time"}createEl(){const e=super.createEl();return!1!==this.options_.displayNegative&&e.insertBefore(kx("span",{},{"aria-hidden":!0},"-"),this.contentEl_),e}updateContent(e){if("number"!=typeof this.player_.duration())return;let t;t=this.player_.ended()?0:this.player_.remainingTimeDisplay?this.player_.remainingTimeDisplay():this.player_.remainingTime(),this.updateTextNode_(t)}}cO.prototype.labelText_="Remaining Time",cO.prototype.controlText_="Remaining Time",zk.registerComponent("RemainingTimeDisplay",cO);zk.registerComponent("LiveDisplay",class extends zk{constructor(e,t){super(e,t),this.updateShowing(),this.on(this.player(),"durationchange",(e=>this.updateShowing(e)))}createEl(){const e=super.createEl("div",{className:"vjs-live-control vjs-control"});return this.contentEl_=kx("div",{className:"vjs-live-display"},{"aria-live":"off"}),this.contentEl_.appendChild(kx("span",{className:"vjs-control-text",textContent:`${this.localize("Stream Type")} `})),this.contentEl_.appendChild(dT.createTextNode(this.localize("LIVE"))),e.appendChild(this.contentEl_),e}dispose(){this.contentEl_=null,super.dispose()}updateShowing(e){this.player().duration()===1/0?this.show():this.hide()}});class uO extends iO{constructor(e,t){super(e,t),this.updateLiveEdgeStatus(),this.player_.liveTracker&&(this.updateLiveEdgeStatusHandler_=e=>this.updateLiveEdgeStatus(e),this.on(this.player_.liveTracker,"liveedgechange",this.updateLiveEdgeStatusHandler_))}createEl(){const e=super.createEl("button",{className:"vjs-seek-to-live-control vjs-control"});return this.textEl_=kx("span",{className:"vjs-seek-to-live-text",textContent:this.localize("LIVE")},{"aria-hidden":"true"}),e.appendChild(this.textEl_),e}updateLiveEdgeStatus(){!this.player_.liveTracker||this.player_.liveTracker.atLiveEdge()?(this.setAttribute("aria-disabled",!0),this.addClass("vjs-at-live-edge"),this.controlText("Seek to live, currently playing live")):(this.setAttribute("aria-disabled",!1),this.removeClass("vjs-at-live-edge"),this.controlText("Seek to live, currently behind live"))}handleClick(){this.player_.liveTracker.seekToLiveEdge()}dispose(){this.player_.liveTracker&&this.off(this.player_.liveTracker,"liveedgechange",this.updateLiveEdgeStatusHandler_),this.textEl_=null,super.dispose()}}function dO(e,t,n){return e=Number(e),Math.min(n,Math.max(t,isNaN(e)?t:e))}uO.prototype.controlText_="Seek to live, currently playing live",zk.registerComponent("SeekToLive",uO);var hO=Object.freeze({__proto__:null,clamp:dO});class pO extends zk{constructor(e,t){super(e,t),this.handleMouseDown_=e=>this.handleMouseDown(e),this.handleMouseUp_=e=>this.handleMouseUp(e),this.handleKeyDown_=e=>this.handleKeyDown(e),this.handleClick_=e=>this.handleClick(e),this.handleMouseMove_=e=>this.handleMouseMove(e),this.update_=e=>this.update(e),this.bar=this.getChild(this.options_.barName),this.vertical(!!this.options_.vertical),this.enable()}enabled(){return this.enabled_}enable(){this.enabled()||(this.on("mousedown",this.handleMouseDown_),this.on("touchstart",this.handleMouseDown_),this.on("keydown",this.handleKeyDown_),this.on("click",this.handleClick_),this.on(this.player_,"controlsvisible",this.update),this.playerEvent&&this.on(this.player_,this.playerEvent,this.update),this.removeClass("disabled"),this.setAttribute("tabindex",0),this.enabled_=!0)}disable(){if(!this.enabled())return;const e=this.bar.el_.ownerDocument;this.off("mousedown",this.handleMouseDown_),this.off("touchstart",this.handleMouseDown_),this.off("keydown",this.handleKeyDown_),this.off("click",this.handleClick_),this.off(this.player_,"controlsvisible",this.update_),this.off(e,"mousemove",this.handleMouseMove_),this.off(e,"mouseup",this.handleMouseUp_),this.off(e,"touchmove",this.handleMouseMove_),this.off(e,"touchend",this.handleMouseUp_),this.removeAttribute("tabindex"),this.addClass("disabled"),this.playerEvent&&this.off(this.player_,this.playerEvent,this.update),this.enabled_=!1}createEl(e,t={},n={}){return t.className=t.className+" vjs-slider",t=Object.assign({tabIndex:0},t),n=Object.assign({role:"slider","aria-valuenow":0,"aria-valuemin":0,"aria-valuemax":100},n),super.createEl(e,t,n)}handleMouseDown(e){const t=this.bar.el_.ownerDocument;"mousedown"===e.type&&e.preventDefault(),"touchstart"!==e.type||ux||e.preventDefault(),jx(),this.addClass("vjs-sliding"),this.trigger("slideractive"),this.on(t,"mousemove",this.handleMouseMove_),this.on(t,"mouseup",this.handleMouseUp_),this.on(t,"touchmove",this.handleMouseMove_),this.on(t,"touchend",this.handleMouseUp_),this.handleMouseMove(e,!0)}handleMouseMove(e){}handleMouseUp(e){const t=this.bar.el_.ownerDocument;qx(),this.removeClass("vjs-sliding"),this.trigger("sliderinactive"),this.off(t,"mousemove",this.handleMouseMove_),this.off(t,"mouseup",this.handleMouseUp_),this.off(t,"touchmove",this.handleMouseMove_),this.off(t,"touchend",this.handleMouseUp_),this.update()}update(){if(!this.el_||!this.bar)return;const e=this.getProgress();return e===this.progress_||(this.progress_=e,this.requestNamedAnimationFrame("Slider#update",(()=>{const t=this.vertical()?"height":"width";this.bar.el().style[t]=(100*e).toFixed(2)+"%"}))),e}getProgress(){return Number(dO(this.getPercent(),0,1).toFixed(4))}calculateDistance(e){const t=$x(this.el_,e);return this.vertical()?t.y:t.x}handleKeyDown(e){pT.isEventKey(e,"Left")||pT.isEventKey(e,"Down")?(e.preventDefault(),e.stopPropagation(),this.stepBack()):pT.isEventKey(e,"Right")||pT.isEventKey(e,"Up")?(e.preventDefault(),e.stopPropagation(),this.stepForward()):super.handleKeyDown(e)}handleClick(e){e.stopPropagation(),e.preventDefault()}vertical(e){if(void 0===e)return this.vertical_||!1;this.vertical_=!!e,this.vertical_?this.addClass("vjs-slider-vertical"):this.addClass("vjs-slider-horizontal")}}zk.registerComponent("Slider",pO);const fO=(e,t)=>dO(e/t*100,0,100).toFixed(2)+"%";zk.registerComponent("LoadProgressBar",class extends zk{constructor(e,t){super(e,t),this.partEls_=[],this.on(e,"progress",(e=>this.update(e)))}createEl(){const e=super.createEl("div",{className:"vjs-load-progress"}),t=kx("span",{className:"vjs-control-text"}),n=kx("span",{textContent:this.localize("Loaded")}),i=dT.createTextNode(": ");return this.percentageEl_=kx("span",{className:"vjs-control-text-loaded-percentage",textContent:"0%"}),e.appendChild(t),t.appendChild(n),t.appendChild(i),t.appendChild(this.percentageEl_),e}dispose(){this.partEls_=null,this.percentageEl_=null,super.dispose()}update(e){this.requestNamedAnimationFrame("LoadProgressBar#update",(()=>{const e=this.player_.liveTracker,t=this.player_.buffered(),n=e&&e.isLive()?e.seekableEnd():this.player_.duration(),i=this.player_.bufferedEnd(),r=this.partEls_,s=fO(i,n);this.percent_!==s&&(this.el_.style.width=s,Ax(this.percentageEl_,s),this.percent_=s);for(let a=0;a<t.length;a++){const e=t.start(a),n=t.end(a);let s=r[a];s||(s=this.el_.appendChild(kx()),r[a]=s),s.dataset.start===e&&s.dataset.end===n||(s.dataset.start=e,s.dataset.end=n,s.style.left=fO(e,i),s.style.width=fO(n-e,i))}for(let a=r.length;a>t.length;a--)this.el_.removeChild(r[a-1]);r.length=t.length}))}});zk.registerComponent("TimeTooltip",class extends zk{constructor(e,t){super(e,t),this.update=Ck(Sk(this,this.update),wk)}createEl(){return super.createEl("div",{className:"vjs-time-tooltip"},{"aria-hidden":"true"})}update(e,t,n){const i=Vx(this.el_),r=Hx(this.player_.el()),s=e.width*t;if(!r||!i)return;const a=e.left-r.left+s,o=e.width-s+(r.right-e.right);let l=i.width/2;a<l?l+=l-a:o<l&&(l=o),l<0?l=0:l>i.width&&(l=i.width),l=Math.round(l),this.el_.style.right=`-${l}px`,this.write(n)}write(e){Ax(this.el_,e)}updateTime(e,t,n,i){this.requestNamedAnimationFrame("TimeTooltip#updateTime",(()=>{let r;const s=this.player_.duration();if(this.player_.liveTracker&&this.player_.liveTracker.isLive()){const e=this.player_.liveTracker.liveWindow(),n=e-t*e;r=(n<1?"":"-")+eA(n,e)}else r=eA(n,s);this.update(e,t,r),i&&i()}))}});class mO extends zk{constructor(e,t){super(e,t),this.update=Ck(Sk(this,this.update),wk)}createEl(){return super.createEl("div",{className:"vjs-play-progress vjs-slider-bar"},{"aria-hidden":"true"})}update(e,t){const n=this.getChild("timeTooltip");if(!n)return;const i=this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime();n.updateTime(e,t,i)}}mO.prototype.options_={children:[]},bx||ax||mO.prototype.options_.children.push("timeTooltip"),zk.registerComponent("PlayProgressBar",mO);class gO extends zk{constructor(e,t){super(e,t),this.update=Ck(Sk(this,this.update),wk)}createEl(){return super.createEl("div",{className:"vjs-mouse-display"})}update(e,t){const n=t*this.player_.duration();this.getChild("timeTooltip").updateTime(e,t,n,(()=>{this.el_.style.left=e.width*t+"px"}))}}gO.prototype.options_={children:["timeTooltip"]},zk.registerComponent("MouseTimeDisplay",gO);class yO extends pO{constructor(e,t){super(e,t),this.setEventHandlers_()}setEventHandlers_(){this.update_=Sk(this,this.update),this.update=Ck(this.update_,wk),this.on(this.player_,["ended","durationchange","timeupdate"],this.update),this.player_.liveTracker&&this.on(this.player_.liveTracker,"liveedgechange",this.update),this.updateInterval=null,this.enableIntervalHandler_=e=>this.enableInterval_(e),this.disableIntervalHandler_=e=>this.disableInterval_(e),this.on(this.player_,["playing"],this.enableIntervalHandler_),this.on(this.player_,["ended","pause","waiting"],this.disableIntervalHandler_),"hidden"in dT&&"visibilityState"in dT&&this.on(dT,"visibilitychange",this.toggleVisibility_)}toggleVisibility_(e){"hidden"===dT.visibilityState?(this.cancelNamedAnimationFrame("SeekBar#update"),this.cancelNamedAnimationFrame("Slider#update"),this.disableInterval_(e)):(this.player_.ended()||this.player_.paused()||this.enableInterval_(),this.update())}enableInterval_(){this.updateInterval||(this.updateInterval=this.setInterval(this.update,wk))}disableInterval_(e){this.player_.liveTracker&&this.player_.liveTracker.isLive()&&e&&"ended"!==e.type||this.updateInterval&&(this.clearInterval(this.updateInterval),this.updateInterval=null)}createEl(){return super.createEl("div",{className:"vjs-progress-holder"},{"aria-label":this.localize("Progress Bar")})}update(e){if("hidden"===dT.visibilityState)return;const t=super.update();return this.requestNamedAnimationFrame("SeekBar#update",(()=>{const e=this.player_.ended()?this.player_.duration():this.getCurrentTime_(),n=this.player_.liveTracker;let i=this.player_.duration();n&&n.isLive()&&(i=this.player_.liveTracker.liveCurrentTime()),this.percent_!==t&&(this.el_.setAttribute("aria-valuenow",(100*t).toFixed(2)),this.percent_=t),this.currentTime_===e&&this.duration_===i||(this.el_.setAttribute("aria-valuetext",this.localize("progress bar timing: currentTime={1} duration={2}",[eA(e,i),eA(i,i)],"{1} of {2}")),this.currentTime_=e,this.duration_=i),this.bar&&this.bar.update(Hx(this.el()),this.getProgress())})),t}userSeek_(e){this.player_.liveTracker&&this.player_.liveTracker.isLive()&&this.player_.liveTracker.nextSeekedFromUser(),this.player_.currentTime(e)}getCurrentTime_(){return this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime()}getPercent(){const e=this.getCurrentTime_();let t;const n=this.player_.liveTracker;return n&&n.isLive()?(t=(e-n.seekableStart())/n.liveWindow(),n.atLiveEdge()&&(t=1)):t=e/this.player_.duration(),t}handleMouseDown(e){Yx(e)&&(e.stopPropagation(),this.videoWasPlaying=!this.player_.paused(),this.player_.pause(),super.handleMouseDown(e))}handleMouseMove(e,t=!1){if(!Yx(e))return;let n;t||this.player_.scrubbing()||this.player_.scrubbing(!0);const i=this.calculateDistance(e),r=this.player_.liveTracker;if(r&&r.isLive()){if(i>=.99)return void r.seekToLiveEdge();const e=r.seekableStart(),t=r.liveCurrentTime();if(n=e+i*r.liveWindow(),n>=t&&(n=t),n<=e&&(n=e+.1),n===1/0)return}else n=i*this.player_.duration(),n===this.player_.duration()&&(n-=.1);this.userSeek_(n)}enable(){super.enable();const e=this.getChild("mouseTimeDisplay");e&&e.show()}disable(){super.disable();const e=this.getChild("mouseTimeDisplay");e&&e.hide()}handleMouseUp(e){super.handleMouseUp(e),e&&e.stopPropagation(),this.player_.scrubbing(!1),this.player_.trigger({type:"timeupdate",target:this,manuallyTriggered:!0}),this.videoWasPlaying?sA(this.player_.play()):this.update_()}stepForward(){this.userSeek_(this.player_.currentTime()+5)}stepBack(){this.userSeek_(this.player_.currentTime()-5)}handleAction(e){this.player_.paused()?this.player_.play():this.player_.pause()}handleKeyDown(e){const t=this.player_.liveTracker;if(pT.isEventKey(e,"Space")||pT.isEventKey(e,"Enter"))e.preventDefault(),e.stopPropagation(),this.handleAction(e);else if(pT.isEventKey(e,"Home"))e.preventDefault(),e.stopPropagation(),this.userSeek_(0);else if(pT.isEventKey(e,"End"))e.preventDefault(),e.stopPropagation(),t&&t.isLive()?this.userSeek_(t.liveCurrentTime()):this.userSeek_(this.player_.duration());else if(/^[0-9]$/.test(pT(e))){e.preventDefault(),e.stopPropagation();const n=10*(pT.codes[pT(e)]-pT.codes[0])/100;t&&t.isLive()?this.userSeek_(t.seekableStart()+t.liveWindow()*n):this.userSeek_(this.player_.duration()*n)}else pT.isEventKey(e,"PgDn")?(e.preventDefault(),e.stopPropagation(),this.userSeek_(this.player_.currentTime()-60)):pT.isEventKey(e,"PgUp")?(e.preventDefault(),e.stopPropagation(),this.userSeek_(this.player_.currentTime()+60)):super.handleKeyDown(e)}dispose(){this.disableInterval_(),this.off(this.player_,["ended","durationchange","timeupdate"],this.update),this.player_.liveTracker&&this.off(this.player_.liveTracker,"liveedgechange",this.update),this.off(this.player_,["playing"],this.enableIntervalHandler_),this.off(this.player_,["ended","pause","waiting"],this.disableIntervalHandler_),"hidden"in dT&&"visibilityState"in dT&&this.off(dT,"visibilitychange",this.toggleVisibility_),super.dispose()}}yO.prototype.options_={children:["loadProgressBar","playProgressBar"],barName:"playProgressBar"},bx||ax||yO.prototype.options_.children.splice(1,0,"mouseTimeDisplay"),zk.registerComponent("SeekBar",yO);class _O extends zk{constructor(e,t){super(e,t),this.handleMouseMove=Ck(Sk(this,this.handleMouseMove),wk),this.throttledHandleMouseSeek=Ck(Sk(this,this.handleMouseSeek),wk),this.handleMouseUpHandler_=e=>this.handleMouseUp(e),this.handleMouseDownHandler_=e=>this.handleMouseDown(e),this.enable()}createEl(){return super.createEl("div",{className:"vjs-progress-control vjs-control"})}handleMouseMove(e){const t=this.getChild("seekBar");if(!t)return;const n=t.getChild("playProgressBar"),i=t.getChild("mouseTimeDisplay");if(!n&&!i)return;const r=t.el(),s=Vx(r);let a=$x(r,e).x;a=dO(a,0,1),i&&i.update(s,a),n&&n.update(s,t.getProgress())}handleMouseSeek(e){const t=this.getChild("seekBar");t&&t.handleMouseMove(e)}enabled(){return this.enabled_}disable(){if(this.children().forEach((e=>e.disable&&e.disable())),this.enabled()&&(this.off(["mousedown","touchstart"],this.handleMouseDownHandler_),this.off(this.el_,"mousemove",this.handleMouseMove),this.removeListenersAddedOnMousedownAndTouchstart(),this.addClass("disabled"),this.enabled_=!1,this.player_.scrubbing())){const e=this.getChild("seekBar");this.player_.scrubbing(!1),e.videoWasPlaying&&sA(this.player_.play())}}enable(){this.children().forEach((e=>e.enable&&e.enable())),this.enabled()||(this.on(["mousedown","touchstart"],this.handleMouseDownHandler_),this.on(this.el_,"mousemove",this.handleMouseMove),this.removeClass("disabled"),this.enabled_=!0)}removeListenersAddedOnMousedownAndTouchstart(){const e=this.el_.ownerDocument;this.off(e,"mousemove",this.throttledHandleMouseSeek),this.off(e,"touchmove",this.throttledHandleMouseSeek),this.off(e,"mouseup",this.handleMouseUpHandler_),this.off(e,"touchend",this.handleMouseUpHandler_)}handleMouseDown(e){const t=this.el_.ownerDocument,n=this.getChild("seekBar");n&&n.handleMouseDown(e),this.on(t,"mousemove",this.throttledHandleMouseSeek),this.on(t,"touchmove",this.throttledHandleMouseSeek),this.on(t,"mouseup",this.handleMouseUpHandler_),this.on(t,"touchend",this.handleMouseUpHandler_)}handleMouseUp(e){const t=this.getChild("seekBar");t&&t.handleMouseUp(e),this.removeListenersAddedOnMousedownAndTouchstart()}}_O.prototype.options_={children:["seekBar"]},zk.registerComponent("ProgressControl",_O);class vO extends iO{constructor(e,t){super(e,t),this.on(e,["enterpictureinpicture","leavepictureinpicture"],(e=>this.handlePictureInPictureChange(e))),this.on(e,["disablepictureinpicturechanged","loadedmetadata"],(e=>this.handlePictureInPictureEnabledChange(e))),this.on(e,["loadedmetadata","audioonlymodechange","audiopostermodechange"],(()=>{"audio"===e.currentType().substring(0,5)||e.audioPosterMode()||e.audioOnlyMode()?(e.isInPictureInPicture()&&e.exitPictureInPicture(),this.hide()):this.show()})),this.disable()}buildCSSClass(){return`vjs-picture-in-picture-control ${super.buildCSSClass()}`}handlePictureInPictureEnabledChange(){dT.pictureInPictureEnabled&&!1===this.player_.disablePictureInPicture()||this.player_.options_.enableDocumentPictureInPicture&&"documentPictureInPicture"in sT?this.enable():this.disable()}handlePictureInPictureChange(e){this.player_.isInPictureInPicture()?this.controlText("Exit Picture-in-Picture"):this.controlText("Picture-in-Picture"),this.handlePictureInPictureEnabledChange()}handleClick(e){this.player_.isInPictureInPicture()?this.player_.exitPictureInPicture():this.player_.requestPictureInPicture()}}vO.prototype.controlText_="Picture-in-Picture",zk.registerComponent("PictureInPictureToggle",vO);class bO extends iO{constructor(e,t){super(e,t),this.on(e,"fullscreenchange",(e=>this.handleFullscreenChange(e))),!1===dT[e.fsApi_.fullscreenEnabled]&&this.disable()}buildCSSClass(){return`vjs-fullscreen-control ${super.buildCSSClass()}`}handleFullscreenChange(e){this.player_.isFullscreen()?this.controlText("Exit Fullscreen"):this.controlText("Fullscreen")}handleClick(e){this.player_.isFullscreen()?this.player_.exitFullscreen():this.player_.requestFullscreen()}}bO.prototype.controlText_="Fullscreen",zk.registerComponent("FullscreenToggle",bO);zk.registerComponent("VolumeLevel",class extends zk{createEl(){const e=super.createEl("div",{className:"vjs-volume-level"});return e.appendChild(super.createEl("span",{className:"vjs-control-text"})),e}});zk.registerComponent("VolumeLevelTooltip",class extends zk{constructor(e,t){super(e,t),this.update=Ck(Sk(this,this.update),wk)}createEl(){return super.createEl("div",{className:"vjs-volume-tooltip"},{"aria-hidden":"true"})}update(e,t,n,i){if(!n){const n=Hx(this.el_),i=Hx(this.player_.el()),r=e.width*t;if(!i||!n)return;const s=e.left-i.left+r,a=e.width-r+(i.right-e.right);let o=n.width/2;s<o?o+=o-s:a<o&&(o=a),o<0?o=0:o>n.width&&(o=n.width),this.el_.style.right=`-${o}px`}this.write(`${i}%`)}write(e){Ax(this.el_,e)}updateVolume(e,t,n,i,r){this.requestNamedAnimationFrame("VolumeLevelTooltip#updateVolume",(()=>{this.update(e,t,n,i.toFixed(0)),r&&r()}))}});class TO extends zk{constructor(e,t){super(e,t),this.update=Ck(Sk(this,this.update),wk)}createEl(){return super.createEl("div",{className:"vjs-mouse-display"})}update(e,t,n){const i=100*t;this.getChild("volumeLevelTooltip").updateVolume(e,t,n,i,(()=>{n?this.el_.style.bottom=e.height*t+"px":this.el_.style.left=e.width*t+"px"}))}}TO.prototype.options_={children:["volumeLevelTooltip"]},zk.registerComponent("MouseVolumeLevelDisplay",TO);class EO extends pO{constructor(e,t){super(e,t),this.on("slideractive",(e=>this.updateLastVolume_(e))),this.on(e,"volumechange",(e=>this.updateARIAAttributes(e))),e.ready((()=>this.updateARIAAttributes()))}createEl(){return super.createEl("div",{className:"vjs-volume-bar vjs-slider-bar"},{"aria-label":this.localize("Volume Level"),"aria-live":"polite"})}handleMouseDown(e){Yx(e)&&super.handleMouseDown(e)}handleMouseMove(e){const t=this.getChild("mouseVolumeLevelDisplay");if(t){const n=this.el(),i=Hx(n),r=this.vertical();let s=$x(n,e);s=r?s.y:s.x,s=dO(s,0,1),t.update(i,s,r)}Yx(e)&&(this.checkMuted(),this.player_.volume(this.calculateDistance(e)))}checkMuted(){this.player_.muted()&&this.player_.muted(!1)}getPercent(){return this.player_.muted()?0:this.player_.volume()}stepForward(){this.checkMuted(),this.player_.volume(this.player_.volume()+.1)}stepBack(){this.checkMuted(),this.player_.volume(this.player_.volume()-.1)}updateARIAAttributes(e){const t=this.player_.muted()?0:this.volumeAsPercentage_();this.el_.setAttribute("aria-valuenow",t),this.el_.setAttribute("aria-valuetext",t+"%")}volumeAsPercentage_(){return Math.round(100*this.player_.volume())}updateLastVolume_(){const e=this.player_.volume();this.one("sliderinactive",(()=>{0===this.player_.volume()&&this.player_.lastVolume_(e)}))}}EO.prototype.options_={children:["volumeLevel"],barName:"volumeLevel"},bx||ax||EO.prototype.options_.children.splice(0,0,"mouseVolumeLevelDisplay"),EO.prototype.playerEvent="volumechange",zk.registerComponent("VolumeBar",EO);class wO extends zk{constructor(e,t={}){t.vertical=t.vertical||!1,(void 0===t.volumeBar||ZI(t.volumeBar))&&(t.volumeBar=t.volumeBar||{},t.volumeBar.vertical=t.vertical),super(e,t),function(e,t){t.tech_&&!t.tech_.featuresVolumeControl&&e.addClass("vjs-hidden"),e.on(t,"loadstart",(function(){t.tech_.featuresVolumeControl?e.removeClass("vjs-hidden"):e.addClass("vjs-hidden")}))}(this,e),this.throttledHandleMouseMove=Ck(Sk(this,this.handleMouseMove),wk),this.handleMouseUpHandler_=e=>this.handleMouseUp(e),this.on("mousedown",(e=>this.handleMouseDown(e))),this.on("touchstart",(e=>this.handleMouseDown(e))),this.on("mousemove",(e=>this.handleMouseMove(e))),this.on(this.volumeBar,["focus","slideractive"],(()=>{this.volumeBar.addClass("vjs-slider-active"),this.addClass("vjs-slider-active"),this.trigger("slideractive")})),this.on(this.volumeBar,["blur","sliderinactive"],(()=>{this.volumeBar.removeClass("vjs-slider-active"),this.removeClass("vjs-slider-active"),this.trigger("sliderinactive")}))}createEl(){let e="vjs-volume-horizontal";return this.options_.vertical&&(e="vjs-volume-vertical"),super.createEl("div",{className:`vjs-volume-control vjs-control ${e}`})}handleMouseDown(e){const t=this.el_.ownerDocument;this.on(t,"mousemove",this.throttledHandleMouseMove),this.on(t,"touchmove",this.throttledHandleMouseMove),this.on(t,"mouseup",this.handleMouseUpHandler_),this.on(t,"touchend",this.handleMouseUpHandler_)}handleMouseUp(e){const t=this.el_.ownerDocument;this.off(t,"mousemove",this.throttledHandleMouseMove),this.off(t,"touchmove",this.throttledHandleMouseMove),this.off(t,"mouseup",this.handleMouseUpHandler_),this.off(t,"touchend",this.handleMouseUpHandler_)}handleMouseMove(e){this.volumeBar.handleMouseMove(e)}}wO.prototype.options_={children:["volumeBar"]},zk.registerComponent("VolumeControl",wO);class SO extends iO{constructor(e,t){super(e,t),function(e,t){t.tech_&&!t.tech_.featuresMuteControl&&e.addClass("vjs-hidden"),e.on(t,"loadstart",(function(){t.tech_.featuresMuteControl?e.removeClass("vjs-hidden"):e.addClass("vjs-hidden")}))}(this,e),this.on(e,["loadstart","volumechange"],(e=>this.update(e)))}buildCSSClass(){return`vjs-mute-control ${super.buildCSSClass()}`}handleClick(e){const t=this.player_.volume(),n=this.player_.lastVolume_();if(0===t){const e=n<.1?.1:n;this.player_.volume(e),this.player_.muted(!1)}else this.player_.muted(!this.player_.muted())}update(e){this.updateIcon_(),this.updateControlText_()}updateIcon_(){const e=this.player_.volume();let t=3;bx&&this.player_.tech_&&this.player_.tech_.el_&&this.player_.muted(this.player_.tech_.el_.muted),0===e||this.player_.muted()?t=0:e<.33?t=1:e<.67&&(t=2),Nx(this.el_,[0,1,2,3].reduce(((e,t)=>e+`${t?" ":""}vjs-vol-${t}`),"")),Lx(this.el_,`vjs-vol-${t}`)}updateControlText_(){const e=this.player_.muted()||0===this.player_.volume()?"Unmute":"Mute";this.controlText()!==e&&this.controlText(e)}}SO.prototype.controlText_="Mute",zk.registerComponent("MuteToggle",SO);class CO extends zk{constructor(e,t={}){void 0!==t.inline?t.inline=t.inline:t.inline=!0,(void 0===t.volumeControl||ZI(t.volumeControl))&&(t.volumeControl=t.volumeControl||{},t.volumeControl.vertical=!t.inline),super(e,t),this.handleKeyPressHandler_=e=>this.handleKeyPress(e),this.on(e,["loadstart"],(e=>this.volumePanelState_(e))),this.on(this.muteToggle,"keyup",(e=>this.handleKeyPress(e))),this.on(this.volumeControl,"keyup",(e=>this.handleVolumeControlKeyUp(e))),this.on("keydown",(e=>this.handleKeyPress(e))),this.on("mouseover",(e=>this.handleMouseOver(e))),this.on("mouseout",(e=>this.handleMouseOut(e))),this.on(this.volumeControl,["slideractive"],this.sliderActive_),this.on(this.volumeControl,["sliderinactive"],this.sliderInactive_)}sliderActive_(){this.addClass("vjs-slider-active")}sliderInactive_(){this.removeClass("vjs-slider-active")}volumePanelState_(){this.volumeControl.hasClass("vjs-hidden")&&this.muteToggle.hasClass("vjs-hidden")&&this.addClass("vjs-hidden"),this.volumeControl.hasClass("vjs-hidden")&&!this.muteToggle.hasClass("vjs-hidden")&&this.addClass("vjs-mute-toggle-only")}createEl(){let e="vjs-volume-panel-horizontal";return this.options_.inline||(e="vjs-volume-panel-vertical"),super.createEl("div",{className:`vjs-volume-panel vjs-control ${e}`})}dispose(){this.handleMouseOut(),super.dispose()}handleVolumeControlKeyUp(e){pT.isEventKey(e,"Esc")&&this.muteToggle.focus()}handleMouseOver(e){this.addClass("vjs-hover"),yk(dT,"keyup",this.handleKeyPressHandler_)}handleMouseOut(e){this.removeClass("vjs-hover"),_k(dT,"keyup",this.handleKeyPressHandler_)}handleKeyPress(e){pT.isEventKey(e,"Esc")&&this.handleMouseOut()}}CO.prototype.options_={children:["muteToggle","volumeControl"]},zk.registerComponent("VolumePanel",CO);zk.registerComponent("SkipForward",class extends iO{constructor(e,t){super(e,t),this.validOptions=[5,10,30],this.skipTime=this.getSkipForwardTime(),this.skipTime&&this.validOptions.includes(this.skipTime)?(this.controlText(this.localize("Skip forward {1} seconds",[this.skipTime])),this.show()):this.hide()}getSkipForwardTime(){const e=this.options_.playerOptions;return e.controlBar&&e.controlBar.skipButtons&&e.controlBar.skipButtons.forward}buildCSSClass(){return`vjs-skip-forward-${this.getSkipForwardTime()} ${super.buildCSSClass()}`}handleClick(e){const t=this.player_.currentTime(),n=this.player_.liveTracker,i=n&&n.isLive()?n.seekableEnd():this.player_.duration();let r;r=t+this.skipTime<=i?t+this.skipTime:i,this.player_.currentTime(r)}handleLanguagechange(){this.controlText(this.localize("Skip forward {1} seconds",[this.skipTime]))}});class IO extends iO{constructor(e,t){super(e,t),this.validOptions=[5,10,30],this.skipTime=this.getSkipBackwardTime(),this.skipTime&&this.validOptions.includes(this.skipTime)?(this.controlText(this.localize("Skip backward {1} seconds",[this.skipTime])),this.show()):this.hide()}getSkipBackwardTime(){const e=this.options_.playerOptions;return e.controlBar&&e.controlBar.skipButtons&&e.controlBar.skipButtons.backward}buildCSSClass(){return`vjs-skip-backward-${this.getSkipBackwardTime()} ${super.buildCSSClass()}`}handleClick(e){const t=this.player_.currentTime(),n=this.player_.liveTracker,i=n&&n.isLive()&&n.seekableStart();let r;r=i&&t-this.skipTime<=i?i:t>=this.skipTime?t-this.skipTime:0,this.player_.currentTime(r)}handleLanguagechange(){this.controlText(this.localize("Skip backward {1} seconds",[this.skipTime]))}}IO.prototype.controlText_="Skip Backward",zk.registerComponent("SkipBackward",IO);class xO extends zk{constructor(e,t){super(e,t),t&&(this.menuButton_=t.menuButton),this.focusedChild_=-1,this.on("keydown",(e=>this.handleKeyDown(e))),this.boundHandleBlur_=e=>this.handleBlur(e),this.boundHandleTapClick_=e=>this.handleTapClick(e)}addEventListenerForItem(e){e instanceof zk&&(this.on(e,"blur",this.boundHandleBlur_),this.on(e,["tap","click"],this.boundHandleTapClick_))}removeEventListenerForItem(e){e instanceof zk&&(this.off(e,"blur",this.boundHandleBlur_),this.off(e,["tap","click"],this.boundHandleTapClick_))}removeChild(e){"string"==typeof e&&(e=this.getChild(e)),this.removeEventListenerForItem(e),super.removeChild(e)}addItem(e){const t=this.addChild(e);t&&this.addEventListenerForItem(t)}createEl(){const e=this.options_.contentElType||"ul";this.contentEl_=kx(e,{className:"vjs-menu-content"}),this.contentEl_.setAttribute("role","menu");const t=super.createEl("div",{append:this.contentEl_,className:"vjs-menu"});return t.appendChild(this.contentEl_),yk(t,"click",(function(e){e.preventDefault(),e.stopImmediatePropagation()})),t}dispose(){this.contentEl_=null,this.boundHandleBlur_=null,this.boundHandleTapClick_=null,super.dispose()}handleBlur(e){const t=e.relatedTarget||dT.activeElement;if(!this.children().some((e=>e.el()===t))){const e=this.menuButton_;e&&e.buttonPressed_&&t!==e.el().firstChild&&e.unpressButton()}}handleTapClick(e){if(this.menuButton_){this.menuButton_.unpressButton();const t=this.children();if(!Array.isArray(t))return;const n=t.filter((t=>t.el()===e.target))[0];if(!n)return;"CaptionSettingsMenuItem"!==n.name()&&this.menuButton_.focus()}}handleKeyDown(e){pT.isEventKey(e,"Left")||pT.isEventKey(e,"Down")?(e.preventDefault(),e.stopPropagation(),this.stepForward()):(pT.isEventKey(e,"Right")||pT.isEventKey(e,"Up"))&&(e.preventDefault(),e.stopPropagation(),this.stepBack())}stepForward(){let e=0;void 0!==this.focusedChild_&&(e=this.focusedChild_+1),this.focus(e)}stepBack(){let e=0;void 0!==this.focusedChild_&&(e=this.focusedChild_-1),this.focus(e)}focus(e=0){const t=this.children().slice();t.length&&t[0].hasClass("vjs-menu-title")&&t.shift(),t.length>0&&(e<0?e=0:e>=t.length&&(e=t.length-1),this.focusedChild_=e,t[e].el_.focus())}}zk.registerComponent("Menu",xO);class kO extends zk{constructor(e,t={}){super(e,t),this.menuButton_=new iO(e,t),this.menuButton_.controlText(this.controlText_),this.menuButton_.el_.setAttribute("aria-haspopup","true");const n=iO.prototype.buildCSSClass();this.menuButton_.el_.className=this.buildCSSClass()+" "+n,this.menuButton_.removeClass("vjs-control"),this.addChild(this.menuButton_),this.update(),this.enabled_=!0;const i=e=>this.handleClick(e);this.handleMenuKeyUp_=e=>this.handleMenuKeyUp(e),this.on(this.menuButton_,"tap",i),this.on(this.menuButton_,"click",i),this.on(this.menuButton_,"keydown",(e=>this.handleKeyDown(e))),this.on(this.menuButton_,"mouseenter",(()=>{this.addClass("vjs-hover"),this.menu.show(),yk(dT,"keyup",this.handleMenuKeyUp_)})),this.on("mouseleave",(e=>this.handleMouseLeave(e))),this.on("keydown",(e=>this.handleSubmenuKeyDown(e)))}update(){const e=this.createMenu();this.menu&&(this.menu.dispose(),this.removeChild(this.menu)),this.menu=e,this.addChild(e),this.buttonPressed_=!1,this.menuButton_.el_.setAttribute("aria-expanded","false"),this.items&&this.items.length<=this.hideThreshold_?(this.hide(),this.menu.contentEl_.removeAttribute("role")):(this.show(),this.menu.contentEl_.setAttribute("role","menu"))}createMenu(){const e=new xO(this.player_,{menuButton:this});if(this.hideThreshold_=0,this.options_.title){const t=kx("li",{className:"vjs-menu-title",textContent:Vk(this.options_.title),tabIndex:-1}),n=new zk(this.player_,{el:t});e.addItem(n)}if(this.items=this.createItems(),this.items)for(let t=0;t<this.items.length;t++)e.addItem(this.items[t]);return e}createItems(){}createEl(){return super.createEl("div",{className:this.buildWrapperCSSClass()},{})}buildWrapperCSSClass(){let e="vjs-menu-button";!0===this.options_.inline?e+="-inline":e+="-popup";return`vjs-menu-button ${e} ${iO.prototype.buildCSSClass()} ${super.buildCSSClass()}`}buildCSSClass(){let e="vjs-menu-button";return!0===this.options_.inline?e+="-inline":e+="-popup",`vjs-menu-button ${e} ${super.buildCSSClass()}`}controlText(e,t=this.menuButton_.el()){return this.menuButton_.controlText(e,t)}dispose(){this.handleMouseLeave(),super.dispose()}handleClick(e){this.buttonPressed_?this.unpressButton():this.pressButton()}handleMouseLeave(e){this.removeClass("vjs-hover"),_k(dT,"keyup",this.handleMenuKeyUp_)}focus(){this.menuButton_.focus()}blur(){this.menuButton_.blur()}handleKeyDown(e){pT.isEventKey(e,"Esc")||pT.isEventKey(e,"Tab")?(this.buttonPressed_&&this.unpressButton(),pT.isEventKey(e,"Tab")||(e.preventDefault(),this.menuButton_.focus())):(pT.isEventKey(e,"Up")||pT.isEventKey(e,"Down"))&&(this.buttonPressed_||(e.preventDefault(),this.pressButton()))}handleMenuKeyUp(e){(pT.isEventKey(e,"Esc")||pT.isEventKey(e,"Tab"))&&this.removeClass("vjs-hover")}handleSubmenuKeyPress(e){this.handleSubmenuKeyDown(e)}handleSubmenuKeyDown(e){(pT.isEventKey(e,"Esc")||pT.isEventKey(e,"Tab"))&&(this.buttonPressed_&&this.unpressButton(),pT.isEventKey(e,"Tab")||(e.preventDefault(),this.menuButton_.focus()))}pressButton(){if(this.enabled_){if(this.buttonPressed_=!0,this.menu.show(),this.menu.lockShowing(),this.menuButton_.el_.setAttribute("aria-expanded","true"),bx&&Ix())return;this.menu.focus()}}unpressButton(){this.enabled_&&(this.buttonPressed_=!1,this.menu.unlockShowing(),this.menu.hide(),this.menuButton_.el_.setAttribute("aria-expanded","false"))}disable(){this.unpressButton(),this.enabled_=!1,this.addClass("vjs-disabled"),this.menuButton_.disable()}enable(){this.enabled_=!0,this.removeClass("vjs-disabled"),this.menuButton_.enable()}}zk.registerComponent("MenuButton",kO);class AO extends kO{constructor(e,t){const n=t.tracks;if(super(e,t),this.items.length<=1&&this.hide(),!n)return;const i=Sk(this,this.update);n.addEventListener("removetrack",i),n.addEventListener("addtrack",i),n.addEventListener("labelchange",i),this.player_.on("ready",i),this.player_.on("dispose",(function(){n.removeEventListener("removetrack",i),n.removeEventListener("addtrack",i),n.removeEventListener("labelchange",i)}))}}zk.registerComponent("TrackButton",AO);const OO=["Tab","Esc","Up","Down","Right","Left"];class PO extends YA{constructor(e,t){super(e,t),this.selectable=t.selectable,this.isSelected_=t.selected||!1,this.multiSelectable=t.multiSelectable,this.selected(this.isSelected_),this.selectable?this.multiSelectable?this.el_.setAttribute("role","menuitemcheckbox"):this.el_.setAttribute("role","menuitemradio"):this.el_.setAttribute("role","menuitem")}createEl(e,t,n){this.nonIconControl=!0;const i=super.createEl("li",Object.assign({className:"vjs-menu-item",tabIndex:-1},t),n);return i.replaceChild(kx("span",{className:"vjs-menu-item-text",textContent:this.localize(this.options_.label)}),i.querySelector(".vjs-icon-placeholder")),i}handleKeyDown(e){OO.some((t=>pT.isEventKey(e,t)))||super.handleKeyDown(e)}handleClick(e){this.selected(!0)}selected(e){this.selectable&&(e?(this.addClass("vjs-selected"),this.el_.setAttribute("aria-checked","true"),this.controlText(", selected"),this.isSelected_=!0):(this.removeClass("vjs-selected"),this.el_.setAttribute("aria-checked","false"),this.controlText(""),this.isSelected_=!1))}}zk.registerComponent("MenuItem",PO);class LO extends PO{constructor(e,t){const n=t.track,i=e.textTracks();t.label=n.label||n.language||"Unknown",t.selected="showing"===n.mode,super(e,t),this.track=n,this.kinds=(t.kinds||[t.kind||this.track.kind]).filter(Boolean);const r=(...e)=>{this.handleTracksChange.apply(this,e)},s=(...e)=>{this.handleSelectedLanguageChange.apply(this,e)};if(e.on(["loadstart","texttrackchange"],r),i.addEventListener("change",r),i.addEventListener("selectedlanguagechange",s),this.on("dispose",(function(){e.off(["loadstart","texttrackchange"],r),i.removeEventListener("change",r),i.removeEventListener("selectedlanguagechange",s)})),void 0===i.onchange){let e;this.on(["tap","click"],(function(){if("object"!=typeof sT.Event)try{e=new sT.Event("change")}catch(t){}e||(e=dT.createEvent("Event"),e.initEvent("change",!0,!0)),i.dispatchEvent(e)}))}this.handleTracksChange()}handleClick(e){const t=this.track,n=this.player_.textTracks();if(super.handleClick(e),n)for(let i=0;i<n.length;i++){const e=n[i];-1!==this.kinds.indexOf(e.kind)&&(e===t?"showing"!==e.mode&&(e.mode="showing"):"disabled"!==e.mode&&(e.mode="disabled"))}}handleTracksChange(e){const t="showing"===this.track.mode;t!==this.isSelected_&&this.selected(t)}handleSelectedLanguageChange(e){if("showing"===this.track.mode){const e=this.player_.cache_.selectedLanguage;if(e&&e.enabled&&e.language===this.track.language&&e.kind!==this.track.kind)return;this.player_.cache_.selectedLanguage={enabled:!0,language:this.track.language,kind:this.track.kind}}}dispose(){this.track=null,super.dispose()}}zk.registerComponent("TextTrackMenuItem",LO);class NO extends LO{constructor(e,t){t.track={player:e,kind:t.kind,kinds:t.kinds,default:!1,mode:"disabled"},t.kinds||(t.kinds=[t.kind]),t.label?t.track.label=t.label:t.track.label=t.kinds.join(" and ")+" off",t.selectable=!0,t.multiSelectable=!1,super(e,t)}handleTracksChange(e){const t=this.player().textTracks();let n=!0;for(let i=0,r=t.length;i<r;i++){const e=t[i];if(this.options_.kinds.indexOf(e.kind)>-1&&"showing"===e.mode){n=!1;break}}n!==this.isSelected_&&this.selected(n)}handleSelectedLanguageChange(e){const t=this.player().textTracks();let n=!0;for(let i=0,r=t.length;i<r;i++){const e=t[i];if(["captions","descriptions","subtitles"].indexOf(e.kind)>-1&&"showing"===e.mode){n=!1;break}}n&&(this.player_.cache_.selectedLanguage={enabled:!1})}handleLanguagechange(){this.$(".vjs-menu-item-text").textContent=this.player_.localize(this.options_.label),super.handleLanguagechange()}}zk.registerComponent("OffTextTrackMenuItem",NO);class DO extends AO{constructor(e,t={}){t.tracks=e.textTracks(),super(e,t)}createItems(e=[],t=LO){let n;this.label_&&(n=`${this.label_} off`),e.push(new NO(this.player_,{kinds:this.kinds_,kind:this.kind_,label:n})),this.hideThreshold_+=1;const i=this.player_.textTracks();Array.isArray(this.kinds_)||(this.kinds_=[this.kind_]);for(let r=0;r<i.length;r++){const n=i[r];if(this.kinds_.indexOf(n.kind)>-1){const i=new t(this.player_,{track:n,kinds:this.kinds_,kind:this.kind_,selectable:!0,multiSelectable:!1});i.addClass(`vjs-${n.kind}-menu-item`),e.push(i)}}return e}}zk.registerComponent("TextTrackButton",DO);class RO extends PO{constructor(e,t){const n=t.track,i=t.cue,r=e.currentTime();t.selectable=!0,t.multiSelectable=!1,t.label=i.text,t.selected=i.startTime<=r&&r<i.endTime,super(e,t),this.track=n,this.cue=i}handleClick(e){super.handleClick(),this.player_.currentTime(this.cue.startTime)}}zk.registerComponent("ChaptersTrackMenuItem",RO);class MO extends DO{constructor(e,t,n){super(e,t,n),this.selectCurrentItem_=()=>{this.items.forEach((e=>{e.selected(this.track_.activeCues[0]===e.cue)}))}}buildCSSClass(){return`vjs-chapters-button ${super.buildCSSClass()}`}buildWrapperCSSClass(){return`vjs-chapters-button ${super.buildWrapperCSSClass()}`}update(e){if(e&&e.track&&"chapters"!==e.track.kind)return;const t=this.findChaptersTrack();t!==this.track_?(this.setTrack(t),super.update()):(!this.items||t&&t.cues&&t.cues.length!==this.items.length)&&super.update()}setTrack(e){if(this.track_!==e){if(this.updateHandler_||(this.updateHandler_=this.update.bind(this)),this.track_){const e=this.player_.remoteTextTrackEls().getTrackElementByTrack_(this.track_);e&&e.removeEventListener("load",this.updateHandler_),this.track_.removeEventListener("cuechange",this.selectCurrentItem_),this.track_=null}if(this.track_=e,this.track_){this.track_.mode="hidden";const e=this.player_.remoteTextTrackEls().getTrackElementByTrack_(this.track_);e&&e.addEventListener("load",this.updateHandler_),this.track_.addEventListener("cuechange",this.selectCurrentItem_)}}}findChaptersTrack(){const e=this.player_.textTracks()||[];for(let t=e.length-1;t>=0;t--){const n=e[t];if(n.kind===this.kind_)return n}}getMenuCaption(){return this.track_&&this.track_.label?this.track_.label:this.localize(Vk(this.kind_))}createMenu(){return this.options_.title=this.getMenuCaption(),super.createMenu()}createItems(){const e=[];if(!this.track_)return e;const t=this.track_.cues;if(!t)return e;for(let n=0,i=t.length;n<i;n++){const i=t[n],r=new RO(this.player_,{track:this.track_,cue:i});e.push(r)}return e}}MO.prototype.kind_="chapters",MO.prototype.controlText_="Chapters",zk.registerComponent("ChaptersButton",MO);class FO extends DO{constructor(e,t,n){super(e,t,n);const i=e.textTracks(),r=Sk(this,this.handleTracksChange);i.addEventListener("change",r),this.on("dispose",(function(){i.removeEventListener("change",r)}))}handleTracksChange(e){const t=this.player().textTracks();let n=!1;for(let i=0,r=t.length;i<r;i++){const e=t[i];if(e.kind!==this.kind_&&"showing"===e.mode){n=!0;break}}n?this.disable():this.enable()}buildCSSClass(){return`vjs-descriptions-button ${super.buildCSSClass()}`}buildWrapperCSSClass(){return`vjs-descriptions-button ${super.buildWrapperCSSClass()}`}}FO.prototype.kind_="descriptions",FO.prototype.controlText_="Descriptions",zk.registerComponent("DescriptionsButton",FO);class UO extends DO{constructor(e,t,n){super(e,t,n)}buildCSSClass(){return`vjs-subtitles-button ${super.buildCSSClass()}`}buildWrapperCSSClass(){return`vjs-subtitles-button ${super.buildWrapperCSSClass()}`}}UO.prototype.kind_="subtitles",UO.prototype.controlText_="Subtitles",zk.registerComponent("SubtitlesButton",UO);class BO extends LO{constructor(e,t){t.track={player:e,kind:t.kind,label:t.kind+" settings",selectable:!1,default:!1,mode:"disabled"},t.selectable=!1,t.name="CaptionSettingsMenuItem",super(e,t),this.addClass("vjs-texttrack-settings"),this.controlText(", opens "+t.kind+" settings dialog")}handleClick(e){this.player().getChild("textTrackSettings").open()}handleLanguagechange(){this.$(".vjs-menu-item-text").textContent=this.player_.localize(this.options_.kind+" settings"),super.handleLanguagechange()}}zk.registerComponent("CaptionSettingsMenuItem",BO);class jO extends DO{constructor(e,t,n){super(e,t,n)}buildCSSClass(){return`vjs-captions-button ${super.buildCSSClass()}`}buildWrapperCSSClass(){return`vjs-captions-button ${super.buildWrapperCSSClass()}`}createItems(){const e=[];return this.player().tech_&&this.player().tech_.featuresNativeTextTracks||!this.player().getChild("textTrackSettings")||(e.push(new BO(this.player_,{kind:this.kind_})),this.hideThreshold_+=1),super.createItems(e)}}jO.prototype.kind_="captions",jO.prototype.controlText_="Captions",zk.registerComponent("CaptionsButton",jO);class qO extends LO{createEl(e,t,n){const i=super.createEl(e,t,n),r=i.querySelector(".vjs-menu-item-text");return"captions"===this.options_.track.kind&&(r.appendChild(kx("span",{className:"vjs-icon-placeholder"},{"aria-hidden":!0})),r.appendChild(kx("span",{className:"vjs-control-text",textContent:` ${this.localize("Captions")}`}))),i}}zk.registerComponent("SubsCapsMenuItem",qO);class HO extends DO{constructor(e,t={}){super(e,t),this.label_="subtitles",["en","en-us","en-ca","fr-ca"].indexOf(this.player_.language_)>-1&&(this.label_="captions"),this.menuButton_.controlText(Vk(this.label_))}buildCSSClass(){return`vjs-subs-caps-button ${super.buildCSSClass()}`}buildWrapperCSSClass(){return`vjs-subs-caps-button ${super.buildWrapperCSSClass()}`}createItems(){let e=[];return this.player().tech_&&this.player().tech_.featuresNativeTextTracks||!this.player().getChild("textTrackSettings")||(e.push(new BO(this.player_,{kind:this.label_})),this.hideThreshold_+=1),e=super.createItems(e,qO),e}}HO.prototype.kinds_=["captions","subtitles"],HO.prototype.controlText_="Subtitles",zk.registerComponent("SubsCapsButton",HO);class VO extends PO{constructor(e,t){const n=t.track,i=e.audioTracks();t.label=n.label||n.language||"Unknown",t.selected=n.enabled,super(e,t),this.track=n,this.addClass(`vjs-${n.kind}-menu-item`);const r=(...e)=>{this.handleTracksChange.apply(this,e)};i.addEventListener("change",r),this.on("dispose",(()=>{i.removeEventListener("change",r)}))}createEl(e,t,n){const i=super.createEl(e,t,n),r=i.querySelector(".vjs-menu-item-text");return"main-desc"===this.options_.track.kind&&(r.appendChild(kx("span",{className:"vjs-icon-placeholder"},{"aria-hidden":!0})),r.appendChild(kx("span",{className:"vjs-control-text",textContent:" "+this.localize("Descriptions")}))),i}handleClick(e){if(super.handleClick(e),this.track.enabled=!0,this.player_.tech_.featuresNativeAudioTracks){const e=this.player_.audioTracks();for(let t=0;t<e.length;t++){const n=e[t];n!==this.track&&(n.enabled=n===this.track)}}}handleTracksChange(e){this.selected(this.track.enabled)}}zk.registerComponent("AudioTrackMenuItem",VO);class $O extends AO{constructor(e,t={}){t.tracks=e.audioTracks(),super(e,t)}buildCSSClass(){return`vjs-audio-button ${super.buildCSSClass()}`}buildWrapperCSSClass(){return`vjs-audio-button ${super.buildWrapperCSSClass()}`}createItems(e=[]){this.hideThreshold_=1;const t=this.player_.audioTracks();for(let n=0;n<t.length;n++){const i=t[n];e.push(new VO(this.player_,{track:i,selectable:!0,multiSelectable:!1}))}return e}}$O.prototype.controlText_="Audio Track",zk.registerComponent("AudioTrackButton",$O);class WO extends PO{constructor(e,t){const n=t.rate,i=parseFloat(n,10);t.label=n,t.selected=i===e.playbackRate(),t.selectable=!0,t.multiSelectable=!1,super(e,t),this.label=n,this.rate=i,this.on(e,"ratechange",(e=>this.update(e)))}handleClick(e){super.handleClick(),this.player().playbackRate(this.rate)}update(e){this.selected(this.player().playbackRate()===this.rate)}}WO.prototype.contentElType="button",zk.registerComponent("PlaybackRateMenuItem",WO);class zO extends kO{constructor(e,t){super(e,t),this.menuButton_.el_.setAttribute("aria-describedby",this.labelElId_),this.updateVisibility(),this.updateLabel(),this.on(e,"loadstart",(e=>this.updateVisibility(e))),this.on(e,"ratechange",(e=>this.updateLabel(e))),this.on(e,"playbackrateschange",(e=>this.handlePlaybackRateschange(e)))}createEl(){const e=super.createEl();return this.labelElId_="vjs-playback-rate-value-label-"+this.id_,this.labelEl_=kx("div",{className:"vjs-playback-rate-value",id:this.labelElId_,textContent:"1x"}),e.appendChild(this.labelEl_),e}dispose(){this.labelEl_=null,super.dispose()}buildCSSClass(){return`vjs-playback-rate ${super.buildCSSClass()}`}buildWrapperCSSClass(){return`vjs-playback-rate ${super.buildWrapperCSSClass()}`}createItems(){const e=this.playbackRates(),t=[];for(let n=e.length-1;n>=0;n--)t.push(new WO(this.player(),{rate:e[n]+"x"}));return t}handlePlaybackRateschange(e){this.update()}playbackRates(){const e=this.player();return e.playbackRates&&e.playbackRates()||[]}playbackRateSupported(){return this.player().tech_&&this.player().tech_.featuresPlaybackRate&&this.playbackRates()&&this.playbackRates().length>0}updateVisibility(e){this.playbackRateSupported()?this.removeClass("vjs-hidden"):this.addClass("vjs-hidden")}updateLabel(e){this.playbackRateSupported()&&(this.labelEl_.textContent=this.player().playbackRate()+"x")}}zO.prototype.controlText_="Playback Rate",zk.registerComponent("PlaybackRateMenuButton",zO);class GO extends zk{buildCSSClass(){return`vjs-spacer ${super.buildCSSClass()}`}createEl(e="div",t={},n={}){return t.className||(t.className=this.buildCSSClass()),super.createEl(e,t,n)}}zk.registerComponent("Spacer",GO);zk.registerComponent("CustomControlSpacer",class extends GO{buildCSSClass(){return`vjs-custom-control-spacer ${super.buildCSSClass()}`}createEl(){return super.createEl("div",{className:this.buildCSSClass(),textContent:" "})}});class KO extends zk{createEl(){return super.createEl("div",{className:"vjs-control-bar",dir:"ltr"})}}KO.prototype.options_={children:["playToggle","skipBackward","skipForward","volumePanel","currentTimeDisplay","timeDivider","durationDisplay","progressControl","liveDisplay","seekToLive","remainingTimeDisplay","customControlSpacer","playbackRateMenuButton","chaptersButton","descriptionsButton","subsCapsButton","audioTrackButton","fullscreenToggle"]},"exitPictureInPicture"in dT&&KO.prototype.options_.children.splice(KO.prototype.options_.children.length-1,0,"pictureInPictureToggle"),zk.registerComponent("ControlBar",KO);class XO extends uA{constructor(e,t){super(e,t),this.on(e,"error",(e=>this.open(e)))}buildCSSClass(){return`vjs-error-display ${super.buildCSSClass()}`}content(){const e=this.player().error();return e?this.localize(e.message):""}}XO.prototype.options_=Object.assign({},uA.prototype.options_,{pauseOnOpen:!1,fillAlways:!0,temporary:!1,uncloseable:!0}),zk.registerComponent("ErrorDisplay",XO);const YO="vjs-text-track-settings",QO=["#000","Black"],JO=["#00F","Blue"],ZO=["#0FF","Cyan"],eP=["#0F0","Green"],tP=["#F0F","Magenta"],nP=["#F00","Red"],iP=["#FFF","White"],rP=["#FF0","Yellow"],sP=["1","Opaque"],aP=["0.5","Semi-Transparent"],oP=["0","Transparent"],lP={backgroundColor:{selector:".vjs-bg-color > select",id:"captions-background-color-%s",label:"Color",options:[QO,iP,nP,eP,JO,rP,tP,ZO]},backgroundOpacity:{selector:".vjs-bg-opacity > select",id:"captions-background-opacity-%s",label:"Opacity",options:[sP,aP,oP]},color:{selector:".vjs-text-color > select",id:"captions-foreground-color-%s",label:"Color",options:[iP,QO,nP,eP,JO,rP,tP,ZO]},edgeStyle:{selector:".vjs-edge-style > select",id:"%s",label:"Text Edge Style",options:[["none","None"],["raised","Raised"],["depressed","Depressed"],["uniform","Uniform"],["dropshadow","Dropshadow"]]},fontFamily:{selector:".vjs-font-family > select",id:"captions-font-family-%s",label:"Font Family",options:[["proportionalSansSerif","Proportional Sans-Serif"],["monospaceSansSerif","Monospace Sans-Serif"],["proportionalSerif","Proportional Serif"],["monospaceSerif","Monospace Serif"],["casual","Casual"],["script","Script"],["small-caps","Small Caps"]]},fontPercent:{selector:".vjs-font-percent > select",id:"captions-font-size-%s",label:"Font Size",options:[["0.50","50%"],["0.75","75%"],["1.00","100%"],["1.25","125%"],["1.50","150%"],["1.75","175%"],["2.00","200%"],["3.00","300%"],["4.00","400%"]],default:2,parser:e=>"1.00"===e?null:Number(e)},textOpacity:{selector:".vjs-text-opacity > select",id:"captions-foreground-opacity-%s",label:"Opacity",options:[sP,aP]},windowColor:{selector:".vjs-window-color > select",id:"captions-window-color-%s",label:"Color"},windowOpacity:{selector:".vjs-window-opacity > select",id:"captions-window-opacity-%s",label:"Opacity",options:[oP,aP,sP]}};function cP(e,t){if(t&&(e=t(e)),e&&"none"!==e)return e}lP.windowColor.options=lP.backgroundColor.options;zk.registerComponent("TextTrackSettings",class extends uA{constructor(e,t){t.temporary=!1,super(e,t),this.updateDisplay=this.updateDisplay.bind(this),this.fill(),this.hasBeenOpened_=this.hasBeenFilled_=!0,this.endDialog=kx("p",{className:"vjs-control-text",textContent:this.localize("End of dialog window.")}),this.el().appendChild(this.endDialog),this.setDefaults(),void 0===t.persistTextTrackSettings&&(this.options_.persistTextTrackSettings=this.options_.playerOptions.persistTextTrackSettings),this.on(this.$(".vjs-done-button"),"click",(()=>{this.saveSettings(),this.close()})),this.on(this.$(".vjs-default-button"),"click",(()=>{this.setDefaults(),this.updateDisplay()})),YI(lP,(e=>{this.on(this.$(e.selector),"change",this.updateDisplay)})),this.options_.persistTextTrackSettings&&this.restoreSettings()}dispose(){this.endDialog=null,super.dispose()}createElSelect_(e,t="",n="label"){const i=lP[e],r=i.id.replace("%s",this.id_),s=[t,r].join(" ").trim();return[`<${n} id="${r}" class="${"label"===n?"vjs-label":""}">`,this.localize(i.label),`</${n}>`,`<select aria-labelledby="${s}">`].concat(i.options.map((e=>{const t=r+"-"+e[1].replace(/\W+/g,"");return[`<option id="${t}" value="${e[0]}" `,`aria-labelledby="${s} ${t}">`,this.localize(e[1]),"</option>"].join("")}))).concat("</select>").join("")}createElFgColor_(){const e=`captions-text-legend-${this.id_}`;return['<fieldset class="vjs-fg vjs-track-setting">',`<legend id="${e}">`,this.localize("Text"),"</legend>",'<span class="vjs-text-color">',this.createElSelect_("color",e),"</span>",'<span class="vjs-text-opacity vjs-opacity">',this.createElSelect_("textOpacity",e),"</span>","</fieldset>"].join("")}createElBgColor_(){const e=`captions-background-${this.id_}`;return['<fieldset class="vjs-bg vjs-track-setting">',`<legend id="${e}">`,this.localize("Text Background"),"</legend>",'<span class="vjs-bg-color">',this.createElSelect_("backgroundColor",e),"</span>",'<span class="vjs-bg-opacity vjs-opacity">',this.createElSelect_("backgroundOpacity",e),"</span>","</fieldset>"].join("")}createElWinColor_(){const e=`captions-window-${this.id_}`;return['<fieldset class="vjs-window vjs-track-setting">',`<legend id="${e}">`,this.localize("Caption Area Background"),"</legend>",'<span class="vjs-window-color">',this.createElSelect_("windowColor",e),"</span>",'<span class="vjs-window-opacity vjs-opacity">',this.createElSelect_("windowOpacity",e),"</span>","</fieldset>"].join("")}createElColors_(){return kx("div",{className:"vjs-track-settings-colors",innerHTML:[this.createElFgColor_(),this.createElBgColor_(),this.createElWinColor_()].join("")})}createElFont_(){return kx("div",{className:"vjs-track-settings-font",innerHTML:['<fieldset class="vjs-font-percent vjs-track-setting">',this.createElSelect_("fontPercent","","legend"),"</fieldset>",'<fieldset class="vjs-edge-style vjs-track-setting">',this.createElSelect_("edgeStyle","","legend"),"</fieldset>",'<fieldset class="vjs-font-family vjs-track-setting">',this.createElSelect_("fontFamily","","legend"),"</fieldset>"].join("")})}createElControls_(){const e=this.localize("restore all settings to the default values");return kx("div",{className:"vjs-track-settings-controls",innerHTML:[`<button type="button" class="vjs-default-button" title="${e}">`,this.localize("Reset"),`<span class="vjs-control-text"> ${e}</span>`,"</button>",`<button type="button" class="vjs-done-button">${this.localize("Done")}</button>`].join("")})}content(){return[this.createElColors_(),this.createElFont_(),this.createElControls_()]}label(){return this.localize("Caption Settings Dialog")}description(){return this.localize("Beginning of dialog window. Escape will cancel and close the window.")}buildCSSClass(){return super.buildCSSClass()+" vjs-text-track-settings"}getValues(){return QI(lP,((e,t,n)=>{const i=function(e,t){return cP(e.options[e.options.selectedIndex].value,t)}(this.$(t.selector),t.parser);return void 0!==i&&(e[n]=i),e}),{})}setValues(e){YI(lP,((t,n)=>{!function(e,t,n){if(t)for(let i=0;i<e.options.length;i++)if(cP(e.options[i].value,n)===t){e.selectedIndex=i;break}}(this.$(t.selector),e[n],t.parser)}))}setDefaults(){YI(lP,(e=>{const t=e.hasOwnProperty("default")?e.default:0;this.$(e.selector).selectedIndex=t}))}restoreSettings(){let e;try{e=JSON.parse(sT.localStorage.getItem(YO))}catch(t){zI.warn(t)}e&&this.setValues(e)}saveSettings(){if(!this.options_.persistTextTrackSettings)return;const e=this.getValues();try{Object.keys(e).length?sT.localStorage.setItem(YO,JSON.stringify(e)):sT.localStorage.removeItem(YO)}catch(t){zI.warn(t)}}updateDisplay(){const e=this.player_.getChild("textTrackDisplay");e&&e.updateDisplay()}conditionalBlur_(){this.previouslyActiveEl_=null;const e=this.player_.controlBar,t=e&&e.subsCapsButton,n=e&&e.captionsButton;t?t.focus():n&&n.focus()}handleLanguagechange(){this.fill()}});zk.registerComponent("ResizeManager",class extends zk{constructor(e,t){let n=t.ResizeObserver||sT.ResizeObserver;null===t.ResizeObserver&&(n=!1);super(e,ex({createEl:!n,reportTouchActivity:!1},t)),this.ResizeObserver=t.ResizeObserver||sT.ResizeObserver,this.loadListener_=null,this.resizeObserver_=null,this.debouncedHandler_=Ik((()=>{this.resizeHandler()}),100,!1,this),n?(this.resizeObserver_=new this.ResizeObserver(this.debouncedHandler_),this.resizeObserver_.observe(e.el())):(this.loadListener_=()=>{if(!this.el_||!this.el_.contentWindow)return;const e=this.debouncedHandler_;let t=this.unloadListener_=function(){_k(this,"resize",e),_k(this,"unload",t),t=null};yk(this.el_.contentWindow,"unload",t),yk(this.el_.contentWindow,"resize",e)},this.one("load",this.loadListener_))}createEl(){return super.createEl("iframe",{className:"vjs-resize-manager",tabIndex:-1,title:this.localize("No content")},{"aria-hidden":"true"})}resizeHandler(){this.player_&&this.player_.trigger&&this.player_.trigger("playerresize")}dispose(){this.debouncedHandler_&&this.debouncedHandler_.cancel(),this.resizeObserver_&&(this.player_.el()&&this.resizeObserver_.unobserve(this.player_.el()),this.resizeObserver_.disconnect()),this.loadListener_&&this.off("load",this.loadListener_),this.el_&&this.el_.contentWindow&&this.unloadListener_&&this.unloadListener_.call(this.el_.contentWindow),this.ResizeObserver=null,this.resizeObserver=null,this.debouncedHandler_=null,this.loadListener_=null,super.dispose()}});const uP={trackingThreshold:20,liveTolerance:15};zk.registerComponent("LiveTracker",class extends zk{constructor(e,t){super(e,ex(uP,t,{createEl:!1})),this.trackLiveHandler_=()=>this.trackLive_(),this.handlePlay_=e=>this.handlePlay(e),this.handleFirstTimeupdate_=e=>this.handleFirstTimeupdate(e),this.handleSeeked_=e=>this.handleSeeked(e),this.seekToLiveEdge_=e=>this.seekToLiveEdge(e),this.reset_(),this.on(this.player_,"durationchange",(e=>this.handleDurationchange(e))),this.on(this.player_,"canplay",(()=>this.toggleTracking()))}trackLive_(){const e=this.player_.seekable();if(!e||!e.length)return;const t=Number(sT.performance.now().toFixed(4)),n=-1===this.lastTime_?0:(t-this.lastTime_)/1e3;this.lastTime_=t,this.pastSeekEnd_=this.pastSeekEnd()+n;const i=this.liveCurrentTime(),r=this.player_.currentTime();let s=this.player_.paused()||this.seekedBehindLive_||Math.abs(i-r)>this.options_.liveTolerance;this.timeupdateSeen_&&i!==1/0||(s=!1),s!==this.behindLiveEdge_&&(this.behindLiveEdge_=s,this.trigger("liveedgechange"))}handleDurationchange(){this.toggleTracking()}toggleTracking(){this.player_.duration()===1/0&&this.liveWindow()>=this.options_.trackingThreshold?(this.player_.options_.liveui&&this.player_.addClass("vjs-liveui"),this.startTracking()):(this.player_.removeClass("vjs-liveui"),this.stopTracking())}startTracking(){this.isTracking()||(this.timeupdateSeen_||(this.timeupdateSeen_=this.player_.hasStarted()),this.trackingInterval_=this.setInterval(this.trackLiveHandler_,wk),this.trackLive_(),this.on(this.player_,["play","pause"],this.trackLiveHandler_),this.timeupdateSeen_?this.on(this.player_,"seeked",this.handleSeeked_):(this.one(this.player_,"play",this.handlePlay_),this.one(this.player_,"timeupdate",this.handleFirstTimeupdate_)))}handleFirstTimeupdate(){this.timeupdateSeen_=!0,this.on(this.player_,"seeked",this.handleSeeked_)}handleSeeked(){const e=Math.abs(this.liveCurrentTime()-this.player_.currentTime());this.seekedBehindLive_=this.nextSeekedFromUser_&&e>2,this.nextSeekedFromUser_=!1,this.trackLive_()}handlePlay(){this.one(this.player_,"timeupdate",this.seekToLiveEdge_)}reset_(){this.lastTime_=-1,this.pastSeekEnd_=0,this.lastSeekEnd_=-1,this.behindLiveEdge_=!0,this.timeupdateSeen_=!1,this.seekedBehindLive_=!1,this.nextSeekedFromUser_=!1,this.clearInterval(this.trackingInterval_),this.trackingInterval_=null,this.off(this.player_,["play","pause"],this.trackLiveHandler_),this.off(this.player_,"seeked",this.handleSeeked_),this.off(this.player_,"play",this.handlePlay_),this.off(this.player_,"timeupdate",this.handleFirstTimeupdate_),this.off(this.player_,"timeupdate",this.seekToLiveEdge_)}nextSeekedFromUser(){this.nextSeekedFromUser_=!0}stopTracking(){this.isTracking()&&(this.reset_(),this.trigger("liveedgechange"))}seekableEnd(){const e=this.player_.seekable(),t=[];let n=e?e.length:0;for(;n--;)t.push(e.end(n));return t.length?t.sort()[t.length-1]:1/0}seekableStart(){const e=this.player_.seekable(),t=[];let n=e?e.length:0;for(;n--;)t.push(e.start(n));return t.length?t.sort()[0]:0}liveWindow(){const e=this.liveCurrentTime();return e===1/0?0:e-this.seekableStart()}isLive(){return this.isTracking()}atLiveEdge(){return!this.behindLiveEdge()}liveCurrentTime(){return this.pastSeekEnd()+this.seekableEnd()}pastSeekEnd(){const e=this.seekableEnd();return-1!==this.lastSeekEnd_&&e!==this.lastSeekEnd_&&(this.pastSeekEnd_=0),this.lastSeekEnd_=e,this.pastSeekEnd_}behindLiveEdge(){return this.behindLiveEdge_}isTracking(){return"number"==typeof this.trackingInterval_}seekToLiveEdge(){this.seekedBehindLive_=!1,this.atLiveEdge()||(this.nextSeekedFromUser_=!1,this.player_.currentTime(this.liveCurrentTime()))}dispose(){this.stopTracking(),super.dispose()}});zk.registerComponent("TitleBar",class extends zk{constructor(e,t){super(e,t),this.on("statechanged",(e=>this.updateDom_())),this.updateDom_()}createEl(){return this.els={title:kx("div",{className:"vjs-title-bar-title",id:`vjs-title-bar-title-${dk()}`}),description:kx("div",{className:"vjs-title-bar-description",id:`vjs-title-bar-description-${dk()}`})},kx("div",{className:"vjs-title-bar"},{},Object.values(this.els))}updateDom_(){const e=this.player_.tech_,t=e&&e.el_,n={title:"aria-labelledby",description:"aria-describedby"};["title","description"].forEach((e=>{const i=this.state[e],r=this.els[e],s=n[e];zx(r),i&&Ax(r,i),t&&(t.removeAttribute(s),i&&t.setAttribute(s,r.id))})),this.state.title||this.state.description?this.show():this.hide()}update(e){this.setState(e)}dispose(){const e=this.player_.tech_,t=e&&e.el_;t&&(t.removeAttribute("aria-labelledby"),t.removeAttribute("aria-describedby")),super.dispose(),this.els=null}});const dP=e=>{const t=e.el();if(t.hasAttribute("src"))return e.triggerSourceset(t.src),!0;const n=e.$$("source"),i=[];let r="";if(!n.length)return!1;for(let s=0;s<n.length;s++){const e=n[s].src;e&&-1===i.indexOf(e)&&i.push(e)}return!!i.length&&(1===i.length&&(r=i[0]),e.triggerSourceset(r),!0)},hP=Object.defineProperty({},"innerHTML",{get(){return this.cloneNode(!0).innerHTML},set(e){const t=dT.createElement(this.nodeName.toLowerCase());t.innerHTML=e;const n=dT.createDocumentFragment();for(;t.childNodes.length;)n.appendChild(t.childNodes[0]);return this.innerText="",sT.Element.prototype.appendChild.call(this,n),this.innerHTML}}),pP=(e,t)=>{let n={};for(let i=0;i<e.length&&(n=Object.getOwnPropertyDescriptor(e[i],t),!(n&&n.set&&n.get));i++);return n.enumerable=!0,n.configurable=!0,n},fP=function(e){const t=e.el();if(t.resetSourceWatch_)return;const n={},i=(e=>pP([e.el(),sT.HTMLMediaElement.prototype,sT.Element.prototype,hP],"innerHTML"))(e),r=n=>(...i)=>{const r=n.apply(t,i);return dP(e),r};["append","appendChild","insertAdjacentHTML"].forEach((e=>{t[e]&&(n[e]=t[e],t[e]=r(n[e]))})),Object.defineProperty(t,"innerHTML",ex(i,{set:r(i.set)})),t.resetSourceWatch_=()=>{t.resetSourceWatch_=null,Object.keys(n).forEach((e=>{t[e]=n[e]})),Object.defineProperty(t,"innerHTML",i)},e.one("sourceset",t.resetSourceWatch_)},mP=Object.defineProperty({},"src",{get(){return this.hasAttribute("src")?EA(sT.Element.prototype.getAttribute.call(this,"src")):""},set(e){return sT.Element.prototype.setAttribute.call(this,"src",e),e}}),gP=function(e){if(!e.featuresSourceset)return;const t=e.el();if(t.resetSourceset_)return;const n=(e=>pP([e.el(),sT.HTMLMediaElement.prototype,mP],"src"))(e),i=t.setAttribute,r=t.load;Object.defineProperty(t,"src",ex(n,{set:i=>{const r=n.set.call(t,i);return e.triggerSourceset(t.src),r}})),t.setAttribute=(n,r)=>{const s=i.call(t,n,r);return/src/i.test(n)&&e.triggerSourceset(t.src),s},t.load=()=>{const n=r.call(t);return dP(e)||(e.triggerSourceset(""),fP(e)),n},t.currentSrc?e.triggerSourceset(t.currentSrc):dP(e)||fP(e),t.resetSourceset_=()=>{t.resetSourceset_=null,t.load=r,t.setAttribute=i,Object.defineProperty(t,"src",n),t.resetSourceWatch_&&t.resetSourceWatch_()}};class yP extends RA{constructor(e,t){super(e,t);const n=e.source;let i=!1;if(this.featuresVideoFrameCallback=this.featuresVideoFrameCallback&&"VIDEO"===this.el_.tagName,n&&(this.el_.currentSrc!==n.src||e.tag&&3===e.tag.initNetworkState_)?this.setSource(n):this.handleLateInit_(this.el_),e.enableSourceset&&this.setupSourcesetHandling_(),this.isScrubbing_=!1,this.el_.hasChildNodes()){const e=this.el_.childNodes;let t=e.length;const n=[];for(;t--;){const r=e[t];"track"===r.nodeName.toLowerCase()&&(this.featuresNativeTextTracks?(this.remoteTextTrackEls().addTrackElement_(r),this.remoteTextTracks().addTrack(r.track),this.textTracks().addTrack(r.track),i||this.el_.hasAttribute("crossorigin")||!SA(r.src)||(i=!0)):n.push(r))}for(let i=0;i<n.length;i++)this.el_.removeChild(n[i])}this.proxyNativeTracks_(),this.featuresNativeTextTracks&&i&&zI.warn("Text Tracks are being loaded from another origin but the crossorigin attribute isn't used.\nThis may prevent text tracks from loading."),this.restoreMetadataTracksInIOSNativePlayer_(),(_x||yx)&&!0===e.nativeControlsForTouch&&this.setControls(!0),this.proxyWebkitFullscreen_(),this.triggerReady()}dispose(){this.el_&&this.el_.resetSourceset_&&this.el_.resetSourceset_(),yP.disposeMediaElement(this.el_),this.options_=null,super.dispose()}setupSourcesetHandling_(){gP(this)}restoreMetadataTracksInIOSNativePlayer_(){const e=this.textTracks();let t;const n=()=>{t=[];for(let n=0;n<e.length;n++){const i=e[n];"metadata"===i.kind&&t.push({track:i,storedMode:i.mode})}};n(),e.addEventListener("change",n),this.on("dispose",(()=>e.removeEventListener("change",n)));const i=()=>{for(let e=0;e<t.length;e++){const n=t[e];"disabled"===n.track.mode&&n.track.mode!==n.storedMode&&(n.track.mode=n.storedMode)}e.removeEventListener("change",i)};this.on("webkitbeginfullscreen",(()=>{e.removeEventListener("change",n),e.removeEventListener("change",i),e.addEventListener("change",i)})),this.on("webkitendfullscreen",(()=>{e.removeEventListener("change",n),e.addEventListener("change",n),e.removeEventListener("change",i)}))}overrideNative_(e,t){if(t!==this[`featuresNative${e}Tracks`])return;const n=e.toLowerCase();this[`${n}TracksListeners_`]&&Object.keys(this[`${n}TracksListeners_`]).forEach((e=>{this.el()[`${n}Tracks`].removeEventListener(e,this[`${n}TracksListeners_`][e])})),this[`featuresNative${e}Tracks`]=!t,this[`${n}TracksListeners_`]=null,this.proxyNativeTracksForType_(n)}overrideNativeAudioTracks(e){this.overrideNative_("Audio",e)}overrideNativeVideoTracks(e){this.overrideNative_("Video",e)}proxyNativeTracksForType_(e){const t=LA[e],n=this.el()[t.getterName],i=this[t.getterName]();if(!this[`featuresNative${t.capitalName}Tracks`]||!n||!n.addEventListener)return;const r={change:t=>{const n={type:"change",target:i,currentTarget:i,srcElement:i};i.trigger(n),"text"===e&&this[NA.remoteText.getterName]().trigger(n)},addtrack(e){i.addTrack(e.track)},removetrack(e){i.removeTrack(e.track)}},s=function(){const e=[];for(let t=0;t<i.length;t++){let r=!1;for(let e=0;e<n.length;e++)if(n[e]===i[t]){r=!0;break}r||e.push(i[t])}for(;e.length;)i.removeTrack(e.shift())};this[t.getterName+"Listeners_"]=r,Object.keys(r).forEach((e=>{const t=r[e];n.addEventListener(e,t),this.on("dispose",(i=>n.removeEventListener(e,t)))})),this.on("loadstart",s),this.on("dispose",(e=>this.off("loadstart",s)))}proxyNativeTracks_(){LA.names.forEach((e=>{this.proxyNativeTracksForType_(e)}))}createEl(){let e=this.options_.tag;if(!e||!this.options_.playerElIngest&&!this.movingMediaElementInDOM){if(e){const t=e.cloneNode(!0);e.parentNode&&e.parentNode.insertBefore(t,e),yP.disposeMediaElement(e),e=t}else{e=dT.createElement("video");const t=ex({},this.options_.tag&&Mx(this.options_.tag));_x&&!0===this.options_.nativeControlsForTouch||delete t.controls,Rx(e,Object.assign(t,{id:this.options_.techId,class:"vjs-tech"}))}e.playerId=this.options_.playerId}void 0!==this.options_.preload&&Ux(e,"preload",this.options_.preload),void 0!==this.options_.disablePictureInPicture&&(e.disablePictureInPicture=this.options_.disablePictureInPicture);const t=["loop","muted","playsinline","autoplay"];for(let n=0;n<t.length;n++){const i=t[n],r=this.options_[i];void 0!==r&&(r?Ux(e,i,i):Bx(e,i),e[i]=r)}return e}handleLateInit_(e){if(0===e.networkState||3===e.networkState)return;if(0===e.readyState){let e=!1;const t=function(){e=!0};this.on("loadstart",t);const n=function(){e||this.trigger("loadstart")};return this.on("loadedmetadata",n),void this.ready((function(){this.off("loadstart",t),this.off("loadedmetadata",n),e||this.trigger("loadstart")}))}const t=["loadstart"];t.push("loadedmetadata"),e.readyState>=2&&t.push("loadeddata"),e.readyState>=3&&t.push("canplay"),e.readyState>=4&&t.push("canplaythrough"),this.ready((function(){t.forEach((function(e){this.trigger(e)}),this)}))}setScrubbing(e){this.isScrubbing_=e}scrubbing(){return this.isScrubbing_}setCurrentTime(e){try{this.isScrubbing_&&this.el_.fastSeek&&Tx?this.el_.fastSeek(e):this.el_.currentTime=e}catch(fB){zI(fB,"Video is not ready. (Video.js)")}}duration(){if(this.el_.duration===1/0&&ax&&ux&&0===this.el_.currentTime){const e=()=>{this.el_.currentTime>0&&(this.el_.duration===1/0&&this.trigger("durationchange"),this.off("timeupdate",e))};return this.on("timeupdate",e),NaN}return this.el_.duration||NaN}width(){return this.el_.offsetWidth}height(){return this.el_.offsetHeight}proxyWebkitFullscreen_(){if(!("webkitDisplayingFullscreen"in this.el_))return;const e=function(){this.trigger("fullscreenchange",{isFullscreen:!1}),this.el_.controls&&!this.options_.nativeControlsForTouch&&this.controls()&&(this.el_.controls=!1)},t=function(){"webkitPresentationMode"in this.el_&&"picture-in-picture"!==this.el_.webkitPresentationMode&&(this.one("webkitendfullscreen",e),this.trigger("fullscreenchange",{isFullscreen:!0,nativeIOSFullscreen:!0}))};this.on("webkitbeginfullscreen",t),this.on("dispose",(()=>{this.off("webkitbeginfullscreen",t),this.off("webkitendfullscreen",e)}))}supportsFullScreen(){return"function"==typeof this.el_.webkitEnterFullScreen}enterFullScreen(){const e=this.el_;if(e.paused&&e.networkState<=e.HAVE_METADATA)sA(this.el_.play()),this.setTimeout((function(){e.pause();try{e.webkitEnterFullScreen()}catch(fB){this.trigger("fullscreenerror",fB)}}),0);else try{e.webkitEnterFullScreen()}catch(fB){this.trigger("fullscreenerror",fB)}}exitFullScreen(){this.el_.webkitDisplayingFullscreen?this.el_.webkitExitFullScreen():this.trigger("fullscreenerror",new Error("The video is not fullscreen"))}requestPictureInPicture(){return this.el_.requestPictureInPicture()}requestVideoFrameCallback(e){return this.featuresVideoFrameCallback&&!this.el_.webkitKeys?this.el_.requestVideoFrameCallback(e):super.requestVideoFrameCallback(e)}cancelVideoFrameCallback(e){this.featuresVideoFrameCallback&&!this.el_.webkitKeys?this.el_.cancelVideoFrameCallback(e):super.cancelVideoFrameCallback(e)}src(e){if(void 0===e)return this.el_.src;this.setSrc(e)}reset(){yP.resetMediaElement(this.el_)}currentSrc(){return this.currentSource_?this.currentSource_.src:this.el_.currentSrc}setControls(e){this.el_.controls=!!e}addTextTrack(e,t,n){return this.featuresNativeTextTracks?this.el_.addTextTrack(e,t,n):super.addTextTrack(e,t,n)}createRemoteTextTrack(e){if(!this.featuresNativeTextTracks)return super.createRemoteTextTrack(e);const t=dT.createElement("track");return e.kind&&(t.kind=e.kind),e.label&&(t.label=e.label),(e.language||e.srclang)&&(t.srclang=e.language||e.srclang),e.default&&(t.default=e.default),e.id&&(t.id=e.id),e.src&&(t.src=e.src),t}addRemoteTextTrack(e,t){const n=super.addRemoteTextTrack(e,t);return this.featuresNativeTextTracks&&this.el().appendChild(n),n}removeRemoteTextTrack(e){if(super.removeRemoteTextTrack(e),this.featuresNativeTextTracks){const t=this.$$("track");let n=t.length;for(;n--;)e!==t[n]&&e!==t[n].track||this.el().removeChild(t[n])}}getVideoPlaybackQuality(){if("function"==typeof this.el().getVideoPlaybackQuality)return this.el().getVideoPlaybackQuality();const e={};return void 0!==this.el().webkitDroppedFrameCount&&void 0!==this.el().webkitDecodedFrameCount&&(e.droppedVideoFrames=this.el().webkitDroppedFrameCount,e.totalVideoFrames=this.el().webkitDecodedFrameCount),sT.performance&&(e.creationTime=sT.performance.now()),e}}tx(yP,"TEST_VID",(function(){if(!Sx())return;const e=dT.createElement("video"),t=dT.createElement("track");return t.kind="captions",t.srclang="en",t.label="English",e.appendChild(t),e})),yP.isSupported=function(){try{yP.TEST_VID.volume=.5}catch(fB){return!1}return!(!yP.TEST_VID||!yP.TEST_VID.canPlayType)},yP.canPlayType=function(e){return yP.TEST_VID.canPlayType(e)},yP.canPlaySource=function(e,t){return yP.canPlayType(e.type)},yP.canControlVolume=function(){try{const e=yP.TEST_VID.volume;yP.TEST_VID.volume=e/2+.1;const t=e!==yP.TEST_VID.volume;return t&&bx?(sT.setTimeout((()=>{yP&&yP.prototype&&(yP.prototype.featuresVolumeControl=e!==yP.TEST_VID.volume)})),!1):t}catch(fB){return!1}},yP.canMuteVolume=function(){try{const e=yP.TEST_VID.muted;return yP.TEST_VID.muted=!e,yP.TEST_VID.muted?Ux(yP.TEST_VID,"muted","muted"):Bx(yP.TEST_VID,"muted"),e!==yP.TEST_VID.muted}catch(fB){return!1}},yP.canControlPlaybackRate=function(){if(ax&&ux&&hx<58)return!1;try{const e=yP.TEST_VID.playbackRate;return yP.TEST_VID.playbackRate=e/2+.1,e!==yP.TEST_VID.playbackRate}catch(fB){return!1}},yP.canOverrideAttributes=function(){try{const e=()=>{};Object.defineProperty(dT.createElement("video"),"src",{get:e,set:e}),Object.defineProperty(dT.createElement("audio"),"src",{get:e,set:e}),Object.defineProperty(dT.createElement("video"),"innerHTML",{get:e,set:e}),Object.defineProperty(dT.createElement("audio"),"innerHTML",{get:e,set:e})}catch(fB){return!1}return!0},yP.supportsNativeTextTracks=function(){return Tx||bx&&ux},yP.supportsNativeVideoTracks=function(){return!(!yP.TEST_VID||!yP.TEST_VID.videoTracks)},yP.supportsNativeAudioTracks=function(){return!(!yP.TEST_VID||!yP.TEST_VID.audioTracks)},yP.Events=["loadstart","suspend","abort","error","emptied","stalled","loadedmetadata","loadeddata","canplay","canplaythrough","playing","waiting","seeking","seeked","ended","durationchange","timeupdate","progress","play","pause","ratechange","resize","volumechange"],[["featuresMuteControl","canMuteVolume"],["featuresPlaybackRate","canControlPlaybackRate"],["featuresSourceset","canOverrideAttributes"],["featuresNativeTextTracks","supportsNativeTextTracks"],["featuresNativeVideoTracks","supportsNativeVideoTracks"],["featuresNativeAudioTracks","supportsNativeAudioTracks"]].forEach((function([e,t]){tx(yP.prototype,e,(()=>yP[t]()),!0)})),yP.prototype.featuresVolumeControl=yP.canControlVolume(),yP.prototype.movingMediaElementInDOM=!bx,yP.prototype.featuresFullscreenResize=!0,yP.prototype.featuresProgressEvents=!0,yP.prototype.featuresTimeupdateEvents=!0,yP.prototype.featuresVideoFrameCallback=!(!yP.TEST_VID||!yP.TEST_VID.requestVideoFrameCallback),yP.disposeMediaElement=function(e){if(e){for(e.parentNode&&e.parentNode.removeChild(e);e.hasChildNodes();)e.removeChild(e.firstChild);e.removeAttribute("src"),"function"==typeof e.load&&function(){try{e.load()}catch(fB){}}()}},yP.resetMediaElement=function(e){if(!e)return;const t=e.querySelectorAll("source");let n=t.length;for(;n--;)e.removeChild(t[n]);e.removeAttribute("src"),"function"==typeof e.load&&function(){try{e.load()}catch(fB){}}()},["muted","defaultMuted","autoplay","controls","loop","playsinline"].forEach((function(e){yP.prototype[e]=function(){return this.el_[e]||this.el_.hasAttribute(e)}})),["muted","defaultMuted","autoplay","loop","playsinline"].forEach((function(e){yP.prototype["set"+Vk(e)]=function(t){this.el_[e]=t,t?this.el_.setAttribute(e,e):this.el_.removeAttribute(e)}})),["paused","currentTime","buffered","volume","poster","preload","error","seeking","seekable","ended","playbackRate","defaultPlaybackRate","disablePictureInPicture","played","networkState","readyState","videoWidth","videoHeight","crossOrigin"].forEach((function(e){yP.prototype[e]=function(){return this.el_[e]}})),["volume","src","poster","preload","playbackRate","defaultPlaybackRate","disablePictureInPicture","crossOrigin"].forEach((function(e){yP.prototype["set"+Vk(e)]=function(t){this.el_[e]=t}})),["pause","load","play"].forEach((function(e){yP.prototype[e]=function(){return this.el_[e]()}})),RA.withSourceHandlers(yP),yP.nativeSourceHandler={},yP.nativeSourceHandler.canPlayType=function(e){try{return yP.TEST_VID.canPlayType(e)}catch(fB){return""}},yP.nativeSourceHandler.canHandleSource=function(e,t){if(e.type)return yP.nativeSourceHandler.canPlayType(e.type);if(e.src){const t=wA(e.src);return yP.nativeSourceHandler.canPlayType(`video/${t}`)}return""},yP.nativeSourceHandler.handleSource=function(e,t,n){t.setSrc(e.src)},yP.nativeSourceHandler.dispose=function(){},yP.registerSourceHandler(yP.nativeSourceHandler),RA.registerTech("Html5",yP);const _P=["progress","abort","suspend","emptied","stalled","loadedmetadata","loadeddata","timeupdate","resize","volumechange","texttrackchange"],vP={canplay:"CanPlay",canplaythrough:"CanPlayThrough",playing:"Playing",seeked:"Seeked"},bP=["tiny","xsmall","small","medium","large","xlarge","huge"],TP={};bP.forEach((e=>{const t="x"===e.charAt(0)?`x-${e.substring(1)}`:e;TP[e]=`vjs-layout-${t}`}));const EP={tiny:210,xsmall:320,small:425,medium:768,large:1440,xlarge:2560,huge:1/0};class wP extends zk{constructor(e,t,n){if(e.id=e.id||t.id||`vjs_video_${dk()}`,(t=Object.assign(wP.getTagSettings(e),t)).initChildren=!1,t.createEl=!1,t.evented=!1,t.reportTouchActivity=!1,!t.language){const n=e.closest("[lang]");n&&(t.language=n.getAttribute("lang"))}if(super(null,t,n),this.boundDocumentFullscreenChange_=e=>this.documentFullscreenChange_(e),this.boundFullWindowOnEscKey_=e=>this.fullWindowOnEscKey(e),this.boundUpdateStyleEl_=e=>this.updateStyleEl_(e),this.boundApplyInitTime_=e=>this.applyInitTime_(e),this.boundUpdateCurrentBreakpoint_=e=>this.updateCurrentBreakpoint_(e),this.boundHandleTechClick_=e=>this.handleTechClick_(e),this.boundHandleTechDoubleClick_=e=>this.handleTechDoubleClick_(e),this.boundHandleTechTouchStart_=e=>this.handleTechTouchStart_(e),this.boundHandleTechTouchMove_=e=>this.handleTechTouchMove_(e),this.boundHandleTechTouchEnd_=e=>this.handleTechTouchEnd_(e),this.boundHandleTechTap_=e=>this.handleTechTap_(e),this.isFullscreen_=!1,this.log=GI(this.id_),this.fsApi_=qI,this.isPosterFromTech_=!1,this.queuedCallbacks_=[],this.isReady_=!1,this.hasStarted_=!1,this.userActive_=!1,this.debugEnabled_=!1,this.audioOnlyMode_=!1,this.audioPosterMode_=!1,this.audioOnlyCache_={playerHeight:null,hiddenChildren:[]},!this.options_||!this.options_.techOrder||!this.options_.techOrder.length)throw new Error("No techOrder specified. Did you overwrite videojs.options instead of just changing the properties you want to override?");if(this.tag=e,this.tagAttributes=e&&Mx(e),this.language(this.options_.language),t.languages){const e={};Object.getOwnPropertyNames(t.languages).forEach((function(n){e[n.toLowerCase()]=t.languages[n]})),this.languages_=e}else this.languages_=wP.prototype.options_.languages;this.resetCache_(),this.poster_=t.poster||"",this.controls_=!!t.controls,e.controls=!1,e.removeAttribute("controls"),this.changingSrc_=!1,this.playCallbacks_=[],this.playTerminatedQueue_=[],e.hasAttribute("autoplay")?this.autoplay(!0):this.autoplay(this.options_.autoplay),t.plugins&&Object.keys(t.plugins).forEach((e=>{if("function"!=typeof this[e])throw new Error(`plugin "${e}" does not exist`)})),this.scrubbing_=!1,this.el_=this.createEl(),Bk(this,{eventBusKey:"el_"}),this.fsApi_.requestFullscreen&&(yk(dT,this.fsApi_.fullscreenchange,this.boundDocumentFullscreenChange_),this.on(this.fsApi_.fullscreenchange,this.boundDocumentFullscreenChange_)),this.fluid_&&this.on(["playerreset","resize"],this.boundUpdateStyleEl_);const i=ex(this.options_);t.plugins&&Object.keys(t.plugins).forEach((e=>{this[e](t.plugins[e])})),t.debug&&this.debug(!0),this.options_.playerOptions=i,this.middleware_=[],this.playbackRates(t.playbackRates),this.initChildren(),this.isAudio("audio"===e.nodeName.toLowerCase()),this.controls()?this.addClass("vjs-controls-enabled"):this.addClass("vjs-controls-disabled"),this.el_.setAttribute("role","region"),this.isAudio()?this.el_.setAttribute("aria-label",this.localize("Audio Player")):this.el_.setAttribute("aria-label",this.localize("Video Player")),this.isAudio()&&this.addClass("vjs-audio"),_x&&this.addClass("vjs-touch-enabled"),bx||this.addClass("vjs-workinghover"),wP.players[this.id_]=this;const r=FI.split(".")[0];this.addClass(`vjs-v${r}`),this.userActive(!0),this.reportUserActivity(),this.one("play",(e=>this.listenForUserActivity_(e))),this.on("keydown",(e=>this.handleKeyDown(e))),this.on("languagechange",(e=>this.handleLanguagechange(e))),this.breakpoints(this.options_.breakpoints),this.responsive(this.options_.responsive),this.on("ready",(()=>{this.audioPosterMode(this.options_.audioPosterMode),this.audioOnlyMode(this.options_.audioOnlyMode)}))}dispose(){this.trigger("dispose"),this.off("dispose"),_k(dT,this.fsApi_.fullscreenchange,this.boundDocumentFullscreenChange_),_k(dT,"keydown",this.boundFullWindowOnEscKey_),this.styleEl_&&this.styleEl_.parentNode&&(this.styleEl_.parentNode.removeChild(this.styleEl_),this.styleEl_=null),wP.players[this.id_]=null,this.tag&&this.tag.player&&(this.tag.player=null),this.el_&&this.el_.player&&(this.el_.player=null),this.tech_&&(this.tech_.dispose(),this.isPosterFromTech_=!1,this.poster_=""),this.playerElIngest_&&(this.playerElIngest_=null),this.tag&&(this.tag=null),FA[this.id()]=null,DA.names.forEach((e=>{const t=this[DA[e].getterName]();t&&t.off&&t.off()})),super.dispose({restoreEl:this.options_.restoreEl})}createEl(){let e,t=this.tag,n=this.playerElIngest_=t.parentNode&&t.parentNode.hasAttribute&&t.parentNode.hasAttribute("data-vjs-player");const i="video-js"===this.tag.tagName.toLowerCase();n?e=this.el_=t.parentNode:i||(e=this.el_=super.createEl("div"));const r=Mx(t);if(i){for(e=this.el_=t,t=this.tag=dT.createElement("video");e.children.length;)t.appendChild(e.firstChild);Px(e,"video-js")||Lx(e,"video-js"),e.appendChild(t),n=this.playerElIngest_=e,Object.keys(e).forEach((n=>{try{t[n]=e[n]}catch(fB){}}))}if(t.setAttribute("tabindex","-1"),r.tabindex="-1",ux&&mx&&(t.setAttribute("role","application"),r.role="application"),t.removeAttribute("width"),t.removeAttribute("height"),"width"in r&&delete r.width,"height"in r&&delete r.height,Object.getOwnPropertyNames(r).forEach((function(n){i&&"class"===n||e.setAttribute(n,r[n]),i&&t.setAttribute(n,r[n])})),t.playerId=t.id,t.id+="_html5_api",t.className="vjs-tech",t.player=e.player=this,this.addClass("vjs-paused"),!0!==sT.VIDEOJS_NO_DYNAMIC_STYLE){this.styleEl_=ak("vjs-styles-dimensions");const e=Qx(".vjs-styles-defaults"),t=Qx("head");t.insertBefore(this.styleEl_,e?e.nextSibling:t.firstChild)}this.fill_=!1,this.fluid_=!1,this.width(this.options_.width),this.height(this.options_.height),this.fill(this.options_.fill),this.fluid(this.options_.fluid),this.aspectRatio(this.options_.aspectRatio),this.crossOrigin(this.options_.crossOrigin||this.options_.crossorigin);const s=t.getElementsByTagName("a");for(let a=0;a<s.length;a++){const e=s.item(a);Lx(e,"vjs-hidden"),e.setAttribute("hidden","hidden")}return t.initNetworkState_=t.networkState,t.parentNode&&!n&&t.parentNode.insertBefore(e,t),Ox(t,e),this.children_.unshift(t),this.el_.setAttribute("lang",this.language_),this.el_.setAttribute("translate","no"),this.el_=e,e}crossOrigin(e){if(void 0===e)return this.techGet_("crossOrigin");null===e||"anonymous"===e||"use-credentials"===e?(this.techCall_("setCrossOrigin",e),this.posterImage&&this.posterImage.crossOrigin(e)):zI.warn(`crossOrigin must be null,  "anonymous" or "use-credentials", given "${e}"`)}width(e){return this.dimension("width",e)}height(e){return this.dimension("height",e)}dimension(e,t){const n=e+"_";if(void 0===t)return this[n]||0;if(""===t||"auto"===t)return this[n]=void 0,void this.updateStyleEl_();const i=parseFloat(t);isNaN(i)?zI.error(`Improper value "${t}" supplied for for ${e}`):(this[n]=i,this.updateStyleEl_())}fluid(e){if(void 0===e)return!!this.fluid_;this.fluid_=!!e,Pk(this)&&this.off(["playerreset","resize"],this.boundUpdateStyleEl_),e?(this.addClass("vjs-fluid"),this.fill(!1),((e,t)=>{Pk(e)?t():(e.eventedCallbacks||(e.eventedCallbacks=[]),e.eventedCallbacks.push(t))})(this,(()=>{this.on(["playerreset","resize"],this.boundUpdateStyleEl_)}))):this.removeClass("vjs-fluid"),this.updateStyleEl_()}fill(e){if(void 0===e)return!!this.fill_;this.fill_=!!e,e?(this.addClass("vjs-fill"),this.fluid(!1)):this.removeClass("vjs-fill")}aspectRatio(e){if(void 0===e)return this.aspectRatio_;if(!/^\d+\:\d+$/.test(e))throw new Error("Improper value supplied for aspect ratio. The format should be width:height, for example 16:9.");this.aspectRatio_=e,this.fluid(!0),this.updateStyleEl_()}updateStyleEl_(){if(!0===sT.VIDEOJS_NO_DYNAMIC_STYLE){const e="number"==typeof this.width_?this.width_:this.options_.width,t="number"==typeof this.height_?this.height_:this.options_.height,n=this.tech_&&this.tech_.el();return void(n&&(e>=0&&(n.width=e),t>=0&&(n.height=t)))}let e,t,n,i;n=void 0!==this.aspectRatio_&&"auto"!==this.aspectRatio_?this.aspectRatio_:this.videoWidth()>0?this.videoWidth()+":"+this.videoHeight():"16:9";const r=n.split(":"),s=r[1]/r[0];e=void 0!==this.width_?this.width_:void 0!==this.height_?this.height_/s:this.videoWidth()||300,t=void 0!==this.height_?this.height_:e*s,i=/^[^a-zA-Z]/.test(this.id())?"dimensions-"+this.id():this.id()+"-dimensions",this.addClass(i),ok(this.styleEl_,`\n      .${i} {\n        width: ${e}px;\n        height: ${t}px;\n      }\n\n      .${i}.vjs-fluid:not(.vjs-audio-only-mode) {\n        padding-top: ${100*s}%;\n      }\n    `)}loadTech_(e,t){this.tech_&&this.unloadTech_();const n=Vk(e),i=e.charAt(0).toLowerCase()+e.slice(1);"Html5"!==n&&this.tag&&(RA.getTech("Html5").disposeMediaElement(this.tag),this.tag.player=null,this.tag=null),this.techName_=n,this.isReady_=!1;let r=this.autoplay();("string"==typeof this.autoplay()||!0===this.autoplay()&&this.options_.normalizeAutoplay)&&(r=!1);const s={source:t,autoplay:r,nativeControlsForTouch:this.options_.nativeControlsForTouch,playerId:this.id(),techId:`${this.id()}_${i}_api`,playsinline:this.options_.playsinline,preload:this.options_.preload,loop:this.options_.loop,disablePictureInPicture:this.options_.disablePictureInPicture,muted:this.options_.muted,poster:this.poster(),language:this.language(),playerElIngest:this.playerElIngest_||!1,"vtt.js":this.options_["vtt.js"],canOverridePoster:!!this.options_.techCanOverridePoster,enableSourceset:this.options_.enableSourceset};DA.names.forEach((e=>{const t=DA[e];s[t.getterName]=this[t.privateName]})),Object.assign(s,this.options_[n]),Object.assign(s,this.options_[i]),Object.assign(s,this.options_[e.toLowerCase()]),this.tag&&(s.tag=this.tag),t&&t.src===this.cache_.src&&this.cache_.currentTime>0&&(s.startTime=this.cache_.currentTime);const a=RA.getTech(e);if(!a)throw new Error(`No Tech named '${n}' exists! '${n}' should be registered using videojs.registerTech()'`);this.tech_=new a(s),this.tech_.ready(Sk(this,this.handleTechReady_),!0),lA(this.textTracksJson_||[],this.tech_),_P.forEach((e=>{this.on(this.tech_,e,(t=>this[`handleTech${Vk(e)}_`](t)))})),Object.keys(vP).forEach((e=>{this.on(this.tech_,e,(t=>{0===this.tech_.playbackRate()&&this.tech_.seeking()?this.queuedCallbacks_.push({callback:this[`handleTech${vP[e]}_`].bind(this),event:t}):this[`handleTech${vP[e]}_`](t)}))})),this.on(this.tech_,"loadstart",(e=>this.handleTechLoadStart_(e))),this.on(this.tech_,"sourceset",(e=>this.handleTechSourceset_(e))),this.on(this.tech_,"waiting",(e=>this.handleTechWaiting_(e))),this.on(this.tech_,"ended",(e=>this.handleTechEnded_(e))),this.on(this.tech_,"seeking",(e=>this.handleTechSeeking_(e))),this.on(this.tech_,"play",(e=>this.handleTechPlay_(e))),this.on(this.tech_,"pause",(e=>this.handleTechPause_(e))),this.on(this.tech_,"durationchange",(e=>this.handleTechDurationChange_(e))),this.on(this.tech_,"fullscreenchange",((e,t)=>this.handleTechFullscreenChange_(e,t))),this.on(this.tech_,"fullscreenerror",((e,t)=>this.handleTechFullscreenError_(e,t))),this.on(this.tech_,"enterpictureinpicture",(e=>this.handleTechEnterPictureInPicture_(e))),this.on(this.tech_,"leavepictureinpicture",(e=>this.handleTechLeavePictureInPicture_(e))),this.on(this.tech_,"error",(e=>this.handleTechError_(e))),this.on(this.tech_,"posterchange",(e=>this.handleTechPosterChange_(e))),this.on(this.tech_,"textdata",(e=>this.handleTechTextData_(e))),this.on(this.tech_,"ratechange",(e=>this.handleTechRateChange_(e))),this.on(this.tech_,"loadedmetadata",this.boundUpdateStyleEl_),this.usingNativeControls(this.techGet_("controls")),this.controls()&&!this.usingNativeControls()&&this.addTechControlsListeners_(),this.tech_.el().parentNode===this.el()||"Html5"===n&&this.tag||Ox(this.tech_.el(),this.el()),this.tag&&(this.tag.player=null,this.tag=null)}unloadTech_(){DA.names.forEach((e=>{const t=DA[e];this[t.privateName]=this[t.getterName]()})),this.textTracksJson_=oA(this.tech_),this.isReady_=!1,this.tech_.dispose(),this.tech_=!1,this.isPosterFromTech_&&(this.poster_="",this.trigger("posterchange")),this.isPosterFromTech_=!1}tech(e){return void 0===e&&zI.warn("Using the tech directly can be dangerous. I hope you know what you're doing.\nSee https://github.com/videojs/video.js/issues/2617 for more info.\n"),this.tech_}addTechControlsListeners_(){this.removeTechControlsListeners_(),this.on(this.tech_,"click",this.boundHandleTechClick_),this.on(this.tech_,"dblclick",this.boundHandleTechDoubleClick_),this.on(this.tech_,"touchstart",this.boundHandleTechTouchStart_),this.on(this.tech_,"touchmove",this.boundHandleTechTouchMove_),this.on(this.tech_,"touchend",this.boundHandleTechTouchEnd_),this.on(this.tech_,"tap",this.boundHandleTechTap_)}removeTechControlsListeners_(){this.off(this.tech_,"tap",this.boundHandleTechTap_),this.off(this.tech_,"touchstart",this.boundHandleTechTouchStart_),this.off(this.tech_,"touchmove",this.boundHandleTechTouchMove_),this.off(this.tech_,"touchend",this.boundHandleTechTouchEnd_),this.off(this.tech_,"click",this.boundHandleTechClick_),this.off(this.tech_,"dblclick",this.boundHandleTechDoubleClick_)}handleTechReady_(){this.triggerReady(),this.cache_.volume&&this.techCall_("setVolume",this.cache_.volume),this.handleTechPosterChange_(),this.handleTechDurationChange_()}handleTechLoadStart_(){this.removeClass("vjs-ended","vjs-seeking"),this.error(null),this.handleTechDurationChange_(),this.paused()?(this.hasStarted(!1),this.trigger("loadstart")):this.trigger("loadstart"),this.manualAutoplay_(!0===this.autoplay()&&this.options_.normalizeAutoplay?"play":this.autoplay())}manualAutoplay_(e){if(!this.tech_||"string"!=typeof e)return;const t=()=>{const e=this.muted();this.muted(!0);const t=()=>{this.muted(e)};this.playTerminatedQueue_.push(t);const n=this.play();if(rA(n))return n.catch((e=>{throw t(),new Error(`Rejection at manualAutoplay. Restoring muted value. ${e||""}`)}))};let n;return"any"!==e||this.muted()?n="muted"!==e||this.muted()?this.play():t():(n=this.play(),rA(n)&&(n=n.catch(t))),rA(n)?n.then((()=>{this.trigger({type:"autoplay-success",autoplay:e})})).catch((()=>{this.trigger({type:"autoplay-failure",autoplay:e})})):void 0}updateSourceCaches_(e=""){let t=e,n="";"string"!=typeof t&&(t=e.src,n=e.type),this.cache_.source=this.cache_.source||{},this.cache_.sources=this.cache_.sources||[],t&&!n&&(n=((e,t)=>{if(!t)return"";if(e.cache_.source.src===t&&e.cache_.source.type)return e.cache_.source.type;const n=e.cache_.sources.filter((e=>e.src===t));if(n.length)return n[0].type;const i=e.$$("source");for(let r=0;r<i.length;r++){const e=i[r];if(e.type&&e.src&&e.src===t)return e.type}return GA(t)})(this,t)),this.cache_.source=ex({},e,{src:t,type:n});const i=this.cache_.sources.filter((e=>e.src&&e.src===t)),r=[],s=this.$$("source"),a=[];for(let o=0;o<s.length;o++){const e=Mx(s[o]);r.push(e),e.src&&e.src===t&&a.push(e.src)}a.length&&!i.length?this.cache_.sources=r:i.length||(this.cache_.sources=[this.cache_.source]),this.cache_.src=t}handleTechSourceset_(e){if(!this.changingSrc_){let t=e=>this.updateSourceCaches_(e);const n=this.currentSource().src,i=e.src;n&&!/^blob:/.test(n)&&/^blob:/.test(i)&&(!this.lastSource_||this.lastSource_.tech!==i&&this.lastSource_.player!==n)&&(t=()=>{}),t(i),e.src||this.tech_.any(["sourceset","loadstart"],(e=>{if("sourceset"===e.type)return;const t=this.techGet("currentSrc");this.lastSource_.tech=t,this.updateSourceCaches_(t)}))}this.lastSource_={player:this.currentSource().src,tech:e.src},this.trigger({src:e.src,type:"sourceset"})}hasStarted(e){if(void 0===e)return this.hasStarted_;e!==this.hasStarted_&&(this.hasStarted_=e,this.hasStarted_?this.addClass("vjs-has-started"):this.removeClass("vjs-has-started"))}handleTechPlay_(){this.removeClass("vjs-ended","vjs-paused"),this.addClass("vjs-playing"),this.hasStarted(!0),this.trigger("play")}handleTechRateChange_(){this.tech_.playbackRate()>0&&0===this.cache_.lastPlaybackRate&&(this.queuedCallbacks_.forEach((e=>e.callback(e.event))),this.queuedCallbacks_=[]),this.cache_.lastPlaybackRate=this.tech_.playbackRate(),this.trigger("ratechange")}handleTechWaiting_(){this.addClass("vjs-waiting"),this.trigger("waiting");const e=this.currentTime(),t=()=>{e!==this.currentTime()&&(this.removeClass("vjs-waiting"),this.off("timeupdate",t))};this.on("timeupdate",t)}handleTechCanPlay_(){this.removeClass("vjs-waiting"),this.trigger("canplay")}handleTechCanPlayThrough_(){this.removeClass("vjs-waiting"),this.trigger("canplaythrough")}handleTechPlaying_(){this.removeClass("vjs-waiting"),this.trigger("playing")}handleTechSeeking_(){this.addClass("vjs-seeking"),this.trigger("seeking")}handleTechSeeked_(){this.removeClass("vjs-seeking","vjs-ended"),this.trigger("seeked")}handleTechPause_(){this.removeClass("vjs-playing"),this.addClass("vjs-paused"),this.trigger("pause")}handleTechEnded_(){this.addClass("vjs-ended"),this.removeClass("vjs-waiting"),this.options_.loop?(this.currentTime(0),this.play()):this.paused()||this.pause(),this.trigger("ended")}handleTechDurationChange_(){this.duration(this.techGet_("duration"))}handleTechClick_(e){this.controls_&&(void 0!==this.options_&&void 0!==this.options_.userActions&&void 0!==this.options_.userActions.click&&!1===this.options_.userActions.click||(void 0!==this.options_&&void 0!==this.options_.userActions&&"function"==typeof this.options_.userActions.click?this.options_.userActions.click.call(this,e):this.paused()?sA(this.play()):this.pause()))}handleTechDoubleClick_(e){if(!this.controls_)return;const t=Array.prototype.some.call(this.$$(".vjs-control-bar, .vjs-modal-dialog"),(t=>t.contains(e.target)));t||void 0!==this.options_&&void 0!==this.options_.userActions&&void 0!==this.options_.userActions.doubleClick&&!1===this.options_.userActions.doubleClick||(void 0!==this.options_&&void 0!==this.options_.userActions&&"function"==typeof this.options_.userActions.doubleClick?this.options_.userActions.doubleClick.call(this,e):this.isFullscreen()?this.exitFullscreen():this.requestFullscreen())}handleTechTap_(){this.userActive(!this.userActive())}handleTechTouchStart_(){this.userWasActive=this.userActive()}handleTechTouchMove_(){this.userWasActive&&this.reportUserActivity()}handleTechTouchEnd_(e){e.cancelable&&e.preventDefault()}toggleFullscreenClass_(){this.isFullscreen()?this.addClass("vjs-fullscreen"):this.removeClass("vjs-fullscreen")}documentFullscreenChange_(e){const t=e.target.player;if(t&&t!==this)return;const n=this.el();let i=dT[this.fsApi_.fullscreenElement]===n;!i&&n.matches?i=n.matches(":"+this.fsApi_.fullscreen):!i&&n.msMatchesSelector&&(i=n.msMatchesSelector(":"+this.fsApi_.fullscreen)),this.isFullscreen(i)}handleTechFullscreenChange_(e,t){t&&(t.nativeIOSFullscreen&&(this.addClass("vjs-ios-native-fs"),this.tech_.one("webkitendfullscreen",(()=>{this.removeClass("vjs-ios-native-fs")}))),this.isFullscreen(t.isFullscreen))}handleTechFullscreenError_(e,t){this.trigger("fullscreenerror",t)}togglePictureInPictureClass_(){this.isInPictureInPicture()?this.addClass("vjs-picture-in-picture"):this.removeClass("vjs-picture-in-picture")}handleTechEnterPictureInPicture_(e){this.isInPictureInPicture(!0)}handleTechLeavePictureInPicture_(e){this.isInPictureInPicture(!1)}handleTechError_(){const e=this.tech_.error();this.error(e)}handleTechTextData_(){let e=null;arguments.length>1&&(e=arguments[1]),this.trigger("textdata",e)}getCache(){return this.cache_}resetCache_(){this.cache_={currentTime:0,initTime:0,inactivityTimeout:this.options_.inactivityTimeout,duration:NaN,lastVolume:1,lastPlaybackRate:this.defaultPlaybackRate(),media:null,src:"",source:{},sources:[],playbackRates:[],volume:1}}techCall_(e,t){this.ready((function(){if(e in HA)return function(e,t,n,i){return t[n](e.reduce($A(n),i))}(this.middleware_,this.tech_,e,t);if(e in VA)return jA(this.middleware_,this.tech_,e,t);try{this.tech_&&this.tech_[e](t)}catch(fB){throw zI(fB),fB}}),!0)}techGet_(e){if(this.tech_&&this.tech_.isReady_){if(e in qA)return function(e,t,n){return e.reduceRight($A(n),t[n]())}(this.middleware_,this.tech_,e);if(e in VA)return jA(this.middleware_,this.tech_,e);try{return this.tech_[e]()}catch(fB){if(void 0===this.tech_[e])throw zI(`Video.js: ${e} method not defined for ${this.techName_} playback technology.`,fB),fB;if("TypeError"===fB.name)throw zI(`Video.js: ${e} unavailable on ${this.techName_} playback technology element.`,fB),this.tech_.isReady_=!1,fB;throw zI(fB),fB}}}play(){return new Promise((e=>{this.play_(e)}))}play_(e=sA){this.playCallbacks_.push(e);const t=Boolean(!this.changingSrc_&&(this.src()||this.currentSrc())),n=Boolean(Tx||bx);if(this.waitToPlay_&&(this.off(["ready","loadstart"],this.waitToPlay_),this.waitToPlay_=null),!this.isReady_||!t)return this.waitToPlay_=e=>{this.play_()},this.one(["ready","loadstart"],this.waitToPlay_),void(!t&&n&&this.load());const i=this.techGet_("play");n&&this.hasClass("vjs-ended")&&this.resetProgressBar_(),null===i?this.runPlayTerminatedQueue_():this.runPlayCallbacks_(i)}runPlayTerminatedQueue_(){const e=this.playTerminatedQueue_.slice(0);this.playTerminatedQueue_=[],e.forEach((function(e){e()}))}runPlayCallbacks_(e){const t=this.playCallbacks_.slice(0);this.playCallbacks_=[],this.playTerminatedQueue_=[],t.forEach((function(t){t(e)}))}pause(){this.techCall_("pause")}paused(){return!1!==this.techGet_("paused")}played(){return this.techGet_("played")||Xk(0,0)}scrubbing(e){if(void 0===e)return this.scrubbing_;this.scrubbing_=!!e,this.techCall_("setScrubbing",this.scrubbing_),e?this.addClass("vjs-scrubbing"):this.removeClass("vjs-scrubbing")}currentTime(e){return void 0!==e?(e<0&&(e=0),this.isReady_&&!this.changingSrc_&&this.tech_&&this.tech_.isReady_?(this.techCall_("setCurrentTime",e),void(this.cache_.initTime=0)):(this.cache_.initTime=e,this.off("canplay",this.boundApplyInitTime_),void this.one("canplay",this.boundApplyInitTime_))):(this.cache_.currentTime=this.techGet_("currentTime")||0,this.cache_.currentTime)}applyInitTime_(){this.currentTime(this.cache_.initTime)}duration(e){if(void 0===e)return void 0!==this.cache_.duration?this.cache_.duration:NaN;(e=parseFloat(e))<0&&(e=1/0),e!==this.cache_.duration&&(this.cache_.duration=e,e===1/0?this.addClass("vjs-live"):this.removeClass("vjs-live"),isNaN(e)||this.trigger("durationchange"))}remainingTime(){return this.duration()-this.currentTime()}remainingTimeDisplay(){return Math.floor(this.duration())-Math.floor(this.currentTime())}buffered(){let e=this.techGet_("buffered");return e&&e.length||(e=Xk(0,0)),e}bufferedPercent(){return nA(this.buffered(),this.duration())}bufferedEnd(){const e=this.buffered(),t=this.duration();let n=e.end(e.length-1);return n>t&&(n=t),n}volume(e){let t;return void 0!==e?(t=Math.max(0,Math.min(1,parseFloat(e))),this.cache_.volume=t,this.techCall_("setVolume",t),void(t>0&&this.lastVolume_(t))):(t=parseFloat(this.techGet_("volume")),isNaN(t)?1:t)}muted(e){if(void 0===e)return this.techGet_("muted")||!1;this.techCall_("setMuted",e)}defaultMuted(e){return void 0!==e?this.techCall_("setDefaultMuted",e):this.techGet_("defaultMuted")||!1}lastVolume_(e){if(void 0===e||0===e)return this.cache_.lastVolume;this.cache_.lastVolume=e}supportsFullScreen(){return this.techGet_("supportsFullScreen")||!1}isFullscreen(e){if(void 0!==e){const t=this.isFullscreen_;return this.isFullscreen_=Boolean(e),this.isFullscreen_!==t&&this.fsApi_.prefixed&&this.trigger("fullscreenchange"),void this.toggleFullscreenClass_()}return this.isFullscreen_}requestFullscreen(e){this.isInPictureInPicture()&&this.exitPictureInPicture();const t=this;return new Promise(((n,i)=>{function r(){t.off("fullscreenerror",a),t.off("fullscreenchange",s)}function s(){r(),n()}function a(e,t){r(),i(t)}t.one("fullscreenchange",s),t.one("fullscreenerror",a);const o=t.requestFullscreenHelper_(e);o&&(o.then(r,r),o.then(n,i))}))}requestFullscreenHelper_(e){let t;if(this.fsApi_.prefixed||(t=this.options_.fullscreen&&this.options_.fullscreen.options||{},void 0!==e&&(t=e)),this.fsApi_.requestFullscreen){const e=this.el_[this.fsApi_.requestFullscreen](t);return e&&e.then((()=>this.isFullscreen(!0)),(()=>this.isFullscreen(!1))),e}this.tech_.supportsFullScreen()&&!0==!this.options_.preferFullWindow?this.techCall_("enterFullScreen"):this.enterFullWindow()}exitFullscreen(){const e=this;return new Promise(((t,n)=>{function i(){e.off("fullscreenerror",s),e.off("fullscreenchange",r)}function r(){i(),t()}function s(e,t){i(),n(t)}e.one("fullscreenchange",r),e.one("fullscreenerror",s);const a=e.exitFullscreenHelper_();a&&(a.then(i,i),a.then(t,n))}))}exitFullscreenHelper_(){if(this.fsApi_.requestFullscreen){const e=dT[this.fsApi_.exitFullscreen]();return e&&sA(e.then((()=>this.isFullscreen(!1)))),e}this.tech_.supportsFullScreen()&&!0==!this.options_.preferFullWindow?this.techCall_("exitFullScreen"):this.exitFullWindow()}enterFullWindow(){this.isFullscreen(!0),this.isFullWindow=!0,this.docOrigOverflow=dT.documentElement.style.overflow,yk(dT,"keydown",this.boundFullWindowOnEscKey_),dT.documentElement.style.overflow="hidden",Lx(dT.body,"vjs-full-window"),this.trigger("enterFullWindow")}fullWindowOnEscKey(e){pT.isEventKey(e,"Esc")&&!0===this.isFullscreen()&&(this.isFullWindow?this.exitFullWindow():this.exitFullscreen())}exitFullWindow(){this.isFullscreen(!1),this.isFullWindow=!1,_k(dT,"keydown",this.boundFullWindowOnEscKey_),dT.documentElement.style.overflow=this.docOrigOverflow,Nx(dT.body,"vjs-full-window"),this.trigger("exitFullWindow")}disablePictureInPicture(e){if(void 0===e)return this.techGet_("disablePictureInPicture");this.techCall_("setDisablePictureInPicture",e),this.options_.disablePictureInPicture=e,this.trigger("disablepictureinpicturechanged")}isInPictureInPicture(e){return void 0!==e?(this.isInPictureInPicture_=!!e,void this.togglePictureInPictureClass_()):!!this.isInPictureInPicture_}requestPictureInPicture(){if(this.options_.enableDocumentPictureInPicture&&sT.documentPictureInPicture){const e=dT.createElement(this.el().tagName);return e.classList=this.el().classList,e.classList.add("vjs-pip-container"),this.posterImage&&e.appendChild(this.posterImage.el().cloneNode(!0)),this.titleBar&&e.appendChild(this.titleBar.el().cloneNode(!0)),e.appendChild(kx("p",{className:"vjs-pip-text"},{},this.localize("Playing in picture-in-picture"))),sT.documentPictureInPicture.requestWindow({initialAspectRatio:this.videoWidth()/this.videoHeight(),copyStyleSheets:!0}).then((t=>(this.el_.parentNode.insertBefore(e,this.el_),t.document.body.append(this.el_),t.document.body.classList.add("vjs-pip-window"),this.player_.isInPictureInPicture(!0),this.player_.trigger("enterpictureinpicture"),t.addEventListener("unload",(t=>{const n=t.target.querySelector(".video-js");e.replaceWith(n),this.player_.isInPictureInPicture(!1),this.player_.trigger("leavepictureinpicture")})),t)))}return"pictureInPictureEnabled"in dT&&!1===this.disablePictureInPicture()?this.techGet_("requestPictureInPicture"):Promise.reject("No PiP mode is available")}exitPictureInPicture(){return sT.documentPictureInPicture&&sT.documentPictureInPicture.window?(sT.documentPictureInPicture.window.close(),Promise.resolve()):"pictureInPictureEnabled"in dT?dT.exitPictureInPicture():void 0}handleKeyDown(e){const{userActions:t}=this.options_;if(!t||!t.hotkeys)return;(e=>{const t=e.tagName.toLowerCase();if(e.isContentEditable)return!0;if("input"===t)return-1===["button","checkbox","hidden","radio","reset","submit"].indexOf(e.type);return-1!==["textarea"].indexOf(t)})(this.el_.ownerDocument.activeElement)||("function"==typeof t.hotkeys?t.hotkeys.call(this,e):this.handleHotkeys(e))}handleHotkeys(e){const t=this.options_.userActions?this.options_.userActions.hotkeys:{},{fullscreenKey:n=(e=>pT.isEventKey(e,"f")),muteKey:i=(e=>pT.isEventKey(e,"m")),playPauseKey:r=(e=>pT.isEventKey(e,"k")||pT.isEventKey(e,"Space"))}=t;if(n.call(this,e)){e.preventDefault(),e.stopPropagation();const t=zk.getComponent("FullscreenToggle");!1!==dT[this.fsApi_.fullscreenEnabled]&&t.prototype.handleClick.call(this,e)}else if(i.call(this,e)){e.preventDefault(),e.stopPropagation();zk.getComponent("MuteToggle").prototype.handleClick.call(this,e)}else if(r.call(this,e)){e.preventDefault(),e.stopPropagation();zk.getComponent("PlayToggle").prototype.handleClick.call(this,e)}}canPlayType(e){let t;for(let n=0,i=this.options_.techOrder;n<i.length;n++){const r=i[n];let s=RA.getTech(r);if(s||(s=zk.getComponent(r)),s){if(s.isSupported()&&(t=s.canPlayType(e),t))return t}else zI.error(`The "${r}" tech is undefined. Skipped browser support check for that tech.`)}return""}selectSource(e){const t=this.options_.techOrder.map((e=>[e,RA.getTech(e)])).filter((([e,t])=>t?t.isSupported():(zI.error(`The "${e}" tech is undefined. Skipped browser support check for that tech.`),!1))),n=function(e,t,n){let i;return e.some((e=>t.some((t=>{if(i=n(e,t),i)return!0})))),i};let i;const r=([e,t],n)=>{if(t.canPlaySource(n,this.options_[e.toLowerCase()]))return{source:n,tech:e}};var s;return i=this.options_.sourceOrder?n(e,t,(s=r,(e,t)=>s(t,e))):n(t,e,r),i||!1}handleSrc_(e,t){if(void 0===e)return this.cache_.src||"";this.resetRetryOnError_&&this.resetRetryOnError_();const n=KA(e);if(n.length){if(this.changingSrc_=!0,t||(this.cache_.sources=n),this.updateSourceCaches_(n[0]),BA(this,n[0],((e,i)=>{this.middleware_=i,t||(this.cache_.sources=n),this.updateSourceCaches_(e);if(this.src_(e))return n.length>1?this.handleSrc_(n.slice(1)):(this.changingSrc_=!1,this.setTimeout((function(){this.error({code:4,message:this.options_.notSupportedMessage})}),0),void this.triggerReady());var r,s;r=i,s=this.tech_,r.forEach((e=>e.setTech&&e.setTech(s)))})),n.length>1){const e=()=>{this.error(null),this.handleSrc_(n.slice(1),!0)},t=()=>{this.off("error",e)};this.one("error",e),this.one("playing",t),this.resetRetryOnError_=()=>{this.off("error",e),this.off("playing",t)}}}else this.setTimeout((function(){this.error({code:4,message:this.options_.notSupportedMessage})}),0)}src(e){return this.handleSrc_(e,!1)}src_(e){const t=this.selectSource([e]);return!t||($k(t.tech,this.techName_)?(this.ready((function(){this.tech_.constructor.prototype.hasOwnProperty("setSource")?this.techCall_("setSource",e):this.techCall_("src",e.src),this.changingSrc_=!1}),!0),!1):(this.changingSrc_=!0,this.loadTech_(t.tech,t.source),this.tech_.ready((()=>{this.changingSrc_=!1})),!1))}load(){this.techCall_("load")}reset(){if(this.paused())this.doReset_();else{sA(this.play().then((()=>this.doReset_())))}}doReset_(){this.tech_&&this.tech_.clearTracks("text"),this.resetCache_(),this.poster(""),this.loadTech_(this.options_.techOrder[0],null),this.techCall_("reset"),this.resetControlBarUI_(),Pk(this)&&this.trigger("playerreset")}resetControlBarUI_(){this.resetProgressBar_(),this.resetPlaybackRate_(),this.resetVolumeBar_()}resetProgressBar_(){this.currentTime(0);const{currentTimeDisplay:e,durationDisplay:t,progressControl:n,remainingTimeDisplay:i}=this.controlBar||{},{seekBar:r}=n||{};e&&e.updateContent(),t&&t.updateContent(),i&&i.updateContent(),r&&(r.update(),r.loadProgressBar&&r.loadProgressBar.update())}resetPlaybackRate_(){this.playbackRate(this.defaultPlaybackRate()),this.handleTechRateChange_()}resetVolumeBar_(){this.volume(1),this.trigger("volumechange")}currentSources(){const e=this.currentSource(),t=[];return 0!==Object.keys(e).length&&t.push(e),this.cache_.sources||t}currentSource(){return this.cache_.source||{}}currentSrc(){return this.currentSource()&&this.currentSource().src||""}currentType(){return this.currentSource()&&this.currentSource().type||""}preload(e){return void 0!==e?(this.techCall_("setPreload",e),void(this.options_.preload=e)):this.techGet_("preload")}autoplay(e){if(void 0===e)return this.options_.autoplay||!1;let t;"string"==typeof e&&/(any|play|muted)/.test(e)||!0===e&&this.options_.normalizeAutoplay?(this.options_.autoplay=e,this.manualAutoplay_("string"==typeof e?e:"play"),t=!1):this.options_.autoplay=!!e,t=void 0===t?this.options_.autoplay:t,this.tech_&&this.techCall_("setAutoplay",t)}playsinline(e){return void 0!==e?(this.techCall_("setPlaysinline",e),this.options_.playsinline=e,this):this.techGet_("playsinline")}loop(e){return void 0!==e?(this.techCall_("setLoop",e),void(this.options_.loop=e)):this.techGet_("loop")}poster(e){if(void 0===e)return this.poster_;e||(e=""),e!==this.poster_&&(this.poster_=e,this.techCall_("setPoster",e),this.isPosterFromTech_=!1,this.trigger("posterchange"))}handleTechPosterChange_(){if((!this.poster_||this.options_.techCanOverridePoster)&&this.tech_&&this.tech_.poster){const e=this.tech_.poster()||"";e!==this.poster_&&(this.poster_=e,this.isPosterFromTech_=!0,this.trigger("posterchange"))}}controls(e){if(void 0===e)return!!this.controls_;e=!!e,this.controls_!==e&&(this.controls_=e,this.usingNativeControls()&&this.techCall_("setControls",e),this.controls_?(this.removeClass("vjs-controls-disabled"),this.addClass("vjs-controls-enabled"),this.trigger("controlsenabled"),this.usingNativeControls()||this.addTechControlsListeners_()):(this.removeClass("vjs-controls-enabled"),this.addClass("vjs-controls-disabled"),this.trigger("controlsdisabled"),this.usingNativeControls()||this.removeTechControlsListeners_()))}usingNativeControls(e){if(void 0===e)return!!this.usingNativeControls_;e=!!e,this.usingNativeControls_!==e&&(this.usingNativeControls_=e,this.usingNativeControls_?(this.addClass("vjs-using-native-controls"),this.trigger("usingnativecontrols")):(this.removeClass("vjs-using-native-controls"),this.trigger("usingcustomcontrols")))}error(e){if(void 0===e)return this.error_||null;if(BI("beforeerror").forEach((t=>{const n=t(this,e);JI(n)&&!Array.isArray(n)||"string"==typeof n||"number"==typeof n||null===n?e=n:this.log.error("please return a value that MediaError expects in beforeerror hooks")})),this.options_.suppressNotSupportedError&&e&&4===e.code){const t=function(){this.error(e)};return this.options_.suppressNotSupportedError=!1,this.any(["click","touchstart"],t),void this.one("loadstart",(function(){this.off(["click","touchstart"],t)}))}if(null===e)return this.error_=e,this.removeClass("vjs-error"),void(this.errorDisplay&&this.errorDisplay.close());this.error_=new iA(e),this.addClass("vjs-error"),zI.error(`(CODE:${this.error_.code} ${iA.errorTypes[this.error_.code]})`,this.error_.message,this.error_),this.trigger("error"),BI("error").forEach((e=>e(this,this.error_)))}reportUserActivity(e){this.userActivity_=!0}userActive(e){if(void 0===e)return this.userActive_;if((e=!!e)!==this.userActive_){if(this.userActive_=e,this.userActive_)return this.userActivity_=!0,this.removeClass("vjs-user-inactive"),this.addClass("vjs-user-active"),void this.trigger("useractive");this.tech_&&this.tech_.one("mousemove",(function(e){e.stopPropagation(),e.preventDefault()})),this.userActivity_=!1,this.removeClass("vjs-user-active"),this.addClass("vjs-user-inactive"),this.trigger("userinactive")}}listenForUserActivity_(){let e,t,n;const i=Sk(this,this.reportUserActivity),r=function(t){i(),this.clearInterval(e)};this.on("mousedown",(function(){i(),this.clearInterval(e),e=this.setInterval(i,250)})),this.on("mousemove",(function(e){e.screenX===t&&e.screenY===n||(t=e.screenX,n=e.screenY,i())})),this.on("mouseup",r),this.on("mouseleave",r);const s=this.getChild("controlBar");let a;!s||bx||ax||(s.on("mouseenter",(function(e){0!==this.player().options_.inactivityTimeout&&(this.player().cache_.inactivityTimeout=this.player().options_.inactivityTimeout),this.player().options_.inactivityTimeout=0})),s.on("mouseleave",(function(e){this.player().options_.inactivityTimeout=this.player().cache_.inactivityTimeout}))),this.on("keydown",i),this.on("keyup",i),this.setInterval((function(){if(!this.userActivity_)return;this.userActivity_=!1,this.userActive(!0),this.clearTimeout(a);const e=this.options_.inactivityTimeout;e<=0||(a=this.setTimeout((function(){this.userActivity_||this.userActive(!1)}),e))}),250)}playbackRate(e){if(void 0===e)return this.tech_&&this.tech_.featuresPlaybackRate?this.cache_.lastPlaybackRate||this.techGet_("playbackRate"):1;this.techCall_("setPlaybackRate",e)}defaultPlaybackRate(e){return void 0!==e?this.techCall_("setDefaultPlaybackRate",e):this.tech_&&this.tech_.featuresPlaybackRate?this.techGet_("defaultPlaybackRate"):1}isAudio(e){if(void 0===e)return!!this.isAudio_;this.isAudio_=!!e}enableAudioOnlyUI_(){this.addClass("vjs-audio-only-mode");const e=this.children(),t=this.getChild("ControlBar"),n=t&&t.currentHeight();e.forEach((e=>{e!==t&&e.el_&&!e.hasClass("vjs-hidden")&&(e.hide(),this.audioOnlyCache_.hiddenChildren.push(e))})),this.audioOnlyCache_.playerHeight=this.currentHeight(),this.height(n),this.trigger("audioonlymodechange")}disableAudioOnlyUI_(){this.removeClass("vjs-audio-only-mode"),this.audioOnlyCache_.hiddenChildren.forEach((e=>e.show())),this.height(this.audioOnlyCache_.playerHeight),this.trigger("audioonlymodechange")}audioOnlyMode(e){if("boolean"!=typeof e||e===this.audioOnlyMode_)return this.audioOnlyMode_;if(this.audioOnlyMode_=e,e){const e=[];return this.isInPictureInPicture()&&e.push(this.exitPictureInPicture()),this.isFullscreen()&&e.push(this.exitFullscreen()),this.audioPosterMode()&&e.push(this.audioPosterMode(!1)),Promise.all(e).then((()=>this.enableAudioOnlyUI_()))}return Promise.resolve().then((()=>this.disableAudioOnlyUI_()))}enablePosterModeUI_(){(this.tech_&&this.tech_).hide(),this.addClass("vjs-audio-poster-mode"),this.trigger("audiopostermodechange")}disablePosterModeUI_(){(this.tech_&&this.tech_).show(),this.removeClass("vjs-audio-poster-mode"),this.trigger("audiopostermodechange")}audioPosterMode(e){if("boolean"!=typeof e||e===this.audioPosterMode_)return this.audioPosterMode_;if(this.audioPosterMode_=e,e){if(this.audioOnlyMode()){return this.audioOnlyMode(!1).then((()=>{this.enablePosterModeUI_()}))}return Promise.resolve().then((()=>{this.enablePosterModeUI_()}))}return Promise.resolve().then((()=>{this.disablePosterModeUI_()}))}addTextTrack(e,t,n){if(this.tech_)return this.tech_.addTextTrack(e,t,n)}addRemoteTextTrack(e,t){if(this.tech_)return this.tech_.addRemoteTextTrack(e,t)}removeRemoteTextTrack(e={}){let{track:t}=e;if(t||(t=e),this.tech_)return this.tech_.removeRemoteTextTrack(t)}getVideoPlaybackQuality(){return this.techGet_("getVideoPlaybackQuality")}videoWidth(){return this.tech_&&this.tech_.videoWidth&&this.tech_.videoWidth()||0}videoHeight(){return this.tech_&&this.tech_.videoHeight&&this.tech_.videoHeight()||0}language(e){if(void 0===e)return this.language_;this.language_!==String(e).toLowerCase()&&(this.language_=String(e).toLowerCase(),Pk(this)&&this.trigger("languagechange"))}languages(){return ex(wP.prototype.options_.languages,this.languages_)}toJSON(){const e=ex(this.options_),t=e.tracks;e.tracks=[];for(let n=0;n<t.length;n++){let i=t[n];i=ex(i),i.player=void 0,e.tracks[n]=i}return e}createModal(e,t){(t=t||{}).content=e||"";const n=new uA(this,t);return this.addChild(n),n.on("dispose",(()=>{this.removeChild(n)})),n.open(),n}updateCurrentBreakpoint_(){if(!this.responsive())return;const e=this.currentBreakpoint(),t=this.currentWidth();for(let n=0;n<bP.length;n++){const i=bP[n];if(t<=this.breakpoints_[i]){if(e===i)return;e&&this.removeClass(TP[e]),this.addClass(TP[i]),this.breakpoint_=i;break}}}removeCurrentBreakpoint_(){const e=this.currentBreakpointClass();this.breakpoint_="",e&&this.removeClass(e)}breakpoints(e){return void 0===e||(this.breakpoint_="",this.breakpoints_=Object.assign({},EP,e),this.updateCurrentBreakpoint_()),Object.assign(this.breakpoints_)}responsive(e){if(void 0===e)return this.responsive_;return(e=Boolean(e))!==this.responsive_?(this.responsive_=e,e?(this.on("playerresize",this.boundUpdateCurrentBreakpoint_),this.updateCurrentBreakpoint_()):(this.off("playerresize",this.boundUpdateCurrentBreakpoint_),this.removeCurrentBreakpoint_()),e):void 0}currentBreakpoint(){return this.breakpoint_}currentBreakpointClass(){return TP[this.breakpoint_]||""}loadMedia(e,t){if(!e||"object"!=typeof e)return;this.reset(),this.cache_.media=ex(e);const{artist:n,artwork:i,description:r,poster:s,src:a,textTracks:o,title:l}=this.cache_.media;!i&&s&&(this.cache_.media.artwork=[{src:s,type:GA(s)}]),a&&this.src(a),s&&this.poster(s),Array.isArray(o)&&o.forEach((e=>this.addRemoteTextTrack(e,!1))),this.titleBar&&this.titleBar.update({title:l,description:r||n||""}),this.ready(t)}getMedia(){if(!this.cache_.media){const e=this.poster(),t={src:this.currentSources(),textTracks:Array.prototype.map.call(this.remoteTextTracks(),(e=>({kind:e.kind,label:e.label,language:e.language,src:e.src})))};return e&&(t.poster=e,t.artwork=[{src:t.poster,type:GA(t.poster)}]),t}return ex(this.cache_.media)}static getTagSettings(e){const t={sources:[],tracks:[]},n=Mx(e),i=n["data-setup"];if(Px(e,"vjs-fill")&&(n.fill=!0),Px(e,"vjs-fluid")&&(n.fluid=!0),null!==i){const[e,t]=fT(i||"{}");e&&zI.error(e),Object.assign(n,t)}if(Object.assign(t,n),e.hasChildNodes()){const n=e.childNodes;for(let e=0,i=n.length;e<i;e++){const i=n[e],r=i.nodeName.toLowerCase();"source"===r?t.sources.push(Mx(i)):"track"===r&&t.tracks.push(Mx(i))}}return t}debug(e){if(void 0===e)return this.debugEnabled_;e?(this.trigger("debugon"),this.previousLogLevel_=this.log.level,this.log.level("debug"),this.debugEnabled_=!0):(this.trigger("debugoff"),this.log.level(this.previousLogLevel_),this.previousLogLevel_=void 0,this.debugEnabled_=!1)}playbackRates(e){if(void 0===e)return this.cache_.playbackRates;Array.isArray(e)&&e.every((e=>"number"==typeof e))&&(this.cache_.playbackRates=e,this.trigger("playbackrateschange"))}}DA.names.forEach((function(e){const t=DA[e];wP.prototype[t.getterName]=function(){return this.tech_?this.tech_[t.getterName]():(this[t.privateName]=this[t.privateName]||new t.ListClass,this[t.privateName])}})),wP.prototype.crossorigin=wP.prototype.crossOrigin,wP.players={};const SP=sT.navigator;wP.prototype.options_={techOrder:RA.defaultTechOrder_,html5:{},enableSourceset:!0,inactivityTimeout:2e3,playbackRates:[],liveui:!1,children:["mediaLoader","posterImage","titleBar","textTrackDisplay","loadingSpinner","bigPlayButton","liveTracker","controlBar","errorDisplay","textTrackSettings","resizeManager"],language:SP&&(SP.languages&&SP.languages[0]||SP.userLanguage||SP.language)||"en",languages:{},notSupportedMessage:"No compatible source was found for this media.",normalizeAutoplay:!1,fullscreen:{options:{navigationUI:"hide"}},breakpoints:{},responsive:!1,audioOnlyMode:!1,audioPosterMode:!1},["ended","seeking","seekable","networkState","readyState"].forEach((function(e){wP.prototype[e]=function(){return this.techGet_(e)}})),_P.forEach((function(e){wP.prototype[`handleTech${Vk(e)}_`]=function(){return this.trigger(e)}})),zk.registerComponent("Player",wP);const CP="plugin",IP="activePlugins_",xP={},kP=e=>xP.hasOwnProperty(e),AP=e=>kP(e)?xP[e]:void 0,OP=(e,t)=>{e[IP]=e[IP]||{},e[IP][t]=!0},PP=(e,t,n)=>{const i=(n?"before":"")+"pluginsetup";e.trigger(i,t),e.trigger(i+":"+t.name,t)},LP=(e,t)=>(t.prototype.name=e,function(...n){PP(this,{name:e,plugin:t,instance:null},!0);const i=new t(...[this,...n]);return this[e]=()=>i,PP(this,i.getEventHash()),i});class NP{constructor(e){if(this.constructor===NP)throw new Error("Plugin must be sub-classed; not directly instantiated.");this.player=e,this.log||(this.log=this.player.log.createLogger(this.name)),Bk(this),delete this.trigger,qk(this,this.constructor.defaultState),OP(e,this.name),this.dispose=this.dispose.bind(this),e.on("dispose",this.dispose)}version(){return this.constructor.VERSION}getEventHash(e={}){return e.name=this.name,e.plugin=this.constructor,e.instance=this,e}trigger(e,t={}){return vk(this.eventBusEl_,e,this.getEventHash(t))}handleStateChanged(e){}dispose(){const{name:e,player:t}=this;this.trigger("dispose"),this.off(),t.off("dispose",this.dispose),t[IP][e]=!1,this.player=this.state=null,t[e]=LP(e,xP[e])}static isBasic(e){const t="string"==typeof e?AP(e):e;return"function"==typeof t&&!NP.prototype.isPrototypeOf(t.prototype)}static registerPlugin(e,t){if("string"!=typeof e)throw new Error(`Illegal plugin name, "${e}", must be a string, was ${typeof e}.`);if(kP(e))zI.warn(`A plugin named "${e}" already exists. You may want to avoid re-registering plugins!`);else if(wP.prototype.hasOwnProperty(e))throw new Error(`Illegal plugin name, "${e}", cannot share a name with an existing player method!`);if("function"!=typeof t)throw new Error(`Illegal plugin for "${e}", must be a function, was ${typeof t}.`);return xP[e]=t,e!==CP&&(NP.isBasic(t)?wP.prototype[e]=function(e,t){const n=function(){PP(this,{name:e,plugin:t,instance:null},!0);const n=t.apply(this,arguments);return OP(this,e),PP(this,{name:e,plugin:t,instance:n}),n};return Object.keys(t).forEach((function(e){n[e]=t[e]})),n}(e,t):wP.prototype[e]=LP(e,t)),t}static deregisterPlugin(e){if(e===CP)throw new Error("Cannot de-register base plugin.");kP(e)&&(delete xP[e],delete wP.prototype[e])}static getPlugins(e=Object.keys(xP)){let t;return e.forEach((e=>{const n=AP(e);n&&(t=t||{},t[e]=n)})),t}static getPluginVersion(e){const t=AP(e);return t&&t.VERSION||""}}function DP(e,t,n,i){return function(e,t){let n=!1;return function(...i){return n||zI.warn(e),n=!0,t.apply(this,i)}}(`${t} is deprecated and will be removed in ${e}.0; please use ${n} instead.`,i)}NP.getPlugin=AP,NP.BASE_PLUGIN_NAME=CP,NP.registerPlugin(CP,NP),wP.prototype.usingPlugin=function(e){return!!this[IP]&&!0===this[IP][e]},wP.prototype.hasPlugin=function(e){return!!kP(e)};const RP=e=>0===e.indexOf("#")?e.slice(1):e;function MP(e,t,n){let i=MP.getPlayer(e);if(i)return t&&zI.warn(`Player "${e}" is already initialised. Options will not be applied.`),n&&i.ready(n),i;const r="string"==typeof e?Qx("#"+RP(e)):e;if(!Cx(r))throw new TypeError("The element or ID supplied is not valid. (videojs)");r.ownerDocument.defaultView&&r.ownerDocument.body.contains(r)||zI.warn("The element supplied is not included in the DOM"),!0===(t=t||{}).restoreEl&&(t.restoreEl=(r.parentNode&&r.parentNode.hasAttribute("data-vjs-player")?r.parentNode:r).cloneNode(!0)),BI("beforesetup").forEach((e=>{const n=e(r,ex(t));JI(n)&&!Array.isArray(n)?t=ex(t,n):zI.error("please return an object in beforesetup hooks")}));const s=zk.getComponent("Player");return i=new s(r,t,n),BI("setup").forEach((e=>e(i))),i}if(MP.hooks_=UI,MP.hooks=BI,MP.hook=function(e,t){BI(e,t)},MP.hookOnce=function(e,t){BI(e,[].concat(t).map((t=>{const n=(...i)=>(jI(e,n),t(...i));return n})))},MP.removeHook=jI,!0!==sT.VIDEOJS_NO_DYNAMIC_STYLE&&Sx()){let bB=Qx(".vjs-styles-defaults");if(!bB){bB=ak("vjs-styles-defaults");const TB=Qx("head");TB&&TB.insertBefore(bB,TB.firstChild),ok(bB,"\n      .video-js {\n        width: 300px;\n        height: 150px;\n      }\n\n      .vjs-fluid:not(.vjs-audio-only-mode) {\n        padding-top: 56.25%\n      }\n    ")}}rk(1,MP),MP.VERSION=FI,MP.options=wP.prototype.options_,MP.getPlayers=()=>wP.players,MP.getPlayer=e=>{const t=wP.players;let n;if("string"==typeof e){const i=RP(e),r=t[i];if(r)return r;n=Qx("#"+i)}else n=e;if(Cx(n)){const{player:e,playerId:i}=n;if(e||t[i])return e||t[i]}},MP.getAllPlayers=()=>Object.keys(wP.players).map((e=>wP.players[e])).filter(Boolean),MP.players=wP.players,MP.getComponent=zk.getComponent,MP.registerComponent=(e,t)=>{RA.isTech(t)&&zI.warn(`The ${e} tech was registered as a component. It should instead be registered using videojs.registerTech(name, tech)`),zk.registerComponent.call(zk,e,t)},MP.getTech=RA.getTech,MP.registerTech=RA.registerTech,MP.use=function(e,t){MA[e]=MA[e]||[],MA[e].push(t)},Object.defineProperty(MP,"middleware",{value:{},writeable:!1,enumerable:!0}),Object.defineProperty(MP.middleware,"TERMINATOR",{value:UA,writeable:!1,enumerable:!0}),MP.browser=Ex,MP.obj=nx,MP.mergeOptions=DP(9,"videojs.mergeOptions","videojs.obj.merge",ex),MP.defineLazyProperty=DP(9,"videojs.defineLazyProperty","videojs.obj.defineLazyProperty",tx),MP.bind=DP(9,"videojs.bind","native Function.prototype.bind",Sk),MP.registerPlugin=NP.registerPlugin,MP.deregisterPlugin=NP.deregisterPlugin,MP.plugin=(e,t)=>(zI.warn("videojs.plugin() is deprecated; use videojs.registerPlugin() instead"),NP.registerPlugin(e,t)),MP.getPlugins=NP.getPlugins,MP.getPlugin=NP.getPlugin,MP.getPluginVersion=NP.getPluginVersion,MP.addLanguage=function(e,t){return e=(""+e).toLowerCase(),MP.options.languages=ex(MP.options.languages,{[e]:t}),MP.options.languages[e]},MP.log=zI,MP.createLogger=GI,MP.time=tA,MP.createTimeRange=DP(9,"videojs.createTimeRange","videojs.time.createTimeRanges",Xk),MP.createTimeRanges=DP(9,"videojs.createTimeRanges","videojs.time.createTimeRanges",Xk),MP.formatTime=DP(9,"videojs.formatTime","videojs.time.formatTime",eA),MP.setFormatTime=DP(9,"videojs.setFormatTime","videojs.time.setFormatTime",Jk),MP.resetFormatTime=DP(9,"videojs.resetFormatTime","videojs.time.resetFormatTime",Zk),MP.parseUrl=DP(9,"videojs.parseUrl","videojs.url.parseUrl",TA),MP.isCrossOrigin=DP(9,"videojs.isCrossOrigin","videojs.url.isCrossOrigin",SA),MP.EventTarget=Ak,MP.any=Tk,MP.on=yk,MP.one=bk,MP.off=_k,MP.trigger=vk,MP.xhr=kT,MP.TextTrack=kA,MP.AudioTrack=AA,MP.VideoTrack=OA,["isEl","isTextNode","createEl","hasClass","addClass","removeClass","toggleClass","setAttributes","getAttributes","emptyEl","appendContent","insertContent"].forEach((e=>{MP[e]=function(){return zI.warn(`videojs.${e}() is deprecated; use videojs.dom.${e}() instead`),ek[e].apply(null,arguments)}})),MP.computedStyle=DP(9,"videojs.computedStyle","videojs.dom.computedStyle",Zx),MP.dom=ek,MP.fn=xk,MP.num=hO,MP.str=Wk,MP.url=CA;class FP{constructor(e){let t=this;return t.id=e.id,t.label=t.id,t.width=e.width,t.height=e.height,t.bitrate=e.bandwidth,t.frameRate=e.frameRate,t.enabled_=e.enabled,Object.defineProperty(t,"enabled",{get:()=>t.enabled_(),set(e){t.enabled_(e)}}),t}}class UP extends MP.EventTarget{constructor(){super();let e=this;return e.levels_=[],e.selectedIndex_=-1,Object.defineProperty(e,"selectedIndex",{get:()=>e.selectedIndex_}),Object.defineProperty(e,"length",{get:()=>e.levels_.length}),e}addQualityLevel(e){let t=this.getQualityLevelById(e.id);if(t)return t;const n=this.levels_.length;return t=new FP(e),""+n in this||Object.defineProperty(this,n,{get(){return this.levels_[n]}}),this.levels_.push(t),this.trigger({qualityLevel:t,type:"addqualitylevel"}),t}removeQualityLevel(e){let t=null;for(let n=0,i=this.length;n<i;n++)if(this[n]===e){t=this.levels_.splice(n,1)[0],this.selectedIndex_===n?this.selectedIndex_=-1:this.selectedIndex_>n&&this.selectedIndex_--;break}return t&&this.trigger({qualityLevel:e,type:"removequalitylevel"}),t}getQualityLevelById(e){for(let t=0,n=this.length;t<n;t++){const n=this[t];if(n.id===e)return n}return null}dispose(){this.selectedIndex_=-1,this.levels_.length=0}}UP.prototype.allowedEvents_={change:"change",addqualitylevel:"addqualitylevel",removequalitylevel:"removequalitylevel"};for(const EB in UP.prototype.allowedEvents_)UP.prototype["on"+EB]=null;var BP="3.0.0";const jP=MP.registerPlugin||MP.plugin,qP=function(e){return function(e,t){const n=e.qualityLevels,i=new UP,r=function(){i.dispose(),e.qualityLevels=n,e.off("dispose",r)};return e.on("dispose",r),e.qualityLevels=()=>i,e.qualityLevels.VERSION=BP,i}(this,MP.mergeOptions({},e))};jP("qualityLevels",qP),qP.VERSION=BP;const HP=function(e,t){if(/^[a-z]+:/i.test(t))return t;/^data:/.test(e)&&(e=sT.location&&sT.location.href||"");var n="function"==typeof sT.URL,i=/^\/\//.test(e),r=!sT.location&&!/\/\//i.test(e);if(n?e=new sT.URL(e,sT.location||mE):/\/\//i.test(e)||(e=fE.buildAbsoluteURL(sT.location&&sT.location.href||"",e)),n){var s=new URL(t,e);return r?s.href.slice(18):i?s.href.slice(s.protocol.length):s.href}return fE.buildAbsoluteURL(e,t)},VP=(e,t)=>t&&t.responseURL&&e!==t.responseURL?t.responseURL:e,$P=e=>MP.log.debug?MP.log.debug.bind(MP,"VHS:",`${e} >`):function(){};function WP(...e){const t=MP.obj||MP;return(t.merge||t.mergeOptions).apply(t,e)}function zP(...e){const t=MP.time||MP;return(t.createTimeRanges||t.createTimeRanges).apply(t,e)}const GP=1/30,KP=.1,XP=function(e,t){const n=[];let i;if(e&&e.length)for(i=0;i<e.length;i++)t(e.start(i),e.end(i))&&n.push([e.start(i),e.end(i)]);return zP(n)},YP=function(e,t){return XP(e,(function(e,n){return e-KP<=t&&n+KP>=t}))},QP=function(e,t){return XP(e,(function(e){return e-GP>=t}))},JP=e=>{const t=[];if(!e||!e.length)return"";for(let n=0;n<e.length;n++)t.push(e.start(n)+" => "+e.end(n));return t.join(", ")},ZP=e=>{const t=[];for(let n=0;n<e.length;n++)t.push({start:e.start(n),end:e.end(n)});return t},eL=function(e){if(e&&e.length&&e.end)return e.end(e.length-1)},tL=function(e,t){let n=0;if(!e||!e.length)return n;for(let i=0;i<e.length;i++){const r=e.start(i),s=e.end(i);t>s||(n+=t>r&&t<=s?s-t:s-r)}return n},nL=(e,t)=>{if(!t.preload)return t.duration;let n=0;return(t.parts||[]).forEach((function(e){n+=e.duration})),(t.preloadHints||[]).forEach((function(t){"PART"===t.type&&(n+=e.partTargetDuration)})),n},iL=e=>(e.segments||[]).reduce(((e,t,n)=>(t.parts?t.parts.forEach((function(i,r){e.push({duration:i.duration,segmentIndex:n,partIndex:r,part:i,segment:t})})):e.push({duration:t.duration,segmentIndex:n,partIndex:null,segment:t,part:null}),e)),[]),rL=e=>{const t=e.segments&&e.segments.length&&e.segments[e.segments.length-1];return t&&t.parts||[]},sL=({preloadSegment:e})=>{if(!e)return;const{parts:t,preloadHints:n}=e;let i=(n||[]).reduce(((e,t)=>e+("PART"===t.type?1:0)),0);return i+=t&&t.length?t.length:0,i},aL=(e,t)=>{if(t.endList)return 0;if(e&&e.suggestedPresentationDelay)return e.suggestedPresentationDelay;const n=rL(t).length>0;return n&&t.serverControl&&t.serverControl.partHoldBack?t.serverControl.partHoldBack:n&&t.partTargetDuration?3*t.partTargetDuration:t.serverControl&&t.serverControl.holdBack?t.serverControl.holdBack:t.targetDuration?3*t.targetDuration:0},oL=function(e,t,n){if(void 0===t&&(t=e.mediaSequence+e.segments.length),t<e.mediaSequence)return 0;const i=function(e,t){let n=0,i=t-e.mediaSequence,r=e.segments[i];if(r){if(void 0!==r.start)return{result:r.start,precise:!0};if(void 0!==r.end)return{result:r.end-r.duration,precise:!0}}for(;i--;){if(r=e.segments[i],void 0!==r.end)return{result:n+r.end,precise:!0};if(n+=nL(e,r),void 0!==r.start)return{result:n+r.start,precise:!0}}return{result:n,precise:!1}}(e,t);if(i.precise)return i.result;const r=function(e,t){let n,i=0,r=t-e.mediaSequence;for(;r<e.segments.length;r++){if(n=e.segments[r],void 0!==n.start)return{result:n.start-i,precise:!0};if(i+=nL(e,n),void 0!==n.end)return{result:n.end-i,precise:!0}}return{result:-1,precise:!1}}(e,t);return r.precise?r.result:i.result+n},lL=function(e,t,n){if(!e)return 0;if("number"!=typeof n&&(n=0),void 0===t){if(e.totalDuration)return e.totalDuration;if(!e.endList)return sT.Infinity}return oL(e,t,n)},cL=function({defaultDuration:e,durationList:t,startIndex:n,endIndex:i}){let r=0;if(n>i&&([n,i]=[i,n]),n<0){for(let t=n;t<Math.min(0,i);t++)r+=e;n=0}for(let s=n;s<i;s++)r+=t[s].duration;return r},uL=function(e,t,n,i){if(!e||!e.segments)return null;if(e.endList)return lL(e);if(null===t)return null;t=t||0;let r=oL(e,e.mediaSequence+e.segments.length,t);return n&&(r-=i="number"==typeof i?i:aL(null,e)),Math.max(0,r)},dL=function(e){return e.excludeUntil&&e.excludeUntil>Date.now()},hL=function(e){return e.excludeUntil&&e.excludeUntil===1/0},pL=function(e){const t=dL(e);return!e.disabled&&!t},fL=function(e,t){return t.attributes&&t.attributes[e]},mL=(e,t)=>{if(1===e.playlists.length)return!0;const n=t.attributes.BANDWIDTH||Number.MAX_VALUE;return 0===e.playlists.filter((e=>!!pL(e)&&(e.attributes.BANDWIDTH||0)<n)).length},gL=(e,t)=>!(!e&&!t||!e&&t||e&&!t)&&(e===t||(!(!e.id||!t.id||e.id!==t.id)||(!(!e.resolvedUri||!t.resolvedUri||e.resolvedUri!==t.resolvedUri)||!(!e.uri||!t.uri||e.uri!==t.uri)))),yL=function(e,t){const n=e&&e.mediaGroups&&e.mediaGroups.AUDIO||{};let i=!1;for(const r in n){for(const e in n[r])if(i=t(n[r][e]),i)break;if(i)break}return!!i},_L=e=>{if(!e||!e.playlists||!e.playlists.length){const t=yL(e,(e=>e.playlists&&e.playlists.length||e.uri));return t}for(let t=0;t<e.playlists.length;t++){const n=e.playlists[t],i=n.attributes&&n.attributes.CODECS;if(i&&i.split(",").every((e=>NE(e))))continue;const r=yL(e,(e=>gL(n,e)));if(!r)return!1}return!0};var vL={liveEdgeDelay:aL,duration:lL,seekable:function(e,t,n){const i=t||0,r=uL(e,t,!0,n);return null===r?zP():zP(i,r)},getMediaInfoForTime:function({playlist:e,currentTime:t,startingSegmentIndex:n,startingPartIndex:i,startTime:r,exactManifestTimings:s}){let a=t-r;const o=iL(e);let l=0;for(let c=0;c<o.length;c++){const e=o[c];if(n===e.segmentIndex&&("number"!=typeof i||"number"!=typeof e.partIndex||i===e.partIndex)){l=c;break}}if(a<0){if(l>0)for(let t=l-1;t>=0;t--){const n=o[t];if(a+=n.duration,s){if(a<0)continue}else if(a+GP<=0)continue;return{partIndex:n.partIndex,segmentIndex:n.segmentIndex,startTime:r-cL({defaultDuration:e.targetDuration,durationList:o,startIndex:l,endIndex:t})}}return{partIndex:o[0]&&o[0].partIndex||null,segmentIndex:o[0]&&o[0].segmentIndex||0,startTime:t}}if(l<0){for(let n=l;n<0;n++)if(a-=e.targetDuration,a<0)return{partIndex:o[0]&&o[0].partIndex||null,segmentIndex:o[0]&&o[0].segmentIndex||0,startTime:t};l=0}for(let c=l;c<o.length;c++){const t=o[c];if(a-=t.duration,s){if(a>0)continue}else if(a-GP>=0)continue;return{partIndex:t.partIndex,segmentIndex:t.segmentIndex,startTime:r+cL({defaultDuration:e.targetDuration,durationList:o,startIndex:l,endIndex:c})}}return{segmentIndex:o[o.length-1].segmentIndex,partIndex:o[o.length-1].partIndex,startTime:t}},isEnabled:pL,isDisabled:function(e){return e.disabled},isExcluded:dL,isIncompatible:hL,playlistEnd:uL,isAes:function(e){for(let t=0;t<e.segments.length;t++)if(e.segments[t].key)return!0;return!1},hasAttribute:fL,estimateSegmentRequestTime:function(e,t,n,i=0){if(!fL("BANDWIDTH",n))return NaN;return(e*n.attributes.BANDWIDTH-8*i)/t},isLowestEnabledRendition:mL,isAudioOnly:_L,playlistMatch:gL,segmentDurationWithParts:nL};const{log:bL}=MP,TL=(e,t)=>`${e}-${t}`,EL=(e,t,n)=>`placeholder-uri-${e}-${t}-${n}`,wL=(e,t)=>{e.mediaGroups&&["AUDIO","SUBTITLES"].forEach((n=>{if(e.mediaGroups[n])for(const i in e.mediaGroups[n])for(const r in e.mediaGroups[n][i]){const s=e.mediaGroups[n][i][r];t(s,n,i,r)}}))},SL=({playlist:e,uri:t,id:n})=>{e.id=n,e.playlistErrors_=0,t&&(e.uri=t),e.attributes=e.attributes||{}},CL=(e,t,n=EL)=>{e.uri=t;for(let r=0;r<e.playlists.length;r++)if(!e.playlists[r].uri){const t=`placeholder-uri-${r}`;e.playlists[r].uri=t}const i=_L(e);wL(e,((t,r,s,a)=>{if(!t.playlists||!t.playlists.length){if(i&&"AUDIO"===r&&!t.uri)for(let t=0;t<e.playlists.length;t++){const n=e.playlists[t];if(n.attributes&&n.attributes.AUDIO&&n.attributes.AUDIO===s)return}t.playlists=[Am({},t)]}t.playlists.forEach((function(t,i){const o=n(r,s,a,t),l=TL(i,o);t.uri?t.resolvedUri=t.resolvedUri||HP(e.uri,t.uri):(t.uri=0===i?o:l,t.resolvedUri=t.uri),t.id=t.id||l,t.attributes=t.attributes||{},e.playlists[t.id]=t,e.playlists[t.uri]=t}))})),(e=>{let t=e.playlists.length;for(;t--;){const n=e.playlists[t];SL({playlist:n,id:TL(t,n.uri)}),n.resolvedUri=HP(e.uri,n.uri),e.playlists[n.id]=n,e.playlists[n.uri]=n,n.attributes.BANDWIDTH||bL.warn("Invalid playlist STREAM-INF detected. Missing BANDWIDTH attribute.")}})(e),(e=>{wL(e,(t=>{t.uri&&(t.resolvedUri=HP(e.uri,t.uri))}))})(e)},{EventTarget:IL}=MP,xL=(e,t)=>{if(!e)return t;const n=WP(e,t);if(e.preloadHints&&!t.preloadHints&&delete n.preloadHints,e.parts&&!t.parts)delete n.parts;else if(e.parts&&t.parts)for(let i=0;i<t.parts.length;i++)e.parts&&e.parts[i]&&(n.parts[i]=WP(e.parts[i],t.parts[i]));return!e.skipped&&t.skipped&&(n.skipped=!1),e.preload&&!t.preload&&(n.preload=!1),n},kL=(e,t)=>{!e.resolvedUri&&e.uri&&(e.resolvedUri=HP(t,e.uri)),e.key&&!e.key.resolvedUri&&(e.key.resolvedUri=HP(t,e.key.uri)),e.map&&!e.map.resolvedUri&&(e.map.resolvedUri=HP(t,e.map.uri)),e.map&&e.map.key&&!e.map.key.resolvedUri&&(e.map.key.resolvedUri=HP(t,e.map.key.uri)),e.parts&&e.parts.length&&e.parts.forEach((e=>{e.resolvedUri||(e.resolvedUri=HP(t,e.uri))})),e.preloadHints&&e.preloadHints.length&&e.preloadHints.forEach((e=>{e.resolvedUri||(e.resolvedUri=HP(t,e.uri))}))},AL=function(e){const t=e.segments||[],n=e.preloadSegment;if(n&&n.parts&&n.parts.length){if(n.preloadHints)for(let e=0;e<n.preloadHints.length;e++)if("MAP"===n.preloadHints[e].type)return t;n.duration=e.targetDuration,n.preload=!0,t.push(n)}return t},OL=(e,t)=>e===t||e.segments&&t.segments&&e.segments.length===t.segments.length&&e.endList===t.endList&&e.mediaSequence===t.mediaSequence&&e.preloadSegment===t.preloadSegment,PL=(e,t,n=OL)=>{const i=WP(e,{}),r=i.playlists[t.id];if(!r)return null;if(n(r,t))return null;t.segments=AL(t);const s=WP(r,t);if(s.preloadSegment&&!t.preloadSegment&&delete s.preloadSegment,r.segments){if(t.skip){t.segments=t.segments||[];for(let e=0;e<t.skip.skippedSegments;e++)t.segments.unshift({skipped:!0})}s.segments=((e,t,n)=>{const i=e.slice(),r=t.slice();n=n||0;const s=[];let a;for(let o=0;o<r.length;o++){const e=i[o+n],t=r[o];e?(a=e.map||a,s.push(xL(e,t))):(a&&!t.map&&(t.map=a),s.push(t))}return s})(r.segments,t.segments,t.mediaSequence-r.mediaSequence)}s.segments.forEach((e=>{kL(e,s.resolvedUri)}));for(let a=0;a<i.playlists.length;a++)i.playlists[a].id===t.id&&(i.playlists[a]=s);return i.playlists[t.id]=s,i.playlists[t.uri]=s,wL(e,((e,n,i,r)=>{if(e.playlists)for(let a=0;a<e.playlists.length;a++)t.id===e.playlists[a].id&&(e.playlists[a]=s)})),i},LL=(e,t)=>{const n=e.segments||[],i=n[n.length-1],r=i&&i.parts&&i.parts[i.parts.length-1],s=r&&r.duration||i&&i.duration;return t&&s?1e3*s:500*(e.partTargetDuration||e.targetDuration||10)};class NL extends IL{constructor(e,t,n={}){if(super(),!e)throw new Error("A non-empty playlist URL or object is required");this.logger_=$P("PlaylistLoader");const{withCredentials:i=!1}=n;this.src=e,this.vhs_=t,this.withCredentials=i;const r=t.options_;this.customTagParsers=r&&r.customTagParsers||[],this.customTagMappers=r&&r.customTagMappers||[],this.llhls=r&&r.llhls,this.state="HAVE_NOTHING",this.handleMediaupdatetimeout_=this.handleMediaupdatetimeout_.bind(this),this.on("mediaupdatetimeout",this.handleMediaupdatetimeout_)}handleMediaupdatetimeout_(){if("HAVE_METADATA"!==this.state)return;const e=this.media();let t=HP(this.main.uri,e.uri);this.llhls&&(t=((e,t)=>{if(t.endList||!t.serverControl)return e;const n={};if(t.serverControl.canBlockReload){const{preloadSegment:e}=t;let i=t.mediaSequence+t.segments.length;if(e){const r=e.parts||[],s=sL(t)-1;s>-1&&s!==r.length-1&&(n._HLS_part=s),(s>-1||r.length)&&i--}n._HLS_msn=i}if(t.serverControl&&t.serverControl.canSkipUntil&&(n._HLS_skip=t.serverControl.canSkipDateranges?"v2":"YES"),Object.keys(n).length){const t=new sT.URL(e);["_HLS_skip","_HLS_msn","_HLS_part"].forEach((function(e){n.hasOwnProperty(e)&&t.searchParams.set(e,n[e])})),e=t.toString()}return e})(t,e)),this.state="HAVE_CURRENT_METADATA",this.request=this.vhs_.xhr({uri:t,withCredentials:this.withCredentials},((e,t)=>{if(this.request)return e?this.playlistRequestError(this.request,this.media(),"HAVE_METADATA"):void this.haveMetadata({playlistString:this.request.responseText,url:this.media().uri,id:this.media().id})}))}playlistRequestError(e,t,n){const{uri:i,id:r}=t;this.request=null,n&&(this.state=n),this.error={playlist:this.main.playlists[r],status:e.status,message:`HLS playlist request error at URL: ${i}.`,responseText:e.responseText,code:e.status>=500?4:2},this.trigger("error")}parseManifest_({url:e,manifestString:t}){return(({onwarn:e,oninfo:t,manifestString:n,customTagParsers:i=[],customTagMappers:r=[],llhls:s})=>{const a=new CE;e&&a.on("warn",e),t&&a.on("info",t),i.forEach((e=>a.addParser(e))),r.forEach((e=>a.addTagMapper(e))),a.push(n),a.end();const o=a.manifest;if(s||(["preloadSegment","skip","serverControl","renditionReports","partInf","partTargetDuration"].forEach((function(e){o.hasOwnProperty(e)&&delete o[e]})),o.segments&&o.segments.forEach((function(e){["parts","preloadHints"].forEach((function(t){e.hasOwnProperty(t)&&delete e[t]}))}))),!o.targetDuration){let t=10;o.segments&&o.segments.length&&(t=o.segments.reduce(((e,t)=>Math.max(e,t.duration)),0)),e&&e(`manifest has no targetDuration defaulting to ${t}`),o.targetDuration=t}const l=rL(o);if(l.length&&!o.partTargetDuration){const t=l.reduce(((e,t)=>Math.max(e,t.duration)),0);e&&(e(`manifest has no partTargetDuration defaulting to ${t}`),bL.error("LL-HLS manifest has parts but lacks required #EXT-X-PART-INF:PART-TARGET value. See https://datatracker.ietf.org/doc/html/draft-pantos-hls-rfc8216bis-09#section-4.4.3.7. Playback is not guaranteed.")),o.partTargetDuration=t}return o})({onwarn:({message:t})=>this.logger_(`m3u8-parser warn for ${e}: ${t}`),oninfo:({message:t})=>this.logger_(`m3u8-parser info for ${e}: ${t}`),manifestString:t,customTagParsers:this.customTagParsers,customTagMappers:this.customTagMappers,llhls:this.llhls})}haveMetadata({playlistString:e,playlistObject:t,url:n,id:i}){this.request=null,this.state="HAVE_METADATA";const r=t||this.parseManifest_({url:n,manifestString:e});r.lastRequest=Date.now(),SL({playlist:r,uri:n,id:i});const s=PL(this.main,r);this.targetDuration=r.partTargetDuration||r.targetDuration,this.pendingMedia_=null,s?(this.main=s,this.media_=this.main.playlists[i]):this.trigger("playlistunchanged"),this.updateMediaUpdateTimeout_(LL(this.media(),!!s)),this.trigger("loadedplaylist")}dispose(){this.trigger("dispose"),this.stopRequest(),sT.clearTimeout(this.mediaUpdateTimeout),sT.clearTimeout(this.finalRenditionTimeout),this.off()}stopRequest(){if(this.request){const e=this.request;this.request=null,e.onreadystatechange=null,e.abort()}}media(e,t){if(!e)return this.media_;if("HAVE_NOTHING"===this.state)throw new Error("Cannot switch media playlist from "+this.state);if("string"==typeof e){if(!this.main.playlists[e])throw new Error("Unknown playlist URI: "+e);e=this.main.playlists[e]}if(sT.clearTimeout(this.finalRenditionTimeout),t){const t=(e.partTargetDuration||e.targetDuration)/2*1e3||5e3;return void(this.finalRenditionTimeout=sT.setTimeout(this.media.bind(this,e,!1),t))}const n=this.state,i=!this.media_||e.id!==this.media_.id,r=this.main.playlists[e.id];if(r&&r.endList||e.endList&&e.segments.length)return this.request&&(this.request.onreadystatechange=null,this.request.abort(),this.request=null),this.state="HAVE_METADATA",this.media_=e,void(i&&(this.trigger("mediachanging"),"HAVE_MAIN_MANIFEST"===n?this.trigger("loadedmetadata"):this.trigger("mediachange")));if(this.updateMediaUpdateTimeout_(LL(e,!0)),i){if(this.state="SWITCHING_MEDIA",this.request){if(e.resolvedUri===this.request.url)return;this.request.onreadystatechange=null,this.request.abort(),this.request=null}this.media_&&this.trigger("mediachanging"),this.pendingMedia_=e,this.request=this.vhs_.xhr({uri:e.resolvedUri,withCredentials:this.withCredentials},((t,i)=>{if(this.request){if(e.lastRequest=Date.now(),e.resolvedUri=VP(e.resolvedUri,i),t)return this.playlistRequestError(this.request,e,n);this.haveMetadata({playlistString:i.responseText,url:e.uri,id:e.id}),"HAVE_MAIN_MANIFEST"===n?this.trigger("loadedmetadata"):this.trigger("mediachange")}}))}}pause(){this.mediaUpdateTimeout&&(sT.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null),this.stopRequest(),"HAVE_NOTHING"===this.state&&(this.started=!1),"SWITCHING_MEDIA"===this.state?this.media_?this.state="HAVE_METADATA":this.state="HAVE_MAIN_MANIFEST":"HAVE_CURRENT_METADATA"===this.state&&(this.state="HAVE_METADATA")}load(e){this.mediaUpdateTimeout&&(sT.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null);const t=this.media();if(e){const e=t?(t.partTargetDuration||t.targetDuration)/2*1e3:5e3;this.mediaUpdateTimeout=sT.setTimeout((()=>{this.mediaUpdateTimeout=null,this.load()}),e)}else this.started?t&&!t.endList?this.trigger("mediaupdatetimeout"):this.trigger("loadedplaylist"):this.start()}updateMediaUpdateTimeout_(e){this.mediaUpdateTimeout&&(sT.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null),this.media()&&!this.media().endList&&(this.mediaUpdateTimeout=sT.setTimeout((()=>{this.mediaUpdateTimeout=null,this.trigger("mediaupdatetimeout"),this.updateMediaUpdateTimeout_(e)}),e))}start(){if(this.started=!0,"object"==typeof this.src)return this.src.uri||(this.src.uri=sT.location.href),this.src.resolvedUri=this.src.uri,void setTimeout((()=>{this.setupInitialPlaylist(this.src)}),0);this.request=this.vhs_.xhr({uri:this.src,withCredentials:this.withCredentials},((e,t)=>{if(!this.request)return;if(this.request=null,e)return this.error={status:t.status,message:`HLS playlist request error at URL: ${this.src}.`,responseText:t.responseText,code:2},"HAVE_NOTHING"===this.state&&(this.started=!1),this.trigger("error");this.src=VP(this.src,t);const n=this.parseManifest_({manifestString:t.responseText,url:this.src});this.setupInitialPlaylist(n)}))}srcUri(){return"string"==typeof this.src?this.src:this.src.uri}setupInitialPlaylist(e){if(this.state="HAVE_MAIN_MANIFEST",e.playlists)return this.main=e,CL(this.main,this.srcUri()),e.playlists.forEach((e=>{e.segments=AL(e),e.segments.forEach((t=>{kL(t,e.resolvedUri)}))})),this.trigger("loadedplaylist"),void(this.request||this.media(this.main.playlists[0]));const t=this.srcUri()||sT.location.href;this.main=((e,t)=>{const n=TL(0,t),i={mediaGroups:{AUDIO:{},VIDEO:{},"CLOSED-CAPTIONS":{},SUBTITLES:{}},uri:sT.location.href,resolvedUri:sT.location.href,playlists:[{uri:t,id:n,resolvedUri:t,attributes:{}}]};return i.playlists[n]=i.playlists[0],i.playlists[t]=i.playlists[0],i})(0,t),this.haveMetadata({playlistObject:e,url:t,id:this.main.playlists[0].id}),this.trigger("loadedmetadata")}}const{xhr:DL}=MP,RL=function(e,t,n,i){const r="arraybuffer"===e.responseType?e.response:e.responseText;!t&&r&&(e.responseTime=Date.now(),e.roundTripTime=e.responseTime-e.requestTime,e.bytesReceived=r.byteLength||r.length,e.bandwidth||(e.bandwidth=Math.floor(e.bytesReceived/e.roundTripTime*8*1e3))),n.headers&&(e.responseHeaders=n.headers),t&&"ETIMEDOUT"===t.code&&(e.timedout=!0),t||e.aborted||200===n.statusCode||206===n.statusCode||0===n.statusCode||(t=new Error("XHR Failed with a response of: "+(e&&(r||e.responseText)))),i(t,e)},ML=function(){const e=function e(t,n){t=WP({timeout:45e3},t);const i=e.beforeRequest||MP.Vhs.xhr.beforeRequest;if(i&&"function"==typeof i){const e=i(t);e&&(t=e)}const r=(!0===MP.Vhs.xhr.original?DL:MP.Vhs.xhr)(t,(function(e,t){return RL(r,e,t,n)})),s=r.abort;return r.abort=function(){return r.aborted=!0,s.apply(r,arguments)},r.uri=t.uri,r.requestTime=Date.now(),r};return e.original=!0,e},FL=function(e){const t={};return e.byterange&&(t.Range=function(e){let t;const n=e.offset;return t="bigint"==typeof e.offset||"bigint"==typeof e.length?sT.BigInt(e.offset)+sT.BigInt(e.length)-sT.BigInt(1):e.offset+e.length-1,"bytes="+n+"-"+t}(e.byterange)),t},UL=function(e,t){return e.start(t)+"-"+e.end(t)},BL=function(e,t){const n=e.toString(16);return"00".substring(0,2-n.length)+n+(t%2?" ":"")},jL=function(e){return e>=32&&e<126?String.fromCharCode(e):"."},qL=function(e){const t={};return Object.keys(e).forEach((n=>{const i=e[n];qE(i)?t[n]={bytes:i.buffer,byteOffset:i.byteOffset,byteLength:i.byteLength}:t[n]=i})),t},HL=function(e){const t=e.byterange||{length:1/0,offset:0};return[t.length,t.offset,e.resolvedUri].join(",")},VL=function(e){return e.resolvedUri},$L=e=>{const t=Array.prototype.slice.call(e),n=16;let i,r,s="";for(let a=0;a<t.length/n;a++)i=t.slice(a*n,a*n+n).map(BL).join(""),r=t.slice(a*n,a*n+n).map(jL).join(""),s+=i+" "+r+"\n";return s};var WL=Object.freeze({__proto__:null,createTransferableMessage:qL,initSegmentId:HL,segmentKeyId:VL,hexDump:$L,tagDump:({bytes:e})=>$L(e),textRanges:e=>{let t,n="";for(t=0;t<e.length;t++)n+=UL(e,t)+" ";return n}});const zL=({playlist:e,time:t,callback:n})=>{if(!n)throw new Error("getProgramTime: callback must be provided");if(!e||void 0===t)return n({message:"getProgramTime: playlist and time must be provided"});const i=((e,t)=>{if(!t||!t.segments||0===t.segments.length)return null;let n,i=0;for(let s=0;s<t.segments.length&&(n=t.segments[s],i=n.videoTimingInfo?n.videoTimingInfo.transmuxedPresentationEnd:i+n.duration,!(e<=i));s++);const r=t.segments[t.segments.length-1];if(r.videoTimingInfo&&r.videoTimingInfo.transmuxedPresentationEnd<e)return null;if(e>i){if(e>i+.25*r.duration)return null;n=r}return{segment:n,estimatedStart:n.videoTimingInfo?n.videoTimingInfo.transmuxedPresentationStart:i-n.duration,type:n.videoTimingInfo?"accurate":"estimate"}})(t,e);if(!i)return n({message:"valid programTime was not found"});if("estimate"===i.type)return n({message:"Accurate programTime could not be determined. Please seek to e.seekTime and try again",seekTime:i.estimatedStart});const r={mediaSeconds:t},s=((e,t)=>{if(!t.dateTimeObject)return null;const n=t.videoTimingInfo.transmuxerPrependedSeconds,i=e-(t.videoTimingInfo.transmuxedPresentationStart+n);return new Date(t.dateTimeObject.getTime()+1e3*i)})(t,i.segment);return s&&(r.programDateTime=s.toISOString()),n(null,r)},GL=({programTime:e,playlist:t,retryCount:n=2,seekTo:i,pauseAfterSeek:r=!0,tech:s,callback:a})=>{if(!a)throw new Error("seekToProgramTime: callback must be provided");if(void 0===e||!t||!i)return a({message:"seekToProgramTime: programTime, seekTo and playlist must be provided"});if(!t.endList&&!s.hasStarted_)return a({message:"player must be playing a live stream to start buffering"});if(!(e=>{if(!e.segments||0===e.segments.length)return!1;for(let t=0;t<e.segments.length;t++)if(!e.segments[t].dateTimeObject)return!1;return!0})(t))return a({message:"programDateTime tags must be provided in the manifest "+t.resolvedUri});const o=((e,t)=>{let n;try{n=new Date(e)}catch(fB){return null}if(!t||!t.segments||0===t.segments.length)return null;let i=t.segments[0];if(n<i.dateTimeObject)return null;for(let l=0;l<t.segments.length-1&&(i=t.segments[l],!(n<t.segments[l+1].dateTimeObject));l++);const r=t.segments[t.segments.length-1],s=r.dateTimeObject,a=r.videoTimingInfo?(o=r.videoTimingInfo).transmuxedPresentationEnd-o.transmuxedPresentationStart-o.transmuxerPrependedSeconds:r.duration+.25*r.duration;var o;return n>new Date(s.getTime()+1e3*a)?null:(n>s&&(i=r),{segment:i,estimatedStart:i.videoTimingInfo?i.videoTimingInfo.transmuxedPresentationStart:vL.duration(t,t.mediaSequence+t.segments.indexOf(i)),type:i.videoTimingInfo?"accurate":"estimate"})})(e,t);if(!o)return a({message:`${e} was not found in the stream`});const l=o.segment,c=((e,t)=>{let n,i;try{n=new Date(e),i=new Date(t)}catch(fB){}const r=n.getTime();return(i.getTime()-r)/1e3})(l.dateTimeObject,e);if("estimate"===o.type)return 0===n?a({message:`${e} is not buffered yet. Try again`}):(i(o.estimatedStart+c),void s.one("seeked",(()=>{GL({programTime:e,playlist:t,retryCount:n-1,seekTo:i,pauseAfterSeek:r,tech:s,callback:a})})));const u=l.start+c;s.one("seeked",(()=>a(null,s.currentTime()))),r&&s.pause(),i(u)},KL=(e,t)=>{if(4===e.readyState)return t()},XL=(e,t,n)=>{let i,r=[],s=!1;const a=function(e,t,i,r){return t.abort(),s=!0,n(e,t,i,r)},o=function(e,t){if(s)return;if(e)return a(e,t,"",r);const n=t.responseText.substring(r&&r.byteLength||0,t.responseText.length);if(r=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if(t=t.filter((function(e){return e&&(e.byteLength||e.length)&&"string"!=typeof e})),t.length<=1)return HE(t[0]);var i=t.reduce((function(e,t,n){return e+(t.byteLength||t.length)}),0),r=new Uint8Array(i),s=0;return t.forEach((function(e){e=HE(e),r.set(e,s),s+=e.byteLength})),r}(r,GE(n,!0)),i=i||hI(r),r.length<10||i&&r.length<i+2)return KL(t,(()=>a(e,t,"",r)));const o=DI(r);return"ts"===o&&r.length<188||!o&&r.length<376?KL(t,(()=>a(e,t,"",r))):a(null,t,o,r)},l={uri:e,beforeSend(e){e.overrideMimeType("text/plain; charset=x-user-defined"),e.addEventListener("progress",(function({total:t,loaded:n}){return RL(e,null,{statusCode:e.status},o)}))}},c=t(l,(function(e,t){return RL(c,e,t,o)}));return c},{EventTarget:YL}=MP,QL=function(e,t){if(!OL(e,t))return!1;if(e.sidx&&t.sidx&&(e.sidx.offset!==t.sidx.offset||e.sidx.length!==t.sidx.length))return!1;if(!e.sidx&&t.sidx||e.sidx&&!t.sidx)return!1;if(e.segments&&!t.segments||!e.segments&&t.segments)return!1;if(!e.segments&&!t.segments)return!0;for(let n=0;n<e.segments.length;n++){const i=e.segments[n],r=t.segments[n];if(i.uri!==r.uri)return!1;if(!i.byterange&&!r.byterange)continue;const s=i.byterange,a=r.byterange;if(s&&!a||!s&&a)return!1;if(s.offset!==a.offset||s.length!==a.length)return!1}return!0},JL=(e,t,n,i)=>`placeholder-uri-${e}-${t}-${i.attributes.NAME||n}`,ZL=(e,t,n)=>{let i=!0,r=WP(e,{duration:t.duration,minimumUpdatePeriod:t.minimumUpdatePeriod,timelineStarts:t.timelineStarts});for(let s=0;s<t.playlists.length;s++){const e=t.playlists[s];if(e.sidx){const t=OC(e.sidx);n&&n[t]&&n[t].sidx&&SC(e,n[t].sidx,e.sidx.resolvedUri)}const a=PL(r,e,QL);a&&(r=a,i=!1)}return wL(t,((e,t,n,s)=>{if(e.playlists&&e.playlists.length){const a=e.playlists[0].id,o=PL(r,e.playlists[0],QL);o&&(r=o,s in r.mediaGroups[t][n]||(r.mediaGroups[t][n][s]=e),r.mediaGroups[t][n][s].playlists[0]=r.playlists[a],i=!1)}})),((e,t)=>{wL(e,((n,i,r,s)=>{s in t.mediaGroups[i][r]||delete e.mediaGroups[i][r][s]}))})(r,t),t.minimumUpdatePeriod!==e.minimumUpdatePeriod&&(i=!1),i?null:r},eN=(e,t)=>(Boolean(!e.map&&!t.map)||Boolean(e.map&&t.map&&e.map.byterange.offset===t.map.byterange.offset&&e.map.byterange.length===t.map.byterange.length))&&e.uri===t.uri&&e.byterange.offset===t.byterange.offset&&e.byterange.length===t.byterange.length,tN=(e,t)=>{const n={};for(const i in e){const r=e[i].sidx;if(r){const e=OC(r);if(!t[e])break;const i=t[e].sidxInfo;eN(i,r)&&(n[e]=t[e])}}return n};class nN extends YL{constructor(e,t,n={},i){super(),this.mainPlaylistLoader_=i||this,i||(this.isMain_=!0);const{withCredentials:r=!1}=n;if(this.vhs_=t,this.withCredentials=r,!e)throw new Error("A non-empty playlist URL or object is required");this.on("minimumUpdatePeriod",(()=>{this.refreshXml_()})),this.on("mediaupdatetimeout",(()=>{this.refreshMedia_(this.media().id)})),this.state="HAVE_NOTHING",this.loadedPlaylists_={},this.logger_=$P("DashPlaylistLoader"),this.isMain_?(this.mainPlaylistLoader_.srcUrl=e,this.mainPlaylistLoader_.sidxMapping_={}):this.childPlaylist_=e}requestErrored_(e,t,n){return!this.request||(this.request=null,e?(this.error="object"!=typeof e||e instanceof Error?{status:t.status,message:"DASH request error at URL: "+t.uri,response:t.response,code:2}:e,n&&(this.state=n),this.trigger("error"),!0):void 0)}addSidxSegments_(e,t,n){const i=e.sidx&&OC(e.sidx);if(!e.sidx||!i||this.mainPlaylistLoader_.sidxMapping_[i])return void(this.mediaRequest_=sT.setTimeout((()=>n(!1)),0));const r=VP(e.sidx.resolvedUri),s=(r,s)=>{if(this.requestErrored_(r,s,t))return;const a=this.mainPlaylistLoader_.sidxMapping_;let o;try{o=uI(HE(s.response).subarray(8))}catch(fB){return void this.requestErrored_(fB,s,t)}return a[i]={sidxInfo:e.sidx,sidx:o},SC(e,o,e.sidx.resolvedUri),n(!0)};this.request=XL(r,this.vhs_.xhr,((t,n,i,a)=>{if(t)return s(t,n);if(!i||"mp4"!==i)return s({status:n.status,message:`Unsupported ${i||"unknown"} container type for sidx segment at URL: ${r}`,response:"",playlist:e,internal:!0,playlistExclusionDuration:1/0,code:2},n);const{offset:o,length:l}=e.sidx.byterange;if(a.length>=l+o)return s(t,{response:a.subarray(o,o+l),status:n.status,uri:n.uri});this.request=this.vhs_.xhr({uri:r,responseType:"arraybuffer",headers:FL({byterange:e.sidx.byterange})},s)}))}dispose(){this.trigger("dispose"),this.stopRequest(),this.loadedPlaylists_={},sT.clearTimeout(this.minimumUpdatePeriodTimeout_),sT.clearTimeout(this.mediaRequest_),sT.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null,this.mediaRequest_=null,this.minimumUpdatePeriodTimeout_=null,this.mainPlaylistLoader_.createMupOnMedia_&&(this.off("loadedmetadata",this.mainPlaylistLoader_.createMupOnMedia_),this.mainPlaylistLoader_.createMupOnMedia_=null),this.off()}hasPendingRequest(){return this.request||this.mediaRequest_}stopRequest(){if(this.request){const e=this.request;this.request=null,e.onreadystatechange=null,e.abort()}}media(e){if(!e)return this.media_;if("HAVE_NOTHING"===this.state)throw new Error("Cannot switch media playlist from "+this.state);const t=this.state;if("string"==typeof e){if(!this.mainPlaylistLoader_.main.playlists[e])throw new Error("Unknown playlist URI: "+e);e=this.mainPlaylistLoader_.main.playlists[e]}const n=!this.media_||e.id!==this.media_.id;if(n&&this.loadedPlaylists_[e.id]&&this.loadedPlaylists_[e.id].endList)return this.state="HAVE_METADATA",this.media_=e,void(n&&(this.trigger("mediachanging"),this.trigger("mediachange")));n&&(this.media_&&this.trigger("mediachanging"),this.addSidxSegments_(e,t,(n=>{this.haveMetadata({startingState:t,playlist:e})})))}haveMetadata({startingState:e,playlist:t}){this.state="HAVE_METADATA",this.loadedPlaylists_[t.id]=t,this.mediaRequest_=null,this.refreshMedia_(t.id),"HAVE_MAIN_MANIFEST"===e?this.trigger("loadedmetadata"):this.trigger("mediachange")}pause(){this.mainPlaylistLoader_.createMupOnMedia_&&(this.off("loadedmetadata",this.mainPlaylistLoader_.createMupOnMedia_),this.mainPlaylistLoader_.createMupOnMedia_=null),this.stopRequest(),sT.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null,this.isMain_&&(sT.clearTimeout(this.mainPlaylistLoader_.minimumUpdatePeriodTimeout_),this.mainPlaylistLoader_.minimumUpdatePeriodTimeout_=null),"HAVE_NOTHING"===this.state&&(this.started=!1)}load(e){sT.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null;const t=this.media();if(e){const e=t?t.targetDuration/2*1e3:5e3;this.mediaUpdateTimeout=sT.setTimeout((()=>this.load()),e)}else this.started?t&&!t.endList?(this.isMain_&&!this.minimumUpdatePeriodTimeout_&&(this.trigger("minimumUpdatePeriod"),this.updateMinimumUpdatePeriodTimeout_()),this.trigger("mediaupdatetimeout")):this.trigger("loadedplaylist"):this.start()}start(){this.started=!0,this.isMain_?this.requestMain_(((e,t)=>{this.haveMain_(),this.hasPendingRequest()||this.media_||this.media(this.mainPlaylistLoader_.main.playlists[0])})):this.mediaRequest_=sT.setTimeout((()=>this.haveMain_()),0)}requestMain_(e){this.request=this.vhs_.xhr({uri:this.mainPlaylistLoader_.srcUrl,withCredentials:this.withCredentials},((t,n)=>{if(this.requestErrored_(t,n))return void("HAVE_NOTHING"===this.state&&(this.started=!1));const i=n.responseText!==this.mainPlaylistLoader_.mainXml_;return this.mainPlaylistLoader_.mainXml_=n.responseText,n.responseHeaders&&n.responseHeaders.date?this.mainLoaded_=Date.parse(n.responseHeaders.date):this.mainLoaded_=Date.now(),this.mainPlaylistLoader_.srcUrl=VP(this.mainPlaylistLoader_.srcUrl,n),i?(this.handleMain_(),void this.syncClientServerClock_((()=>e(n,i)))):e(n,i)}))}syncClientServerClock_(e){const t=aI(this.mainPlaylistLoader_.mainXml_);return null===t?(this.mainPlaylistLoader_.clientOffset_=this.mainLoaded_-Date.now(),e()):"DIRECT"===t.method?(this.mainPlaylistLoader_.clientOffset_=t.value-Date.now(),e()):void(this.request=this.vhs_.xhr({uri:HP(this.mainPlaylistLoader_.srcUrl,t.value),method:t.method,withCredentials:this.withCredentials},((n,i)=>{if(!this.request)return;if(n)return this.mainPlaylistLoader_.clientOffset_=this.mainLoaded_-Date.now(),e();let r;r="HEAD"===t.method?i.responseHeaders&&i.responseHeaders.date?Date.parse(i.responseHeaders.date):this.mainLoaded_:Date.parse(i.responseText),this.mainPlaylistLoader_.clientOffset_=r-Date.now(),e()})))}haveMain_(){this.state="HAVE_MAIN_MANIFEST",this.isMain_?this.trigger("loadedplaylist"):this.media_||this.media(this.childPlaylist_)}handleMain_(){this.mediaRequest_=null;const e=this.mainPlaylistLoader_.main;let t=(({mainXml:e,srcUrl:t,clientOffset:n,sidxMapping:i,previousManifest:r})=>{const s=sI(e,{manifestUri:t,clientOffset:n,sidxMapping:i,previousManifest:r});return CL(s,t,JL),s})({mainXml:this.mainPlaylistLoader_.mainXml_,srcUrl:this.mainPlaylistLoader_.srcUrl,clientOffset:this.mainPlaylistLoader_.clientOffset_,sidxMapping:this.mainPlaylistLoader_.sidxMapping_,previousManifest:e});e&&(t=ZL(e,t,this.mainPlaylistLoader_.sidxMapping_)),this.mainPlaylistLoader_.main=t||e;const n=this.mainPlaylistLoader_.main.locations&&this.mainPlaylistLoader_.main.locations[0];return n&&n!==this.mainPlaylistLoader_.srcUrl&&(this.mainPlaylistLoader_.srcUrl=n),(!e||t&&t.minimumUpdatePeriod!==e.minimumUpdatePeriod)&&this.updateMinimumUpdatePeriodTimeout_(),Boolean(t)}updateMinimumUpdatePeriodTimeout_(){const e=this.mainPlaylistLoader_;e.createMupOnMedia_&&(e.off("loadedmetadata",e.createMupOnMedia_),e.createMupOnMedia_=null),e.minimumUpdatePeriodTimeout_&&(sT.clearTimeout(e.minimumUpdatePeriodTimeout_),e.minimumUpdatePeriodTimeout_=null);let t=e.main&&e.main.minimumUpdatePeriod;0===t&&(e.media()?t=1e3*e.media().targetDuration:(e.createMupOnMedia_=e.updateMinimumUpdatePeriodTimeout_,e.one("loadedmetadata",e.createMupOnMedia_))),"number"!=typeof t||t<=0?t<0&&this.logger_(`found invalid minimumUpdatePeriod of ${t}, not setting a timeout`):this.createMUPTimeout_(t)}createMUPTimeout_(e){const t=this.mainPlaylistLoader_;t.minimumUpdatePeriodTimeout_=sT.setTimeout((()=>{t.minimumUpdatePeriodTimeout_=null,t.trigger("minimumUpdatePeriod"),t.createMUPTimeout_(e)}),e)}refreshXml_(){this.requestMain_(((e,t)=>{t&&(this.media_&&(this.media_=this.mainPlaylistLoader_.main.playlists[this.media_.id]),this.mainPlaylistLoader_.sidxMapping_=((e,t)=>{let n=tN(e.playlists,t);return wL(e,((e,i,r,s)=>{if(e.playlists&&e.playlists.length){const i=e.playlists;n=WP(n,tN(i,t))}})),n})(this.mainPlaylistLoader_.main,this.mainPlaylistLoader_.sidxMapping_),this.addSidxSegments_(this.media(),this.state,(e=>{this.refreshMedia_(this.media().id)})))}))}refreshMedia_(e){if(!e)throw new Error("refreshMedia_ must take a media id");this.media_&&this.isMain_&&this.handleMain_();const t=this.mainPlaylistLoader_.main.playlists,n=!this.media_||this.media_!==t[e];if(n?this.media_=t[e]:this.trigger("playlistunchanged"),!this.mediaUpdateTimeout){const e=()=>{this.media().endList||(this.mediaUpdateTimeout=sT.setTimeout((()=>{this.trigger("mediaupdatetimeout"),e()}),LL(this.media(),Boolean(n))))};e()}this.trigger("loadedplaylist")}}var iN={GOAL_BUFFER_LENGTH:30,MAX_GOAL_BUFFER_LENGTH:60,BACK_BUFFER_LENGTH:30,GOAL_BUFFER_LENGTH_RATE:1,INITIAL_BANDWIDTH:4194304,BANDWIDTH_VARIANCE:1.2,BUFFER_LOW_WATER_LINE:0,MAX_BUFFER_LOW_WATER_LINE:30,EXPERIMENTAL_MAX_BUFFER_LOW_WATER_LINE:16,BUFFER_LOW_WATER_LINE_RATE:1,BUFFER_HIGH_WATER_LINE:30};const rN=function(e){return e.on=e.addEventListener,e.off=e.removeEventListener,e},sN=function(e){return function(){const t=function(e){try{return URL.createObjectURL(new Blob([e],{type:"application/javascript"}))}catch(fB){const n=new BlobBuilder;return n.append(e),URL.createObjectURL(n.getBlob())}}(e),n=rN(new Worker(t));n.objURL=t;const i=n.terminate;return n.on=n.addEventListener,n.off=n.removeEventListener,n.terminate=function(){return URL.revokeObjectURL(t),i.call(this)},n}},aN=function(e){return`var browserWorkerPolyFill = ${rN.toString()};\nbrowserWorkerPolyFill(self);\n`+e},oN=function(e){return e.toString().replace(/^function.+?{/,"").slice(0,-1)},lN=aN(oN((function(){var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},t=function(){this.init=function(){var e={};this.on=function(t,n){e[t]||(e[t]=[]),e[t]=e[t].concat(n)},this.off=function(t,n){var i;return!!e[t]&&(i=e[t].indexOf(n),e[t]=e[t].slice(),e[t].splice(i,1),i>-1)},this.trigger=function(t){var n,i,r,s;if(n=e[t])if(2===arguments.length)for(r=n.length,i=0;i<r;++i)n[i].call(this,arguments[1]);else{for(s=[],i=arguments.length,i=1;i<arguments.length;++i)s.push(arguments[i]);for(r=n.length,i=0;i<r;++i)n[i].apply(this,s)}},this.dispose=function(){e={}}}};t.prototype.pipe=function(e){return this.on("data",(function(t){e.push(t)})),this.on("done",(function(t){e.flush(t)})),this.on("partialdone",(function(t){e.partialFlush(t)})),this.on("endedtimeline",(function(t){e.endTimeline(t)})),this.on("reset",(function(t){e.reset(t)})),e},t.prototype.push=function(e){this.trigger("data",e)},t.prototype.flush=function(e){this.trigger("done",e)},t.prototype.partialFlush=function(e){this.trigger("partialdone",e)},t.prototype.endTimeline=function(e){this.trigger("endedtimeline",e)},t.prototype.reset=function(e){this.trigger("reset",e)};var n,i,r,s,a,o,l,c,u,d,h,p,f,m,g,y,_,v,b,T,E,w,S,C,I,x,k,A,O,P,L,N,D,R,M,F,U,B,j,q,H,V=t,$=Math.pow(2,32),W={getUint64:function(e){var t,n=new DataView(e.buffer,e.byteOffset,e.byteLength);return n.getBigUint64?(t=n.getBigUint64(0))<Number.MAX_SAFE_INTEGER?Number(t):t:n.getUint32(0)*$+n.getUint32(4)},MAX_UINT32:$},z=W.MAX_UINT32;!function(){var e;if(S={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],mvex:[],mvhd:[],pasp:[],sdtp:[],smhd:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],styp:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[]},"undefined"!=typeof Uint8Array){for(e in S)S.hasOwnProperty(e)&&(S[e]=[e.charCodeAt(0),e.charCodeAt(1),e.charCodeAt(2),e.charCodeAt(3)]);C=new Uint8Array(["i".charCodeAt(0),"s".charCodeAt(0),"o".charCodeAt(0),"m".charCodeAt(0)]),x=new Uint8Array(["a".charCodeAt(0),"v".charCodeAt(0),"c".charCodeAt(0),"1".charCodeAt(0)]),I=new Uint8Array([0,0,0,1]),k=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),A=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]),O={video:k,audio:A},N=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),L=new Uint8Array([0,0,0,0,0,0,0,0]),D=new Uint8Array([0,0,0,0,0,0,0,0]),R=D,M=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),F=D,P=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0])}}(),n=function(e){var t,n,i=[],r=0;for(t=1;t<arguments.length;t++)i.push(arguments[t]);for(t=i.length;t--;)r+=i[t].byteLength;for(n=new Uint8Array(r+8),new DataView(n.buffer,n.byteOffset,n.byteLength).setUint32(0,n.byteLength),n.set(e,4),t=0,r=8;t<i.length;t++)n.set(i[t],r),r+=i[t].byteLength;return n},i=function(){return n(S.dinf,n(S.dref,N))},r=function(e){return n(S.esds,new Uint8Array([0,0,0,0,3,25,0,0,0,4,17,64,21,0,6,0,0,0,218,192,0,0,218,192,5,2,e.audioobjecttype<<3|e.samplingfrequencyindex>>>1,e.samplingfrequencyindex<<7|e.channelcount<<3,6,1,2]))},y=function(e){return n(S.hdlr,O[e])},a=function(e){return n(S.mdat,e)},g=function(e){var t=new Uint8Array([0,0,0,0,0,0,0,2,0,0,0,3,0,1,95,144,e.duration>>>24&255,e.duration>>>16&255,e.duration>>>8&255,255&e.duration,85,196,0,0]);return e.samplerate&&(t[12]=e.samplerate>>>24&255,t[13]=e.samplerate>>>16&255,t[14]=e.samplerate>>>8&255,t[15]=255&e.samplerate),n(S.mdhd,t)},m=function(e){return n(S.mdia,g(e),y(e.type),l(e))},o=function(e){return n(S.mfhd,new Uint8Array([0,0,0,0,(4278190080&e)>>24,(16711680&e)>>16,(65280&e)>>8,255&e]))},l=function(e){return n(S.minf,"video"===e.type?n(S.vmhd,P):n(S.smhd,L),i(),v(e))},c=function(e,t){for(var i=[],r=t.length;r--;)i[r]=T(t[r]);return n.apply(null,[S.moof,o(e)].concat(i))},u=function(e){for(var t=e.length,i=[];t--;)i[t]=p(e[t]);return n.apply(null,[S.moov,h(4294967295)].concat(i).concat(d(e)))},d=function(e){for(var t=e.length,i=[];t--;)i[t]=E(e[t]);return n.apply(null,[S.mvex].concat(i))},h=function(e){var t=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,2,0,1,95,144,(4278190080&e)>>24,(16711680&e)>>16,(65280&e)>>8,255&e,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return n(S.mvhd,t)},_=function(e){var t,i,r=e.samples||[],s=new Uint8Array(4+r.length);for(i=0;i<r.length;i++)t=r[i].flags,s[i+4]=t.dependsOn<<4|t.isDependedOn<<2|t.hasRedundancy;return n(S.sdtp,s)},v=function(e){return n(S.stbl,b(e),n(S.stts,F),n(S.stsc,R),n(S.stsz,M),n(S.stco,D))},b=function(e){return n(S.stsd,new Uint8Array([0,0,0,0,0,0,0,1]),"video"===e.type?U(e):B(e))},U=function(e){var t,i,r=e.sps||[],s=e.pps||[],a=[],o=[];for(t=0;t<r.length;t++)a.push((65280&r[t].byteLength)>>>8),a.push(255&r[t].byteLength),a=a.concat(Array.prototype.slice.call(r[t]));for(t=0;t<s.length;t++)o.push((65280&s[t].byteLength)>>>8),o.push(255&s[t].byteLength),o=o.concat(Array.prototype.slice.call(s[t]));if(i=[S.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,(65280&e.width)>>8,255&e.width,(65280&e.height)>>8,255&e.height,0,72,0,0,0,72,0,0,0,0,0,0,0,1,19,118,105,100,101,111,106,115,45,99,111,110,116,114,105,98,45,104,108,115,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),n(S.avcC,new Uint8Array([1,e.profileIdc,e.profileCompatibility,e.levelIdc,255].concat([r.length],a,[s.length],o))),n(S.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192]))],e.sarRatio){var l=e.sarRatio[0],c=e.sarRatio[1];i.push(n(S.pasp,new Uint8Array([(4278190080&l)>>24,(16711680&l)>>16,(65280&l)>>8,255&l,(4278190080&c)>>24,(16711680&c)>>16,(65280&c)>>8,255&c])))}return n.apply(null,i)},B=function(e){return n(S.mp4a,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,(65280&e.channelcount)>>8,255&e.channelcount,(65280&e.samplesize)>>8,255&e.samplesize,0,0,0,0,(65280&e.samplerate)>>8,255&e.samplerate,0,0]),r(e))},f=function(e){var t=new Uint8Array([0,0,0,7,0,0,0,0,0,0,0,0,(4278190080&e.id)>>24,(16711680&e.id)>>16,(65280&e.id)>>8,255&e.id,0,0,0,0,(4278190080&e.duration)>>24,(16711680&e.duration)>>16,(65280&e.duration)>>8,255&e.duration,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,(65280&e.width)>>8,255&e.width,0,0,(65280&e.height)>>8,255&e.height,0,0]);return n(S.tkhd,t)},T=function(e){var t,i,r,s,a,o;return t=n(S.tfhd,new Uint8Array([0,0,0,58,(4278190080&e.id)>>24,(16711680&e.id)>>16,(65280&e.id)>>8,255&e.id,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0])),a=Math.floor(e.baseMediaDecodeTime/z),o=Math.floor(e.baseMediaDecodeTime%z),i=n(S.tfdt,new Uint8Array([1,0,0,0,a>>>24&255,a>>>16&255,a>>>8&255,255&a,o>>>24&255,o>>>16&255,o>>>8&255,255&o])),92,"audio"===e.type?(r=w(e,92),n(S.traf,t,i,r)):(s=_(e),r=w(e,s.length+92),n(S.traf,t,i,r,s))},p=function(e){return e.duration=e.duration||4294967295,n(S.trak,f(e),m(e))},E=function(e){var t=new Uint8Array([0,0,0,0,(4278190080&e.id)>>24,(16711680&e.id)>>16,(65280&e.id)>>8,255&e.id,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]);return"video"!==e.type&&(t[t.length-1]=0),n(S.trex,t)},H=function(e,t){var n=0,i=0,r=0,s=0;return e.length&&(void 0!==e[0].duration&&(n=1),void 0!==e[0].size&&(i=2),void 0!==e[0].flags&&(r=4),void 0!==e[0].compositionTimeOffset&&(s=8)),[0,0,n|i|r|s,1,(4278190080&e.length)>>>24,(16711680&e.length)>>>16,(65280&e.length)>>>8,255&e.length,(4278190080&t)>>>24,(16711680&t)>>>16,(65280&t)>>>8,255&t]},q=function(e,t){var i,r,s,a,o,l;for(t+=20+16*(a=e.samples||[]).length,s=H(a,t),(r=new Uint8Array(s.length+16*a.length)).set(s),i=s.length,l=0;l<a.length;l++)o=a[l],r[i++]=(4278190080&o.duration)>>>24,r[i++]=(16711680&o.duration)>>>16,r[i++]=(65280&o.duration)>>>8,r[i++]=255&o.duration,r[i++]=(4278190080&o.size)>>>24,r[i++]=(16711680&o.size)>>>16,r[i++]=(65280&o.size)>>>8,r[i++]=255&o.size,r[i++]=o.flags.isLeading<<2|o.flags.dependsOn,r[i++]=o.flags.isDependedOn<<6|o.flags.hasRedundancy<<4|o.flags.paddingValue<<1|o.flags.isNonSyncSample,r[i++]=61440&o.flags.degradationPriority,r[i++]=15&o.flags.degradationPriority,r[i++]=(4278190080&o.compositionTimeOffset)>>>24,r[i++]=(16711680&o.compositionTimeOffset)>>>16,r[i++]=(65280&o.compositionTimeOffset)>>>8,r[i++]=255&o.compositionTimeOffset;return n(S.trun,r)},j=function(e,t){var i,r,s,a,o,l;for(t+=20+8*(a=e.samples||[]).length,s=H(a,t),(i=new Uint8Array(s.length+8*a.length)).set(s),r=s.length,l=0;l<a.length;l++)o=a[l],i[r++]=(4278190080&o.duration)>>>24,i[r++]=(16711680&o.duration)>>>16,i[r++]=(65280&o.duration)>>>8,i[r++]=255&o.duration,i[r++]=(4278190080&o.size)>>>24,i[r++]=(16711680&o.size)>>>16,i[r++]=(65280&o.size)>>>8,i[r++]=255&o.size;return n(S.trun,i)},w=function(e,t){return"audio"===e.type?j(e,t):q(e,t)};var G,K,X,Y,Q,J,Z,ee,te={ftyp:s=function(){return n(S.ftyp,C,I,C,x)},mdat:a,moof:c,moov:u,initSegment:function(e){var t,n=s(),i=u(e);return(t=new Uint8Array(n.byteLength+i.byteLength)).set(n),t.set(i,n.byteLength),t}},ne=function(e,t){var n={size:0,flags:{isLeading:0,dependsOn:1,isDependedOn:0,hasRedundancy:0,degradationPriority:0,isNonSyncSample:1}};return n.dataOffset=t,n.compositionTimeOffset=e.pts-e.dts,n.duration=e.duration,n.size=4*e.length,n.size+=e.byteLength,e.keyFrame&&(n.flags.dependsOn=2,n.flags.isNonSyncSample=0),n},ie={groupNalsIntoFrames:function(e){var t,n,i=[],r=[];for(r.byteLength=0,r.nalCount=0,r.duration=0,i.byteLength=0,t=0;t<e.length;t++)"access_unit_delimiter_rbsp"===(n=e[t]).nalUnitType?(i.length&&(i.duration=n.dts-i.dts,r.byteLength+=i.byteLength,r.nalCount+=i.length,r.duration+=i.duration,r.push(i)),(i=[n]).byteLength=n.data.byteLength,i.pts=n.pts,i.dts=n.dts):("slice_layer_without_partitioning_rbsp_idr"===n.nalUnitType&&(i.keyFrame=!0),i.duration=n.dts-i.dts,i.byteLength+=n.data.byteLength,i.push(n));return r.length&&(!i.duration||i.duration<=0)&&(i.duration=r[r.length-1].duration),r.byteLength+=i.byteLength,r.nalCount+=i.length,r.duration+=i.duration,r.push(i),r},groupFramesIntoGops:function(e){var t,n,i=[],r=[];for(i.byteLength=0,i.nalCount=0,i.duration=0,i.pts=e[0].pts,i.dts=e[0].dts,r.byteLength=0,r.nalCount=0,r.duration=0,r.pts=e[0].pts,r.dts=e[0].dts,t=0;t<e.length;t++)(n=e[t]).keyFrame?(i.length&&(r.push(i),r.byteLength+=i.byteLength,r.nalCount+=i.nalCount,r.duration+=i.duration),(i=[n]).nalCount=n.length,i.byteLength=n.byteLength,i.pts=n.pts,i.dts=n.dts,i.duration=n.duration):(i.duration+=n.duration,i.nalCount+=n.length,i.byteLength+=n.byteLength,i.push(n));return r.length&&i.duration<=0&&(i.duration=r[r.length-1].duration),r.byteLength+=i.byteLength,r.nalCount+=i.nalCount,r.duration+=i.duration,r.push(i),r},extendFirstKeyFrame:function(e){var t;return!e[0][0].keyFrame&&e.length>1&&(t=e.shift(),e.byteLength-=t.byteLength,e.nalCount-=t.nalCount,e[0][0].dts=t.dts,e[0][0].pts=t.pts,e[0][0].duration+=t.duration),e},generateSampleTable:function(e,t){var n,i,r,s,a,o=t||0,l=[];for(n=0;n<e.length;n++)for(s=e[n],i=0;i<s.length;i++)a=s[i],o+=(r=ne(a,o)).size,l.push(r);return l},concatenateNalData:function(e){var t,n,i,r,s,a,o=0,l=e.byteLength,c=e.nalCount,u=new Uint8Array(l+4*c),d=new DataView(u.buffer);for(t=0;t<e.length;t++)for(r=e[t],n=0;n<r.length;n++)for(s=r[n],i=0;i<s.length;i++)a=s[i],d.setUint32(o,a.data.byteLength),o+=4,u.set(a.data,o),o+=a.data.byteLength;return u},generateSampleTableForFrame:function(e,t){var n,i=[];return n=ne(e,t||0),i.push(n),i},concatenateNalDataForFrame:function(e){var t,n,i=0,r=e.byteLength,s=e.length,a=new Uint8Array(r+4*s),o=new DataView(a.buffer);for(t=0;t<e.length;t++)n=e[t],o.setUint32(i,n.data.byteLength),i+=4,a.set(n.data,i),i+=n.data.byteLength;return a}},re=[33,16,5,32,164,27],se=[33,65,108,84,1,2,4,8,168,2,4,8,17,191,252],ae=function(e){for(var t=[];e--;)t.push(0);return t},oe=9e4;J=function(e,t){return K(Q(e,t))},Z=function(e,t){return X(Y(e),t)},ee=function(e,t,n){return Y(n?e:e-t)};var le={ONE_SECOND_IN_TS:oe,secondsToVideoTs:K=function(e){return e*oe},secondsToAudioTs:X=function(e,t){return e*t},videoTsToSeconds:Y=function(e){return e/oe},audioTsToSeconds:Q=function(e,t){return e/t},audioTsToVideoTs:J,videoTsToAudioTs:Z,metadataTsToSeconds:ee},ce=function(){if(!G){var e={96e3:[re,[227,64],ae(154),[56]],88200:[re,[231],ae(170),[56]],64e3:[re,[248,192],ae(240),[56]],48e3:[re,[255,192],ae(268),[55,148,128],ae(54),[112]],44100:[re,[255,192],ae(268),[55,163,128],ae(84),[112]],32e3:[re,[255,192],ae(268),[55,234],ae(226),[112]],24e3:[re,[255,192],ae(268),[55,255,128],ae(268),[111,112],ae(126),[224]],16e3:[re,[255,192],ae(268),[55,255,128],ae(268),[111,255],ae(269),[223,108],ae(195),[1,192]],12e3:[se,ae(268),[3,127,248],ae(268),[6,255,240],ae(268),[13,255,224],ae(268),[27,253,128],ae(259),[56]],11025:[se,ae(268),[3,127,248],ae(268),[6,255,240],ae(268),[13,255,224],ae(268),[27,255,192],ae(268),[55,175,128],ae(108),[112]],8e3:[se,ae(268),[3,121,16],ae(47),[7]]};t=e,G=Object.keys(t).reduce((function(e,n){return e[n]=new Uint8Array(t[n].reduce((function(e,t){return e.concat(t)}),[])),e}),{})}var t;return G},ue=le,de={prefixWithSilence:function(e,t,n,i){var r,s,a,o,l,c=0,u=0,d=0;if(t.length&&(r=ue.audioTsToVideoTs(e.baseMediaDecodeTime,e.samplerate),s=Math.ceil(ue.ONE_SECOND_IN_TS/(e.samplerate/1024)),n&&i&&(c=r-Math.max(n,i),d=(u=Math.floor(c/s))*s),!(u<1||d>ue.ONE_SECOND_IN_TS/2))){for((a=ce()[e.samplerate])||(a=t[0].data),o=0;o<u;o++)l=t[0],t.splice(0,0,{data:a,dts:l.dts-s,pts:l.pts-s});return e.baseMediaDecodeTime-=Math.floor(ue.videoTsToAudioTs(d,e.samplerate)),d}},trimAdtsFramesByEarliestDts:function(e,t,n){return t.minSegmentDts>=n?e:(t.minSegmentDts=1/0,e.filter((function(e){return e.dts>=n&&(t.minSegmentDts=Math.min(t.minSegmentDts,e.dts),t.minSegmentPts=t.minSegmentDts,!0)})))},generateSampleTable:function(e){var t,n,i=[];for(t=0;t<e.length;t++)n=e[t],i.push({size:n.data.byteLength,duration:1024});return i},concatenateFrameData:function(e){var t,n,i=0,r=new Uint8Array(function(e){var t,n=0;for(t=0;t<e.length;t++)n+=e[t].data.byteLength;return n}(e));for(t=0;t<e.length;t++)n=e[t],r.set(n.data,i),i+=n.data.byteLength;return r}},he=le.ONE_SECOND_IN_TS,pe={clearDtsInfo:function(e){delete e.minSegmentDts,delete e.maxSegmentDts,delete e.minSegmentPts,delete e.maxSegmentPts},calculateTrackBaseMediaDecodeTime:function(e,t){var n,i=e.minSegmentDts;return t||(i-=e.timelineStartInfo.dts),n=e.timelineStartInfo.baseMediaDecodeTime,n+=i,n=Math.max(0,n),"audio"===e.type&&(n*=e.samplerate/he,n=Math.floor(n)),n},collectDtsInfo:function(e,t){"number"==typeof t.pts&&(void 0===e.timelineStartInfo.pts&&(e.timelineStartInfo.pts=t.pts),void 0===e.minSegmentPts?e.minSegmentPts=t.pts:e.minSegmentPts=Math.min(e.minSegmentPts,t.pts),void 0===e.maxSegmentPts?e.maxSegmentPts=t.pts:e.maxSegmentPts=Math.max(e.maxSegmentPts,t.pts)),"number"==typeof t.dts&&(void 0===e.timelineStartInfo.dts&&(e.timelineStartInfo.dts=t.dts),void 0===e.minSegmentDts?e.minSegmentDts=t.dts:e.minSegmentDts=Math.min(e.minSegmentDts,t.dts),void 0===e.maxSegmentDts?e.maxSegmentDts=t.dts:e.maxSegmentDts=Math.max(e.maxSegmentDts,t.dts))}},fe={parseSei:function(e){for(var t=0,n={payloadType:-1,payloadSize:0},i=0,r=0;t<e.byteLength&&128!==e[t];){for(;255===e[t];)i+=255,t++;for(i+=e[t++];255===e[t];)r+=255,t++;if(r+=e[t++],!n.payload&&4===i){if("GA94"===String.fromCharCode(e[t+3],e[t+4],e[t+5],e[t+6])){n.payloadType=i,n.payloadSize=r,n.payload=e.subarray(t,t+r);break}n.payload=void 0}t+=r,i=0,r=0}return n},parseUserData:function(e){return 181!==e.payload[0]||49!=(e.payload[1]<<8|e.payload[2])||"GA94"!==String.fromCharCode(e.payload[3],e.payload[4],e.payload[5],e.payload[6])||3!==e.payload[7]?null:e.payload.subarray(8,e.payload.length-1)},parseCaptionPackets:function(e,t){var n,i,r,s,a=[];if(!(64&t[0]))return a;for(i=31&t[0],n=0;n<i;n++)s={type:3&t[(r=3*n)+2],pts:e},4&t[r+2]&&(s.ccData=t[r+3]<<8|t[r+4],a.push(s));return a},discardEmulationPreventionBytes:function(e){for(var t,n,i=e.byteLength,r=[],s=1;s<i-2;)0===e[s]&&0===e[s+1]&&3===e[s+2]?(r.push(s+2),s+=2):s++;if(0===r.length)return e;t=i-r.length,n=new Uint8Array(t);var a=0;for(s=0;s<t;a++,s++)a===r[0]&&(a++,r.shift()),n[s]=e[a];return n},USER_DATA_REGISTERED_ITU_T_T35:4},me=V,ge=fe,ye=function(e){e=e||{},ye.prototype.init.call(this),this.parse708captions_="boolean"!=typeof e.parse708captions||e.parse708captions,this.captionPackets_=[],this.ccStreams_=[new xe(0,0),new xe(0,1),new xe(1,0),new xe(1,1)],this.parse708captions_&&(this.cc708Stream_=new Ee({captionServices:e.captionServices})),this.reset(),this.ccStreams_.forEach((function(e){e.on("data",this.trigger.bind(this,"data")),e.on("partialdone",this.trigger.bind(this,"partialdone")),e.on("done",this.trigger.bind(this,"done"))}),this),this.parse708captions_&&(this.cc708Stream_.on("data",this.trigger.bind(this,"data")),this.cc708Stream_.on("partialdone",this.trigger.bind(this,"partialdone")),this.cc708Stream_.on("done",this.trigger.bind(this,"done")))};ye.prototype=new me,ye.prototype.push=function(e){var t,n,i;if("sei_rbsp"===e.nalUnitType&&(t=ge.parseSei(e.escapedRBSP)).payload&&t.payloadType===ge.USER_DATA_REGISTERED_ITU_T_T35&&(n=ge.parseUserData(t)))if(e.dts<this.latestDts_)this.ignoreNextEqualDts_=!0;else{if(e.dts===this.latestDts_&&this.ignoreNextEqualDts_)return this.numSameDts_--,void(this.numSameDts_||(this.ignoreNextEqualDts_=!1));i=ge.parseCaptionPackets(e.pts,n),this.captionPackets_=this.captionPackets_.concat(i),this.latestDts_!==e.dts&&(this.numSameDts_=0),this.numSameDts_++,this.latestDts_=e.dts}},ye.prototype.flushCCStreams=function(e){this.ccStreams_.forEach((function(t){return"flush"===e?t.flush():t.partialFlush()}),this)},ye.prototype.flushStream=function(e){this.captionPackets_.length?(this.captionPackets_.forEach((function(e,t){e.presortIndex=t})),this.captionPackets_.sort((function(e,t){return e.pts===t.pts?e.presortIndex-t.presortIndex:e.pts-t.pts})),this.captionPackets_.forEach((function(e){e.type<2?this.dispatchCea608Packet(e):this.dispatchCea708Packet(e)}),this),this.captionPackets_.length=0,this.flushCCStreams(e)):this.flushCCStreams(e)},ye.prototype.flush=function(){return this.flushStream("flush")},ye.prototype.partialFlush=function(){return this.flushStream("partialFlush")},ye.prototype.reset=function(){this.latestDts_=null,this.ignoreNextEqualDts_=!1,this.numSameDts_=0,this.activeCea608Channel_=[null,null],this.ccStreams_.forEach((function(e){e.reset()}))},ye.prototype.dispatchCea608Packet=function(e){this.setsTextOrXDSActive(e)?this.activeCea608Channel_[e.type]=null:this.setsChannel1Active(e)?this.activeCea608Channel_[e.type]=0:this.setsChannel2Active(e)&&(this.activeCea608Channel_[e.type]=1),null!==this.activeCea608Channel_[e.type]&&this.ccStreams_[(e.type<<1)+this.activeCea608Channel_[e.type]].push(e)},ye.prototype.setsChannel1Active=function(e){return 4096==(30720&e.ccData)},ye.prototype.setsChannel2Active=function(e){return 6144==(30720&e.ccData)},ye.prototype.setsTextOrXDSActive=function(e){return 256==(28928&e.ccData)||4138==(30974&e.ccData)||6186==(30974&e.ccData)},ye.prototype.dispatchCea708Packet=function(e){this.parse708captions_&&this.cc708Stream_.push(e)};var _e={127:9834,4128:32,4129:160,4133:8230,4138:352,4140:338,4144:9608,4145:8216,4146:8217,4147:8220,4148:8221,4149:8226,4153:8482,4154:353,4156:339,4157:8480,4159:376,4214:8539,4215:8540,4216:8541,4217:8542,4218:9168,4219:9124,4220:9123,4221:9135,4222:9126,4223:9121,4256:12600},ve=function(e){return 32<=e&&e<=127||160<=e&&e<=255},be=function(e){this.windowNum=e,this.reset()};be.prototype.reset=function(){this.clearText(),this.pendingNewLine=!1,this.winAttr={},this.penAttr={},this.penLoc={},this.penColor={},this.visible=0,this.rowLock=0,this.columnLock=0,this.priority=0,this.relativePositioning=0,this.anchorVertical=0,this.anchorHorizontal=0,this.anchorPoint=0,this.rowCount=1,this.virtualRowCount=this.rowCount+1,this.columnCount=41,this.windowStyle=0,this.penStyle=0},be.prototype.getText=function(){return this.rows.join("\n")},be.prototype.clearText=function(){this.rows=[""],this.rowIdx=0},be.prototype.newLine=function(e){for(this.rows.length>=this.virtualRowCount&&"function"==typeof this.beforeRowOverflow&&this.beforeRowOverflow(e),this.rows.length>0&&(this.rows.push(""),this.rowIdx++);this.rows.length>this.virtualRowCount;)this.rows.shift(),this.rowIdx--},be.prototype.isEmpty=function(){return 0===this.rows.length||1===this.rows.length&&""===this.rows[0]},be.prototype.addText=function(e){this.rows[this.rowIdx]+=e},be.prototype.backspace=function(){if(!this.isEmpty()){var e=this.rows[this.rowIdx];this.rows[this.rowIdx]=e.substr(0,e.length-1)}};var Te=function(e,t,n){this.serviceNum=e,this.text="",this.currentWindow=new be(-1),this.windows=[],this.stream=n,"string"==typeof t&&this.createTextDecoder(t)};Te.prototype.init=function(e,t){this.startPts=e;for(var n=0;n<8;n++)this.windows[n]=new be(n),"function"==typeof t&&(this.windows[n].beforeRowOverflow=t)},Te.prototype.setCurrentWindow=function(e){this.currentWindow=this.windows[e]},Te.prototype.createTextDecoder=function(e){if("undefined"==typeof TextDecoder)this.stream.trigger("log",{level:"warn",message:"The `encoding` option is unsupported without TextDecoder support"});else try{this.textDecoder_=new TextDecoder(e)}catch(error){this.stream.trigger("log",{level:"warn",message:"TextDecoder could not be created with "+e+" encoding. "+error})}};var Ee=function(e){e=e||{},Ee.prototype.init.call(this);var t,n=this,i=e.captionServices||{},r={};Object.keys(i).forEach((e=>{t=i[e],/^SERVICE/.test(e)&&(r[e]=t.encoding)})),this.serviceEncodings=r,this.current708Packet=null,this.services={},this.push=function(e){3===e.type?(n.new708Packet(),n.add708Bytes(e)):(null===n.current708Packet&&n.new708Packet(),n.add708Bytes(e))}};Ee.prototype=new me,Ee.prototype.new708Packet=function(){null!==this.current708Packet&&this.push708Packet(),this.current708Packet={data:[],ptsVals:[]}},Ee.prototype.add708Bytes=function(e){var t=e.ccData,n=t>>>8,i=255&t;this.current708Packet.ptsVals.push(e.pts),this.current708Packet.data.push(n),this.current708Packet.data.push(i)},Ee.prototype.push708Packet=function(){var e=this.current708Packet,t=e.data,n=null,i=null,r=0,s=t[r++];for(e.seq=s>>6,e.sizeCode=63&s;r<t.length;r++)i=31&(s=t[r++]),7===(n=s>>5)&&i>0&&(n=s=t[r++]),this.pushServiceBlock(n,r,i),i>0&&(r+=i-1)},Ee.prototype.pushServiceBlock=function(e,t,n){var i,r=t,s=this.current708Packet.data,a=this.services[e];for(a||(a=this.initService(e,r));r<t+n&&r<s.length;r++)i=s[r],ve(i)?r=this.handleText(r,a):24===i?r=this.multiByteCharacter(r,a):16===i?r=this.extendedCommands(r,a):128<=i&&i<=135?r=this.setCurrentWindow(r,a):152<=i&&i<=159?r=this.defineWindow(r,a):136===i?r=this.clearWindows(r,a):140===i?r=this.deleteWindows(r,a):137===i?r=this.displayWindows(r,a):138===i?r=this.hideWindows(r,a):139===i?r=this.toggleWindows(r,a):151===i?r=this.setWindowAttributes(r,a):144===i?r=this.setPenAttributes(r,a):145===i?r=this.setPenColor(r,a):146===i?r=this.setPenLocation(r,a):143===i?a=this.reset(r,a):8===i?a.currentWindow.backspace():12===i?a.currentWindow.clearText():13===i?a.currentWindow.pendingNewLine=!0:14===i?a.currentWindow.clearText():141===i&&r++},Ee.prototype.extendedCommands=function(e,t){var n=this.current708Packet.data[++e];return ve(n)&&(e=this.handleText(e,t,{isExtended:!0})),e},Ee.prototype.getPts=function(e){return this.current708Packet.ptsVals[Math.floor(e/2)]},Ee.prototype.initService=function(e,t){var n,i,r=this;return(n="SERVICE"+e)in this.serviceEncodings&&(i=this.serviceEncodings[n]),this.services[e]=new Te(e,i,r),this.services[e].init(this.getPts(t),(function(t){r.flushDisplayed(t,r.services[e])})),this.services[e]},Ee.prototype.handleText=function(e,t,n){var i,r,s,a,o=n&&n.isExtended,l=n&&n.isMultiByte,c=this.current708Packet.data,u=o?4096:0,d=c[e],h=c[e+1],p=t.currentWindow;return t.textDecoder_&&!o?(l?(r=[d,h],e++):r=[d],i=t.textDecoder_.decode(new Uint8Array(r))):(a=_e[s=u|d]||s,i=4096&s&&s===a?"":String.fromCharCode(a)),p.pendingNewLine&&!p.isEmpty()&&p.newLine(this.getPts(e)),p.pendingNewLine=!1,p.addText(i),e},Ee.prototype.multiByteCharacter=function(e,t){var n=this.current708Packet.data,i=n[e+1],r=n[e+2];return ve(i)&&ve(r)&&(e=this.handleText(++e,t,{isMultiByte:!0})),e},Ee.prototype.setCurrentWindow=function(e,t){var n=7&this.current708Packet.data[e];return t.setCurrentWindow(n),e},Ee.prototype.defineWindow=function(e,t){var n=this.current708Packet.data,i=n[e],r=7&i;t.setCurrentWindow(r);var s=t.currentWindow;return i=n[++e],s.visible=(32&i)>>5,s.rowLock=(16&i)>>4,s.columnLock=(8&i)>>3,s.priority=7&i,i=n[++e],s.relativePositioning=(128&i)>>7,s.anchorVertical=127&i,i=n[++e],s.anchorHorizontal=i,i=n[++e],s.anchorPoint=(240&i)>>4,s.rowCount=15&i,i=n[++e],s.columnCount=63&i,i=n[++e],s.windowStyle=(56&i)>>3,s.penStyle=7&i,s.virtualRowCount=s.rowCount+1,e},Ee.prototype.setWindowAttributes=function(e,t){var n=this.current708Packet.data,i=n[e],r=t.currentWindow.winAttr;return i=n[++e],r.fillOpacity=(192&i)>>6,r.fillRed=(48&i)>>4,r.fillGreen=(12&i)>>2,r.fillBlue=3&i,i=n[++e],r.borderType=(192&i)>>6,r.borderRed=(48&i)>>4,r.borderGreen=(12&i)>>2,r.borderBlue=3&i,i=n[++e],r.borderType+=(128&i)>>5,r.wordWrap=(64&i)>>6,r.printDirection=(48&i)>>4,r.scrollDirection=(12&i)>>2,r.justify=3&i,i=n[++e],r.effectSpeed=(240&i)>>4,r.effectDirection=(12&i)>>2,r.displayEffect=3&i,e},Ee.prototype.flushDisplayed=function(e,t){for(var n=[],i=0;i<8;i++)t.windows[i].visible&&!t.windows[i].isEmpty()&&n.push(t.windows[i].getText());t.endPts=e,t.text=n.join("\n\n"),this.pushCaption(t),t.startPts=e},Ee.prototype.pushCaption=function(e){""!==e.text&&(this.trigger("data",{startPts:e.startPts,endPts:e.endPts,text:e.text,stream:"cc708_"+e.serviceNum}),e.text="",e.startPts=e.endPts)},Ee.prototype.displayWindows=function(e,t){var n=this.current708Packet.data[++e],i=this.getPts(e);this.flushDisplayed(i,t);for(var r=0;r<8;r++)n&1<<r&&(t.windows[r].visible=1);return e},Ee.prototype.hideWindows=function(e,t){var n=this.current708Packet.data[++e],i=this.getPts(e);this.flushDisplayed(i,t);for(var r=0;r<8;r++)n&1<<r&&(t.windows[r].visible=0);return e},Ee.prototype.toggleWindows=function(e,t){var n=this.current708Packet.data[++e],i=this.getPts(e);this.flushDisplayed(i,t);for(var r=0;r<8;r++)n&1<<r&&(t.windows[r].visible^=1);return e},Ee.prototype.clearWindows=function(e,t){var n=this.current708Packet.data[++e],i=this.getPts(e);this.flushDisplayed(i,t);for(var r=0;r<8;r++)n&1<<r&&t.windows[r].clearText();return e},Ee.prototype.deleteWindows=function(e,t){var n=this.current708Packet.data[++e],i=this.getPts(e);this.flushDisplayed(i,t);for(var r=0;r<8;r++)n&1<<r&&t.windows[r].reset();return e},Ee.prototype.setPenAttributes=function(e,t){var n=this.current708Packet.data,i=n[e],r=t.currentWindow.penAttr;return i=n[++e],r.textTag=(240&i)>>4,r.offset=(12&i)>>2,r.penSize=3&i,i=n[++e],r.italics=(128&i)>>7,r.underline=(64&i)>>6,r.edgeType=(56&i)>>3,r.fontStyle=7&i,e},Ee.prototype.setPenColor=function(e,t){var n=this.current708Packet.data,i=n[e],r=t.currentWindow.penColor;return i=n[++e],r.fgOpacity=(192&i)>>6,r.fgRed=(48&i)>>4,r.fgGreen=(12&i)>>2,r.fgBlue=3&i,i=n[++e],r.bgOpacity=(192&i)>>6,r.bgRed=(48&i)>>4,r.bgGreen=(12&i)>>2,r.bgBlue=3&i,i=n[++e],r.edgeRed=(48&i)>>4,r.edgeGreen=(12&i)>>2,r.edgeBlue=3&i,e},Ee.prototype.setPenLocation=function(e,t){var n=this.current708Packet.data,i=n[e],r=t.currentWindow.penLoc;return t.currentWindow.pendingNewLine=!0,i=n[++e],r.row=15&i,i=n[++e],r.column=63&i,e},Ee.prototype.reset=function(e,t){var n=this.getPts(e);return this.flushDisplayed(n,t),this.initService(t.serviceNum,e)};var we={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,304:174,305:176,306:189,307:191,308:8482,309:162,310:163,311:9834,312:224,313:160,314:232,315:226,316:234,317:238,318:244,319:251,544:193,545:201,546:211,547:218,548:220,549:252,550:8216,551:161,552:42,553:39,554:8212,555:169,556:8480,557:8226,558:8220,559:8221,560:192,561:194,562:199,563:200,564:202,565:203,566:235,567:206,568:207,569:239,570:212,571:217,572:249,573:219,574:171,575:187,800:195,801:227,802:205,803:204,804:236,805:210,806:242,807:213,808:245,809:123,810:125,811:92,812:94,813:95,814:124,815:126,816:196,817:228,818:214,819:246,820:223,821:165,822:164,823:9474,824:197,825:229,826:216,827:248,828:9484,829:9488,830:9492,831:9496},Se=function(e){return null===e?"":(e=we[e]||e,String.fromCharCode(e))},Ce=[4352,4384,4608,4640,5376,5408,5632,5664,5888,5920,4096,4864,4896,5120,5152],Ie=function(){for(var e=[],t=15;t--;)e.push("");return e},xe=function(e,t){xe.prototype.init.call(this),this.field_=e||0,this.dataChannel_=t||0,this.name_="CC"+(1+(this.field_<<1|this.dataChannel_)),this.setConstants(),this.reset(),this.push=function(e){var t,n,i,r,s;if((t=32639&e.ccData)!==this.lastControlCode_){if(4096==(61440&t)?this.lastControlCode_=t:t!==this.PADDING_&&(this.lastControlCode_=null),i=t>>>8,r=255&t,t!==this.PADDING_)if(t===this.RESUME_CAPTION_LOADING_)this.mode_="popOn";else if(t===this.END_OF_CAPTION_)this.mode_="popOn",this.clearFormatting(e.pts),this.flushDisplayed(e.pts),n=this.displayed_,this.displayed_=this.nonDisplayed_,this.nonDisplayed_=n,this.startPts_=e.pts;else if(t===this.ROLL_UP_2_ROWS_)this.rollUpRows_=2,this.setRollUp(e.pts);else if(t===this.ROLL_UP_3_ROWS_)this.rollUpRows_=3,this.setRollUp(e.pts);else if(t===this.ROLL_UP_4_ROWS_)this.rollUpRows_=4,this.setRollUp(e.pts);else if(t===this.CARRIAGE_RETURN_)this.clearFormatting(e.pts),this.flushDisplayed(e.pts),this.shiftRowsUp_(),this.startPts_=e.pts;else if(t===this.BACKSPACE_)"popOn"===this.mode_?this.nonDisplayed_[this.row_]=this.nonDisplayed_[this.row_].slice(0,-1):this.displayed_[this.row_]=this.displayed_[this.row_].slice(0,-1);else if(t===this.ERASE_DISPLAYED_MEMORY_)this.flushDisplayed(e.pts),this.displayed_=Ie();else if(t===this.ERASE_NON_DISPLAYED_MEMORY_)this.nonDisplayed_=Ie();else if(t===this.RESUME_DIRECT_CAPTIONING_)"paintOn"!==this.mode_&&(this.flushDisplayed(e.pts),this.displayed_=Ie()),this.mode_="paintOn",this.startPts_=e.pts;else if(this.isSpecialCharacter(i,r))s=Se((i=(3&i)<<8)|r),this[this.mode_](e.pts,s),this.column_++;else if(this.isExtCharacter(i,r))"popOn"===this.mode_?this.nonDisplayed_[this.row_]=this.nonDisplayed_[this.row_].slice(0,-1):this.displayed_[this.row_]=this.displayed_[this.row_].slice(0,-1),s=Se((i=(3&i)<<8)|r),this[this.mode_](e.pts,s),this.column_++;else if(this.isMidRowCode(i,r))this.clearFormatting(e.pts),this[this.mode_](e.pts," "),this.column_++,14==(14&r)&&this.addFormatting(e.pts,["i"]),1==(1&r)&&this.addFormatting(e.pts,["u"]);else if(this.isOffsetControlCode(i,r))this.column_+=3&r;else if(this.isPAC(i,r)){var a=Ce.indexOf(7968&t);"rollUp"===this.mode_&&(a-this.rollUpRows_+1<0&&(a=this.rollUpRows_-1),this.setRollUp(e.pts,a)),a!==this.row_&&(this.clearFormatting(e.pts),this.row_=a),1&r&&-1===this.formatting_.indexOf("u")&&this.addFormatting(e.pts,["u"]),16==(16&t)&&(this.column_=4*((14&t)>>1)),this.isColorPAC(r)&&14==(14&r)&&this.addFormatting(e.pts,["i"])}else this.isNormalChar(i)&&(0===r&&(r=null),s=Se(i),s+=Se(r),this[this.mode_](e.pts,s),this.column_+=s.length)}else this.lastControlCode_=null}};xe.prototype=new me,xe.prototype.flushDisplayed=function(e){var t=this.displayed_.map((function(e,t){try{return e.trim()}catch(fB){return this.trigger("log",{level:"warn",message:"Skipping a malformed 608 caption at index "+t+"."}),""}}),this).join("\n").replace(/^\n+|\n+$/g,"");t.length&&this.trigger("data",{startPts:this.startPts_,endPts:e,text:t,stream:this.name_})},xe.prototype.reset=function(){this.mode_="popOn",this.topRow_=0,this.startPts_=0,this.displayed_=Ie(),this.nonDisplayed_=Ie(),this.lastControlCode_=null,this.column_=0,this.row_=14,this.rollUpRows_=2,this.formatting_=[]},xe.prototype.setConstants=function(){0===this.dataChannel_?(this.BASE_=16,this.EXT_=17,this.CONTROL_=(20|this.field_)<<8,this.OFFSET_=23):1===this.dataChannel_&&(this.BASE_=24,this.EXT_=25,this.CONTROL_=(28|this.field_)<<8,this.OFFSET_=31),this.PADDING_=0,this.RESUME_CAPTION_LOADING_=32|this.CONTROL_,this.END_OF_CAPTION_=47|this.CONTROL_,this.ROLL_UP_2_ROWS_=37|this.CONTROL_,this.ROLL_UP_3_ROWS_=38|this.CONTROL_,this.ROLL_UP_4_ROWS_=39|this.CONTROL_,this.CARRIAGE_RETURN_=45|this.CONTROL_,this.RESUME_DIRECT_CAPTIONING_=41|this.CONTROL_,this.BACKSPACE_=33|this.CONTROL_,this.ERASE_DISPLAYED_MEMORY_=44|this.CONTROL_,this.ERASE_NON_DISPLAYED_MEMORY_=46|this.CONTROL_},xe.prototype.isSpecialCharacter=function(e,t){return e===this.EXT_&&t>=48&&t<=63},xe.prototype.isExtCharacter=function(e,t){return(e===this.EXT_+1||e===this.EXT_+2)&&t>=32&&t<=63},xe.prototype.isMidRowCode=function(e,t){return e===this.EXT_&&t>=32&&t<=47},xe.prototype.isOffsetControlCode=function(e,t){return e===this.OFFSET_&&t>=33&&t<=35},xe.prototype.isPAC=function(e,t){return e>=this.BASE_&&e<this.BASE_+8&&t>=64&&t<=127},xe.prototype.isColorPAC=function(e){return e>=64&&e<=79||e>=96&&e<=127},xe.prototype.isNormalChar=function(e){return e>=32&&e<=127},xe.prototype.setRollUp=function(e,t){if("rollUp"!==this.mode_&&(this.row_=14,this.mode_="rollUp",this.flushDisplayed(e),this.nonDisplayed_=Ie(),this.displayed_=Ie()),void 0!==t&&t!==this.row_)for(var n=0;n<this.rollUpRows_;n++)this.displayed_[t-n]=this.displayed_[this.row_-n],this.displayed_[this.row_-n]="";void 0===t&&(t=this.row_),this.topRow_=t-this.rollUpRows_+1},xe.prototype.addFormatting=function(e,t){this.formatting_=this.formatting_.concat(t);var n=t.reduce((function(e,t){return e+"<"+t+">"}),"");this[this.mode_](e,n)},xe.prototype.clearFormatting=function(e){if(this.formatting_.length){var t=this.formatting_.reverse().reduce((function(e,t){return e+"</"+t+">"}),"");this.formatting_=[],this[this.mode_](e,t)}},xe.prototype.popOn=function(e,t){var n=this.nonDisplayed_[this.row_];n+=t,this.nonDisplayed_[this.row_]=n},xe.prototype.rollUp=function(e,t){var n=this.displayed_[this.row_];n+=t,this.displayed_[this.row_]=n},xe.prototype.shiftRowsUp_=function(){var e;for(e=0;e<this.topRow_;e++)this.displayed_[e]="";for(e=this.row_+1;e<15;e++)this.displayed_[e]="";for(e=this.topRow_;e<this.row_;e++)this.displayed_[e]=this.displayed_[e+1];this.displayed_[this.row_]=""},xe.prototype.paintOn=function(e,t){var n=this.displayed_[this.row_];n+=t,this.displayed_[this.row_]=n};var ke={CaptionStream:ye,Cea608Stream:xe,Cea708Stream:Ee},Ae={H264_STREAM_TYPE:27,ADTS_STREAM_TYPE:15,METADATA_STREAM_TYPE:21},Oe=V,Pe="shared",Le=function(e,t){var n=1;for(e>t&&(n=-1);Math.abs(t-e)>4294967296;)e+=8589934592*n;return e},Ne=function(e){var t,n;Ne.prototype.init.call(this),this.type_=e||Pe,this.push=function(e){this.type_!==Pe&&e.type!==this.type_||(void 0===n&&(n=e.dts),e.dts=Le(e.dts,n),e.pts=Le(e.pts,n),t=e.dts,this.trigger("data",e))},this.flush=function(){n=t,this.trigger("done")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline")},this.discontinuity=function(){n=void 0,t=void 0},this.reset=function(){this.discontinuity(),this.trigger("reset")}};Ne.prototype=new Oe;var De,Re={TimestampRolloverStream:Ne,handleRollover:Le},Me=(e,t,n)=>{if(!e)return-1;for(var i=n;i<e.length;i++)if(e[i]===t)return i;return-1},Fe=Me,Ue=3,Be=function(e,t,n){var i,r="";for(i=t;i<n;i++)r+="%"+("00"+e[i].toString(16)).slice(-2);return r},je=function(e,t,n){return decodeURIComponent(Be(e,t,n))},qe=function(e,t,n){return unescape(Be(e,t,n))},He=function(e){return e[0]<<21|e[1]<<14|e[2]<<7|e[3]},Ve={APIC:function(e){var t,n,i=1;e.data[0]===Ue&&((t=Fe(e.data,0,i))<0||(e.mimeType=qe(e.data,i,t),i=t+1,e.pictureType=e.data[i],i++,(n=Fe(e.data,0,i))<0||(e.description=je(e.data,i,n),i=n+1,"--\x3e"===e.mimeType?e.url=qe(e.data,i,e.data.length):e.pictureData=e.data.subarray(i,e.data.length))))},"T*":function(e){e.data[0]===Ue&&(e.value=je(e.data,1,e.data.length).replace(/\0*$/,""),e.values=e.value.split("\0"))},TXXX:function(e){var t;e.data[0]===Ue&&-1!==(t=Fe(e.data,0,1))&&(e.description=je(e.data,1,t),e.value=je(e.data,t+1,e.data.length).replace(/\0*$/,""),e.data=e.value)},"W*":function(e){e.url=qe(e.data,0,e.data.length).replace(/\0.*$/,"")},WXXX:function(e){var t;e.data[0]===Ue&&-1!==(t=Fe(e.data,0,1))&&(e.description=je(e.data,1,t),e.url=qe(e.data,t+1,e.data.length).replace(/\0.*$/,""))},PRIV:function(e){var t;for(t=0;t<e.data.length;t++)if(0===e.data[t]){e.owner=qe(e.data,0,t);break}e.privateData=e.data.subarray(t+1),e.data=e.privateData}},$e={parseId3Frames:function(e){var t,n=10,i=0,r=[];if(!(e.length<10||e[0]!=="I".charCodeAt(0)||e[1]!=="D".charCodeAt(0)||e[2]!=="3".charCodeAt(0))){i=He(e.subarray(6,10)),i+=10,64&e[5]&&(n+=4,n+=He(e.subarray(10,14)),i-=He(e.subarray(16,20)));do{if((t=He(e.subarray(n+4,n+8)))<1)break;var s={id:String.fromCharCode(e[n],e[n+1],e[n+2],e[n+3]),data:e.subarray(n+10,n+t+10)};s.key=s.id,Ve[s.id]?Ve[s.id](s):"T"===s.id[0]?Ve["T*"](s):"W"===s.id[0]&&Ve["W*"](s),r.push(s),n+=10,n+=t}while(n<i);return r}},parseSyncSafeInteger:He,frameParsers:Ve},We=V,ze=Ae,Ge=$e;De=function(e){var t,n={descriptor:e&&e.descriptor},i=0,r=[],s=0;if(De.prototype.init.call(this),this.dispatchType=ze.METADATA_STREAM_TYPE.toString(16),n.descriptor)for(t=0;t<n.descriptor.length;t++)this.dispatchType+=("00"+n.descriptor[t].toString(16)).slice(-2);this.push=function(e){var t,n,a,o,l;if("timed-metadata"===e.type)if(e.dataAlignmentIndicator&&(s=0,r.length=0),0===r.length&&(e.data.length<10||e.data[0]!=="I".charCodeAt(0)||e.data[1]!=="D".charCodeAt(0)||e.data[2]!=="3".charCodeAt(0)))this.trigger("log",{level:"warn",message:"Skipping unrecognized metadata packet"});else if(r.push(e),s+=e.data.byteLength,1===r.length&&(i=Ge.parseSyncSafeInteger(e.data.subarray(6,10)),i+=10),!(s<i)){for(t={data:new Uint8Array(i),frames:[],pts:r[0].pts,dts:r[0].dts},l=0;l<i;)t.data.set(r[0].data.subarray(0,i-l),l),l+=r[0].data.byteLength,s-=r[0].data.byteLength,r.shift();n=10,64&t.data[5]&&(n+=4,n+=Ge.parseSyncSafeInteger(t.data.subarray(10,14)),i-=Ge.parseSyncSafeInteger(t.data.subarray(16,20)));do{if((a=Ge.parseSyncSafeInteger(t.data.subarray(n+4,n+8)))<1){this.trigger("log",{level:"warn",message:"Malformed ID3 frame encountered. Skipping remaining metadata parsing."});break}if((o={id:String.fromCharCode(t.data[n],t.data[n+1],t.data[n+2],t.data[n+3]),data:t.data.subarray(n+10,n+a+10)}).key=o.id,Ge.frameParsers[o.id]?Ge.frameParsers[o.id](o):"T"===o.id[0]?Ge.frameParsers["T*"](o):"W"===o.id[0]&&Ge.frameParsers["W*"](o),"com.apple.streaming.transportStreamTimestamp"===o.owner){var c=o.data,u=(1&c[3])<<30|c[4]<<22|c[5]<<14|c[6]<<6|c[7]>>>2;u*=4,u+=3&c[7],o.timeStamp=u,void 0===t.pts&&void 0===t.dts&&(t.pts=o.timeStamp,t.dts=o.timeStamp),this.trigger("timestamp",o)}t.frames.push(o),n+=10,n+=a}while(n<i);this.trigger("data",t)}}},De.prototype=new We;var Ke,Xe,Ye,Qe=De,Je=V,Ze=ke,et=Ae,tt=Re.TimestampRolloverStream,nt=188;(Ke=function(){var e=new Uint8Array(nt),t=0;Ke.prototype.init.call(this),this.push=function(n){var i,r=0,s=nt;for(t?((i=new Uint8Array(n.byteLength+t)).set(e.subarray(0,t)),i.set(n,t),t=0):i=n;s<i.byteLength;)71!==i[r]||71!==i[s]?(r++,s++):(this.trigger("data",i.subarray(r,s)),r+=nt,s+=nt);r<i.byteLength&&(e.set(i.subarray(r),0),t=i.byteLength-r)},this.flush=function(){t===nt&&71===e[0]&&(this.trigger("data",e),t=0),this.trigger("done")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline")},this.reset=function(){t=0,this.trigger("reset")}}).prototype=new Je,Xe=function(){var e,t,n,i;Xe.prototype.init.call(this),i=this,this.packetsWaitingForPmt=[],this.programMapTable=void 0,e=function(e,i){var r=0;i.payloadUnitStartIndicator&&(r+=e[r]+1),"pat"===i.type?t(e.subarray(r),i):n(e.subarray(r),i)},t=function(e,t){t.section_number=e[7],t.last_section_number=e[8],i.pmtPid=(31&e[10])<<8|e[11],t.pmtPid=i.pmtPid},n=function(e,t){var n,r;if(1&e[5]){for(i.programMapTable={video:null,audio:null,"timed-metadata":{}},n=3+((15&e[1])<<8|e[2])-4,r=12+((15&e[10])<<8|e[11]);r<n;){var s=e[r],a=(31&e[r+1])<<8|e[r+2];s===et.H264_STREAM_TYPE&&null===i.programMapTable.video?i.programMapTable.video=a:s===et.ADTS_STREAM_TYPE&&null===i.programMapTable.audio?i.programMapTable.audio=a:s===et.METADATA_STREAM_TYPE&&(i.programMapTable["timed-metadata"][a]=s),r+=5+((15&e[r+3])<<8|e[r+4])}t.programMapTable=i.programMapTable}},this.push=function(t){var n={},i=4;if(n.payloadUnitStartIndicator=!!(64&t[1]),n.pid=31&t[1],n.pid<<=8,n.pid|=t[2],(48&t[3])>>>4>1&&(i+=t[i]+1),0===n.pid)n.type="pat",e(t.subarray(i),n),this.trigger("data",n);else if(n.pid===this.pmtPid)for(n.type="pmt",e(t.subarray(i),n),this.trigger("data",n);this.packetsWaitingForPmt.length;)this.processPes_.apply(this,this.packetsWaitingForPmt.shift());else void 0===this.programMapTable?this.packetsWaitingForPmt.push([t,i,n]):this.processPes_(t,i,n)},this.processPes_=function(e,t,n){n.pid===this.programMapTable.video?n.streamType=et.H264_STREAM_TYPE:n.pid===this.programMapTable.audio?n.streamType=et.ADTS_STREAM_TYPE:n.streamType=this.programMapTable["timed-metadata"][n.pid],n.type="pes",n.data=e.subarray(t),this.trigger("data",n)}},Xe.prototype=new Je,Xe.STREAM_TYPES={h264:27,adts:15},Ye=function(){var e,t=this,n=!1,i={data:[],size:0},r={data:[],size:0},s={data:[],size:0},a=function(e,n,i){var r,s,a=new Uint8Array(e.size),o={type:n},l=0,c=0;if(e.data.length&&!(e.size<9)){for(o.trackId=e.data[0].pid,l=0;l<e.data.length;l++)s=e.data[l],a.set(s.data,c),c+=s.data.byteLength;!function(e,t){var n;const i=e[0]<<16|e[1]<<8|e[2];t.data=new Uint8Array,1===i&&(t.packetLength=6+(e[4]<<8|e[5]),t.dataAlignmentIndicator=0!=(4&e[6]),192&(n=e[7])&&(t.pts=(14&e[9])<<27|(255&e[10])<<20|(254&e[11])<<12|(255&e[12])<<5|(254&e[13])>>>3,t.pts*=4,t.pts+=(6&e[13])>>>1,t.dts=t.pts,64&n&&(t.dts=(14&e[14])<<27|(255&e[15])<<20|(254&e[16])<<12|(255&e[17])<<5|(254&e[18])>>>3,t.dts*=4,t.dts+=(6&e[18])>>>1)),t.data=e.subarray(9+e[8]))}(a,o),r="video"===n||o.packetLength<=e.size,(i||r)&&(e.size=0,e.data.length=0),r&&t.trigger("data",o)}};Ye.prototype.init.call(this),this.push=function(o){({pat:function(){},pes:function(){var e,t;switch(o.streamType){case et.H264_STREAM_TYPE:e=i,t="video";break;case et.ADTS_STREAM_TYPE:e=r,t="audio";break;case et.METADATA_STREAM_TYPE:e=s,t="timed-metadata";break;default:return}o.payloadUnitStartIndicator&&a(e,t,!0),e.data.push(o),e.size+=o.data.byteLength},pmt:function(){var i={type:"metadata",tracks:[]};null!==(e=o.programMapTable).video&&i.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+e.video,codec:"avc",type:"video"}),null!==e.audio&&i.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+e.audio,codec:"adts",type:"audio"}),n=!0,t.trigger("data",i)}})[o.type]()},this.reset=function(){i.size=0,i.data.length=0,r.size=0,r.data.length=0,this.trigger("reset")},this.flushStreams_=function(){a(i,"video"),a(r,"audio"),a(s,"timed-metadata")},this.flush=function(){if(!n&&e){var i={type:"metadata",tracks:[]};null!==e.video&&i.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+e.video,codec:"avc",type:"video"}),null!==e.audio&&i.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+e.audio,codec:"adts",type:"audio"}),t.trigger("data",i)}n=!1,this.flushStreams_(),this.trigger("done")}},Ye.prototype=new Je;var it={PAT_PID:0,MP2T_PACKET_LENGTH:nt,TransportPacketStream:Ke,TransportParseStream:Xe,ElementaryStream:Ye,TimestampRolloverStream:tt,CaptionStream:Ze.CaptionStream,Cea608Stream:Ze.Cea608Stream,Cea708Stream:Ze.Cea708Stream,MetadataStream:Qe};for(var rt in et)et.hasOwnProperty(rt)&&(it[rt]=et[rt]);var st,at=it,ot=V,lt=le.ONE_SECOND_IN_TS,ct=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350];st=function(e){var t,n=0;st.prototype.init.call(this),this.skipWarn_=function(e,t){this.trigger("log",{level:"warn",message:`adts skiping bytes ${e} to ${t} in frame ${n} outside syncword`})},this.push=function(i){var r,s,a,o,l,c=0;if(e||(n=0),"audio"===i.type){var u;for(t&&t.length?(a=t,(t=new Uint8Array(a.byteLength+i.data.byteLength)).set(a),t.set(i.data,a.byteLength)):t=i.data;c+7<t.length;)if(255===t[c]&&240==(246&t[c+1])){if("number"==typeof u&&(this.skipWarn_(u,c),u=null),s=2*(1&~t[c+1]),r=(3&t[c+3])<<11|t[c+4]<<3|(224&t[c+5])>>5,l=(o=1024*(1+(3&t[c+6])))*lt/ct[(60&t[c+2])>>>2],t.byteLength-c<r)break;this.trigger("data",{pts:i.pts+n*l,dts:i.dts+n*l,sampleCount:o,audioobjecttype:1+(t[c+2]>>>6&3),channelcount:(1&t[c+2])<<2|(192&t[c+3])>>>6,samplerate:ct[(60&t[c+2])>>>2],samplingfrequencyindex:(60&t[c+2])>>>2,samplesize:16,data:t.subarray(c+7+s,c+r)}),n++,c+=r}else"number"!=typeof u&&(u=c),c++;"number"==typeof u&&(this.skipWarn_(u,c),u=null),t=t.subarray(c)}},this.flush=function(){n=0,this.trigger("done")},this.reset=function(){t=void 0,this.trigger("reset")},this.endTimeline=function(){t=void 0,this.trigger("endedtimeline")}},st.prototype=new ot;var ut,dt=st;ut=function(e){var t=e.byteLength,n=0,i=0;this.length=function(){return 8*t},this.bitsAvailable=function(){return 8*t+i},this.loadWord=function(){var r=e.byteLength-t,s=new Uint8Array(4),a=Math.min(4,t);if(0===a)throw new Error("no bytes available");s.set(e.subarray(r,r+a)),n=new DataView(s.buffer).getUint32(0),i=8*a,t-=a},this.skipBits=function(e){var r;i>e?(n<<=e,i-=e):(e-=i,e-=8*(r=Math.floor(e/8)),t-=r,this.loadWord(),n<<=e,i-=e)},this.readBits=function(e){var r=Math.min(i,e),s=n>>>32-r;return(i-=r)>0?n<<=r:t>0&&this.loadWord(),(r=e-r)>0?s<<r|this.readBits(r):s},this.skipLeadingZeros=function(){var e;for(e=0;e<i;++e)if(0!=(n&2147483648>>>e))return n<<=e,i-=e,e;return this.loadWord(),e+this.skipLeadingZeros()},this.skipUnsignedExpGolomb=function(){this.skipBits(1+this.skipLeadingZeros())},this.skipExpGolomb=function(){this.skipBits(1+this.skipLeadingZeros())},this.readUnsignedExpGolomb=function(){var e=this.skipLeadingZeros();return this.readBits(e+1)-1},this.readExpGolomb=function(){var e=this.readUnsignedExpGolomb();return 1&e?1+e>>>1:-1*(e>>>1)},this.readBoolean=function(){return 1===this.readBits(1)},this.readUnsignedByte=function(){return this.readBits(8)},this.loadWord()};var ht,pt,ft,mt=V,gt=ut;pt=function(){var e,t,n=0;pt.prototype.init.call(this),this.push=function(i){var r;t?((r=new Uint8Array(t.byteLength+i.data.byteLength)).set(t),r.set(i.data,t.byteLength),t=r):t=i.data;for(var s=t.byteLength;n<s-3;n++)if(1===t[n+2]){e=n+5;break}for(;e<s;)switch(t[e]){case 0:if(0!==t[e-1]){e+=2;break}if(0!==t[e-2]){e++;break}n+3!==e-2&&this.trigger("data",t.subarray(n+3,e-2));do{e++}while(1!==t[e]&&e<s);n=e-2,e+=3;break;case 1:if(0!==t[e-1]||0!==t[e-2]){e+=3;break}this.trigger("data",t.subarray(n+3,e-2)),n=e-2,e+=3;break;default:e+=3}t=t.subarray(n),e-=n,n=0},this.reset=function(){t=null,n=0,this.trigger("reset")},this.flush=function(){t&&t.byteLength>3&&this.trigger("data",t.subarray(n+3)),t=null,n=0,this.trigger("done")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline")}},pt.prototype=new mt,ft={100:!0,110:!0,122:!0,244:!0,44:!0,83:!0,86:!0,118:!0,128:!0,138:!0,139:!0,134:!0},ht=function(){var e,t,n,i,r,s,a,o=new pt;ht.prototype.init.call(this),e=this,this.push=function(e){"video"===e.type&&(t=e.trackId,n=e.pts,i=e.dts,o.push(e))},o.on("data",(function(a){var o={trackId:t,pts:n,dts:i,data:a,nalUnitTypeCode:31&a[0]};switch(o.nalUnitTypeCode){case 5:o.nalUnitType="slice_layer_without_partitioning_rbsp_idr";break;case 6:o.nalUnitType="sei_rbsp",o.escapedRBSP=r(a.subarray(1));break;case 7:o.nalUnitType="seq_parameter_set_rbsp",o.escapedRBSP=r(a.subarray(1)),o.config=s(o.escapedRBSP);break;case 8:o.nalUnitType="pic_parameter_set_rbsp";break;case 9:o.nalUnitType="access_unit_delimiter_rbsp"}e.trigger("data",o)})),o.on("done",(function(){e.trigger("done")})),o.on("partialdone",(function(){e.trigger("partialdone")})),o.on("reset",(function(){e.trigger("reset")})),o.on("endedtimeline",(function(){e.trigger("endedtimeline")})),this.flush=function(){o.flush()},this.partialFlush=function(){o.partialFlush()},this.reset=function(){o.reset()},this.endTimeline=function(){o.endTimeline()},a=function(e,t){var n,i=8,r=8;for(n=0;n<e;n++)0!==r&&(r=(i+t.readExpGolomb()+256)%256),i=0===r?i:r},r=function(e){for(var t,n,i=e.byteLength,r=[],s=1;s<i-2;)0===e[s]&&0===e[s+1]&&3===e[s+2]?(r.push(s+2),s+=2):s++;if(0===r.length)return e;t=i-r.length,n=new Uint8Array(t);var a=0;for(s=0;s<t;a++,s++)a===r[0]&&(a++,r.shift()),n[s]=e[a];return n},s=function(e){var t,n,i,r,s,o,l,c,u,d,h,p,f=0,m=0,g=0,y=0,_=[1,1];if(n=(t=new gt(e)).readUnsignedByte(),r=t.readUnsignedByte(),i=t.readUnsignedByte(),t.skipUnsignedExpGolomb(),ft[n]&&(3===(s=t.readUnsignedExpGolomb())&&t.skipBits(1),t.skipUnsignedExpGolomb(),t.skipUnsignedExpGolomb(),t.skipBits(1),t.readBoolean()))for(h=3!==s?8:12,p=0;p<h;p++)t.readBoolean()&&a(p<6?16:64,t);if(t.skipUnsignedExpGolomb(),0===(o=t.readUnsignedExpGolomb()))t.readUnsignedExpGolomb();else if(1===o)for(t.skipBits(1),t.skipExpGolomb(),t.skipExpGolomb(),l=t.readUnsignedExpGolomb(),p=0;p<l;p++)t.skipExpGolomb();if(t.skipUnsignedExpGolomb(),t.skipBits(1),c=t.readUnsignedExpGolomb(),u=t.readUnsignedExpGolomb(),0===(d=t.readBits(1))&&t.skipBits(1),t.skipBits(1),t.readBoolean()&&(f=t.readUnsignedExpGolomb(),m=t.readUnsignedExpGolomb(),g=t.readUnsignedExpGolomb(),y=t.readUnsignedExpGolomb()),t.readBoolean()&&t.readBoolean()){switch(t.readUnsignedByte()){case 1:_=[1,1];break;case 2:_=[12,11];break;case 3:_=[10,11];break;case 4:_=[16,11];break;case 5:_=[40,33];break;case 6:_=[24,11];break;case 7:_=[20,11];break;case 8:_=[32,11];break;case 9:_=[80,33];break;case 10:_=[18,11];break;case 11:_=[15,11];break;case 12:_=[64,33];break;case 13:_=[160,99];break;case 14:_=[4,3];break;case 15:_=[3,2];break;case 16:_=[2,1];break;case 255:_=[t.readUnsignedByte()<<8|t.readUnsignedByte(),t.readUnsignedByte()<<8|t.readUnsignedByte()]}_&&(_[0],_[1])}return{profileIdc:n,levelIdc:i,profileCompatibility:r,width:16*(c+1)-2*f-2*m,height:(2-d)*(u+1)*16-2*g-2*y,sarRatio:_}}},ht.prototype=new mt;var yt,_t={H264Stream:ht,NalByteStream:pt},vt=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350],bt=function(e,t){var n=e[t+6]<<21|e[t+7]<<14|e[t+8]<<7|e[t+9];return n=n>=0?n:0,(16&e[t+5])>>4?n+20:n+10},Tt=function(e,t){return e.length-t<10||e[t]!=="I".charCodeAt(0)||e[t+1]!=="D".charCodeAt(0)||e[t+2]!=="3".charCodeAt(0)?t:(t+=bt(e,t),Tt(e,t))},Et=function(e){return e[0]<<21|e[1]<<14|e[2]<<7|e[3]},wt=function(e,t,n){return unescape(function(e,t,n){var i,r="";for(i=t;i<n;i++)r+="%"+("00"+e[i].toString(16)).slice(-2);return r}(e,t,n))},St={isLikelyAacData:function(e){var t=Tt(e,0);return e.length>=t+2&&255==(255&e[t])&&240==(240&e[t+1])&&16==(22&e[t+1])},parseId3TagSize:bt,parseAdtsSize:function(e,t){var n=(224&e[t+5])>>5,i=e[t+4]<<3;return 6144&e[t+3]|i|n},parseType:function(e,t){return e[t]==="I".charCodeAt(0)&&e[t+1]==="D".charCodeAt(0)&&e[t+2]==="3".charCodeAt(0)?"timed-metadata":!0&e[t]&&240==(240&e[t+1])?"audio":null},parseSampleRate:function(e){for(var t=0;t+5<e.length;){if(255===e[t]&&240==(246&e[t+1]))return vt[(60&e[t+2])>>>2];t++}return null},parseAacTimestamp:function(e){var t,n,i;t=10,64&e[5]&&(t+=4,t+=Et(e.subarray(10,14)));do{if((n=Et(e.subarray(t+4,t+8)))<1)return null;if("PRIV"===String.fromCharCode(e[t],e[t+1],e[t+2],e[t+3])){i=e.subarray(t+10,t+n+10);for(var r=0;r<i.byteLength;r++)if(0===i[r]){if("com.apple.streaming.transportStreamTimestamp"===wt(i,0,r)){var s=i.subarray(r+1),a=(1&s[3])<<30|s[4]<<22|s[5]<<14|s[6]<<6|s[7]>>>2;return a*=4,a+=3&s[7]}break}}t+=10,t+=n}while(t<e.byteLength);return null}},Ct=St;(yt=function(){var e=new Uint8Array,t=0;yt.prototype.init.call(this),this.setTimestamp=function(e){t=e},this.push=function(n){var i,r,s,a,o=0,l=0;for(e.length?(a=e.length,(e=new Uint8Array(n.byteLength+a)).set(e.subarray(0,a)),e.set(n,a)):e=n;e.length-l>=3;)if(e[l]!=="I".charCodeAt(0)||e[l+1]!=="D".charCodeAt(0)||e[l+2]!=="3".charCodeAt(0))if(255!=(255&e[l])||240!=(240&e[l+1]))l++;else{if(e.length-l<7)break;if(l+(o=Ct.parseAdtsSize(e,l))>e.length)break;s={type:"audio",data:e.subarray(l,l+o),pts:t,dts:t},this.trigger("data",s),l+=o}else{if(e.length-l<10)break;if(l+(o=Ct.parseId3TagSize(e,l))>e.length)break;r={type:"timed-metadata",data:e.subarray(l,l+o)},this.trigger("data",r),l+=o}i=e.length-l,e=i>0?e.subarray(l):new Uint8Array},this.reset=function(){e=new Uint8Array,this.trigger("reset")},this.endTimeline=function(){e=new Uint8Array,this.trigger("endedtimeline")}}).prototype=new V;var It,xt,kt,At,Ot=V,Pt=te,Lt=ie,Nt=de,Dt=pe,Rt=at,Mt=le,Ft=dt,Ut=_t.H264Stream,Bt=yt,jt=St.isLikelyAacData,qt=le.ONE_SECOND_IN_TS,Ht=["audioobjecttype","channelcount","samplerate","samplingfrequencyindex","samplesize"],Vt=["width","height","profileIdc","levelIdc","profileCompatibility","sarRatio"],$t=function(e,t){t.stream=e,this.trigger("log",t)},Wt=function(e,t){for(var n=Object.keys(t),i=0;i<n.length;i++){var r=n[i];"headOfPipeline"!==r&&t[r].on&&t[r].on("log",$t.bind(e,r))}},zt=function(e,t){var n;if(e.length!==t.length)return!1;for(n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0},Gt=function(e,t,n,i,r,s){return{start:{dts:e,pts:e+(n-t)},end:{dts:e+(i-t),pts:e+(r-n)},prependedContentDuration:s,baseMediaDecodeTime:e}};xt=function(e,t){var n,i=[],r=0,s=0,a=1/0;n=(t=t||{}).firstSequenceNumber||0,xt.prototype.init.call(this),this.push=function(t){Dt.collectDtsInfo(e,t),e&&Ht.forEach((function(n){e[n]=t[n]})),i.push(t)},this.setEarliestDts=function(e){r=e},this.setVideoBaseMediaDecodeTime=function(e){a=e},this.setAudioAppendStart=function(e){s=e},this.flush=function(){var o,l,c,u,d,h,p;0!==i.length?(o=Nt.trimAdtsFramesByEarliestDts(i,e,r),e.baseMediaDecodeTime=Dt.calculateTrackBaseMediaDecodeTime(e,t.keepOriginalTimestamps),p=Nt.prefixWithSilence(e,o,s,a),e.samples=Nt.generateSampleTable(o),c=Pt.mdat(Nt.concatenateFrameData(o)),i=[],l=Pt.moof(n,[e]),u=new Uint8Array(l.byteLength+c.byteLength),n++,u.set(l),u.set(c,l.byteLength),Dt.clearDtsInfo(e),d=Math.ceil(1024*qt/e.samplerate),o.length&&(h=o.length*d,this.trigger("segmentTimingInfo",Gt(Mt.audioTsToVideoTs(e.baseMediaDecodeTime,e.samplerate),o[0].dts,o[0].pts,o[0].dts+h,o[0].pts+h,p||0)),this.trigger("timingInfo",{start:o[0].pts,end:o[0].pts+h})),this.trigger("data",{track:e,boxes:u}),this.trigger("done","AudioSegmentStream")):this.trigger("done","AudioSegmentStream")},this.reset=function(){Dt.clearDtsInfo(e),i=[],this.trigger("reset")}},xt.prototype=new Ot,It=function(e,t){var n,i,r,s=[],a=[];n=(t=t||{}).firstSequenceNumber||0,It.prototype.init.call(this),delete e.minPTS,this.gopCache_=[],this.push=function(t){Dt.collectDtsInfo(e,t),"seq_parameter_set_rbsp"!==t.nalUnitType||i||(i=t.config,e.sps=[t.data],Vt.forEach((function(t){e[t]=i[t]}),this)),"pic_parameter_set_rbsp"!==t.nalUnitType||r||(r=t.data,e.pps=[t.data]),s.push(t)},this.flush=function(){for(var i,r,o,l,c,u,d,h,p=0;s.length&&"access_unit_delimiter_rbsp"!==s[0].nalUnitType;)s.shift();if(0===s.length)return this.resetStream_(),void this.trigger("done","VideoSegmentStream");if(i=Lt.groupNalsIntoFrames(s),(o=Lt.groupFramesIntoGops(i))[0][0].keyFrame||((r=this.getGopForFusion_(s[0],e))?(p=r.duration,o.unshift(r),o.byteLength+=r.byteLength,o.nalCount+=r.nalCount,o.pts=r.pts,o.dts=r.dts,o.duration+=r.duration):o=Lt.extendFirstKeyFrame(o)),a.length){var f;if(!(f=t.alignGopsAtEnd?this.alignGopsAtEnd_(o):this.alignGopsAtStart_(o)))return this.gopCache_.unshift({gop:o.pop(),pps:e.pps,sps:e.sps}),this.gopCache_.length=Math.min(6,this.gopCache_.length),s=[],this.resetStream_(),void this.trigger("done","VideoSegmentStream");Dt.clearDtsInfo(e),o=f}Dt.collectDtsInfo(e,o),e.samples=Lt.generateSampleTable(o),c=Pt.mdat(Lt.concatenateNalData(o)),e.baseMediaDecodeTime=Dt.calculateTrackBaseMediaDecodeTime(e,t.keepOriginalTimestamps),this.trigger("processedGopsInfo",o.map((function(e){return{pts:e.pts,dts:e.dts,byteLength:e.byteLength}}))),d=o[0],h=o[o.length-1],this.trigger("segmentTimingInfo",Gt(e.baseMediaDecodeTime,d.dts,d.pts,h.dts+h.duration,h.pts+h.duration,p)),this.trigger("timingInfo",{start:o[0].pts,end:o[o.length-1].pts+o[o.length-1].duration}),this.gopCache_.unshift({gop:o.pop(),pps:e.pps,sps:e.sps}),this.gopCache_.length=Math.min(6,this.gopCache_.length),s=[],this.trigger("baseMediaDecodeTime",e.baseMediaDecodeTime),this.trigger("timelineStartInfo",e.timelineStartInfo),l=Pt.moof(n,[e]),u=new Uint8Array(l.byteLength+c.byteLength),n++,u.set(l),u.set(c,l.byteLength),this.trigger("data",{track:e,boxes:u}),this.resetStream_(),this.trigger("done","VideoSegmentStream")},this.reset=function(){this.resetStream_(),s=[],this.gopCache_.length=0,a.length=0,this.trigger("reset")},this.resetStream_=function(){Dt.clearDtsInfo(e),i=void 0,r=void 0},this.getGopForFusion_=function(t){var n,i,r,s,a,o=1/0;for(a=0;a<this.gopCache_.length;a++)r=(s=this.gopCache_[a]).gop,e.pps&&zt(e.pps[0],s.pps[0])&&e.sps&&zt(e.sps[0],s.sps[0])&&(r.dts<e.timelineStartInfo.dts||(n=t.dts-r.dts-r.duration)>=-1e4&&n<=45e3&&(!i||o>n)&&(i=s,o=n));return i?i.gop:null},this.alignGopsAtStart_=function(e){var t,n,i,r,s,o,l,c;for(s=e.byteLength,o=e.nalCount,l=e.duration,t=n=0;t<a.length&&n<e.length&&(i=a[t],r=e[n],i.pts!==r.pts);)r.pts>i.pts?t++:(n++,s-=r.byteLength,o-=r.nalCount,l-=r.duration);return 0===n?e:n===e.length?null:((c=e.slice(n)).byteLength=s,c.duration=l,c.nalCount=o,c.pts=c[0].pts,c.dts=c[0].dts,c)},this.alignGopsAtEnd_=function(e){var t,n,i,r,s,o,l;for(t=a.length-1,n=e.length-1,s=null,o=!1;t>=0&&n>=0;){if(i=a[t],r=e[n],i.pts===r.pts){o=!0;break}i.pts>r.pts?t--:(t===a.length-1&&(s=n),n--)}if(!o&&null===s)return null;if(0===(l=o?n:s))return e;var c=e.slice(l),u=c.reduce((function(e,t){return e.byteLength+=t.byteLength,e.duration+=t.duration,e.nalCount+=t.nalCount,e}),{byteLength:0,duration:0,nalCount:0});return c.byteLength=u.byteLength,c.duration=u.duration,c.nalCount=u.nalCount,c.pts=c[0].pts,c.dts=c[0].dts,c},this.alignGopsWith=function(e){a=e}},It.prototype=new Ot,At=function(e,t){this.numberOfTracks=0,this.metadataStream=t,void 0!==(e=e||{}).remux?this.remuxTracks=!!e.remux:this.remuxTracks=!0,"boolean"==typeof e.keepOriginalTimestamps?this.keepOriginalTimestamps=e.keepOriginalTimestamps:this.keepOriginalTimestamps=!1,this.pendingTracks=[],this.videoTrack=null,this.pendingBoxes=[],this.pendingCaptions=[],this.pendingMetadata=[],this.pendingBytes=0,this.emittedTracks=0,At.prototype.init.call(this),this.push=function(e){return e.text?this.pendingCaptions.push(e):e.frames?this.pendingMetadata.push(e):(this.pendingTracks.push(e.track),this.pendingBytes+=e.boxes.byteLength,"video"===e.track.type&&(this.videoTrack=e.track,this.pendingBoxes.push(e.boxes)),void("audio"===e.track.type&&(this.audioTrack=e.track,this.pendingBoxes.unshift(e.boxes))))}},At.prototype=new Ot,At.prototype.flush=function(e){var t,n,i,r,s=0,a={captions:[],captionStreams:{},metadata:[],info:{}},o=0;if(this.pendingTracks.length<this.numberOfTracks){if("VideoSegmentStream"!==e&&"AudioSegmentStream"!==e)return;if(this.remuxTracks)return;if(0===this.pendingTracks.length)return this.emittedTracks++,void(this.emittedTracks>=this.numberOfTracks&&(this.trigger("done"),this.emittedTracks=0))}if(this.videoTrack?(o=this.videoTrack.timelineStartInfo.pts,Vt.forEach((function(e){a.info[e]=this.videoTrack[e]}),this)):this.audioTrack&&(o=this.audioTrack.timelineStartInfo.pts,Ht.forEach((function(e){a.info[e]=this.audioTrack[e]}),this)),this.videoTrack||this.audioTrack){for(1===this.pendingTracks.length?a.type=this.pendingTracks[0].type:a.type="combined",this.emittedTracks+=this.pendingTracks.length,i=Pt.initSegment(this.pendingTracks),a.initSegment=new Uint8Array(i.byteLength),a.initSegment.set(i),a.data=new Uint8Array(this.pendingBytes),r=0;r<this.pendingBoxes.length;r++)a.data.set(this.pendingBoxes[r],s),s+=this.pendingBoxes[r].byteLength;for(r=0;r<this.pendingCaptions.length;r++)(t=this.pendingCaptions[r]).startTime=Mt.metadataTsToSeconds(t.startPts,o,this.keepOriginalTimestamps),t.endTime=Mt.metadataTsToSeconds(t.endPts,o,this.keepOriginalTimestamps),a.captionStreams[t.stream]=!0,a.captions.push(t);for(r=0;r<this.pendingMetadata.length;r++)(n=this.pendingMetadata[r]).cueTime=Mt.metadataTsToSeconds(n.pts,o,this.keepOriginalTimestamps),a.metadata.push(n);for(a.metadata.dispatchType=this.metadataStream.dispatchType,this.pendingTracks.length=0,this.videoTrack=null,this.pendingBoxes.length=0,this.pendingCaptions.length=0,this.pendingBytes=0,this.pendingMetadata.length=0,this.trigger("data",a),r=0;r<a.captions.length;r++)t=a.captions[r],this.trigger("caption",t);for(r=0;r<a.metadata.length;r++)n=a.metadata[r],this.trigger("id3Frame",n)}this.emittedTracks>=this.numberOfTracks&&(this.trigger("done"),this.emittedTracks=0)},At.prototype.setRemux=function(e){this.remuxTracks=e},kt=function(e){var t,n,i=this,r=!0;kt.prototype.init.call(this),e=e||{},this.baseMediaDecodeTime=e.baseMediaDecodeTime||0,this.transmuxPipeline_={},this.setupAacPipeline=function(){var r={};this.transmuxPipeline_=r,r.type="aac",r.metadataStream=new Rt.MetadataStream,r.aacStream=new Bt,r.audioTimestampRolloverStream=new Rt.TimestampRolloverStream("audio"),r.timedMetadataTimestampRolloverStream=new Rt.TimestampRolloverStream("timed-metadata"),r.adtsStream=new Ft,r.coalesceStream=new At(e,r.metadataStream),r.headOfPipeline=r.aacStream,r.aacStream.pipe(r.audioTimestampRolloverStream).pipe(r.adtsStream),r.aacStream.pipe(r.timedMetadataTimestampRolloverStream).pipe(r.metadataStream).pipe(r.coalesceStream),r.metadataStream.on("timestamp",(function(e){r.aacStream.setTimestamp(e.timeStamp)})),r.aacStream.on("data",(function(s){"timed-metadata"!==s.type&&"audio"!==s.type||r.audioSegmentStream||(n=n||{timelineStartInfo:{baseMediaDecodeTime:i.baseMediaDecodeTime},codec:"adts",type:"audio"},r.coalesceStream.numberOfTracks++,r.audioSegmentStream=new xt(n,e),r.audioSegmentStream.on("log",i.getLogTrigger_("audioSegmentStream")),r.audioSegmentStream.on("timingInfo",i.trigger.bind(i,"audioTimingInfo")),r.adtsStream.pipe(r.audioSegmentStream).pipe(r.coalesceStream),i.trigger("trackinfo",{hasAudio:!!n,hasVideo:!!t}))})),r.coalesceStream.on("data",this.trigger.bind(this,"data")),r.coalesceStream.on("done",this.trigger.bind(this,"done")),Wt(this,r)},this.setupTsPipeline=function(){var r={};this.transmuxPipeline_=r,r.type="ts",r.metadataStream=new Rt.MetadataStream,r.packetStream=new Rt.TransportPacketStream,r.parseStream=new Rt.TransportParseStream,r.elementaryStream=new Rt.ElementaryStream,r.timestampRolloverStream=new Rt.TimestampRolloverStream,r.adtsStream=new Ft,r.h264Stream=new Ut,r.captionStream=new Rt.CaptionStream(e),r.coalesceStream=new At(e,r.metadataStream),r.headOfPipeline=r.packetStream,r.packetStream.pipe(r.parseStream).pipe(r.elementaryStream).pipe(r.timestampRolloverStream),r.timestampRolloverStream.pipe(r.h264Stream),r.timestampRolloverStream.pipe(r.adtsStream),r.timestampRolloverStream.pipe(r.metadataStream).pipe(r.coalesceStream),r.h264Stream.pipe(r.captionStream).pipe(r.coalesceStream),r.elementaryStream.on("data",(function(s){var a;if("metadata"===s.type){for(a=s.tracks.length;a--;)t||"video"!==s.tracks[a].type?n||"audio"!==s.tracks[a].type||((n=s.tracks[a]).timelineStartInfo.baseMediaDecodeTime=i.baseMediaDecodeTime):(t=s.tracks[a]).timelineStartInfo.baseMediaDecodeTime=i.baseMediaDecodeTime;t&&!r.videoSegmentStream&&(r.coalesceStream.numberOfTracks++,r.videoSegmentStream=new It(t,e),r.videoSegmentStream.on("log",i.getLogTrigger_("videoSegmentStream")),r.videoSegmentStream.on("timelineStartInfo",(function(t){n&&!e.keepOriginalTimestamps&&(n.timelineStartInfo=t,r.audioSegmentStream.setEarliestDts(t.dts-i.baseMediaDecodeTime))})),r.videoSegmentStream.on("processedGopsInfo",i.trigger.bind(i,"gopInfo")),r.videoSegmentStream.on("segmentTimingInfo",i.trigger.bind(i,"videoSegmentTimingInfo")),r.videoSegmentStream.on("baseMediaDecodeTime",(function(e){n&&r.audioSegmentStream.setVideoBaseMediaDecodeTime(e)})),r.videoSegmentStream.on("timingInfo",i.trigger.bind(i,"videoTimingInfo")),r.h264Stream.pipe(r.videoSegmentStream).pipe(r.coalesceStream)),n&&!r.audioSegmentStream&&(r.coalesceStream.numberOfTracks++,r.audioSegmentStream=new xt(n,e),r.audioSegmentStream.on("log",i.getLogTrigger_("audioSegmentStream")),r.audioSegmentStream.on("timingInfo",i.trigger.bind(i,"audioTimingInfo")),r.audioSegmentStream.on("segmentTimingInfo",i.trigger.bind(i,"audioSegmentTimingInfo")),r.adtsStream.pipe(r.audioSegmentStream).pipe(r.coalesceStream)),i.trigger("trackinfo",{hasAudio:!!n,hasVideo:!!t})}})),r.coalesceStream.on("data",this.trigger.bind(this,"data")),r.coalesceStream.on("id3Frame",(function(e){e.dispatchType=r.metadataStream.dispatchType,i.trigger("id3Frame",e)})),r.coalesceStream.on("caption",this.trigger.bind(this,"caption")),r.coalesceStream.on("done",this.trigger.bind(this,"done")),Wt(this,r)},this.setBaseMediaDecodeTime=function(i){var r=this.transmuxPipeline_;e.keepOriginalTimestamps||(this.baseMediaDecodeTime=i),n&&(n.timelineStartInfo.dts=void 0,n.timelineStartInfo.pts=void 0,Dt.clearDtsInfo(n),r.audioTimestampRolloverStream&&r.audioTimestampRolloverStream.discontinuity()),t&&(r.videoSegmentStream&&(r.videoSegmentStream.gopCache_=[]),t.timelineStartInfo.dts=void 0,t.timelineStartInfo.pts=void 0,Dt.clearDtsInfo(t),r.captionStream.reset()),r.timestampRolloverStream&&r.timestampRolloverStream.discontinuity()},this.setAudioAppendStart=function(e){n&&this.transmuxPipeline_.audioSegmentStream.setAudioAppendStart(e)},this.setRemux=function(t){var n=this.transmuxPipeline_;e.remux=t,n&&n.coalesceStream&&n.coalesceStream.setRemux(t)},this.alignGopsWith=function(e){t&&this.transmuxPipeline_.videoSegmentStream&&this.transmuxPipeline_.videoSegmentStream.alignGopsWith(e)},this.getLogTrigger_=function(e){var t=this;return function(n){n.stream=e,t.trigger("log",n)}},this.push=function(e){if(r){var t=jt(e);t&&"aac"!==this.transmuxPipeline_.type?this.setupAacPipeline():t||"ts"===this.transmuxPipeline_.type||this.setupTsPipeline(),r=!1}this.transmuxPipeline_.headOfPipeline.push(e)},this.flush=function(){r=!0,this.transmuxPipeline_.headOfPipeline.flush()},this.endTimeline=function(){this.transmuxPipeline_.headOfPipeline.endTimeline()},this.reset=function(){this.transmuxPipeline_.headOfPipeline&&this.transmuxPipeline_.headOfPipeline.reset()},this.resetCaptions=function(){this.transmuxPipeline_.captionStream&&this.transmuxPipeline_.captionStream.reset()}},kt.prototype=new Ot;var Kt,Xt,Yt,Qt,Jt={Transmuxer:kt,VideoSegmentStream:It,AudioSegmentStream:xt,AUDIO_PROPERTIES:Ht,VIDEO_PROPERTIES:Vt,generateSegmentTimingInfo:Gt},Zt=function(e){return e>>>0},en=function(e){var t="";return t+=String.fromCharCode(e[0]),t+=String.fromCharCode(e[1]),t+=String.fromCharCode(e[2]),t+=String.fromCharCode(e[3])},tn=Zt,nn=en,rn=function(e,t){var n,i,r,s,a,o=[];if(!t.length)return null;for(n=0;n<e.byteLength;)i=tn(e[n]<<24|e[n+1]<<16|e[n+2]<<8|e[n+3]),r=nn(e.subarray(n+4,n+8)),s=i>1?n+i:e.byteLength,r===t[0]&&(1===t.length?o.push(e.subarray(n+8,s)):(a=rn(e.subarray(n+8,s),t.slice(1))).length&&(o=o.concat(a))),n=s;return o},sn=Zt,an=W.getUint64,on=function(e){var t={version:e[0],flags:new Uint8Array(e.subarray(1,4))};return 1===t.version?t.baseMediaDecodeTime=an(e.subarray(4)):t.baseMediaDecodeTime=sn(e[4]<<24|e[5]<<16|e[6]<<8|e[7]),t},ln=function(e){return{isLeading:(12&e[0])>>>2,dependsOn:3&e[0],isDependedOn:(192&e[1])>>>6,hasRedundancy:(48&e[1])>>>4,paddingValue:(14&e[1])>>>1,isNonSyncSample:1&e[1],degradationPriority:e[2]<<8|e[3]}},cn=function(e){var t,n={version:e[0],flags:new Uint8Array(e.subarray(1,4)),samples:[]},i=new DataView(e.buffer,e.byteOffset,e.byteLength),r=1&n.flags[2],s=4&n.flags[2],a=1&n.flags[1],o=2&n.flags[1],l=4&n.flags[1],c=8&n.flags[1],u=i.getUint32(4),d=8;for(r&&(n.dataOffset=i.getInt32(d),d+=4),s&&u&&(t={flags:ln(e.subarray(d,d+4))},d+=4,a&&(t.duration=i.getUint32(d),d+=4),o&&(t.size=i.getUint32(d),d+=4),c&&(1===n.version?t.compositionTimeOffset=i.getInt32(d):t.compositionTimeOffset=i.getUint32(d),d+=4),n.samples.push(t),u--);u--;)t={},a&&(t.duration=i.getUint32(d),d+=4),o&&(t.size=i.getUint32(d),d+=4),l&&(t.flags=ln(e.subarray(d,d+4)),d+=4),c&&(1===n.version?t.compositionTimeOffset=i.getInt32(d):t.compositionTimeOffset=i.getUint32(d),d+=4),n.samples.push(t);return n},un=function(e){var t,n=new DataView(e.buffer,e.byteOffset,e.byteLength),i={version:e[0],flags:new Uint8Array(e.subarray(1,4)),trackId:n.getUint32(4)},r=1&i.flags[2],s=2&i.flags[2],a=8&i.flags[2],o=16&i.flags[2],l=32&i.flags[2],c=65536&i.flags[0],u=131072&i.flags[0];return t=8,r&&(t+=4,i.baseDataOffset=n.getUint32(12),t+=4),s&&(i.sampleDescriptionIndex=n.getUint32(t),t+=4),a&&(i.defaultSampleDuration=n.getUint32(t),t+=4),o&&(i.defaultSampleSize=n.getUint32(t),t+=4),l&&(i.defaultSampleFlags=n.getUint32(t)),c&&(i.durationIsEmpty=!0),!r&&u&&(i.baseDataOffsetIsMoof=!0),i},dn=(Kt="undefined"!=typeof window?window:void 0!==e?e:"undefined"!=typeof self?self:{},fe.discardEmulationPreventionBytes),hn=ke.CaptionStream,pn=rn,fn=on,mn=cn,gn=un,yn=Kt,_n=function(e,t){for(var n=e,i=0;i<t.length;i++){var r=t[i];if(n<r.size)return r;n-=r.size}return null},vn=function(e,t){var n=pn(e,["moof","traf"]),i=pn(e,["mdat"]),r={},s=[];return i.forEach((function(e,t){var i=n[t];s.push({mdat:e,traf:i})})),s.forEach((function(e){var n,i,s=e.mdat,a=e.traf,o=pn(a,["tfhd"]),l=gn(o[0]),c=l.trackId,u=pn(a,["tfdt"]),d=u.length>0?fn(u[0]).baseMediaDecodeTime:0,h=pn(a,["trun"]);t===c&&h.length>0&&(n=function(e,t,n){var i=t,r=n.defaultSampleDuration||0,s=n.defaultSampleSize||0,a=n.trackId,o=[];return e.forEach((function(e){var t=mn(e).samples;t.forEach((function(e){void 0===e.duration&&(e.duration=r),void 0===e.size&&(e.size=s),e.trackId=a,e.dts=i,void 0===e.compositionTimeOffset&&(e.compositionTimeOffset=0),"bigint"==typeof i?(e.pts=i+yn.BigInt(e.compositionTimeOffset),i+=yn.BigInt(e.duration)):(e.pts=i+e.compositionTimeOffset,i+=e.duration)})),o=o.concat(t)})),o}(h,d,l),i=function(e,t,n){var i,r,s,a,o=new DataView(e.buffer,e.byteOffset,e.byteLength),l={logs:[],seiNals:[]};for(r=0;r+4<e.length;r+=s)if(s=o.getUint32(r),r+=4,!(s<=0))switch(31&e[r]){case 6:var c=e.subarray(r+1,r+1+s),u=_n(r,t);if(i={nalUnitType:"sei_rbsp",size:s,data:c,escapedRBSP:dn(c),trackId:n},u)i.pts=u.pts,i.dts=u.dts,a=u;else{if(!a){l.logs.push({level:"warn",message:"We've encountered a nal unit without data at "+r+" for trackId "+n+". See mux.js#223."});break}i.pts=a.pts,i.dts=a.dts}l.seiNals.push(i)}return l}(s,n,c),r[c]||(r[c]={seiNals:[],logs:[]}),r[c].seiNals=r[c].seiNals.concat(i.seiNals),r[c].logs=r[c].logs.concat(i.logs))})),r},bn=function(){var e,t,n,i,r,s,a=!1;this.isInitialized=function(){return a},this.init=function(t){e=new hn,a=!0,s=!!t&&t.isPartial,e.on("data",(function(e){e.startTime=e.startPts/i,e.endTime=e.endPts/i,r.captions.push(e),r.captionStreams[e.stream]=!0})),e.on("log",(function(e){r.logs.push(e)}))},this.isNewInit=function(e,t){return!(e&&0===e.length||t&&"object"==typeof t&&0===Object.keys(t).length)&&(n!==e[0]||i!==t[n])},this.parse=function(e,s,a){var o;if(!this.isInitialized())return null;if(!s||!a)return null;if(this.isNewInit(s,a))n=s[0],i=a[n];else if(null===n||!i)return t.push(e),null;for(;t.length>0;){var l=t.shift();this.parse(l,s,a)}return o=function(e,t,n){if(null===t)return null;var i=vn(e,t)[t]||{};return{seiNals:i.seiNals,logs:i.logs,timescale:n}}(e,n,i),o&&o.logs&&(r.logs=r.logs.concat(o.logs)),null!==o&&o.seiNals?(this.pushNals(o.seiNals),this.flushStream(),r):r.logs.length?{logs:r.logs,captions:[],captionStreams:[]}:null},this.pushNals=function(t){if(!this.isInitialized()||!t||0===t.length)return null;t.forEach((function(t){e.push(t)}))},this.flushStream=function(){if(!this.isInitialized())return null;s?e.partialFlush():e.flush()},this.clearParsedCaptions=function(){r.captions=[],r.captionStreams={},r.logs=[]},this.resetCaptionStream=function(){if(!this.isInitialized())return null;e.reset()},this.clearAllCaptions=function(){this.clearParsedCaptions(),this.resetCaptionStream()},this.reset=function(){t=[],n=null,i=null,r?this.clearParsedCaptions():r={captions:[],captionStreams:{},logs:[]},this.resetCaptionStream()},this.reset()},Tn=function(e){for(var t=0,n=String.fromCharCode(e[t]),i="";"\0"!==n;)i+=n,t++,n=String.fromCharCode(e[t]);return i+=n},En=Tn,wn=W.getUint64,Sn=function(e,t){var n="\0"!==t.scheme_id_uri,i=0===e&&Cn(t.presentation_time_delta)&&n,r=1===e&&Cn(t.presentation_time)&&n;return!(e>1)&&i||r},Cn=function(e){return void 0!==e||null!==e},In={parseEmsgBox:function(e){var t,n,i,r,s,a,o,l=4,c=e[0];if(0===c)l+=(t=En(e.subarray(l))).length,l+=(n=En(e.subarray(l))).length,i=(u=new DataView(e.buffer)).getUint32(l),l+=4,s=u.getUint32(l),l+=4,a=u.getUint32(l),l+=4,o=u.getUint32(l),l+=4;else if(1===c){var u;i=(u=new DataView(e.buffer)).getUint32(l),l+=4,r=wn(e.subarray(l)),l+=8,a=u.getUint32(l),l+=4,o=u.getUint32(l),l+=4,l+=(t=En(e.subarray(l))).length,l+=(n=En(e.subarray(l))).length}var d={scheme_id_uri:t,value:n,timescale:i||1,presentation_time:r,presentation_time_delta:s,event_duration:a,id:o,message_data:new Uint8Array(e.subarray(l,e.byteLength))};return Sn(c,d)?d:void 0},scaleTime:function(e,t,n,i){return e||0===e?e/t:i+n/t}},xn=Zt,kn=function(e){return("00"+e.toString(16)).slice(-2)},An=rn,On=en,Pn=In,Ln=un,Nn=cn,Dn=on,Rn=W.getUint64,Mn=Kt,Fn=$e.parseId3Frames;Xt=function(e,t){var n=An(t,["moof","traf"]).reduce((function(t,n){var i,r=An(n,["tfhd"])[0],s=xn(r[4]<<24|r[5]<<16|r[6]<<8|r[7]),a=e[s]||9e4,o=An(n,["tfdt"])[0],l=new DataView(o.buffer,o.byteOffset,o.byteLength);let c;return"bigint"==typeof(i=1===o[0]?Rn(o.subarray(4,12)):l.getUint32(4))?c=i/Mn.BigInt(a):"number"!=typeof i||isNaN(i)||(c=i/a),c<Number.MAX_SAFE_INTEGER&&(c=Number(c)),c<t&&(t=c),t}),1/0);return"bigint"==typeof n||isFinite(n)?n:0},Qt=function(e){var t=0===e[0]?12:20;return xn(e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3])},Yt=function(e){var t=An(e,["moov","trak"]),n=[];return t.forEach((function(e){var t,i,r={},s=An(e,["tkhd"])[0];s&&(i=(t=new DataView(s.buffer,s.byteOffset,s.byteLength)).getUint8(0),r.id=0===i?t.getUint32(12):t.getUint32(20));var a=An(e,["mdia","hdlr"])[0];if(a){var o=On(a.subarray(8,12));r.type="vide"===o?"video":"soun"===o?"audio":o}var l=An(e,["mdia","minf","stbl","stsd"])[0];if(l){var c=l.subarray(8);r.codec=On(c.subarray(4,8));var u,d=An(c,[r.codec])[0];d&&(/^[asm]vc[1-9]$/i.test(r.codec)?(u=d.subarray(78),"avcC"===On(u.subarray(4,8))&&u.length>11?(r.codec+=".",r.codec+=kn(u[9]),r.codec+=kn(u[10]),r.codec+=kn(u[11])):r.codec="avc1.4d400d"):/^mp4[a,v]$/i.test(r.codec)?(u=d.subarray(28),"esds"===On(u.subarray(4,8))&&u.length>20&&0!==u[19]?(r.codec+="."+kn(u[19]),r.codec+="."+kn(u[20]>>>2&63).replace(/^0/,"")):r.codec="mp4a.40.2"):r.codec=r.codec.toLowerCase())}var h=An(e,["mdia","mdhd"])[0];h&&(r.timescale=Qt(h)),n.push(r)})),n};var Un=Xt,Bn=Yt,jn=Ae,qn=function(e){var t=31&e[1];return t<<=8,t|=e[2]},Hn=function(e){return!!(64&e[1])},Vn=function(e){var t=0;return(48&e[3])>>>4>1&&(t+=e[4]+1),t},$n=function(e){switch(e){case 5:return"slice_layer_without_partitioning_rbsp_idr";case 6:return"sei_rbsp";case 7:return"seq_parameter_set_rbsp";case 8:return"pic_parameter_set_rbsp";case 9:return"access_unit_delimiter_rbsp";default:return null}},Wn={parseType:function(e,t){var n=qn(e);return 0===n?"pat":n===t?"pmt":t?"pes":null},parsePat:function(e){var t=Hn(e),n=4+Vn(e);return t&&(n+=e[n]+1),(31&e[n+10])<<8|e[n+11]},parsePmt:function(e){var t={},n=Hn(e),i=4+Vn(e);if(n&&(i+=e[i]+1),1&e[i+5]){var r;r=3+((15&e[i+1])<<8|e[i+2])-4;for(var s=12+((15&e[i+10])<<8|e[i+11]);s<r;){var a=i+s;t[(31&e[a+1])<<8|e[a+2]]=e[a],s+=5+((15&e[a+3])<<8|e[a+4])}return t}},parsePayloadUnitStartIndicator:Hn,parsePesType:function(e,t){switch(t[qn(e)]){case jn.H264_STREAM_TYPE:return"video";case jn.ADTS_STREAM_TYPE:return"audio";case jn.METADATA_STREAM_TYPE:return"timed-metadata";default:return null}},parsePesTime:function(e){if(!Hn(e))return null;var t=4+Vn(e);if(t>=e.byteLength)return null;var n,i=null;return 192&(n=e[t+7])&&((i={}).pts=(14&e[t+9])<<27|(255&e[t+10])<<20|(254&e[t+11])<<12|(255&e[t+12])<<5|(254&e[t+13])>>>3,i.pts*=4,i.pts+=(6&e[t+13])>>>1,i.dts=i.pts,64&n&&(i.dts=(14&e[t+14])<<27|(255&e[t+15])<<20|(254&e[t+16])<<12|(255&e[t+17])<<5|(254&e[t+18])>>>3,i.dts*=4,i.dts+=(6&e[t+18])>>>1)),i},videoPacketContainsKeyFrame:function(e){for(var t=4+Vn(e),n=e.subarray(t),i=0,r=0,s=!1;r<n.byteLength-3;r++)if(1===n[r+2]){i=r+5;break}for(;i<n.byteLength;)switch(n[i]){case 0:if(0!==n[i-1]){i+=2;break}if(0!==n[i-2]){i++;break}r+3!==i-2&&"slice_layer_without_partitioning_rbsp_idr"===$n(31&n[r+3])&&(s=!0);do{i++}while(1!==n[i]&&i<n.length);r=i-2,i+=3;break;case 1:if(0!==n[i-1]||0!==n[i-2]){i+=3;break}"slice_layer_without_partitioning_rbsp_idr"===$n(31&n[r+3])&&(s=!0),r=i-2,i+=3;break;default:i+=3}return n=n.subarray(r),i-=r,r=0,n&&n.byteLength>3&&"slice_layer_without_partitioning_rbsp_idr"===$n(31&n[r+3])&&(s=!0),s}},zn=Ae,Gn=Re.handleRollover,Kn={};Kn.ts=Wn,Kn.aac=St;var Xn=le.ONE_SECOND_IN_TS,Yn=188,Qn=71,Jn=function(e,t,n){for(var i,r,s,a,o=0,l=Yn,c=!1;l<=e.byteLength;)if(e[o]!==Qn||e[l]!==Qn&&l!==e.byteLength)o++,l++;else{if(i=e.subarray(o,l),"pes"===Kn.ts.parseType(i,t.pid))r=Kn.ts.parsePesType(i,t.table),s=Kn.ts.parsePayloadUnitStartIndicator(i),"audio"===r&&s&&(a=Kn.ts.parsePesTime(i))&&(a.type="audio",n.audio.push(a),c=!0);if(c)break;o+=Yn,l+=Yn}for(o=(l=e.byteLength)-Yn,c=!1;o>=0;)if(e[o]!==Qn||e[l]!==Qn&&l!==e.byteLength)o--,l--;else{if(i=e.subarray(o,l),"pes"===Kn.ts.parseType(i,t.pid))r=Kn.ts.parsePesType(i,t.table),s=Kn.ts.parsePayloadUnitStartIndicator(i),"audio"===r&&s&&(a=Kn.ts.parsePesTime(i))&&(a.type="audio",n.audio.push(a),c=!0);if(c)break;o-=Yn,l-=Yn}},Zn=function(e,t,n){for(var i,r,s,a,o,l,c,u=0,d=Yn,h=!1,p={data:[],size:0};d<e.byteLength;)if(e[u]!==Qn||e[d]!==Qn)u++,d++;else{if(i=e.subarray(u,d),"pes"===Kn.ts.parseType(i,t.pid))if(r=Kn.ts.parsePesType(i,t.table),s=Kn.ts.parsePayloadUnitStartIndicator(i),"video"===r&&(s&&!h&&(a=Kn.ts.parsePesTime(i))&&(a.type="video",n.video.push(a),h=!0),!n.firstKeyFrame)){if(s&&0!==p.size){for(o=new Uint8Array(p.size),l=0;p.data.length;)c=p.data.shift(),o.set(c,l),l+=c.byteLength;if(Kn.ts.videoPacketContainsKeyFrame(o)){var f=Kn.ts.parsePesTime(o);f?(n.firstKeyFrame=f,n.firstKeyFrame.type="video"):console.warn("Failed to extract PTS/DTS from PES at first keyframe. This could be an unusual TS segment, or else mux.js did not parse your TS segment correctly. If you know your TS segments do contain PTS/DTS on keyframes please file a bug report! You can try ffprobe to double check for yourself.")}p.size=0}p.data.push(i),p.size+=i.byteLength}if(h&&n.firstKeyFrame)break;u+=Yn,d+=Yn}for(u=(d=e.byteLength)-Yn,h=!1;u>=0;)if(e[u]!==Qn||e[d]!==Qn)u--,d--;else{if(i=e.subarray(u,d),"pes"===Kn.ts.parseType(i,t.pid))r=Kn.ts.parsePesType(i,t.table),s=Kn.ts.parsePayloadUnitStartIndicator(i),"video"===r&&s&&(a=Kn.ts.parsePesTime(i))&&(a.type="video",n.video.push(a),h=!0);if(h)break;u-=Yn,d-=Yn}},ei=function(e){var t={pid:null,table:null},n={};for(var i in function(e,t){for(var n,i=0,r=Yn;r<e.byteLength;)if(e[i]!==Qn||e[r]!==Qn)i++,r++;else{switch(n=e.subarray(i,r),Kn.ts.parseType(n,t.pid)){case"pat":t.pid=Kn.ts.parsePat(n);break;case"pmt":var s=Kn.ts.parsePmt(n);t.table=t.table||{},Object.keys(s).forEach((function(e){t.table[e]=s[e]}))}i+=Yn,r+=Yn}}(e,t),t.table){if(t.table.hasOwnProperty(i))switch(t.table[i]){case zn.H264_STREAM_TYPE:n.video=[],Zn(e,t,n),0===n.video.length&&delete n.video;break;case zn.ADTS_STREAM_TYPE:n.audio=[],Jn(e,t,n),0===n.audio.length&&delete n.audio}}return n},ti=function(e,t){var n;return n=Kn.aac.isLikelyAacData(e)?function(e){for(var t,n=!1,i=0,r=null,s=null,a=0,o=0;e.length-o>=3;){switch(Kn.aac.parseType(e,o)){case"timed-metadata":if(e.length-o<10){n=!0;break}if((a=Kn.aac.parseId3TagSize(e,o))>e.length){n=!0;break}null===s&&(t=e.subarray(o,o+a),s=Kn.aac.parseAacTimestamp(t)),o+=a;break;case"audio":if(e.length-o<7){n=!0;break}if((a=Kn.aac.parseAdtsSize(e,o))>e.length){n=!0;break}null===r&&(t=e.subarray(o,o+a),r=Kn.aac.parseSampleRate(t)),i++,o+=a;break;default:o++}if(n)return null}if(null===r||null===s)return null;var l=Xn/r;return{audio:[{type:"audio",dts:s,pts:s},{type:"audio",dts:s+1024*i*l,pts:s+1024*i*l}]}}(e):ei(e),n&&(n.audio||n.video)?(function(e,t){if(e.audio&&e.audio.length){var n=t;(void 0===n||isNaN(n))&&(n=e.audio[0].dts),e.audio.forEach((function(e){e.dts=Gn(e.dts,n),e.pts=Gn(e.pts,n),e.dtsTime=e.dts/Xn,e.ptsTime=e.pts/Xn}))}if(e.video&&e.video.length){var i=t;if((void 0===i||isNaN(i))&&(i=e.video[0].dts),e.video.forEach((function(e){e.dts=Gn(e.dts,i),e.pts=Gn(e.pts,i),e.dtsTime=e.dts/Xn,e.ptsTime=e.pts/Xn})),e.firstKeyFrame){var r=e.firstKeyFrame;r.dts=Gn(r.dts,i),r.pts=Gn(r.pts,i),r.dtsTime=r.dts/Xn,r.ptsTime=r.pts/Xn}}}(n,t),n):null};class ni{constructor(e,t){this.options=t||{},this.self=e,this.init()}init(){this.transmuxer&&this.transmuxer.dispose(),this.transmuxer=new Jt.Transmuxer(this.options),function(e,t){t.on("data",(function(t){const n=t.initSegment;t.initSegment={data:n.buffer,byteOffset:n.byteOffset,byteLength:n.byteLength};const i=t.data;t.data=i.buffer,e.postMessage({action:"data",segment:t,byteOffset:i.byteOffset,byteLength:i.byteLength},[t.data])})),t.on("done",(function(t){e.postMessage({action:"done"})})),t.on("gopInfo",(function(t){e.postMessage({action:"gopInfo",gopInfo:t})})),t.on("videoSegmentTimingInfo",(function(t){const n={start:{decode:le.videoTsToSeconds(t.start.dts),presentation:le.videoTsToSeconds(t.start.pts)},end:{decode:le.videoTsToSeconds(t.end.dts),presentation:le.videoTsToSeconds(t.end.pts)},baseMediaDecodeTime:le.videoTsToSeconds(t.baseMediaDecodeTime)};t.prependedContentDuration&&(n.prependedContentDuration=le.videoTsToSeconds(t.prependedContentDuration)),e.postMessage({action:"videoSegmentTimingInfo",videoSegmentTimingInfo:n})})),t.on("audioSegmentTimingInfo",(function(t){const n={start:{decode:le.videoTsToSeconds(t.start.dts),presentation:le.videoTsToSeconds(t.start.pts)},end:{decode:le.videoTsToSeconds(t.end.dts),presentation:le.videoTsToSeconds(t.end.pts)},baseMediaDecodeTime:le.videoTsToSeconds(t.baseMediaDecodeTime)};t.prependedContentDuration&&(n.prependedContentDuration=le.videoTsToSeconds(t.prependedContentDuration)),e.postMessage({action:"audioSegmentTimingInfo",audioSegmentTimingInfo:n})})),t.on("id3Frame",(function(t){e.postMessage({action:"id3Frame",id3Frame:t})})),t.on("caption",(function(t){e.postMessage({action:"caption",caption:t})})),t.on("trackinfo",(function(t){e.postMessage({action:"trackinfo",trackInfo:t})})),t.on("audioTimingInfo",(function(t){e.postMessage({action:"audioTimingInfo",audioTimingInfo:{start:le.videoTsToSeconds(t.start),end:le.videoTsToSeconds(t.end)}})})),t.on("videoTimingInfo",(function(t){e.postMessage({action:"videoTimingInfo",videoTimingInfo:{start:le.videoTsToSeconds(t.start),end:le.videoTsToSeconds(t.end)}})})),t.on("log",(function(t){e.postMessage({action:"log",log:t})}))}(this.self,this.transmuxer)}pushMp4Captions(e){this.captionParser||(this.captionParser=new bn,this.captionParser.init());const t=new Uint8Array(e.data,e.byteOffset,e.byteLength),n=this.captionParser.parse(t,e.trackIds,e.timescales);this.self.postMessage({action:"mp4Captions",captions:n&&n.captions||[],logs:n&&n.logs||[],data:t.buffer},[t.buffer])}probeMp4StartTime({timescales:e,data:t}){const n=Un(e,t);this.self.postMessage({action:"probeMp4StartTime",startTime:n,data:t},[t.buffer])}probeMp4Tracks({data:e}){const t=Bn(e);this.self.postMessage({action:"probeMp4Tracks",tracks:t,data:e},[e.buffer])}probeTs({data:e,baseStartTime:t}){const n="number"!=typeof t||isNaN(t)?void 0:t*le.ONE_SECOND_IN_TS,i=ti(e,n);let r=null;i&&(r={hasVideo:i.video&&2===i.video.length||!1,hasAudio:i.audio&&2===i.audio.length||!1},r.hasVideo&&(r.videoStart=i.video[0].ptsTime),r.hasAudio&&(r.audioStart=i.audio[0].ptsTime)),this.self.postMessage({action:"probeTs",result:r,data:e},[e.buffer])}clearAllMp4Captions(){this.captionParser&&this.captionParser.clearAllCaptions()}clearParsedMp4Captions(){this.captionParser&&this.captionParser.clearParsedCaptions()}push(e){const t=new Uint8Array(e.data,e.byteOffset,e.byteLength);this.transmuxer.push(t)}reset(){this.transmuxer.reset()}setTimestampOffset(e){const t=e.timestampOffset||0;this.transmuxer.setBaseMediaDecodeTime(Math.round(le.secondsToVideoTs(t)))}setAudioAppendStart(e){this.transmuxer.setAudioAppendStart(Math.ceil(le.secondsToVideoTs(e.appendStart)))}setRemux(e){this.transmuxer.setRemux(e.remux)}flush(e){this.transmuxer.flush(),self.postMessage({action:"done",type:"transmuxed"})}endTimeline(){this.transmuxer.endTimeline(),self.postMessage({action:"endedtimeline",type:"transmuxed"})}alignGopsWith(e){this.transmuxer.alignGopsWith(e.gopsToAlignWith.slice())}}self.onmessage=function(e){"init"===e.data.action&&e.data.options?this.messageHandlers=new ni(self,e.data.options):(this.messageHandlers||(this.messageHandlers=new ni(self)),e.data&&e.data.action&&"init"!==e.data.action&&this.messageHandlers[e.data.action]&&this.messageHandlers[e.data.action](e.data))}})));var cN=sN(lN);const uN=e=>{const{transmuxer:t,bytes:n,audioAppendStart:i,gopsToAlignWith:r,remux:s,onData:a,onTrackInfo:o,onAudioTimingInfo:l,onVideoTimingInfo:c,onVideoSegmentTimingInfo:u,onAudioSegmentTimingInfo:d,onId3:h,onCaptions:p,onDone:f,onEndedTimeline:m,onTransmuxerLog:g,isEndOfTimeline:y}=e,_={buffer:[]};let v=y;if(t.onmessage=n=>{t.currentTransmux===e&&("data"===n.data.action&&((e,t,n)=>{const{type:i,initSegment:r,captions:s,captionStreams:a,metadata:o,videoFrameDtsTime:l,videoFramePtsTime:c}=e.data.segment;t.buffer.push({captions:s,captionStreams:a,metadata:o});const u=e.data.segment.boxes||{data:e.data.segment.data},d={type:i,data:new Uint8Array(u.data,u.data.byteOffset,u.data.byteLength),initSegment:new Uint8Array(r.data,r.byteOffset,r.byteLength)};void 0!==l&&(d.videoFrameDtsTime=l),void 0!==c&&(d.videoFramePtsTime=c),n(d)})(n,_,a),"trackinfo"===n.data.action&&o(n.data.trackInfo),"gopInfo"===n.data.action&&((e,t)=>{t.gopInfo=e.data.gopInfo})(n,_),"audioTimingInfo"===n.data.action&&l(n.data.audioTimingInfo),"videoTimingInfo"===n.data.action&&c(n.data.videoTimingInfo),"videoSegmentTimingInfo"===n.data.action&&u(n.data.videoSegmentTimingInfo),"audioSegmentTimingInfo"===n.data.action&&d(n.data.audioSegmentTimingInfo),"id3Frame"===n.data.action&&h([n.data.id3Frame],n.data.id3Frame.dispatchType),"caption"===n.data.action&&p(n.data.caption),"endedtimeline"===n.data.action&&(v=!1,m()),"log"===n.data.action&&g(n.data.log),"transmuxed"===n.data.type&&(v||(t.onmessage=null,(({transmuxedData:e,callback:t})=>{e.buffer=[],t(e)})({transmuxedData:_,callback:f}),dN(t))))},i&&t.postMessage({action:"setAudioAppendStart",appendStart:i}),Array.isArray(r)&&t.postMessage({action:"alignGopsWith",gopsToAlignWith:r}),void 0!==s&&t.postMessage({action:"setRemux",remux:s}),n.byteLength){const e=n instanceof ArrayBuffer?n:n.buffer,i=n instanceof ArrayBuffer?0:n.byteOffset;t.postMessage({action:"push",data:e,byteOffset:i,byteLength:n.byteLength},[e])}y&&t.postMessage({action:"endTimeline"}),t.postMessage({action:"flush"})},dN=e=>{e.currentTransmux=null,e.transmuxQueue.length&&(e.currentTransmux=e.transmuxQueue.shift(),"function"==typeof e.currentTransmux?e.currentTransmux():uN(e.currentTransmux))},hN=(e,t)=>{e.postMessage({action:t}),dN(e)},pN=(e,t)=>{if(!t.currentTransmux)return t.currentTransmux=e,void hN(t,e);t.transmuxQueue.push(hN.bind(null,t,e))},fN=e=>{if(!e.transmuxer.currentTransmux)return e.transmuxer.currentTransmux=e,void uN(e);e.transmuxer.transmuxQueue.push(e)};var mN=e=>{pN("reset",e)},gN=e=>{const t=new cN;t.currentTransmux=null,t.transmuxQueue=[];const n=t.terminate;return t.terminate=()=>(t.currentTransmux=null,t.transmuxQueue.length=0,n.call(t)),t.postMessage({action:"init",options:e}),t};const yN=function(e){const t=e.transmuxer,n=e.endAction||e.action,i=e.callback,r=Am({},e,{endAction:null,transmuxer:null,callback:null}),s=r=>{r.data.action===n&&(t.removeEventListener("message",s),r.data.data&&(r.data.data=new Uint8Array(r.data.data,e.byteOffset||0,e.byteLength||r.data.data.byteLength),e.data&&(e.data=r.data.data)),i(r.data))};if(t.addEventListener("message",s),e.data){const n=e.data instanceof ArrayBuffer;r.byteOffset=n?0:e.data.byteOffset,r.byteLength=e.data.byteLength;const i=[n?e.data:e.data.buffer];t.postMessage(r,i)}else t.postMessage(r)},_N=2,vN=-101,bN=-102,TN=e=>{e.forEach((e=>{e.abort()}))},EN=(e,t)=>t.timedout?{status:t.status,message:"HLS request timed-out at URL: "+t.uri,code:vN,xhr:t}:t.aborted?{status:t.status,message:"HLS request aborted at URL: "+t.uri,code:bN,xhr:t}:e?{status:t.status,message:"HLS request errored at URL: "+t.uri,code:_N,xhr:t}:"arraybuffer"===t.responseType&&0===t.response.byteLength?{status:t.status,message:"Empty HLS response at URL: "+t.uri,code:_N,xhr:t}:null,wN=(e,t,n)=>(i,r)=>{const s=r.response,a=EN(i,r);if(a)return n(a,e);if(16!==s.byteLength)return n({status:r.status,message:"Invalid HLS key at URL: "+r.uri,code:_N,xhr:r},e);const o=new DataView(s),l=new Uint32Array([o.getUint32(0),o.getUint32(4),o.getUint32(8),o.getUint32(12)]);for(let e=0;e<t.length;e++)t[e].bytes=l;return n(null,e)},SN=(e,t)=>{const n=DI(e.map.bytes);if("mp4"!==n){const i=e.map.resolvedUri||e.map.uri;return t({internal:!0,message:`Found unsupported ${n||"unknown"} container for initialization segment at URL: ${i}`,code:_N})}yN({action:"probeMp4Tracks",data:e.map.bytes,transmuxer:e.transmuxer,callback:({tracks:n,data:i})=>(e.map.bytes=i,n.forEach((function(t){e.map.tracks=e.map.tracks||{},e.map.tracks[t.type]||(e.map.tracks[t.type]=t,"number"==typeof t.id&&t.timescale&&(e.map.timescales=e.map.timescales||{},e.map.timescales[t.id]=t.timescale))})),t(null))})},CN=({segment:e,finishProcessingFn:t,responseType:n})=>(i,r)=>{const s=EN(i,r);if(s)return t(s,e);const a="arraybuffer"!==n&&r.responseText?(e=>{const t=new Uint8Array(new ArrayBuffer(e.length));for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t.buffer})(r.responseText.substring(e.lastReachedChar||0)):r.response;return e.stats=(e=>({bandwidth:e.bandwidth,bytesReceived:e.bytesReceived||0,roundTripTime:e.roundTripTime||0}))(r),e.key?e.encryptedBytes=new Uint8Array(a):e.bytes=new Uint8Array(a),t(null,e)},IN=({segment:e,bytes:t,trackInfoFn:n,timingInfoFn:i,videoSegmentTimingInfoFn:r,audioSegmentTimingInfoFn:s,id3Fn:a,captionsFn:o,isEndOfTimeline:l,endedTimelineFn:c,dataFn:u,doneFn:d,onTransmuxerLog:h})=>{const p=e.map&&e.map.tracks||{},f=Boolean(p.audio&&p.video);let m=i.bind(null,e,"audio","start");const g=i.bind(null,e,"audio","end");let y=i.bind(null,e,"video","start");const _=i.bind(null,e,"video","end");yN({action:"probeTs",transmuxer:e.transmuxer,data:t,baseStartTime:e.baseStartTime,callback:i=>{e.bytes=t=i.data;const p=i.result;p&&(n(e,{hasAudio:p.hasAudio,hasVideo:p.hasVideo,isMuxed:f}),n=null,p.hasAudio&&!f&&m(p.audioStart),p.hasVideo&&y(p.videoStart),m=null,y=null),fN({bytes:t,transmuxer:e.transmuxer,audioAppendStart:e.audioAppendStart,gopsToAlignWith:e.gopsToAlignWith,remux:f,onData:t=>{t.type="combined"===t.type?"video":t.type,u(e,t)},onTrackInfo:t=>{n&&(f&&(t.isMuxed=!0),n(e,t))},onAudioTimingInfo:e=>{m&&void 0!==e.start&&(m(e.start),m=null),g&&void 0!==e.end&&g(e.end)},onVideoTimingInfo:e=>{y&&void 0!==e.start&&(y(e.start),y=null),_&&void 0!==e.end&&_(e.end)},onVideoSegmentTimingInfo:e=>{r(e)},onAudioSegmentTimingInfo:e=>{s(e)},onId3:(t,n)=>{a(e,t,n)},onCaptions:t=>{o(e,[t])},isEndOfTimeline:l,onEndedTimeline:()=>{c()},onTransmuxerLog:h,onDone:t=>{d&&(t.type="combined"===t.type?"video":t.type,d(null,e,t))}})}})},xN=({segment:e,bytes:t,trackInfoFn:n,timingInfoFn:i,videoSegmentTimingInfoFn:r,audioSegmentTimingInfoFn:s,id3Fn:a,captionsFn:o,isEndOfTimeline:l,endedTimelineFn:c,dataFn:u,doneFn:d,onTransmuxerLog:h})=>{let p=new Uint8Array(t);if(function(e){return fI(e,["moof"]).length>0}(p)){e.isFmp4=!0;const{tracks:r}=e.map,s={isFmp4:!0,hasVideo:!!r.video,hasAudio:!!r.audio};r.audio&&r.audio.codec&&"enca"!==r.audio.codec&&(s.audioCodec=r.audio.codec),r.video&&r.video.codec&&"encv"!==r.video.codec&&(s.videoCodec=r.video.codec),r.video&&r.audio&&(s.isMuxed=!0),n(e,s);const a=t=>{u(e,{data:p,type:s.hasAudio&&!s.isMuxed?"audio":"video"}),t&&t.length&&o(e,t),d(null,e,{})};yN({action:"probeMp4StartTime",timescales:e.map.timescales,data:p,transmuxer:e.transmuxer,callback:({data:n,startTime:o})=>{t=n.buffer,e.bytes=p=n,s.hasAudio&&!s.isMuxed&&i(e,"audio","start",o),s.hasVideo&&i(e,"video","start",o),r.video&&n.byteLength&&e.transmuxer?yN({action:"pushMp4Captions",endAction:"mp4Captions",transmuxer:e.transmuxer,data:p,timescales:e.map.timescales,trackIds:[r.video.id],callback:n=>{t=n.data.buffer,e.bytes=p=n.data,n.logs.forEach((function(e){h(WP(e,{stream:"mp4CaptionParser"}))})),a(n.captions)}}):a()}})}else if(e.transmuxer){if(void 0===e.container&&(e.container=DI(p)),"ts"!==e.container&&"aac"!==e.container)return n(e,{hasAudio:!1,hasVideo:!1}),void d(null,e,{});IN({segment:e,bytes:t,trackInfoFn:n,timingInfoFn:i,videoSegmentTimingInfoFn:r,audioSegmentTimingInfoFn:s,id3Fn:a,captionsFn:o,isEndOfTimeline:l,endedTimelineFn:c,dataFn:u,doneFn:d,onTransmuxerLog:h})}else d(null,e,{})},kN=function({id:e,key:t,encryptedBytes:n,decryptionWorker:i},r){const s=t=>{if(t.data.source===e){i.removeEventListener("message",s);const e=t.data.decrypted;r(new Uint8Array(e.bytes,e.byteOffset,e.byteLength))}};let a;i.addEventListener("message",s),a=t.bytes.slice?t.bytes.slice():new Uint32Array(Array.prototype.slice.call(t.bytes)),i.postMessage(qL({source:e,encrypted:n,key:a,iv:t.iv}),[n.buffer,a.buffer])},AN=({activeXhrs:e,decryptionWorker:t,trackInfoFn:n,timingInfoFn:i,videoSegmentTimingInfoFn:r,audioSegmentTimingInfoFn:s,id3Fn:a,captionsFn:o,isEndOfTimeline:l,endedTimelineFn:c,dataFn:u,doneFn:d,onTransmuxerLog:h})=>{let p=0,f=!1;return(m,g)=>{if(!f){if(m)return f=!0,TN(e),d(m,g);if(p+=1,p===e.length){const p=function(){if(g.encryptedBytes)return(({decryptionWorker:e,segment:t,trackInfoFn:n,timingInfoFn:i,videoSegmentTimingInfoFn:r,audioSegmentTimingInfoFn:s,id3Fn:a,captionsFn:o,isEndOfTimeline:l,endedTimelineFn:c,dataFn:u,doneFn:d,onTransmuxerLog:h})=>{kN({id:t.requestId,key:t.key,encryptedBytes:t.encryptedBytes,decryptionWorker:e},(e=>{t.bytes=e,xN({segment:t,bytes:t.bytes,trackInfoFn:n,timingInfoFn:i,videoSegmentTimingInfoFn:r,audioSegmentTimingInfoFn:s,id3Fn:a,captionsFn:o,isEndOfTimeline:l,endedTimelineFn:c,dataFn:u,doneFn:d,onTransmuxerLog:h})}))})({decryptionWorker:t,segment:g,trackInfoFn:n,timingInfoFn:i,videoSegmentTimingInfoFn:r,audioSegmentTimingInfoFn:s,id3Fn:a,captionsFn:o,isEndOfTimeline:l,endedTimelineFn:c,dataFn:u,doneFn:d,onTransmuxerLog:h});xN({segment:g,bytes:g.bytes,trackInfoFn:n,timingInfoFn:i,videoSegmentTimingInfoFn:r,audioSegmentTimingInfoFn:s,id3Fn:a,captionsFn:o,isEndOfTimeline:l,endedTimelineFn:c,dataFn:u,doneFn:d,onTransmuxerLog:h})};if(g.endOfAllRequests=Date.now(),g.map&&g.map.encryptedBytes&&!g.map.bytes)return kN({decryptionWorker:t,id:g.requestId+"-init",encryptedBytes:g.map.encryptedBytes,key:g.map.key},(t=>{g.map.bytes=t,SN(g,(t=>{if(t)return TN(e),d(t,g);p()}))}));p()}}}},ON=({segment:e,progressFn:t,trackInfoFn:n,timingInfoFn:i,videoSegmentTimingInfoFn:r,audioSegmentTimingInfoFn:s,id3Fn:a,captionsFn:o,isEndOfTimeline:l,endedTimelineFn:c,dataFn:u})=>n=>{if(!n.target.aborted)return e.stats=WP(e.stats,(e=>{const t=e.target,n={bandwidth:1/0,bytesReceived:0,roundTripTime:Date.now()-t.requestTime||0};return n.bytesReceived=e.loaded,n.bandwidth=Math.floor(n.bytesReceived/n.roundTripTime*8*1e3),n})(n)),!e.stats.firstBytesReceivedAt&&e.stats.bytesReceived&&(e.stats.firstBytesReceivedAt=Date.now()),t(n,e)},PN=({xhr:e,xhrOptions:t,decryptionWorker:n,segment:i,abortFn:r,progressFn:s,trackInfoFn:a,timingInfoFn:o,videoSegmentTimingInfoFn:l,audioSegmentTimingInfoFn:c,id3Fn:u,captionsFn:d,isEndOfTimeline:h,endedTimelineFn:p,dataFn:f,doneFn:m,onTransmuxerLog:g})=>{const y=[],_=AN({activeXhrs:y,decryptionWorker:n,trackInfoFn:a,timingInfoFn:o,videoSegmentTimingInfoFn:l,audioSegmentTimingInfoFn:c,id3Fn:u,captionsFn:d,isEndOfTimeline:h,endedTimelineFn:p,dataFn:f,doneFn:m,onTransmuxerLog:g});if(i.key&&!i.key.bytes){const n=[i.key];i.map&&!i.map.bytes&&i.map.key&&i.map.key.resolvedUri===i.key.resolvedUri&&n.push(i.map.key);const r=e(WP(t,{uri:i.key.resolvedUri,responseType:"arraybuffer"}),wN(i,n,_));y.push(r)}if(i.map&&!i.map.bytes){if(i.map.key&&(!i.key||i.key.resolvedUri!==i.map.key.resolvedUri)){const n=e(WP(t,{uri:i.map.key.resolvedUri,responseType:"arraybuffer"}),wN(i,[i.map.key],_));y.push(n)}const n=WP(t,{uri:i.map.resolvedUri,responseType:"arraybuffer",headers:FL(i.map)}),r=(({segment:e,finishProcessingFn:t})=>(n,i)=>{const r=EN(n,i);if(r)return t(r,e);const s=new Uint8Array(i.response);if(e.map.key)return e.map.encryptedBytes=s,t(null,e);e.map.bytes=s,SN(e,(function(n){if(n)return n.xhr=i,n.status=i.status,t(n,e);t(null,e)}))})({segment:i,finishProcessingFn:_}),s=e(n,r);y.push(s)}const v=WP(t,{uri:i.part&&i.part.resolvedUri||i.resolvedUri,responseType:"arraybuffer",headers:FL(i)}),b=e(v,CN({segment:i,finishProcessingFn:_,responseType:v.responseType}));b.addEventListener("progress",ON({segment:i,progressFn:s,trackInfoFn:a,timingInfoFn:o,videoSegmentTimingInfoFn:l,audioSegmentTimingInfoFn:c,id3Fn:u,captionsFn:d,isEndOfTimeline:h,endedTimelineFn:p,dataFn:f})),y.push(b);const T={};return y.forEach((e=>{e.addEventListener("loadend",(({loadendState:e,abortFn:t})=>n=>{n.target.aborted&&t&&!e.calledAbortFn&&(t(),e.calledAbortFn=!0)})({loadendState:T,abortFn:r}))})),()=>TN(y)},LN=$P("CodecUtils"),NN=(e,t)=>{const n=t.attributes||{};return e&&e.mediaGroups&&e.mediaGroups.AUDIO&&n.AUDIO&&e.mediaGroups.AUDIO[n.AUDIO]},DN=function(e){const t={};return e.forEach((({mediaType:e,type:n,details:i})=>{t[e]=t[e]||[],t[e].push(PE(`${n}${i}`))})),Object.keys(t).forEach((function(e){if(t[e].length>1)return LN(`multiple ${e} codecs found as attributes: ${t[e].join(", ")}. Setting playlist codecs to null so that we wait for mux.js to probe segments for real codecs.`),void(t[e]=null);t[e]=t[e][0]})),t},RN=function(e){let t=0;return e.audio&&t++,e.video&&t++,t},MN=function(e,t){const n=t.attributes||{},i=DN(function(e){const t=e.attributes||{};if(t.CODECS)return LE(t.CODECS)}(t)||[]);if(NN(e,t)&&!i.audio&&!((e,t)=>{if(!NN(e,t))return!0;const n=t.attributes||{},i=e.mediaGroups.AUDIO[n.AUDIO];for(const r in i)if(!i[r].uri&&!i[r].playlists)return!0;return!1})(e,t)){const t=DN(function(e,t){if(!e.mediaGroups.AUDIO||!t)return null;var n=e.mediaGroups.AUDIO[t];if(!n)return null;for(var i in n){var r=n[i];if(r.default&&r.playlists)return LE(r.playlists[0].attributes.CODECS)}return null}(e,n.AUDIO)||[]);t.audio&&(i.audio=t.audio)}return i},FN=$P("PlaylistSelector"),UN=function(e){if(!e||!e.playlist)return;const t=e.playlist;return JSON.stringify({id:t.id,bandwidth:e.bandwidth,width:e.width,height:e.height,codecs:t.attributes&&t.attributes.CODECS||""})},BN=function(e,t){if(!e)return"";const n=sT.getComputedStyle(e);return n?n[t]:""},jN=function(e,t){const n=e.slice();e.sort((function(e,i){const r=t(e,i);return 0===r?n.indexOf(e)-n.indexOf(i):r}))},qN=function(e,t){let n,i;return e.attributes.BANDWIDTH&&(n=e.attributes.BANDWIDTH),n=n||sT.Number.MAX_VALUE,t.attributes.BANDWIDTH&&(i=t.attributes.BANDWIDTH),i=i||sT.Number.MAX_VALUE,n-i};let HN=function(e,t,n,i,r,s){if(!e)return;const a={bandwidth:t,width:n,height:i,limitRenditionByPlayerDimensions:r};let o=e.playlists;vL.isAudioOnly(e)&&(o=s.getAudioTrackPlaylists_(),a.audioOnly=!0);let l=o.map((e=>{let t;const n=e.attributes&&e.attributes.RESOLUTION&&e.attributes.RESOLUTION.width,i=e.attributes&&e.attributes.RESOLUTION&&e.attributes.RESOLUTION.height;return t=e.attributes&&e.attributes.BANDWIDTH,t=t||sT.Number.MAX_VALUE,{bandwidth:t,width:n,height:i,playlist:e}}));jN(l,((e,t)=>e.bandwidth-t.bandwidth)),l=l.filter((e=>!vL.isIncompatible(e.playlist)));let c=l.filter((e=>vL.isEnabled(e.playlist)));c.length||(c=l.filter((e=>!vL.isDisabled(e.playlist))));const u=c.filter((e=>e.bandwidth*iN.BANDWIDTH_VARIANCE<t));let d=u[u.length-1];const h=u.filter((e=>e.bandwidth===d.bandwidth))[0];if(!1===r){const e=h||c[0]||l[0];if(e&&e.playlist){let t="sortedPlaylistReps";return h&&(t="bandwidthBestRep"),c[0]&&(t="enabledPlaylistReps"),FN(`choosing ${UN(e)} using ${t} with options`,a),e.playlist}return FN("could not choose a playlist with options",a),null}const p=u.filter((e=>e.width&&e.height));jN(p,((e,t)=>e.width-t.width));const f=p.filter((e=>e.width===n&&e.height===i));d=f[f.length-1];const m=f.filter((e=>e.bandwidth===d.bandwidth))[0];let g,y,_,v;if(m||(g=p.filter((e=>e.width>n||e.height>i)),y=g.filter((e=>e.width===g[0].width&&e.height===g[0].height)),d=y[y.length-1],_=y.filter((e=>e.bandwidth===d.bandwidth))[0]),s.leastPixelDiffSelector){const e=p.map((e=>(e.pixelDiff=Math.abs(e.width-n)+Math.abs(e.height-i),e)));jN(e,((e,t)=>e.pixelDiff===t.pixelDiff?t.bandwidth-e.bandwidth:e.pixelDiff-t.pixelDiff)),v=e[0]}const b=v||_||m||h||c[0]||l[0];if(b&&b.playlist){let e="sortedPlaylistReps";return v?e="leastPixelDiffRep":_?e="resolutionPlusOneRep":m?e="resolutionBestRep":h?e="bandwidthBestRep":c[0]&&(e="enabledPlaylistReps"),FN(`choosing ${UN(b)} using ${e} with options`,a),b.playlist}return FN("could not choose a playlist with options",a),null};const VN=function(){const e=this.useDevicePixelRatio&&sT.devicePixelRatio||1;return HN(this.playlists.main,this.systemBandwidth,parseInt(BN(this.tech_.el(),"width"),10)*e,parseInt(BN(this.tech_.el(),"height"),10)*e,this.limitRenditionByPlayerDimensions,this.playlistController_)},$N=({inbandTextTracks:e,metadataArray:t,timestampOffset:n,videoDuration:i})=>{if(!t)return;const r=sT.WebKitDataCue||sT.VTTCue,s=e.metadataTrack_;if(!s)return;if(t.forEach((e=>{const t=e.cueTime+n;!("number"!=typeof t||sT.isNaN(t)||t<0)&&t<1/0&&e.frames.forEach((e=>{const n=new r(t,t,e.value||e.url||e.data||"");n.frame=e,n.value=e,function(e){Object.defineProperties(e.frame,{id:{get:()=>(MP.log.warn("cue.frame.id is deprecated. Use cue.value.key instead."),e.value.key)},value:{get:()=>(MP.log.warn("cue.frame.value is deprecated. Use cue.value.data instead."),e.value.data)},privateData:{get:()=>(MP.log.warn("cue.frame.privateData is deprecated. Use cue.value.data instead."),e.value.data)}})}(n),s.addCue(n)}))})),!s.cues||!s.cues.length)return;const a=s.cues,o=[];for(let u=0;u<a.length;u++)a[u]&&o.push(a[u]);const l=o.reduce(((e,t)=>{const n=e[t.startTime]||[];return n.push(t),e[t.startTime]=n,e}),{}),c=Object.keys(l).sort(((e,t)=>Number(e)-Number(t)));c.forEach(((e,t)=>{const n=l[e],r=Number(c[t+1])||i;n.forEach((e=>{e.endTime=r}))}))},WN=function(e,t,n){let i,r;if(n&&n.cues)for(i=n.cues.length;i--;)r=n.cues[i],r.startTime>=e&&r.endTime<=t&&n.removeCue(r)},zN=e=>"number"==typeof e&&isFinite(e),GN=1/60,KN=e=>{const{startOfSegment:t,duration:n,segment:i,part:r,playlist:{mediaSequence:s,id:a,segments:o=[]},mediaIndex:l,partIndex:c,timeline:u}=e,d=o.length-1;let h="mediaIndex/partIndex increment";e.getMediaInfoForTime?h=`getMediaInfoForTime (${e.getMediaInfoForTime})`:e.isSyncRequest&&(h="getSyncSegmentCandidate (isSyncRequest)"),e.independent&&(h+=` with independent ${e.independent}`);const p="number"==typeof c,f=e.segment.uri?"segment":"pre-segment",m=p?sL({preloadSegment:i})-1:0;return`${f} [${s+l}/${s+d}]`+(p?` part [${c}/${m}]`:"")+` segment start/end [${i.start} => ${i.end}]`+(p?` part start/end [${r.start} => ${r.end}]`:"")+` startOfSegment [${t}]`+` duration [${n}]`+` timeline [${u}]`+` selected by [${h}]`+` playlist [${a}]`},XN=e=>`${e}TimingInfo`,YN=({timelineChangeController:e,currentTimeline:t,segmentTimeline:n,loaderType:i,audioDisabled:r})=>{if(t===n)return!1;if("audio"===i){const t=e.lastTimelineChange({type:"main"});return!t||t.to!==n}if("main"===i&&r){const t=e.pendingTimelineChange({type:"audio"});return!t||t.to!==n}return!1},QN=({segmentDuration:e,maxDuration:t})=>!!e&&Math.round(e)>t+GP,JN=(e,t)=>{if("hls"!==t)return null;const n=(e=>{let t=0;return["video","audio"].forEach((function(n){const i=e[`${n}TimingInfo`];if(!i)return;const{start:r,end:s}=i;let a;"bigint"==typeof r||"bigint"==typeof s?a=sT.BigInt(s)-sT.BigInt(r):"number"==typeof r&&"number"==typeof s&&(a=s-r),void 0!==a&&a>t&&(t=a)})),"bigint"==typeof t&&t<Number.MAX_SAFE_INTEGER&&(t=Number(t)),t})({audioTimingInfo:e.audioTimingInfo,videoTimingInfo:e.videoTimingInfo});if(!n)return null;const i=e.playlist.targetDuration,r=QN({segmentDuration:n,maxDuration:2*i}),s=QN({segmentDuration:n,maxDuration:i}),a=`Segment with index ${e.mediaIndex} from playlist ${e.playlist.id} has a duration of ${n} when the reported duration is ${e.duration} and the target duration is ${i}. For HLS content, a duration in excess of the target duration may result in playback issues. See the HLS specification section on EXT-X-TARGETDURATION for more details: https://tools.ietf.org/html/draft-pantos-http-live-streaming-23#section-4.3.3.1`;return r||s?{severity:r?"warn":"info",message:a}:null};class ZN extends MP.EventTarget{constructor(e,t={}){if(super(),!e)throw new TypeError("Initialization settings are required");if("function"!=typeof e.currentTime)throw new TypeError("No currentTime getter specified");if(!e.mediaSource)throw new TypeError("No MediaSource specified");this.bandwidth=e.bandwidth,this.throughput={rate:0,count:0},this.roundTrip=NaN,this.resetStats_(),this.mediaIndex=null,this.partIndex=null,this.hasPlayed_=e.hasPlayed,this.currentTime_=e.currentTime,this.seekable_=e.seekable,this.seeking_=e.seeking,this.duration_=e.duration,this.mediaSource_=e.mediaSource,this.vhs_=e.vhs,this.loaderType_=e.loaderType,this.currentMediaInfo_=void 0,this.startingMediaInfo_=void 0,this.segmentMetadataTrack_=e.segmentMetadataTrack,this.goalBufferLength_=e.goalBufferLength,this.sourceType_=e.sourceType,this.sourceUpdater_=e.sourceUpdater,this.inbandTextTracks_=e.inbandTextTracks,this.state_="INIT",this.timelineChangeController_=e.timelineChangeController,this.shouldSaveSegmentTimingInfo_=!0,this.parse708captions_=e.parse708captions,this.useDtsForTimestampOffset_=e.useDtsForTimestampOffset,this.captionServices_=e.captionServices,this.exactManifestTimings=e.exactManifestTimings,this.checkBufferTimeout_=null,this.error_=void 0,this.currentTimeline_=-1,this.pendingSegment_=null,this.xhrOptions_=null,this.pendingSegments_=[],this.audioDisabled_=!1,this.isPendingTimestampOffset_=!1,this.gopBuffer_=[],this.timeMapping_=0,this.safeAppend_=MP.browser.IE_VERSION>=11,this.appendInitSegment_={audio:!0,video:!0},this.playlistOfLastInitSegment_={audio:null,video:null},this.callQueue_=[],this.loadQueue_=[],this.metadataQueue_={id3:[],caption:[]},this.waitingOnRemove_=!1,this.quotaExceededErrorRetryTimeout_=null,this.activeInitSegmentId_=null,this.initSegments_={},this.cacheEncryptionKeys_=e.cacheEncryptionKeys,this.keyCache_={},this.decrypter_=e.decrypter,this.syncController_=e.syncController,this.syncPoint_={segmentIndex:0,time:0},this.transmuxer_=this.createTransmuxer_(),this.triggerSyncInfoUpdate_=()=>this.trigger("syncinfoupdate"),this.syncController_.on("syncinfoupdate",this.triggerSyncInfoUpdate_),this.mediaSource_.addEventListener("sourceopen",(()=>{this.isEndOfStream_()||(this.ended_=!1)})),this.fetchAtBuffer_=!1,this.logger_=$P(`SegmentLoader[${this.loaderType_}]`),Object.defineProperty(this,"state",{get(){return this.state_},set(e){e!==this.state_&&(this.logger_(`${this.state_} -> ${e}`),this.state_=e,this.trigger("statechange"))}}),this.sourceUpdater_.on("ready",(()=>{this.hasEnoughInfoToAppend_()&&this.processCallQueue_()})),"main"===this.loaderType_&&this.timelineChangeController_.on("pendingtimelinechange",(()=>{this.hasEnoughInfoToAppend_()&&this.processCallQueue_()})),"audio"===this.loaderType_&&this.timelineChangeController_.on("timelinechange",(()=>{this.hasEnoughInfoToLoad_()&&this.processLoadQueue_(),this.hasEnoughInfoToAppend_()&&this.processCallQueue_()}))}createTransmuxer_(){return gN({remux:!1,alignGopsAtEnd:this.safeAppend_,keepOriginalTimestamps:!0,parse708captions:this.parse708captions_,captionServices:this.captionServices_})}resetStats_(){this.mediaBytesTransferred=0,this.mediaRequests=0,this.mediaRequestsAborted=0,this.mediaRequestsTimedout=0,this.mediaRequestsErrored=0,this.mediaTransferDuration=0,this.mediaSecondsLoaded=0,this.mediaAppends=0}dispose(){this.trigger("dispose"),this.state="DISPOSED",this.pause(),this.abort_(),this.transmuxer_&&this.transmuxer_.terminate(),this.resetStats_(),this.checkBufferTimeout_&&sT.clearTimeout(this.checkBufferTimeout_),this.syncController_&&this.triggerSyncInfoUpdate_&&this.syncController_.off("syncinfoupdate",this.triggerSyncInfoUpdate_),this.off()}setAudio(e){this.audioDisabled_=!e,e?this.appendInitSegment_.audio=!0:this.sourceUpdater_.removeAudio(0,this.duration_())}abort(){"WAITING"===this.state?(this.abort_(),this.state="READY",this.paused()||this.monitorBuffer_()):this.pendingSegment_&&(this.pendingSegment_=null)}abort_(){this.pendingSegment_&&this.pendingSegment_.abortRequests&&this.pendingSegment_.abortRequests(),this.pendingSegment_=null,this.callQueue_=[],this.loadQueue_=[],this.metadataQueue_.id3=[],this.metadataQueue_.caption=[],this.timelineChangeController_.clearPendingTimelineChange(this.loaderType_),this.waitingOnRemove_=!1,sT.clearTimeout(this.quotaExceededErrorRetryTimeout_),this.quotaExceededErrorRetryTimeout_=null}checkForAbort_(e){return"APPENDING"!==this.state||this.pendingSegment_?!this.pendingSegment_||this.pendingSegment_.requestId!==e:(this.state="READY",!0)}error(e){return void 0!==e&&(this.logger_("error occurred:",e),this.error_=e),this.pendingSegment_=null,this.error_}endOfStream(){this.ended_=!0,this.transmuxer_&&mN(this.transmuxer_),this.gopBuffer_.length=0,this.pause(),this.trigger("ended")}buffered_(){const e=this.getMediaInfo_();if(!this.sourceUpdater_||!e)return zP();if("main"===this.loaderType_){const{hasAudio:t,hasVideo:n,isMuxed:i}=e;if(n&&t&&!this.audioDisabled_&&!i)return this.sourceUpdater_.buffered();if(n)return this.sourceUpdater_.videoBuffered()}return this.sourceUpdater_.audioBuffered()}initSegmentForMap(e,t=!1){if(!e)return null;const n=HL(e);let i=this.initSegments_[n];return t&&!i&&e.bytes&&(this.initSegments_[n]=i={resolvedUri:e.resolvedUri,byterange:e.byterange,bytes:e.bytes,tracks:e.tracks,timescales:e.timescales}),i||e}segmentKey(e,t=!1){if(!e)return null;const n=VL(e);let i=this.keyCache_[n];this.cacheEncryptionKeys_&&t&&!i&&e.bytes&&(this.keyCache_[n]=i={resolvedUri:e.resolvedUri,bytes:e.bytes});const r={resolvedUri:(i||e).resolvedUri};return i&&(r.bytes=i.bytes),r}couldBeginLoading_(){return this.playlist_&&!this.paused()}load(){if(this.monitorBuffer_(),this.playlist_)return"INIT"===this.state&&this.couldBeginLoading_()?this.init_():void(!this.couldBeginLoading_()||"READY"!==this.state&&"INIT"!==this.state||(this.state="READY"))}init_(){return this.state="READY",this.resetEverything(),this.monitorBuffer_()}playlist(e,t={}){if(!e)return;const n=this.playlist_,i=this.pendingSegment_;this.playlist_=e,this.xhrOptions_=t,"INIT"===this.state&&(e.syncInfo={mediaSequence:e.mediaSequence,time:0},"main"===this.loaderType_&&this.syncController_.setDateTimeMappingForStart(e));let r=null;if(n&&(n.id?r=n.id:n.uri&&(r=n.uri)),this.logger_(`playlist update [${r} => ${e.id||e.uri}]`),this.trigger("syncinfoupdate"),"INIT"===this.state&&this.couldBeginLoading_())return this.init_();if(!n||n.uri!==e.uri)return null!==this.mediaIndex&&(e.endList?this.resyncLoader():this.resetLoader()),this.currentMediaInfo_=void 0,void this.trigger("playlistupdate");const s=e.mediaSequence-n.mediaSequence;if(this.logger_(`live window shift [${s}]`),null!==this.mediaIndex)if(this.mediaIndex-=s,this.mediaIndex<0)this.mediaIndex=null,this.partIndex=null;else{const e=this.playlist_.segments[this.mediaIndex];if(this.partIndex&&(!e.parts||!e.parts.length||!e.parts[this.partIndex])){const e=this.mediaIndex;this.logger_(`currently processing part (index ${this.partIndex}) no longer exists.`),this.resetLoader(),this.mediaIndex=e}}i&&(i.mediaIndex-=s,i.mediaIndex<0?(i.mediaIndex=null,i.partIndex=null):(i.mediaIndex>=0&&(i.segment=e.segments[i.mediaIndex]),i.partIndex>=0&&i.segment.parts&&(i.part=i.segment.parts[i.partIndex]))),this.syncController_.saveExpiredSegmentInfo(n,e)}pause(){this.checkBufferTimeout_&&(sT.clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=null)}paused(){return null===this.checkBufferTimeout_}resetEverything(e){this.ended_=!1,this.activeInitSegmentId_=null,this.appendInitSegment_={audio:!0,video:!0},this.resetLoader(),this.remove(0,1/0,e),this.transmuxer_&&(this.transmuxer_.postMessage({action:"clearAllMp4Captions"}),this.transmuxer_.postMessage({action:"reset"}))}resetLoader(){this.fetchAtBuffer_=!1,this.resyncLoader()}resyncLoader(){this.transmuxer_&&mN(this.transmuxer_),this.mediaIndex=null,this.partIndex=null,this.syncPoint_=null,this.isPendingTimestampOffset_=!1,this.callQueue_=[],this.loadQueue_=[],this.metadataQueue_.id3=[],this.metadataQueue_.caption=[],this.abort(),this.transmuxer_&&this.transmuxer_.postMessage({action:"clearParsedMp4Captions"})}remove(e,t,n=(()=>{}),i=!1){if(t===1/0&&(t=this.duration_()),t<=e)return void this.logger_("skipping remove because end ${end} is <= start ${start}");if(!this.sourceUpdater_||!this.getMediaInfo_())return void this.logger_("skipping remove because no source updater or starting media info");let r=1;const s=()=>{r--,0===r&&n()};!i&&this.audioDisabled_||(r++,this.sourceUpdater_.removeAudio(e,t,s)),(i||"main"===this.loaderType_)&&(this.gopBuffer_=((e,t,n,i)=>{const r=Math.ceil((t-i)*MI),s=Math.ceil((n-i)*MI),a=e.slice();let o=e.length;for(;o--&&!(e[o].pts<=s););if(-1===o)return a;let l=o+1;for(;l--&&!(e[l].pts<=r););return l=Math.max(l,0),a.splice(l,o-l+1),a})(this.gopBuffer_,e,t,this.timeMapping_),r++,this.sourceUpdater_.removeVideo(e,t,s));for(const a in this.inbandTextTracks_)WN(e,t,this.inbandTextTracks_[a]);WN(e,t,this.segmentMetadataTrack_),s()}monitorBuffer_(){this.checkBufferTimeout_&&sT.clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=sT.setTimeout(this.monitorBufferTick_.bind(this),1)}monitorBufferTick_(){"READY"===this.state&&this.fillBuffer_(),this.checkBufferTimeout_&&sT.clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=sT.setTimeout(this.monitorBufferTick_.bind(this),500)}fillBuffer_(){if(this.sourceUpdater_.updating())return;const e=this.chooseNextRequest_();e&&("number"==typeof e.timestampOffset&&(this.isPendingTimestampOffset_=!1,this.timelineChangeController_.pendingTimelineChange({type:this.loaderType_,from:this.currentTimeline_,to:e.timeline})),this.loadSegment_(e))}isEndOfStream_(e=this.mediaIndex,t=this.playlist_,n=this.partIndex){if(!t||!this.mediaSource_)return!1;const i="number"==typeof e&&t.segments[e],r=e+1===t.segments.length,s=!i||!i.parts||n+1===i.parts.length;return t.endList&&"open"===this.mediaSource_.readyState&&r&&s}chooseNextRequest_(){const e=this.buffered_(),t=eL(e)||0,n=tL(e,this.currentTime_()),i=!this.hasPlayed_()&&n>=1,r=n>=this.goalBufferLength_(),s=this.playlist_.segments;if(!s.length||i||r)return null;this.syncPoint_=this.syncPoint_||this.syncController_.getSyncPoint(this.playlist_,this.duration_(),this.currentTimeline_,this.currentTime_());const a={partIndex:null,mediaIndex:null,startOfSegment:null,playlist:this.playlist_,isSyncRequest:Boolean(!this.syncPoint_)};if(a.isSyncRequest)a.mediaIndex=function(e,t,n){t=t||[];const i=[];let r=0;for(let s=0;s<t.length;s++){const a=t[s];if(e===a.timeline&&(i.push(s),r+=a.duration,r>n))return s}return 0===i.length?0:i[i.length-1]}(this.currentTimeline_,s,t);else if(null!==this.mediaIndex){const e=s[this.mediaIndex],n="number"==typeof this.partIndex?this.partIndex:-1;a.startOfSegment=e.end?e.end:t,e.parts&&e.parts[n+1]?(a.mediaIndex=this.mediaIndex,a.partIndex=n+1):a.mediaIndex=this.mediaIndex+1}else{const{segmentIndex:e,startTime:n,partIndex:i}=vL.getMediaInfoForTime({exactManifestTimings:this.exactManifestTimings,playlist:this.playlist_,currentTime:this.fetchAtBuffer_?t:this.currentTime_(),startingPartIndex:this.syncPoint_.partIndex,startingSegmentIndex:this.syncPoint_.segmentIndex,startTime:this.syncPoint_.time});a.getMediaInfoForTime=this.fetchAtBuffer_?`bufferedEnd ${t}`:`currentTime ${this.currentTime_()}`,a.mediaIndex=e,a.startOfSegment=n,a.partIndex=i}const o=s[a.mediaIndex];let l=o&&"number"==typeof a.partIndex&&o.parts&&o.parts[a.partIndex];if(!o||"number"==typeof a.partIndex&&!l)return null;if("number"!=typeof a.partIndex&&o.parts&&(a.partIndex=0,l=o.parts[0]),!n&&l&&!l.independent)if(0===a.partIndex){const e=s[a.mediaIndex-1],t=e.parts&&e.parts.length&&e.parts[e.parts.length-1];t&&t.independent&&(a.mediaIndex-=1,a.partIndex=e.parts.length-1,a.independent="previous segment")}else o.parts[a.partIndex-1].independent&&(a.partIndex-=1,a.independent="previous part");const c=this.mediaSource_&&"ended"===this.mediaSource_.readyState;return a.mediaIndex>=s.length-1&&c&&!this.seeking_()?null:this.generateSegmentInfo_(a)}generateSegmentInfo_(e){const{independent:t,playlist:n,mediaIndex:i,startOfSegment:r,isSyncRequest:s,partIndex:a,forceTimestampOffset:o,getMediaInfoForTime:l}=e,c=n.segments[i],u="number"==typeof a&&c.parts[a],d={requestId:"segment-loader-"+Math.random(),uri:u&&u.resolvedUri||c.resolvedUri,mediaIndex:i,partIndex:u?a:null,isSyncRequest:s,startOfSegment:r,playlist:n,bytes:null,encryptedBytes:null,timestampOffset:null,timeline:c.timeline,duration:u&&u.duration||c.duration,segment:c,part:u,byteLength:0,transmuxer:this.transmuxer_,getMediaInfoForTime:l,independent:t},h=void 0!==o?o:this.isPendingTimestampOffset_;d.timestampOffset=this.timestampOffsetForSegment_({segmentTimeline:c.timeline,currentTimeline:this.currentTimeline_,startOfSegment:r,buffered:this.buffered_(),overrideCheck:h});const p=eL(this.sourceUpdater_.audioBuffered());return"number"==typeof p&&(d.audioAppendStart=p-this.sourceUpdater_.audioTimestampOffset()),this.sourceUpdater_.videoBuffered().length&&(d.gopsToAlignWith=((e,t,n)=>{if(null==t||!e.length)return[];const i=Math.ceil((t-n+3)*MI);let r;for(r=0;r<e.length&&!(e[r].pts>i);r++);return e.slice(r)})(this.gopBuffer_,this.currentTime_()-this.sourceUpdater_.videoTimestampOffset(),this.timeMapping_)),d}timestampOffsetForSegment_(e){return(({segmentTimeline:e,currentTimeline:t,startOfSegment:n,buffered:i,overrideCheck:r})=>r||e!==t?e<t?n:i.length?i.end(i.length-1):n:null)(e)}earlyAbortWhenNeeded_(e){if(this.vhs_.tech_.paused()||!this.xhrOptions_.timeout||!this.playlist_.attributes.BANDWIDTH)return;if(Date.now()-(e.firstBytesReceivedAt||Date.now())<1e3)return;const t=this.currentTime_(),n=e.bandwidth,i=this.pendingSegment_.duration,r=vL.estimateSegmentRequestTime(i,n,this.playlist_,e.bytesReceived),s=function(e,t,n=1){return((e.length?e.end(e.length-1):0)-t)/n}(this.buffered_(),t,this.vhs_.tech_.playbackRate())-1;if(r<=s)return;const a=function(e){const{main:t,currentTime:n,bandwidth:i,duration:r,segmentDuration:s,timeUntilRebuffer:a,currentTimeline:o,syncController:l}=e,c=t.playlists.filter((e=>!vL.isIncompatible(e)));let u=c.filter(vL.isEnabled);u.length||(u=c.filter((e=>!vL.isDisabled(e))));const d=u.filter(vL.hasAttribute.bind(null,"BANDWIDTH")).map((e=>{const t=l.getSyncPoint(e,r,o,n)?1:2;return{playlist:e,rebufferingImpact:vL.estimateSegmentRequestTime(s,i,e)*t-a}})),h=d.filter((e=>e.rebufferingImpact<=0));return jN(h,((e,t)=>qN(t.playlist,e.playlist))),h.length?h[0]:(jN(d,((e,t)=>e.rebufferingImpact-t.rebufferingImpact)),d[0]||null)}({main:this.vhs_.playlists.main,currentTime:t,bandwidth:n,duration:this.duration_(),segmentDuration:i,timeUntilRebuffer:s,currentTimeline:this.currentTimeline_,syncController:this.syncController_});if(!a)return;const o=r-s-a.rebufferingImpact;let l=.5;s<=GP&&(l=1),!a.playlist||a.playlist.uri===this.playlist_.uri||o<l||(this.bandwidth=a.playlist.attributes.BANDWIDTH*iN.BANDWIDTH_VARIANCE+1,this.trigger("earlyabort"))}handleAbort_(e){this.logger_(`Aborting ${KN(e)}`),this.mediaRequestsAborted+=1}handleProgress_(e,t){this.earlyAbortWhenNeeded_(t.stats),this.checkForAbort_(t.requestId)||this.trigger("progress")}handleTrackInfo_(e,t){this.earlyAbortWhenNeeded_(e.stats),this.checkForAbort_(e.requestId)||this.checkForIllegalMediaSwitch(t)||(t=t||{},function(e,t){if(!e&&!t||!e&&t||e&&!t)return!1;if(e===t)return!0;const n=Object.keys(e).sort(),i=Object.keys(t).sort();if(n.length!==i.length)return!1;for(let r=0;r<n.length;r++){const s=n[r];if(s!==i[r])return!1;if(e[s]!==t[s])return!1}return!0}(this.currentMediaInfo_,t)||(this.appendInitSegment_={audio:!0,video:!0},this.startingMediaInfo_=t,this.currentMediaInfo_=t,this.logger_("trackinfo update",t),this.trigger("trackinfo")),this.checkForAbort_(e.requestId)||(this.pendingSegment_.trackInfo=t,this.hasEnoughInfoToAppend_()&&this.processCallQueue_()))}handleTimingInfo_(e,t,n,i){if(this.earlyAbortWhenNeeded_(e.stats),this.checkForAbort_(e.requestId))return;const r=this.pendingSegment_,s=XN(t);r[s]=r[s]||{},r[s][n]=i,this.logger_(`timinginfo: ${t} - ${n} - ${i}`),this.hasEnoughInfoToAppend_()&&this.processCallQueue_()}handleCaptions_(e,t){if(this.earlyAbortWhenNeeded_(e.stats),this.checkForAbort_(e.requestId))return;if(0===t.length)return void this.logger_("SegmentLoader received no captions from a caption event");if(!this.pendingSegment_.hasAppendedData_)return void this.metadataQueue_.caption.push(this.handleCaptions_.bind(this,e,t));const n=null===this.sourceUpdater_.videoTimestampOffset()?this.sourceUpdater_.audioTimestampOffset():this.sourceUpdater_.videoTimestampOffset(),i={};t.forEach((e=>{i[e.stream]=i[e.stream]||{startTime:1/0,captions:[],endTime:0};const t=i[e.stream];t.startTime=Math.min(t.startTime,e.startTime+n),t.endTime=Math.max(t.endTime,e.endTime+n),t.captions.push(e)})),Object.keys(i).forEach((e=>{const{startTime:t,endTime:r,captions:s}=i[e],a=this.inbandTextTracks_;this.logger_(`adding cues from ${t} -> ${r} for ${e}`),function(e,t,n){if(!e[n]){t.trigger({type:"usage",name:"vhs-608"});let i=n;/^cc708_/.test(n)&&(i="SERVICE"+n.split("_")[1]);const r=t.textTracks().getTrackById(i);if(r)e[n]=r;else{let r=n,s=n,a=!1;const o=(t.options_.vhs&&t.options_.vhs.captionServices||{})[i];o&&(r=o.label,s=o.language,a=o.default),e[n]=t.addRemoteTextTrack({kind:"captions",id:i,default:a,label:r,language:s},!1).track}}}(a,this.vhs_.tech_,e),WN(t,r,a[e]),function({inbandTextTracks:e,captionArray:t,timestampOffset:n}){if(!t)return;const i=sT.WebKitDataCue||sT.VTTCue;t.forEach((t=>{const r=t.stream;e[r].addCue(new i(t.startTime+n,t.endTime+n,t.text))}))}({captionArray:s,inbandTextTracks:a,timestampOffset:n})})),this.transmuxer_&&this.transmuxer_.postMessage({action:"clearParsedMp4Captions"})}handleId3_(e,t,n){if(this.earlyAbortWhenNeeded_(e.stats),this.checkForAbort_(e.requestId))return;if(!this.pendingSegment_.hasAppendedData_)return void this.metadataQueue_.id3.push(this.handleId3_.bind(this,e,t,n));const i=null===this.sourceUpdater_.videoTimestampOffset()?this.sourceUpdater_.audioTimestampOffset():this.sourceUpdater_.videoTimestampOffset();((e,t,n)=>{e.metadataTrack_||(e.metadataTrack_=n.addRemoteTextTrack({kind:"metadata",label:"Timed Metadata"},!1).track,e.metadataTrack_.inBandMetadataTrackDispatchType=t)})(this.inbandTextTracks_,n,this.vhs_.tech_),$N({inbandTextTracks:this.inbandTextTracks_,metadataArray:t,timestampOffset:i,videoDuration:this.duration_()})}processMetadataQueue_(){this.metadataQueue_.id3.forEach((e=>e())),this.metadataQueue_.caption.forEach((e=>e())),this.metadataQueue_.id3=[],this.metadataQueue_.caption=[]}processCallQueue_(){const e=this.callQueue_;this.callQueue_=[],e.forEach((e=>e()))}processLoadQueue_(){const e=this.loadQueue_;this.loadQueue_=[],e.forEach((e=>e()))}hasEnoughInfoToLoad_(){if("audio"!==this.loaderType_)return!0;const e=this.pendingSegment_;return!!e&&(!this.getCurrentMediaInfo_()||!YN({timelineChangeController:this.timelineChangeController_,currentTimeline:this.currentTimeline_,segmentTimeline:e.timeline,loaderType:this.loaderType_,audioDisabled:this.audioDisabled_}))}getCurrentMediaInfo_(e=this.pendingSegment_){return e&&e.trackInfo||this.currentMediaInfo_}getMediaInfo_(e=this.pendingSegment_){return this.getCurrentMediaInfo_(e)||this.startingMediaInfo_}getPendingSegmentPlaylist(){return this.pendingSegment_?this.pendingSegment_.playlist:null}hasEnoughInfoToAppend_(){if(!this.sourceUpdater_.ready())return!1;if(this.waitingOnRemove_||this.quotaExceededErrorRetryTimeout_)return!1;const e=this.pendingSegment_,t=this.getCurrentMediaInfo_();if(!e||!t)return!1;const{hasAudio:n,hasVideo:i,isMuxed:r}=t;return!(i&&!e.videoTimingInfo)&&(!(n&&!this.audioDisabled_&&!r&&!e.audioTimingInfo)&&!YN({timelineChangeController:this.timelineChangeController_,currentTimeline:this.currentTimeline_,segmentTimeline:e.timeline,loaderType:this.loaderType_,audioDisabled:this.audioDisabled_}))}handleData_(e,t){if(this.earlyAbortWhenNeeded_(e.stats),this.checkForAbort_(e.requestId))return;if(this.callQueue_.length||!this.hasEnoughInfoToAppend_())return void this.callQueue_.push(this.handleData_.bind(this,e,t));const n=this.pendingSegment_;if(this.setTimeMapping_(n.timeline),this.updateMediaSecondsLoaded_(n.part||n.segment),"closed"!==this.mediaSource_.readyState){if(e.map&&(e.map=this.initSegmentForMap(e.map,!0),n.segment.map=e.map),e.key&&this.segmentKey(e.key,!0),n.isFmp4=e.isFmp4,n.timingInfo=n.timingInfo||{},n.isFmp4)this.trigger("fmp4"),n.timingInfo.start=n[XN(t.type)].start;else{const e=this.getCurrentMediaInfo_(),t="main"===this.loaderType_&&e&&e.hasVideo;let i;t&&(i=n.videoTimingInfo.start),n.timingInfo.start=this.trueSegmentStart_({currentStart:n.timingInfo.start,playlist:n.playlist,mediaIndex:n.mediaIndex,currentVideoTimestampOffset:this.sourceUpdater_.videoTimestampOffset(),useVideoTimingInfo:t,firstVideoFrameTimeForData:i,videoTimingInfo:n.videoTimingInfo,audioTimingInfo:n.audioTimingInfo})}if(this.updateAppendInitSegmentStatus(n,t.type),this.updateSourceBufferTimestampOffset_(n),n.isSyncRequest){this.updateTimingInfoEnd_(n),this.syncController_.saveSegmentTimingInfo({segmentInfo:n,shouldSaveTimelineMapping:"main"===this.loaderType_});const e=this.chooseNextRequest_();if(e.mediaIndex!==n.mediaIndex||e.partIndex!==n.partIndex)return void this.logger_("sync segment was incorrect, not appending");this.logger_("sync segment was correct, appending")}n.hasAppendedData_=!0,this.processMetadataQueue_(),this.appendData_(n,t)}}updateAppendInitSegmentStatus(e,t){"main"!==this.loaderType_||"number"!=typeof e.timestampOffset||e.changedTimestampOffset||(this.appendInitSegment_={audio:!0,video:!0}),this.playlistOfLastInitSegment_[t]!==e.playlist&&(this.appendInitSegment_[t]=!0)}getInitSegmentAndUpdateState_({type:e,initSegment:t,map:n,playlist:i}){if(n){const e=HL(n);if(this.activeInitSegmentId_===e)return null;t=this.initSegmentForMap(n,!0).bytes,this.activeInitSegmentId_=e}return t&&this.appendInitSegment_[e]?(this.playlistOfLastInitSegment_[e]=i,this.appendInitSegment_[e]=!1,this.activeInitSegmentId_=null,t):null}handleQuotaExceededError_({segmentInfo:e,type:t,bytes:n},i){const r=this.sourceUpdater_.audioBuffered(),s=this.sourceUpdater_.videoBuffered();r.length>1&&this.logger_("On QUOTA_EXCEEDED_ERR, found gaps in the audio buffer: "+ZP(r).join(", ")),s.length>1&&this.logger_("On QUOTA_EXCEEDED_ERR, found gaps in the video buffer: "+ZP(s).join(", "));const a=r.length?r.start(0):0,o=r.length?r.end(r.length-1):0,l=s.length?s.start(0):0,c=s.length?s.end(s.length-1):0;if(o-a<=1&&c-l<=1)return this.logger_(`On QUOTA_EXCEEDED_ERR, single segment too large to append to buffer, triggering an error. Appended byte length: ${n.byteLength}, audio buffer: ${ZP(r).join(", ")}, video buffer: ${ZP(s).join(", ")}, `),this.error({message:"Quota exceeded error with append of a single segment of content",excludeUntil:1/0}),void this.trigger("error");this.waitingOnRemove_=!0,this.callQueue_.push(this.appendToSourceBuffer_.bind(this,{segmentInfo:e,type:t,bytes:n}));const u=this.currentTime_()-1;this.logger_(`On QUOTA_EXCEEDED_ERR, removing audio/video from 0 to ${u}`),this.remove(0,u,(()=>{this.logger_("On QUOTA_EXCEEDED_ERR, retrying append in 1s"),this.waitingOnRemove_=!1,this.quotaExceededErrorRetryTimeout_=sT.setTimeout((()=>{this.logger_("On QUOTA_EXCEEDED_ERR, re-processing call queue"),this.quotaExceededErrorRetryTimeout_=null,this.processCallQueue_()}),1e3)}),!0)}handleAppendError_({segmentInfo:e,type:t,bytes:n},i){i&&(22!==i.code?(this.logger_("Received non QUOTA_EXCEEDED_ERR on append",i),this.error(`${t} append of ${n.length}b failed for segment #${e.mediaIndex} in playlist ${e.playlist.id}`),this.trigger("appenderror")):this.handleQuotaExceededError_({segmentInfo:e,type:t,bytes:n}))}appendToSourceBuffer_({segmentInfo:e,type:t,initSegment:n,data:i,bytes:r}){if(!r){const e=[i];let t=i.byteLength;n&&(e.unshift(n),t+=n.byteLength),r=(e=>{let t,n=0;return e.bytes&&(t=new Uint8Array(e.bytes),e.segments.forEach((e=>{t.set(e,n),n+=e.byteLength}))),t})({bytes:t,segments:e})}this.sourceUpdater_.appendBuffer({segmentInfo:e,type:t,bytes:r},this.handleAppendError_.bind(this,{segmentInfo:e,type:t,bytes:r}))}handleSegmentTimingInfo_(e,t,n){if(!this.pendingSegment_||t!==this.pendingSegment_.requestId)return;const i=this.pendingSegment_.segment,r=`${e}TimingInfo`;i[r]||(i[r]={}),i[r].transmuxerPrependedSeconds=n.prependedContentDuration||0,i[r].transmuxedPresentationStart=n.start.presentation,i[r].transmuxedDecodeStart=n.start.decode,i[r].transmuxedPresentationEnd=n.end.presentation,i[r].transmuxedDecodeEnd=n.end.decode,i[r].baseMediaDecodeTime=n.baseMediaDecodeTime}appendData_(e,t){const{type:n,data:i}=t;if(!i||!i.byteLength)return;if("audio"===n&&this.audioDisabled_)return;const r=this.getInitSegmentAndUpdateState_({type:n,initSegment:t.initSegment,playlist:e.playlist,map:e.isFmp4?e.segment.map:null});this.appendToSourceBuffer_({segmentInfo:e,type:n,initSegment:r,data:i})}loadSegment_(e){this.state="WAITING",this.pendingSegment_=e,this.trimBackBuffer_(e),"number"==typeof e.timestampOffset&&this.transmuxer_&&this.transmuxer_.postMessage({action:"clearAllMp4Captions"}),this.hasEnoughInfoToLoad_()?this.updateTransmuxerAndRequestSegment_(e):this.loadQueue_.push((()=>{const t=Am({},e,{forceTimestampOffset:!0});Am(e,this.generateSegmentInfo_(t)),this.isPendingTimestampOffset_=!1,this.updateTransmuxerAndRequestSegment_(e)}))}updateTransmuxerAndRequestSegment_(e){this.shouldUpdateTransmuxerTimestampOffset_(e.timestampOffset)&&(this.gopBuffer_.length=0,e.gopsToAlignWith=[],this.timeMapping_=0,this.transmuxer_.postMessage({action:"reset"}),this.transmuxer_.postMessage({action:"setTimestampOffset",timestampOffset:e.timestampOffset}));const t=this.createSimplifiedSegmentObj_(e),n=this.isEndOfStream_(e.mediaIndex,e.playlist,e.partIndex),i=null!==this.mediaIndex,r=e.timeline!==this.currentTimeline_&&e.timeline>0,s=n||i&&r;this.logger_(`Requesting ${KN(e)}`),t.map&&!t.map.bytes&&(this.logger_("going to request init segment."),this.appendInitSegment_={video:!0,audio:!0}),e.abortRequests=PN({xhr:this.vhs_.xhr,xhrOptions:this.xhrOptions_,decryptionWorker:this.decrypter_,segment:t,abortFn:this.handleAbort_.bind(this,e),progressFn:this.handleProgress_.bind(this),trackInfoFn:this.handleTrackInfo_.bind(this),timingInfoFn:this.handleTimingInfo_.bind(this),videoSegmentTimingInfoFn:this.handleSegmentTimingInfo_.bind(this,"video",e.requestId),audioSegmentTimingInfoFn:this.handleSegmentTimingInfo_.bind(this,"audio",e.requestId),captionsFn:this.handleCaptions_.bind(this),isEndOfTimeline:s,endedTimelineFn:()=>{this.logger_("received endedtimeline callback")},id3Fn:this.handleId3_.bind(this),dataFn:this.handleData_.bind(this),doneFn:this.segmentRequestFinished_.bind(this),onTransmuxerLog:({message:t,level:n,stream:i})=>{this.logger_(`${KN(e)} logged from transmuxer stream ${i} as a ${n}: ${t}`)}})}trimBackBuffer_(e){const t=((e,t,n)=>{let i=t-iN.BACK_BUFFER_LENGTH;e.length&&(i=Math.max(i,e.start(0)));const r=t-n;return Math.min(r,i)})(this.seekable_(),this.currentTime_(),this.playlist_.targetDuration||10);t>0&&this.remove(0,t)}createSimplifiedSegmentObj_(e){const t=e.segment,n=e.part,i={resolvedUri:n?n.resolvedUri:t.resolvedUri,byterange:n?n.byterange:t.byterange,requestId:e.requestId,transmuxer:e.transmuxer,audioAppendStart:e.audioAppendStart,gopsToAlignWith:e.gopsToAlignWith,part:e.part},r=e.playlist.segments[e.mediaIndex-1];if(r&&r.timeline===t.timeline&&(r.videoTimingInfo?i.baseStartTime=r.videoTimingInfo.transmuxedDecodeEnd:r.audioTimingInfo&&(i.baseStartTime=r.audioTimingInfo.transmuxedDecodeEnd)),t.key){const n=t.key.iv||new Uint32Array([0,0,0,e.mediaIndex+e.playlist.mediaSequence]);i.key=this.segmentKey(t.key),i.key.iv=n}return t.map&&(i.map=this.initSegmentForMap(t.map)),i}saveTransferStats_(e){this.mediaRequests+=1,e&&(this.mediaBytesTransferred+=e.bytesReceived,this.mediaTransferDuration+=e.roundTripTime)}saveBandwidthRelatedStats_(e,t){this.pendingSegment_.byteLength=t.bytesReceived,e<GN?this.logger_(`Ignoring segment's bandwidth because its duration of ${e} is less than the min to record 0.016666666666666666`):(this.bandwidth=t.bandwidth,this.roundTrip=t.roundTripTime)}handleTimeout_(){this.mediaRequestsTimedout+=1,this.bandwidth=1,this.roundTrip=NaN,this.trigger("bandwidthupdate"),this.trigger("timeout")}segmentRequestFinished_(e,t,n){if(this.callQueue_.length)return void this.callQueue_.push(this.segmentRequestFinished_.bind(this,e,t,n));if(this.saveTransferStats_(t.stats),!this.pendingSegment_)return;if(t.requestId!==this.pendingSegment_.requestId)return;if(e){if(this.pendingSegment_=null,this.state="READY",e.code===bN)return;return this.pause(),e.code===vN?void this.handleTimeout_():(this.mediaRequestsErrored+=1,this.error(e),void this.trigger("error"))}const i=this.pendingSegment_;this.saveBandwidthRelatedStats_(i.duration,t.stats),i.endOfAllRequests=t.endOfAllRequests,n.gopInfo&&(this.gopBuffer_=((e,t,n)=>{if(!t.length)return e;if(n)return t.slice();const i=t[0].pts;let r=0;for(;r<e.length&&!(e[r].pts>=i);r++);return e.slice(0,r).concat(t)})(this.gopBuffer_,n.gopInfo,this.safeAppend_)),this.state="APPENDING",this.trigger("appending"),this.waitForAppendsToComplete_(i)}setTimeMapping_(e){const t=this.syncController_.mappingForTimeline(e);null!==t&&(this.timeMapping_=t)}updateMediaSecondsLoaded_(e){"number"==typeof e.start&&"number"==typeof e.end?this.mediaSecondsLoaded+=e.end-e.start:this.mediaSecondsLoaded+=e.duration}shouldUpdateTransmuxerTimestampOffset_(e){return null!==e&&("main"===this.loaderType_&&e!==this.sourceUpdater_.videoTimestampOffset()||!this.audioDisabled_&&e!==this.sourceUpdater_.audioTimestampOffset())}trueSegmentStart_({currentStart:e,playlist:t,mediaIndex:n,firstVideoFrameTimeForData:i,currentVideoTimestampOffset:r,useVideoTimingInfo:s,videoTimingInfo:a,audioTimingInfo:o}){if(void 0!==e)return e;if(!s)return o.start;const l=t.segments[n-1];return 0!==n&&l&&void 0!==l.start&&l.end===i+r?a.start:i}waitForAppendsToComplete_(e){const t=this.getCurrentMediaInfo_(e);if(!t)return this.error({message:"No starting media returned, likely due to an unsupported media format.",playlistExclusionDuration:1/0}),void this.trigger("error");const{hasAudio:n,hasVideo:i,isMuxed:r}=t,s="main"===this.loaderType_&&i,a=!this.audioDisabled_&&n&&!r;if(e.waitingOnAppends=0,!e.hasAppendedData_)return e.timingInfo||"number"!=typeof e.timestampOffset||(this.isPendingTimestampOffset_=!0),e.timingInfo={start:0},e.waitingOnAppends++,this.isPendingTimestampOffset_||(this.updateSourceBufferTimestampOffset_(e),this.processMetadataQueue_()),void this.checkAppendsDone_(e);s&&e.waitingOnAppends++,a&&e.waitingOnAppends++,s&&this.sourceUpdater_.videoQueueCallback(this.checkAppendsDone_.bind(this,e)),a&&this.sourceUpdater_.audioQueueCallback(this.checkAppendsDone_.bind(this,e))}checkAppendsDone_(e){this.checkForAbort_(e.requestId)||(e.waitingOnAppends--,0===e.waitingOnAppends&&this.handleAppendsDone_())}checkForIllegalMediaSwitch(e){const t=((e,t,n)=>"main"===e&&t&&n?n.hasAudio||n.hasVideo?t.hasVideo&&!n.hasVideo?"Only audio found in segment when we expected video. We can't switch to audio only from a stream that had video. To get rid of this message, please add codec information to the manifest.":!t.hasVideo&&n.hasVideo?"Video found in segment when we expected only audio. We can't switch to a stream with video from an audio only stream. To get rid of this message, please add codec information to the manifest.":null:"Neither audio nor video found in segment.":null)(this.loaderType_,this.getCurrentMediaInfo_(),e);return!!t&&(this.error({message:t,playlistExclusionDuration:1/0}),this.trigger("error"),!0)}updateSourceBufferTimestampOffset_(e){if(null===e.timestampOffset||"number"!=typeof e.timingInfo.start||e.changedTimestampOffset||"main"!==this.loaderType_)return;let t=!1;e.timestampOffset-=this.getSegmentStartTimeForTimestampOffsetCalculation_({videoTimingInfo:e.segment.videoTimingInfo,audioTimingInfo:e.segment.audioTimingInfo,timingInfo:e.timingInfo}),e.changedTimestampOffset=!0,e.timestampOffset!==this.sourceUpdater_.videoTimestampOffset()&&(this.sourceUpdater_.videoTimestampOffset(e.timestampOffset),t=!0),e.timestampOffset!==this.sourceUpdater_.audioTimestampOffset()&&(this.sourceUpdater_.audioTimestampOffset(e.timestampOffset),t=!0),t&&this.trigger("timestampoffset")}getSegmentStartTimeForTimestampOffsetCalculation_({videoTimingInfo:e,audioTimingInfo:t,timingInfo:n}){return this.useDtsForTimestampOffset_?e&&"number"==typeof e.transmuxedDecodeStart?e.transmuxedDecodeStart:t&&"number"==typeof t.transmuxedDecodeStart?t.transmuxedDecodeStart:n.start:n.start}updateTimingInfoEnd_(e){e.timingInfo=e.timingInfo||{};const t=this.getMediaInfo_(),n="main"===this.loaderType_&&t&&t.hasVideo&&e.videoTimingInfo?e.videoTimingInfo:e.audioTimingInfo;n&&(e.timingInfo.end="number"==typeof n.end?n.end:n.start+e.duration)}handleAppendsDone_(){if(this.pendingSegment_&&this.trigger("appendsdone"),!this.pendingSegment_)return this.state="READY",void(this.paused()||this.monitorBuffer_());const e=this.pendingSegment_;this.updateTimingInfoEnd_(e),this.shouldSaveSegmentTimingInfo_&&this.syncController_.saveSegmentTimingInfo({segmentInfo:e,shouldSaveTimelineMapping:"main"===this.loaderType_});const t=JN(e,this.sourceType_);if(t&&("warn"===t.severity?MP.log.warn(t.message):this.logger_(t.message)),this.recordThroughput_(e),this.pendingSegment_=null,this.state="READY",e.isSyncRequest&&(this.trigger("syncinfoupdate"),!e.hasAppendedData_))return void this.logger_(`Throwing away un-appended sync request ${KN(e)}`);this.logger_(`Appended ${KN(e)}`),this.addSegmentMetadataCue_(e),this.fetchAtBuffer_=!0,this.currentTimeline_!==e.timeline&&(this.timelineChangeController_.lastTimelineChange({type:this.loaderType_,from:this.currentTimeline_,to:e.timeline}),"main"!==this.loaderType_||this.audioDisabled_||this.timelineChangeController_.lastTimelineChange({type:"audio",from:this.currentTimeline_,to:e.timeline})),this.currentTimeline_=e.timeline,this.trigger("syncinfoupdate");const n=e.segment,i=e.part,r=n.end&&this.currentTime_()-n.end>3*e.playlist.targetDuration,s=i&&i.end&&this.currentTime_()-i.end>3*e.playlist.partTargetDuration;if(r||s)return this.logger_(`bad ${r?"segment":"part"} ${KN(e)}`),void this.resetEverything();null!==this.mediaIndex&&this.trigger("bandwidthupdate"),this.trigger("progress"),this.mediaIndex=e.mediaIndex,this.partIndex=e.partIndex,this.isEndOfStream_(e.mediaIndex,e.playlist,e.partIndex)&&this.endOfStream(),this.trigger("appended"),e.hasAppendedData_&&this.mediaAppends++,this.paused()||this.monitorBuffer_()}recordThroughput_(e){if(e.duration<GN)return void this.logger_(`Ignoring segment's throughput because its duration of ${e.duration} is less than the min to record 0.016666666666666666`);const t=this.throughput.rate,n=Date.now()-e.endOfAllRequests+1,i=Math.floor(e.byteLength/n*8*1e3);this.throughput.rate+=(i-t)/++this.throughput.count}addSegmentMetadataCue_(e){if(!this.segmentMetadataTrack_)return;const t=e.segment,n=t.start,i=t.end;if(!zN(n)||!zN(i))return;WN(n,i,this.segmentMetadataTrack_);const r=sT.WebKitDataCue||sT.VTTCue,s={custom:t.custom,dateTimeObject:t.dateTimeObject,dateTimeString:t.dateTimeString,bandwidth:e.playlist.attributes.BANDWIDTH,resolution:e.playlist.attributes.RESOLUTION,codecs:e.playlist.attributes.CODECS,byteLength:e.byteLength,uri:e.uri,timeline:e.timeline,playlist:e.playlist.id,start:n,end:i},a=new r(n,i,JSON.stringify(s));a.value=s,this.segmentMetadataTrack_.addCue(a)}}function eD(){}const tD=function(e){return"string"!=typeof e?e:e.replace(/./,(e=>e.toUpperCase()))},nD=["video","audio"],iD=(e,t)=>{const n=t[`${e}Buffer`];return n&&n.updating||t.queuePending[e]},rD=(e,t)=>{if(0===t.queue.length)return;let n=0,i=t.queue[n];if("mediaSource"!==i.type){if("mediaSource"!==e&&t.ready()&&"closed"!==t.mediaSource.readyState&&!iD(e,t)){if(i.type!==e){if(n=((e,t)=>{for(let n=0;n<t.length;n++){const i=t[n];if("mediaSource"===i.type)return null;if(i.type===e)return n}return null})(e,t.queue),null===n)return;i=t.queue[n]}return t.queue.splice(n,1),t.queuePending[e]=i,i.action(e,t),i.doneFn?void 0:(t.queuePending[e]=null,void rD(e,t))}}else t.updating()||"closed"===t.mediaSource.readyState||(t.queue.shift(),i.action(t),i.doneFn&&i.doneFn(),rD("audio",t),rD("video",t))},sD=(e,t)=>{const n=t[`${e}Buffer`],i=tD(e);n&&(n.removeEventListener("updateend",t[`on${i}UpdateEnd_`]),n.removeEventListener("error",t[`on${i}Error_`]),t.codecs[e]=null,t[`${e}Buffer`]=null)},aD=(e,t)=>e&&t&&-1!==Array.prototype.indexOf.call(e.sourceBuffers,t),oD=(e,t,n)=>(i,r)=>{const s=r[`${i}Buffer`];if(aD(r.mediaSource,s)){r.logger_(`Appending segment ${t.mediaIndex}'s ${e.length} bytes to ${i}Buffer`);try{s.appendBuffer(e)}catch(fB){r.logger_(`Error with code ${fB.code} `+(22===fB.code?"(QUOTA_EXCEEDED_ERR) ":"")+`when appending segment ${t.mediaIndex} to ${i}Buffer`),r.queuePending[i]=null,n(fB)}}},lD=(e,t)=>(n,i)=>{const r=i[`${n}Buffer`];if(aD(i.mediaSource,r)){i.logger_(`Removing ${e} to ${t} from ${n}Buffer`);try{r.remove(e,t)}catch(fB){i.logger_(`Remove ${e} to ${t} from ${n}Buffer failed`)}}},cD=e=>(t,n)=>{const i=n[`${t}Buffer`];aD(n.mediaSource,i)&&(n.logger_(`Setting ${t}timestampOffset to ${e}`),i.timestampOffset=e)},uD=e=>(t,n)=>{e()},dD=e=>t=>{if("open"===t.mediaSource.readyState){t.logger_(`Calling mediaSource endOfStream(${e||""})`);try{t.mediaSource.endOfStream(e)}catch(fB){MP.log.warn("Failed to call media source endOfStream",fB)}}},hD=e=>t=>{t.logger_(`Setting mediaSource duration to ${e}`);try{t.mediaSource.duration=e}catch(fB){MP.log.warn("Failed to set media source duration",fB)}},pD=()=>(e,t)=>{if("open"!==t.mediaSource.readyState)return;const n=t[`${e}Buffer`];if(aD(t.mediaSource,n)){t.logger_(`calling abort on ${e}Buffer`);try{n.abort()}catch(fB){MP.log.warn(`Failed to abort on ${e}Buffer`,fB)}}},fD=(e,t)=>n=>{const i=tD(e),r=DE(t);n.logger_(`Adding ${e}Buffer with codec ${t} to mediaSource`);const s=n.mediaSource.addSourceBuffer(r);s.addEventListener("updateend",n[`on${i}UpdateEnd_`]),s.addEventListener("error",n[`on${i}Error_`]),n.codecs[e]=t,n[`${e}Buffer`]=s},mD=e=>t=>{const n=t[`${e}Buffer`];if(sD(e,t),aD(t.mediaSource,n)){t.logger_(`Removing ${e}Buffer with codec ${t.codecs[e]} from mediaSource`);try{t.mediaSource.removeSourceBuffer(n)}catch(fB){MP.log.warn(`Failed to removeSourceBuffer ${e}Buffer`,fB)}}},gD=e=>(t,n)=>{const i=n[`${t}Buffer`],r=DE(e);aD(n.mediaSource,i)&&n.codecs[t]!==e&&(n.logger_(`changing ${t}Buffer codec from ${n.codecs[t]} to ${e}`),i.changeType(r),n.codecs[t]=e)},yD=({type:e,sourceUpdater:t,action:n,doneFn:i,name:r})=>{t.queue.push({type:e,action:n,doneFn:i,name:r}),rD(e,t)},_D=(e,t)=>n=>{if(t.queuePending[e]){const n=t.queuePending[e].doneFn;t.queuePending[e]=null,n&&n(t[`${e}Error_`])}rD(e,t)};class vD extends MP.EventTarget{constructor(e){super(),this.mediaSource=e,this.sourceopenListener_=()=>rD("mediaSource",this),this.mediaSource.addEventListener("sourceopen",this.sourceopenListener_),this.logger_=$P("SourceUpdater"),this.audioTimestampOffset_=0,this.videoTimestampOffset_=0,this.queue=[],this.queuePending={audio:null,video:null},this.delayedAudioAppendQueue_=[],this.videoAppendQueued_=!1,this.codecs={},this.onVideoUpdateEnd_=_D("video",this),this.onAudioUpdateEnd_=_D("audio",this),this.onVideoError_=e=>{this.videoError_=e},this.onAudioError_=e=>{this.audioError_=e},this.createdSourceBuffers_=!1,this.initializedEme_=!1,this.triggeredReady_=!1}initializedEme(){this.initializedEme_=!0,this.triggerReady()}hasCreatedSourceBuffers(){return this.createdSourceBuffers_}hasInitializedAnyEme(){return this.initializedEme_}ready(){return this.hasCreatedSourceBuffers()&&this.hasInitializedAnyEme()}createSourceBuffers(e){this.hasCreatedSourceBuffers()||(this.addOrChangeSourceBuffers(e),this.createdSourceBuffers_=!0,this.trigger("createdsourcebuffers"),this.triggerReady())}triggerReady(){this.ready()&&!this.triggeredReady_&&(this.triggeredReady_=!0,this.trigger("ready"))}addSourceBuffer(e,t){yD({type:"mediaSource",sourceUpdater:this,action:fD(e,t),name:"addSourceBuffer"})}abort(e){yD({type:e,sourceUpdater:this,action:pD(e),name:"abort"})}removeSourceBuffer(e){this.canRemoveSourceBuffer()?yD({type:"mediaSource",sourceUpdater:this,action:mD(e),name:"removeSourceBuffer"}):MP.log.error("removeSourceBuffer is not supported!")}canRemoveSourceBuffer(){return!MP.browser.IE_VERSION&&!MP.browser.IS_FIREFOX&&sT.MediaSource&&sT.MediaSource.prototype&&"function"==typeof sT.MediaSource.prototype.removeSourceBuffer}static canChangeType(){return sT.SourceBuffer&&sT.SourceBuffer.prototype&&"function"==typeof sT.SourceBuffer.prototype.changeType}canChangeType(){return this.constructor.canChangeType()}changeType(e,t){this.canChangeType()?yD({type:e,sourceUpdater:this,action:gD(t),name:"changeType"}):MP.log.error("changeType is not supported!")}addOrChangeSourceBuffers(e){if(!e||"object"!=typeof e||0===Object.keys(e).length)throw new Error("Cannot addOrChangeSourceBuffers to undefined codecs");Object.keys(e).forEach((t=>{const n=e[t];if(!this.hasCreatedSourceBuffers())return this.addSourceBuffer(t,n);this.canChangeType()&&this.changeType(t,n)}))}appendBuffer(e,t){const{segmentInfo:n,type:i,bytes:r}=e;if(this.processedAppend_=!0,"audio"===i&&this.videoBuffer&&!this.videoAppendQueued_)return this.delayedAudioAppendQueue_.push([e,t]),void this.logger_(`delayed audio append of ${r.length} until video append`);if(yD({type:i,sourceUpdater:this,action:oD(r,n||{mediaIndex:-1},t),doneFn:t,name:"appendBuffer"}),"video"===i){if(this.videoAppendQueued_=!0,!this.delayedAudioAppendQueue_.length)return;const e=this.delayedAudioAppendQueue_.slice();this.logger_(`queuing delayed audio ${e.length} appendBuffers`),this.delayedAudioAppendQueue_.length=0,e.forEach((e=>{this.appendBuffer.apply(this,e)}))}}audioBuffered(){return aD(this.mediaSource,this.audioBuffer)&&this.audioBuffer.buffered?this.audioBuffer.buffered:zP()}videoBuffered(){return aD(this.mediaSource,this.videoBuffer)&&this.videoBuffer.buffered?this.videoBuffer.buffered:zP()}buffered(){const e=aD(this.mediaSource,this.videoBuffer)?this.videoBuffer:null,t=aD(this.mediaSource,this.audioBuffer)?this.audioBuffer:null;return t&&!e?this.audioBuffered():e&&!t?this.videoBuffered():function(e,t){let n=null,i=null,r=0;const s=[],a=[];if(!(e&&e.length&&t&&t.length))return zP();let o=e.length;for(;o--;)s.push({time:e.start(o),type:"start"}),s.push({time:e.end(o),type:"end"});for(o=t.length;o--;)s.push({time:t.start(o),type:"start"}),s.push({time:t.end(o),type:"end"});for(s.sort((function(e,t){return e.time-t.time})),o=0;o<s.length;o++)"start"===s[o].type?(r++,2===r&&(n=s[o].time)):"end"===s[o].type&&(r--,1===r&&(i=s[o].time)),null!==n&&null!==i&&(a.push([n,i]),n=null,i=null);return zP(a)}(this.audioBuffered(),this.videoBuffered())}setDuration(e,t=eD){yD({type:"mediaSource",sourceUpdater:this,action:hD(e),name:"duration",doneFn:t})}endOfStream(e=null,t=eD){"string"!=typeof e&&(e=void 0),yD({type:"mediaSource",sourceUpdater:this,action:dD(e),name:"endOfStream",doneFn:t})}removeAudio(e,t,n=eD){this.audioBuffered().length&&0!==this.audioBuffered().end(0)?yD({type:"audio",sourceUpdater:this,action:lD(e,t),doneFn:n,name:"remove"}):n()}removeVideo(e,t,n=eD){this.videoBuffered().length&&0!==this.videoBuffered().end(0)?yD({type:"video",sourceUpdater:this,action:lD(e,t),doneFn:n,name:"remove"}):n()}updating(){return!(!iD("audio",this)&&!iD("video",this))}audioTimestampOffset(e){return void 0!==e&&this.audioBuffer&&this.audioTimestampOffset_!==e&&(yD({type:"audio",sourceUpdater:this,action:cD(e),name:"timestampOffset"}),this.audioTimestampOffset_=e),this.audioTimestampOffset_}videoTimestampOffset(e){return void 0!==e&&this.videoBuffer&&this.videoTimestampOffset!==e&&(yD({type:"video",sourceUpdater:this,action:cD(e),name:"timestampOffset"}),this.videoTimestampOffset_=e),this.videoTimestampOffset_}audioQueueCallback(e){this.audioBuffer&&yD({type:"audio",sourceUpdater:this,action:uD(e),name:"callback"})}videoQueueCallback(e){this.videoBuffer&&yD({type:"video",sourceUpdater:this,action:uD(e),name:"callback"})}dispose(){this.trigger("dispose"),nD.forEach((e=>{this.abort(e),this.canRemoveSourceBuffer()?this.removeSourceBuffer(e):this[`${e}QueueCallback`]((()=>sD(e,this)))})),this.videoAppendQueued_=!1,this.delayedAudioAppendQueue_.length=0,this.sourceopenListener_&&this.mediaSource.removeEventListener("sourceopen",this.sourceopenListener_),this.off()}}const bD=e=>decodeURIComponent(escape(String.fromCharCode.apply(null,e))),TD=new Uint8Array("\n\n".split("").map((e=>e.charCodeAt(0))));class ED extends Error{constructor(){super("Trying to parse received VTT cues, but there is no WebVTT. Make sure vtt.js is loaded.")}}class wD extends ZN{constructor(e,t={}){super(e,t),this.mediaSource_=null,this.subtitlesTrack_=null,this.loaderType_="subtitle",this.featuresNativeTextTracks_=e.featuresNativeTextTracks,this.loadVttJs=e.loadVttJs,this.shouldSaveSegmentTimingInfo_=!1}createTransmuxer_(){return null}buffered_(){if(!this.subtitlesTrack_||!this.subtitlesTrack_.cues||!this.subtitlesTrack_.cues.length)return zP();const e=this.subtitlesTrack_.cues;return zP([[e[0].startTime,e[e.length-1].startTime]])}initSegmentForMap(e,t=!1){if(!e)return null;const n=HL(e);let i=this.initSegments_[n];if(t&&!i&&e.bytes){const t=TD.byteLength+e.bytes.byteLength,r=new Uint8Array(t);r.set(e.bytes),r.set(TD,e.bytes.byteLength),this.initSegments_[n]=i={resolvedUri:e.resolvedUri,byterange:e.byterange,bytes:r}}return i||e}couldBeginLoading_(){return this.playlist_&&this.subtitlesTrack_&&!this.paused()}init_(){return this.state="READY",this.resetEverything(),this.monitorBuffer_()}track(e){return void 0===e||(this.subtitlesTrack_=e,"INIT"===this.state&&this.couldBeginLoading_()&&this.init_()),this.subtitlesTrack_}remove(e,t){WN(e,t,this.subtitlesTrack_)}fillBuffer_(){const e=this.chooseNextRequest_();if(e){if(null===this.syncController_.timestampOffsetForTimeline(e.timeline)){const e=()=>{this.state="READY",this.paused()||this.monitorBuffer_()};return this.syncController_.one("timestampoffset",e),void(this.state="WAITING_ON_TIMELINE")}this.loadSegment_(e)}}timestampOffsetForSegment_(){return null}chooseNextRequest_(){return this.skipEmptySegments_(super.chooseNextRequest_())}skipEmptySegments_(e){for(;e&&e.segment.empty;){if(e.mediaIndex+1>=e.playlist.segments.length){e=null;break}e=this.generateSegmentInfo_({playlist:e.playlist,mediaIndex:e.mediaIndex+1,startOfSegment:e.startOfSegment+e.duration,isSyncRequest:e.isSyncRequest})}return e}stopForError(e){this.error(e),this.state="READY",this.pause(),this.trigger("error")}segmentRequestFinished_(e,t,n){if(!this.subtitlesTrack_)return void(this.state="READY");if(this.saveTransferStats_(t.stats),!this.pendingSegment_)return this.state="READY",void(this.mediaRequestsAborted+=1);if(e)return e.code===vN&&this.handleTimeout_(),e.code===bN?this.mediaRequestsAborted+=1:this.mediaRequestsErrored+=1,void this.stopForError(e);const i=this.pendingSegment_;this.saveBandwidthRelatedStats_(i.duration,t.stats),t.key&&this.segmentKey(t.key,!0),this.state="APPENDING",this.trigger("appending");const r=i.segment;if(r.map&&(r.map.bytes=t.map.bytes),i.bytes=t.bytes,"function"!=typeof sT.WebVTT&&"function"==typeof this.loadVttJs)return this.state="WAITING_ON_VTTJS",void this.loadVttJs().then((()=>this.segmentRequestFinished_(e,t,n)),(()=>this.stopForError({message:"Error loading vtt.js"})));r.requested=!0;try{this.parseVTTCues_(i)}catch(fB){return void this.stopForError({message:fB.message})}if(this.updateTimeMapping_(i,this.syncController_.timelines[i.timeline],this.playlist_),i.cues.length?i.timingInfo={start:i.cues[0].startTime,end:i.cues[i.cues.length-1].endTime}:i.timingInfo={start:i.startOfSegment,end:i.startOfSegment+i.duration},i.isSyncRequest)return this.trigger("syncinfoupdate"),this.pendingSegment_=null,void(this.state="READY");i.byteLength=i.bytes.byteLength,this.mediaSecondsLoaded+=r.duration,i.cues.forEach((e=>{this.subtitlesTrack_.addCue(this.featuresNativeTextTracks_?new sT.VTTCue(e.startTime,e.endTime,e.text):e)})),function(e){const t=e.cues;if(t)for(let n=0;n<t.length;n++){const i=[];let r=0;for(let e=0;e<t.length;e++)t[n].startTime===t[e].startTime&&t[n].endTime===t[e].endTime&&t[n].text===t[e].text&&(r++,r>1&&i.push(t[e]));i.length&&i.forEach((t=>e.removeCue(t)))}}(this.subtitlesTrack_),this.handleAppendsDone_()}handleData_(){}updateTimingInfoEnd_(){}parseVTTCues_(e){let t,n=!1;if("function"!=typeof sT.WebVTT)throw new ED;"function"==typeof sT.TextDecoder?t=new sT.TextDecoder("utf8"):(t=sT.WebVTT.StringDecoder(),n=!0);const i=new sT.WebVTT.Parser(sT,sT.vttjs,t);if(e.cues=[],e.timestampmap={MPEGTS:0,LOCAL:0},i.oncue=e.cues.push.bind(e.cues),i.ontimestampmap=t=>{e.timestampmap=t},i.onparsingerror=e=>{MP.log.warn("Error encountered when parsing cues: "+e.message)},e.segment.map){let t=e.segment.map.bytes;n&&(t=bD(t)),i.parse(t)}let r=e.bytes;n&&(r=bD(r)),i.parse(r),i.flush()}updateTimeMapping_(e,t,n){const i=e.segment;if(!t)return;if(!e.cues.length)return void(i.empty=!0);const r=e.timestampmap,s=r.MPEGTS/MI-r.LOCAL+t.mapping;if(e.cues.forEach((e=>{e.startTime+=s,e.endTime+=s})),!n.syncInfo){const t=e.cues[0].startTime,r=e.cues[e.cues.length-1].startTime;n.syncInfo={mediaSequence:n.mediaSequence+e.mediaIndex,time:Math.min(t,r-i.duration)}}}}const SD=function(e,t){const n=e.cues;for(let i=0;i<n.length;i++){const e=n[i];if(t>=e.adStartTime&&t<=e.adEndTime)return e}return null},CD=[{name:"VOD",run:(e,t,n,i,r)=>{if(n!==1/0){return{time:0,segmentIndex:0,partIndex:null}}return null}},{name:"ProgramDateTime",run:(e,t,n,i,r)=>{if(!Object.keys(e.timelineToDatetimeMappings).length)return null;let s=null,a=null;const o=iL(t);r=r||0;for(let l=0;l<o.length;l++){const n=o[t.endList||0===r?l:o.length-(l+1)],i=n.segment,c=e.timelineToDatetimeMappings[i.timeline];if(!c||!i.dateTimeObject)continue;let u=i.dateTimeObject.getTime()/1e3+c;if(i.parts&&"number"==typeof n.partIndex)for(let e=0;e<n.partIndex;e++)u+=i.parts[e].duration;const d=Math.abs(r-u);if(null!==a&&(0===d||a<d))break;a=d,s={time:u,segmentIndex:n.segmentIndex,partIndex:n.partIndex}}return s}},{name:"Segment",run:(e,t,n,i,r)=>{let s=null,a=null;r=r||0;const o=iL(t);for(let l=0;l<o.length;l++){const e=o[t.endList||0===r?l:o.length-(l+1)],n=e.segment,c=e.part&&e.part.start||n&&n.start;if(n.timeline===i&&void 0!==c){const t=Math.abs(r-c);if(null!==a&&a<t)break;(!s||null===a||a>=t)&&(a=t,s={time:c,segmentIndex:e.segmentIndex,partIndex:e.partIndex})}}return s}},{name:"Discontinuity",run:(e,t,n,i,r)=>{let s=null;if(r=r||0,t.discontinuityStarts&&t.discontinuityStarts.length){let n=null;for(let i=0;i<t.discontinuityStarts.length;i++){const a=t.discontinuityStarts[i],o=t.discontinuitySequence+i+1,l=e.discontinuities[o];if(l){const e=Math.abs(r-l.time);if(null!==n&&n<e)break;(!s||null===n||n>=e)&&(n=e,s={time:l.time,segmentIndex:a,partIndex:null})}}}return s}},{name:"Playlist",run:(e,t,n,i,r)=>{if(t.syncInfo){return{time:t.syncInfo.time,segmentIndex:t.syncInfo.mediaSequence-t.mediaSequence,partIndex:null}}return null}}];class ID extends MP.EventTarget{constructor(e={}){super(),this.timelines=[],this.discontinuities=[],this.timelineToDatetimeMappings={},this.logger_=$P("SyncController")}getSyncPoint(e,t,n,i){const r=this.runStrategies_(e,t,n,i);return r.length?this.selectSyncPoint_(r,{key:"time",value:i}):null}getExpiredTime(e,t){if(!e||!e.segments)return null;const n=this.runStrategies_(e,t,e.discontinuitySequence,0);if(!n.length)return null;const i=this.selectSyncPoint_(n,{key:"segmentIndex",value:0});return i.segmentIndex>0&&(i.time*=-1),Math.abs(i.time+cL({defaultDuration:e.targetDuration,durationList:e.segments,startIndex:i.segmentIndex,endIndex:0}))}runStrategies_(e,t,n,i){const r=[];for(let s=0;s<CD.length;s++){const a=CD[s],o=a.run(this,e,t,n,i);o&&(o.strategy=a.name,r.push({strategy:a.name,syncPoint:o}))}return r}selectSyncPoint_(e,t){let n=e[0].syncPoint,i=Math.abs(e[0].syncPoint[t.key]-t.value),r=e[0].strategy;for(let s=1;s<e.length;s++){const a=Math.abs(e[s].syncPoint[t.key]-t.value);a<i&&(i=a,n=e[s].syncPoint,r=e[s].strategy)}return this.logger_(`syncPoint for [${t.key}: ${t.value}] chosen with strategy [${r}]: [time:${n.time}, segmentIndex:${n.segmentIndex}`+("number"==typeof n.partIndex?`,partIndex:${n.partIndex}`:"")+"]"),n}saveExpiredSegmentInfo(e,t){const n=t.mediaSequence-e.mediaSequence;if(n>86400)MP.log.warn(`Not saving expired segment info. Media sequence gap ${n} is too large.`);else for(let i=n-1;i>=0;i--){const n=e.segments[i];if(n&&void 0!==n.start){t.syncInfo={mediaSequence:e.mediaSequence+i,time:n.start},this.logger_(`playlist refresh sync: [time:${t.syncInfo.time}, mediaSequence: ${t.syncInfo.mediaSequence}]`),this.trigger("syncinfoupdate");break}}}setDateTimeMappingForStart(e){if(this.timelineToDatetimeMappings={},e.segments&&e.segments.length&&e.segments[0].dateTimeObject){const t=e.segments[0],n=t.dateTimeObject.getTime()/1e3;this.timelineToDatetimeMappings[t.timeline]=-n}}saveSegmentTimingInfo({segmentInfo:e,shouldSaveTimelineMapping:t}){const n=this.calculateSegmentTimeMapping_(e,e.timingInfo,t),i=e.segment;n&&(this.saveDiscontinuitySyncInfo_(e),e.playlist.syncInfo||(e.playlist.syncInfo={mediaSequence:e.playlist.mediaSequence+e.mediaIndex,time:i.start}));const r=i.dateTimeObject;i.discontinuity&&t&&r&&(this.timelineToDatetimeMappings[i.timeline]=-r.getTime()/1e3)}timestampOffsetForTimeline(e){return void 0===this.timelines[e]?null:this.timelines[e].time}mappingForTimeline(e){return void 0===this.timelines[e]?null:this.timelines[e].mapping}calculateSegmentTimeMapping_(e,t,n){const i=e.segment,r=e.part;let s,a,o=this.timelines[e.timeline];if("number"==typeof e.timestampOffset)o={time:e.startOfSegment,mapping:e.startOfSegment-t.start},n&&(this.timelines[e.timeline]=o,this.trigger("timestampoffset"),this.logger_(`time mapping for timeline ${e.timeline}: [time: ${o.time}] [mapping: ${o.mapping}]`)),s=e.startOfSegment,a=t.end+o.mapping;else{if(!o)return!1;s=t.start+o.mapping,a=t.end+o.mapping}return r&&(r.start=s,r.end=a),(!i.start||s<i.start)&&(i.start=s),i.end=a,!0}saveDiscontinuitySyncInfo_(e){const t=e.playlist,n=e.segment;if(n.discontinuity)this.discontinuities[n.timeline]={time:n.start,accuracy:0};else if(t.discontinuityStarts&&t.discontinuityStarts.length)for(let i=0;i<t.discontinuityStarts.length;i++){const r=t.discontinuityStarts[i],s=t.discontinuitySequence+i+1,a=r-e.mediaIndex,o=Math.abs(a);if(!this.discontinuities[s]||this.discontinuities[s].accuracy>o){let i;i=a<0?n.start-cL({defaultDuration:t.targetDuration,durationList:t.segments,startIndex:e.mediaIndex,endIndex:r}):n.end+cL({defaultDuration:t.targetDuration,durationList:t.segments,startIndex:e.mediaIndex+1,endIndex:r}),this.discontinuities[s]={time:i,accuracy:o}}}}dispose(){this.trigger("dispose"),this.off()}}class xD extends MP.EventTarget{constructor(){super(),this.pendingTimelineChanges_={},this.lastTimelineChanges_={}}clearPendingTimelineChange(e){this.pendingTimelineChanges_[e]=null,this.trigger("pendingtimelinechange")}pendingTimelineChange({type:e,from:t,to:n}){return"number"==typeof t&&"number"==typeof n&&(this.pendingTimelineChanges_[e]={type:e,from:t,to:n},this.trigger("pendingtimelinechange")),this.pendingTimelineChanges_[e]}lastTimelineChange({type:e,from:t,to:n}){return"number"==typeof t&&"number"==typeof n&&(this.lastTimelineChanges_[e]={type:e,from:t,to:n},delete this.pendingTimelineChanges_[e],this.trigger("timelinechange")),this.lastTimelineChanges_[e]}dispose(){this.trigger("dispose"),this.pendingTimelineChanges_={},this.lastTimelineChanges_={},this.off()}}const kD=aN(oN((function(){var e=function(){function e(){this.listeners={}}var t=e.prototype;return t.on=function(e,t){this.listeners[e]||(this.listeners[e]=[]),this.listeners[e].push(t)},t.off=function(e,t){if(!this.listeners[e])return!1;var n=this.listeners[e].indexOf(t);return this.listeners[e]=this.listeners[e].slice(0),this.listeners[e].splice(n,1),n>-1},t.trigger=function(e){var t=this.listeners[e];if(t)if(2===arguments.length)for(var n=t.length,i=0;i<n;++i)t[i].call(this,arguments[1]);else for(var r=Array.prototype.slice.call(arguments,1),s=t.length,a=0;a<s;++a)t[a].apply(this,r)},t.dispose=function(){this.listeners={}},t.pipe=function(e){this.on("data",(function(t){e.push(t)}))},e}();let t=null;class n{constructor(e){let n,i,r;t||(t=function(){const e=[[[],[],[],[],[]],[[],[],[],[],[]]],t=e[0],n=e[1],i=t[4],r=n[4];let s,a,o;const l=[],c=[];let u,d,h,p,f,m;for(s=0;s<256;s++)c[(l[s]=s<<1^283*(s>>7))^s]=s;for(a=o=0;!i[a];a^=u||1,o=c[o]||1)for(p=o^o<<1^o<<2^o<<3^o<<4,p=p>>8^255&p^99,i[a]=p,r[p]=a,h=l[d=l[u=l[a]]],m=16843009*h^65537*d^257*u^16843008*a,f=257*l[p]^16843008*p,s=0;s<4;s++)t[s][a]=f=f<<24^f>>>8,n[s][p]=m=m<<24^m>>>8;for(s=0;s<5;s++)t[s]=t[s].slice(0),n[s]=n[s].slice(0);return e}()),this._tables=[[t[0][0].slice(),t[0][1].slice(),t[0][2].slice(),t[0][3].slice(),t[0][4].slice()],[t[1][0].slice(),t[1][1].slice(),t[1][2].slice(),t[1][3].slice(),t[1][4].slice()]];const s=this._tables[0][4],a=this._tables[1],o=e.length;let l=1;if(4!==o&&6!==o&&8!==o)throw new Error("Invalid aes key size");const c=e.slice(0),u=[];for(this._key=[c,u],n=o;n<4*o+28;n++)r=c[n-1],(n%o==0||8===o&&n%o==4)&&(r=s[r>>>24]<<24^s[r>>16&255]<<16^s[r>>8&255]<<8^s[255&r],n%o==0&&(r=r<<8^r>>>24^l<<24,l=l<<1^283*(l>>7))),c[n]=c[n-o]^r;for(i=0;n;i++,n--)r=c[3&i?n:n-4],u[i]=n<=4||i<4?r:a[0][s[r>>>24]]^a[1][s[r>>16&255]]^a[2][s[r>>8&255]]^a[3][s[255&r]]}decrypt(e,t,n,i,r,s){const a=this._key[1];let o,l,c,u=e^a[0],d=i^a[1],h=n^a[2],p=t^a[3];const f=a.length/4-2;let m,g=4;const y=this._tables[1],_=y[0],v=y[1],b=y[2],T=y[3],E=y[4];for(m=0;m<f;m++)o=_[u>>>24]^v[d>>16&255]^b[h>>8&255]^T[255&p]^a[g],l=_[d>>>24]^v[h>>16&255]^b[p>>8&255]^T[255&u]^a[g+1],c=_[h>>>24]^v[p>>16&255]^b[u>>8&255]^T[255&d]^a[g+2],p=_[p>>>24]^v[u>>16&255]^b[d>>8&255]^T[255&h]^a[g+3],g+=4,u=o,d=l,h=c;for(m=0;m<4;m++)r[(3&-m)+s]=E[u>>>24]<<24^E[d>>16&255]<<16^E[h>>8&255]<<8^E[255&p]^a[g++],o=u,u=d,d=h,h=p,p=o}}class i extends e{constructor(){super(e),this.jobs=[],this.delay=1,this.timeout_=null}processJob_(){this.jobs.shift()(),this.jobs.length?this.timeout_=setTimeout(this.processJob_.bind(this),this.delay):this.timeout_=null}push(e){this.jobs.push(e),this.timeout_||(this.timeout_=setTimeout(this.processJob_.bind(this),this.delay))}}const r=function(e){return e<<24|(65280&e)<<8|(16711680&e)>>8|e>>>24};class s{constructor(e,t,n,a){const o=s.STEP,l=new Int32Array(e.buffer),c=new Uint8Array(e.byteLength);let u=0;for(this.asyncStream_=new i,this.asyncStream_.push(this.decryptChunk_(l.subarray(u,u+o),t,n,c)),u=o;u<l.length;u+=o)n=new Uint32Array([r(l[u-4]),r(l[u-3]),r(l[u-2]),r(l[u-1])]),this.asyncStream_.push(this.decryptChunk_(l.subarray(u,u+o),t,n,c));this.asyncStream_.push((function(){var e;a(null,(e=c).subarray(0,e.byteLength-e[e.byteLength-1]))}))}static get STEP(){return 32e3}decryptChunk_(e,t,i,s){return function(){const a=function(e,t,i){const s=new Int32Array(e.buffer,e.byteOffset,e.byteLength>>2),a=new n(Array.prototype.slice.call(t)),o=new Uint8Array(e.byteLength),l=new Int32Array(o.buffer);let c,u,d,h,p,f,m,g,y;for(c=i[0],u=i[1],d=i[2],h=i[3],y=0;y<s.length;y+=4)p=r(s[y]),f=r(s[y+1]),m=r(s[y+2]),g=r(s[y+3]),a.decrypt(p,f,m,g,l,y),l[y]=r(l[y]^c),l[y+1]=r(l[y+1]^u),l[y+2]=r(l[y+2]^d),l[y+3]=r(l[y+3]^h),c=p,u=f,d=m,h=g;return o}(e,t,i);s.set(a,e.byteOffset)}}}var a,o="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};a="undefined"!=typeof window?window:void 0!==o?o:"undefined"!=typeof self?self:{};var l=a.BigInt||Number;l("0x1"),l("0x100"),l("0x10000"),l("0x1000000"),l("0x100000000"),l("0x10000000000"),l("0x1000000000000"),l("0x100000000000000"),l("0x10000000000000000"),function(){var e=new Uint16Array([65484]),t=new Uint8Array(e.buffer,e.byteOffset,e.byteLength);255===t[0]||t[0]}();const c=function(e){const t={};return Object.keys(e).forEach((n=>{const i=e[n];var r;r=i,("function"===ArrayBuffer.isView?ArrayBuffer.isView(r):r&&r.buffer instanceof ArrayBuffer)?t[n]={bytes:i.buffer,byteOffset:i.byteOffset,byteLength:i.byteLength}:t[n]=i})),t};self.onmessage=function(e){const t=e.data,n=new Uint8Array(t.encrypted.bytes,t.encrypted.byteOffset,t.encrypted.byteLength),i=new Uint32Array(t.key.bytes,t.key.byteOffset,t.key.byteLength/4),r=new Uint32Array(t.iv.bytes,t.iv.byteOffset,t.iv.byteLength/4);new s(n,i,r,(function(e,n){self.postMessage(c({source:t.source,decrypted:n}),[n.buffer])}))}})));var AD=sN(kD);const OD=e=>{let t=e.default?"main":"alternative";return e.characteristics&&e.characteristics.indexOf("public.accessibility.describes-video")>=0&&(t="main-desc"),t},PD=(e,t)=>{e.abort(),e.pause(),t&&t.activePlaylistLoader&&(t.activePlaylistLoader.pause(),t.activePlaylistLoader=null)},LD=(e,t)=>{t.activePlaylistLoader=e,e.load()},ND={AUDIO:(e,t)=>()=>{const{segmentLoaders:{[e]:n},mediaTypes:{[e]:i},excludePlaylist:r}=t;PD(n,i);const s=i.activeTrack(),a=i.activeGroup(),o=(a.filter((e=>e.default))[0]||a[0]).id,l=i.tracks[o];if(s!==l){MP.log.warn("Problem encountered loading the alternate audio track.Switching back to default.");for(const e in i.tracks)i.tracks[e].enabled=i.tracks[e]===l;i.onTrackChanged()}else r({error:{message:"Problem encountered loading the default audio track."}})},SUBTITLES:(e,t)=>()=>{const{segmentLoaders:{[e]:n},mediaTypes:{[e]:i}}=t;MP.log.warn("Problem encountered loading the subtitle track.Disabling subtitle track."),PD(n,i);const r=i.activeTrack();r&&(r.mode="disabled"),i.onTrackChanged()}},DD={AUDIO:(e,t,n)=>{if(!t)return;const{tech:i,requestOptions:r,segmentLoaders:{[e]:s}}=n;t.on("loadedmetadata",(()=>{const e=t.media();s.playlist(e,r),(!i.paused()||e.endList&&"none"!==i.preload())&&s.load()})),t.on("loadedplaylist",(()=>{s.playlist(t.media(),r),i.paused()||s.load()})),t.on("error",ND[e](e,n))},SUBTITLES:(e,t,n)=>{const{tech:i,requestOptions:r,segmentLoaders:{[e]:s},mediaTypes:{[e]:a}}=n;t.on("loadedmetadata",(()=>{const e=t.media();s.playlist(e,r),s.track(a.activeTrack()),(!i.paused()||e.endList&&"none"!==i.preload())&&s.load()})),t.on("loadedplaylist",(()=>{s.playlist(t.media(),r),i.paused()||s.load()})),t.on("error",ND[e](e,n))}},RD={AUDIO:(e,t)=>{const{vhs:n,sourceType:i,segmentLoaders:{[e]:r},requestOptions:s,main:{mediaGroups:a},mediaTypes:{[e]:{groups:o,tracks:l,logger_:c}},mainPlaylistLoader:u}=t,d=_L(u.main);a[e]&&0!==Object.keys(a[e]).length||(a[e]={main:{default:{default:!0}}},d&&(a[e].main.default.playlists=u.main.playlists));for(const h in a[e]){o[h]||(o[h]=[]);for(const r in a[e][h]){let p,f=a[e][h][r];if(d?(c(`AUDIO group '${h}' label '${r}' is a main playlist`),f.isMainPlaylist=!0,p=null):p="vhs-json"===i&&f.playlists?new NL(f.playlists[0],n,s):f.resolvedUri?new NL(f.resolvedUri,n,s):f.playlists&&"dash"===i?new nN(f.playlists[0],n,s,u):null,f=WP({id:r,playlistLoader:p},f),DD[e](e,f.playlistLoader,t),o[h].push(f),void 0===l[r]){const e=new MP.AudioTrack({id:r,kind:OD(f),enabled:!1,language:f.language,default:f.default,label:r});l[r]=e}}}r.on("error",ND[e](e,t))},SUBTITLES:(e,t)=>{const{tech:n,vhs:i,sourceType:r,segmentLoaders:{[e]:s},requestOptions:a,main:{mediaGroups:o},mediaTypes:{[e]:{groups:l,tracks:c}},mainPlaylistLoader:u}=t;for(const d in o[e]){l[d]||(l[d]=[]);for(const s in o[e][d]){if(o[e][d][s].forced)continue;let h,p=o[e][d][s];if("hls"===r)h=new NL(p.resolvedUri,i,a);else if("dash"===r){if(!p.playlists.filter((e=>e.excludeUntil!==1/0)).length)return;h=new nN(p.playlists[0],i,a,u)}else"vhs-json"===r&&(h=new NL(p.playlists?p.playlists[0]:p.resolvedUri,i,a));if(p=WP({id:s,playlistLoader:h},p),DD[e](e,p.playlistLoader,t),l[d].push(p),void 0===c[s]){const e=n.addRemoteTextTrack({id:s,kind:"subtitles",default:p.default&&p.autoselect,language:p.language,label:s},!1).track;c[s]=e}}}s.on("error",ND[e](e,t))},"CLOSED-CAPTIONS":(e,t)=>{const{tech:n,main:{mediaGroups:i},mediaTypes:{[e]:{groups:r,tracks:s}}}=t;for(const a in i[e]){r[a]||(r[a]=[]);for(const t in i[e][a]){const o=i[e][a][t];if(!/^(?:CC|SERVICE)/.test(o.instreamId))continue;const l=n.options_.vhs&&n.options_.vhs.captionServices||{};let c={label:t,language:o.language,instreamId:o.instreamId,default:o.default&&o.autoselect};if(l[c.instreamId]&&(c=WP(c,l[c.instreamId])),void 0===c.default&&delete c.default,r[a].push(WP({id:t},o)),void 0===s[t]){const e=n.addRemoteTextTrack({id:c.instreamId,kind:"captions",default:c.default,language:c.language,label:c.label},!1).track;s[t]=e}}}}},MD=(e,t)=>{for(let n=0;n<e.length;n++){if(gL(t,e[n]))return!0;if(e[n].playlists&&MD(e[n].playlists,t))return!0}return!1},FD={AUDIO:(e,t)=>()=>{const{mediaTypes:{[e]:{tracks:n}}}=t;for(const e in n)if(n[e].enabled)return n[e];return null},SUBTITLES:(e,t)=>()=>{const{mediaTypes:{[e]:{tracks:n}}}=t;for(const e in n)if("showing"===n[e].mode||"hidden"===n[e].mode)return n[e];return null}},UD=e=>{["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach((t=>{RD[t](t,e)}));const{mediaTypes:t,mainPlaylistLoader:n,tech:i,vhs:r,segmentLoaders:{AUDIO:s,main:a}}=e;["AUDIO","SUBTITLES"].forEach((n=>{t[n].activeGroup=((e,t)=>n=>{const{mainPlaylistLoader:i,mediaTypes:{[e]:{groups:r}}}=t,s=i.media();if(!s)return null;let a=null;s.attributes[e]&&(a=r[s.attributes[e]]);const o=Object.keys(r);if(!a)if("AUDIO"===e&&o.length>1&&_L(t.main))for(let e=0;e<o.length;e++){const t=r[o[e]];if(MD(t,s)){a=t;break}}else r.main?a=r.main:1===o.length&&(a=r[o[0]]);return void 0===n?a:null!==n&&a&&a.filter((e=>e.id===n.id))[0]||null})(n,e),t[n].activeTrack=FD[n](n,e),t[n].onGroupChanged=((e,t)=>()=>{const{segmentLoaders:{[e]:n,main:i},mediaTypes:{[e]:r}}=t,s=r.activeTrack(),a=r.getActiveGroup(),o=r.activePlaylistLoader,l=r.lastGroup_;a&&l&&a.id===l.id||(r.lastGroup_=a,r.lastTrack_=s,PD(n,r),a&&!a.isMainPlaylist&&(a.playlistLoader?(n.resyncLoader(),LD(a.playlistLoader,r)):o&&i.resetEverything()))})(n,e),t[n].onGroupChanging=((e,t)=>()=>{const{segmentLoaders:{[e]:n},mediaTypes:{[e]:i}}=t;i.lastGroup_=null,n.abort(),n.pause()})(n,e),t[n].onTrackChanged=((e,t)=>()=>{const{mainPlaylistLoader:n,segmentLoaders:{[e]:i,main:r},mediaTypes:{[e]:s}}=t,a=s.activeTrack(),o=s.getActiveGroup(),l=s.activePlaylistLoader,c=s.lastTrack_;if((!c||!a||c.id!==a.id)&&(s.lastGroup_=o,s.lastTrack_=a,PD(i,s),o)){if(o.isMainPlaylist){if(!a||!c||a.id===c.id)return;const e=t.vhs.playlistController_,i=e.selectPlaylist();if(e.media()===i)return;return s.logger_(`track change. Switching main audio from ${c.id} to ${a.id}`),n.pause(),r.resetEverything(),void e.fastQualityChange_(i)}if("AUDIO"===e){if(!o.playlistLoader)return r.setAudio(!0),void r.resetEverything();i.setAudio(!0),r.setAudio(!1)}l!==o.playlistLoader?(i.track&&i.track(a),i.resetEverything(),LD(o.playlistLoader,s)):LD(o.playlistLoader,s)}})(n,e),t[n].getActiveGroup=((e,{mediaTypes:t})=>()=>{const n=t[e].activeTrack();return n?t[e].activeGroup(n):null})(n,e)}));const o=t.AUDIO.activeGroup();if(o){const e=(o.filter((e=>e.default))[0]||o[0]).id;t.AUDIO.tracks[e].enabled=!0,t.AUDIO.onGroupChanged(),t.AUDIO.onTrackChanged();t.AUDIO.getActiveGroup().playlistLoader?(a.setAudio(!1),s.setAudio(!0)):a.setAudio(!0)}n.on("mediachange",(()=>{["AUDIO","SUBTITLES"].forEach((e=>t[e].onGroupChanged()))})),n.on("mediachanging",(()=>{["AUDIO","SUBTITLES"].forEach((e=>t[e].onGroupChanging()))}));const l=()=>{t.AUDIO.onTrackChanged(),i.trigger({type:"usage",name:"vhs-audio-change"})};i.audioTracks().addEventListener("change",l),i.remoteTextTracks().addEventListener("change",t.SUBTITLES.onTrackChanged),r.on("dispose",(()=>{i.audioTracks().removeEventListener("change",l),i.remoteTextTracks().removeEventListener("change",t.SUBTITLES.onTrackChanged)})),i.clearTracks("audio");for(const c in t.AUDIO.tracks)i.audioTracks().addTrack(t.AUDIO.tracks[c])};let BD;const jD=["mediaRequests","mediaRequestsAborted","mediaRequestsTimedout","mediaRequestsErrored","mediaTransferDuration","mediaBytesTransferred","mediaAppends"],qD=function(e){return this.audioSegmentLoader_[e]+this.mainSegmentLoader_[e]};class HD extends MP.EventTarget{constructor(e){super();const{src:t,withCredentials:n,tech:i,bandwidth:r,externVhs:s,useCueTags:a,playlistExclusionDuration:o,enableLowInitialPlaylist:l,sourceType:c,cacheEncryptionKeys:u,bufferBasedABR:d,leastPixelDiffSelector:h,captionServices:p}=e;if(!t)throw new Error("A non-empty playlist URL or JSON manifest string is required");let{maxPlaylistRetries:f}=e;null==f&&(f=1/0),BD=s,this.bufferBasedABR=Boolean(d),this.leastPixelDiffSelector=Boolean(h),this.withCredentials=n,this.tech_=i,this.vhs_=i.vhs,this.sourceType_=c,this.useCueTags_=a,this.playlistExclusionDuration=o,this.maxPlaylistRetries=f,this.enableLowInitialPlaylist=l,this.useCueTags_&&(this.cueTagsTrack_=this.tech_.addTextTrack("metadata","ad-cues"),this.cueTagsTrack_.inBandMetadataTrackDispatchType=""),this.requestOptions_={withCredentials:n,maxPlaylistRetries:f,timeout:null},this.on("error",this.pauseLoading),this.mediaTypes_=(()=>{const e={};return["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach((t=>{e[t]={groups:{},tracks:{},activePlaylistLoader:null,activeGroup:eD,activeTrack:eD,getActiveGroup:eD,onGroupChanged:eD,onTrackChanged:eD,lastTrack_:null,logger_:$P(`MediaGroups[${t}]`)}})),e})(),this.mediaSource=new sT.MediaSource,this.handleDurationChange_=this.handleDurationChange_.bind(this),this.handleSourceOpen_=this.handleSourceOpen_.bind(this),this.handleSourceEnded_=this.handleSourceEnded_.bind(this),this.mediaSource.addEventListener("durationchange",this.handleDurationChange_),this.mediaSource.addEventListener("sourceopen",this.handleSourceOpen_),this.mediaSource.addEventListener("sourceended",this.handleSourceEnded_),this.seekable_=zP(),this.hasPlayed_=!1,this.syncController_=new ID(e),this.segmentMetadataTrack_=i.addRemoteTextTrack({kind:"metadata",label:"segment-metadata"},!1).track,this.decrypter_=new AD,this.sourceUpdater_=new vD(this.mediaSource),this.inbandTextTracks_={},this.timelineChangeController_=new xD;const m={vhs:this.vhs_,parse708captions:e.parse708captions,useDtsForTimestampOffset:e.useDtsForTimestampOffset,captionServices:p,mediaSource:this.mediaSource,currentTime:this.tech_.currentTime.bind(this.tech_),seekable:()=>this.seekable(),seeking:()=>this.tech_.seeking(),duration:()=>this.duration(),hasPlayed:()=>this.hasPlayed_,goalBufferLength:()=>this.goalBufferLength(),bandwidth:r,syncController:this.syncController_,decrypter:this.decrypter_,sourceType:this.sourceType_,inbandTextTracks:this.inbandTextTracks_,cacheEncryptionKeys:u,sourceUpdater:this.sourceUpdater_,timelineChangeController:this.timelineChangeController_,exactManifestTimings:e.exactManifestTimings};this.mainPlaylistLoader_="dash"===this.sourceType_?new nN(t,this.vhs_,this.requestOptions_):new NL(t,this.vhs_,this.requestOptions_),this.setupMainPlaylistLoaderListeners_(),this.mainSegmentLoader_=new ZN(WP(m,{segmentMetadataTrack:this.segmentMetadataTrack_,loaderType:"main"}),e),this.audioSegmentLoader_=new ZN(WP(m,{loaderType:"audio"}),e),this.subtitleSegmentLoader_=new wD(WP(m,{loaderType:"vtt",featuresNativeTextTracks:this.tech_.featuresNativeTextTracks,loadVttJs:()=>new Promise(((e,t)=>{function n(){i.off("vttjserror",r),e()}function r(){i.off("vttjsloaded",n),t()}i.one("vttjsloaded",n),i.one("vttjserror",r),i.addWebVttScript_()}))}),e),this.setupSegmentLoaderListeners_(),this.bufferBasedABR&&(this.mainPlaylistLoader_.one("loadedplaylist",(()=>this.startABRTimer_())),this.tech_.on("pause",(()=>this.stopABRTimer_())),this.tech_.on("play",(()=>this.startABRTimer_()))),jD.forEach((e=>{this[e+"_"]=qD.bind(this,e)})),this.logger_=$P("pc"),this.triggeredFmp4Usage=!1,"none"===this.tech_.preload()?(this.loadOnPlay_=()=>{this.loadOnPlay_=null,this.mainPlaylistLoader_.load()},this.tech_.one("play",this.loadOnPlay_)):this.mainPlaylistLoader_.load(),this.timeToLoadedData__=-1,this.mainAppendsToLoadedData__=-1,this.audioAppendsToLoadedData__=-1;const g="none"===this.tech_.preload()?"play":"loadstart";this.tech_.one(g,(()=>{const e=Date.now();this.tech_.one("loadeddata",(()=>{this.timeToLoadedData__=Date.now()-e,this.mainAppendsToLoadedData__=this.mainSegmentLoader_.mediaAppends,this.audioAppendsToLoadedData__=this.audioSegmentLoader_.mediaAppends}))}))}mainAppendsToLoadedData_(){return this.mainAppendsToLoadedData__}audioAppendsToLoadedData_(){return this.audioAppendsToLoadedData__}appendsToLoadedData_(){const e=this.mainAppendsToLoadedData_(),t=this.audioAppendsToLoadedData_();return-1===e||-1===t?-1:e+t}timeToLoadedData_(){return this.timeToLoadedData__}checkABR_(e="abr"){const t=this.selectPlaylist();t&&this.shouldSwitchToMedia_(t)&&this.switchMedia_(t,e)}switchMedia_(e,t,n){const i=this.media(),r=i&&(i.id||i.uri),s=e.id||e.uri;r&&r!==s&&(this.logger_(`switch media ${r} -> ${s} from ${t}`),this.tech_.trigger({type:"usage",name:`vhs-rendition-change-${t}`})),this.mainPlaylistLoader_.media(e,n)}startABRTimer_(){this.stopABRTimer_(),this.abrTimer_=sT.setInterval((()=>this.checkABR_()),250)}stopABRTimer_(){this.tech_.scrubbing&&this.tech_.scrubbing()||(sT.clearInterval(this.abrTimer_),this.abrTimer_=null)}getAudioTrackPlaylists_(){const e=this.main(),t=e&&e.playlists||[];if(!e||!e.mediaGroups||!e.mediaGroups.AUDIO)return t;const n=e.mediaGroups.AUDIO,i=Object.keys(n);let r;if(Object.keys(this.mediaTypes_.AUDIO.groups).length)r=this.mediaTypes_.AUDIO.activeTrack();else{const e=n.main||i.length&&n[i[0]];for(const t in e)if(e[t].default){r={label:t};break}}if(!r)return t;const s=[];for(const a in n)if(n[a][r.label]){const t=n[a][r.label];if(t.playlists&&t.playlists.length)s.push.apply(s,t.playlists);else if(t.uri)s.push(t);else if(e.playlists.length)for(let n=0;n<e.playlists.length;n++){const t=e.playlists[n];t.attributes&&t.attributes.AUDIO&&t.attributes.AUDIO===a&&s.push(t)}}return s.length?s:t}setupMainPlaylistLoaderListeners_(){this.mainPlaylistLoader_.on("loadedmetadata",(()=>{const e=this.mainPlaylistLoader_.media(),t=1.5*e.targetDuration*1e3;mL(this.mainPlaylistLoader_.main,this.mainPlaylistLoader_.media())?this.requestOptions_.timeout=0:this.requestOptions_.timeout=t,e.endList&&"none"!==this.tech_.preload()&&(this.mainSegmentLoader_.playlist(e,this.requestOptions_),this.mainSegmentLoader_.load()),UD({sourceType:this.sourceType_,segmentLoaders:{AUDIO:this.audioSegmentLoader_,SUBTITLES:this.subtitleSegmentLoader_,main:this.mainSegmentLoader_},tech:this.tech_,requestOptions:this.requestOptions_,mainPlaylistLoader:this.mainPlaylistLoader_,vhs:this.vhs_,main:this.main(),mediaTypes:this.mediaTypes_,excludePlaylist:this.excludePlaylist.bind(this)}),this.triggerPresenceUsage_(this.main(),e),this.setupFirstPlay(),!this.mediaTypes_.AUDIO.activePlaylistLoader||this.mediaTypes_.AUDIO.activePlaylistLoader.media()?this.trigger("selectedinitialmedia"):this.mediaTypes_.AUDIO.activePlaylistLoader.one("loadedmetadata",(()=>{this.trigger("selectedinitialmedia")}))})),this.mainPlaylistLoader_.on("loadedplaylist",(()=>{this.loadOnPlay_&&this.tech_.off("play",this.loadOnPlay_);let e=this.mainPlaylistLoader_.media();if(!e){let t;if(this.excludeUnsupportedVariants_(),this.enableLowInitialPlaylist&&(t=this.selectInitialPlaylist()),t||(t=this.selectPlaylist()),!t||!this.shouldSwitchToMedia_(t))return;this.initialMedia_=t,this.switchMedia_(this.initialMedia_,"initial");if(!("vhs-json"===this.sourceType_&&this.initialMedia_.segments))return;e=this.initialMedia_}this.handleUpdatedMediaPlaylist(e)})),this.mainPlaylistLoader_.on("error",(()=>{const e=this.mainPlaylistLoader_.error;this.excludePlaylist({playlistToExclude:e.playlist,error:e})})),this.mainPlaylistLoader_.on("mediachanging",(()=>{this.mainSegmentLoader_.abort(),this.mainSegmentLoader_.pause()})),this.mainPlaylistLoader_.on("mediachange",(()=>{const e=this.mainPlaylistLoader_.media(),t=1.5*e.targetDuration*1e3;mL(this.mainPlaylistLoader_.main,this.mainPlaylistLoader_.media())?this.requestOptions_.timeout=0:this.requestOptions_.timeout=t,this.mainPlaylistLoader_.load(),this.mainSegmentLoader_.playlist(e,this.requestOptions_),this.mainSegmentLoader_.load(),this.tech_.trigger({type:"mediachange",bubbles:!0})})),this.mainPlaylistLoader_.on("playlistunchanged",(()=>{const e=this.mainPlaylistLoader_.media();if("playlist-unchanged"===e.lastExcludeReason_)return;this.stuckAtPlaylistEnd_(e)&&(this.excludePlaylist({error:{message:"Playlist no longer updating.",reason:"playlist-unchanged"}}),this.tech_.trigger("playliststuck"))})),this.mainPlaylistLoader_.on("renditiondisabled",(()=>{this.tech_.trigger({type:"usage",name:"vhs-rendition-disabled"})})),this.mainPlaylistLoader_.on("renditionenabled",(()=>{this.tech_.trigger({type:"usage",name:"vhs-rendition-enabled"})}))}handleUpdatedMediaPlaylist(e){this.useCueTags_&&this.updateAdCues_(e),this.mainSegmentLoader_.playlist(e,this.requestOptions_),this.updateDuration(!e.endList),this.tech_.paused()||(this.mainSegmentLoader_.load(),this.audioSegmentLoader_&&this.audioSegmentLoader_.load())}triggerPresenceUsage_(e,t){const n=e.mediaGroups||{};let i=!0;const r=Object.keys(n.AUDIO);for(const s in n.AUDIO)for(const e in n.AUDIO[s]){n.AUDIO[s][e].uri||(i=!1)}i&&this.tech_.trigger({type:"usage",name:"vhs-demuxed"}),Object.keys(n.SUBTITLES).length&&this.tech_.trigger({type:"usage",name:"vhs-webvtt"}),BD.Playlist.isAes(t)&&this.tech_.trigger({type:"usage",name:"vhs-aes"}),r.length&&Object.keys(n.AUDIO[r[0]]).length>1&&this.tech_.trigger({type:"usage",name:"vhs-alternate-audio"}),this.useCueTags_&&this.tech_.trigger({type:"usage",name:"vhs-playlist-cue-tags"})}shouldSwitchToMedia_(e){const t=this.mainPlaylistLoader_.media()||this.mainPlaylistLoader_.pendingMedia_,n=this.tech_.currentTime(),i=this.bufferLowWaterLine(),r=this.bufferHighWaterLine();return function({currentPlaylist:e,buffered:t,currentTime:n,nextPlaylist:i,bufferLowWaterLine:r,bufferHighWaterLine:s,duration:a,bufferBasedABR:o,log:l}){if(!i)return MP.log.warn("We received no playlist to switch to. Please check your stream."),!1;const c=`allowing switch ${e&&e.id||"null"} -> ${i.id}`;if(!e)return l(`${c} as current playlist is not set`),!0;if(i.id===e.id)return!1;const u=Boolean(YP(t,n).length);if(!e.endList)return u||"number"!=typeof e.partTargetDuration?(l(`${c} as current playlist is live`),!0):(l(`not ${c} as current playlist is live llhls, but currentTime isn't in buffered.`),!1);const d=tL(t,n),h=o?iN.EXPERIMENTAL_MAX_BUFFER_LOW_WATER_LINE:iN.MAX_BUFFER_LOW_WATER_LINE;if(a<h)return l(`${c} as duration < max low water line (${a} < ${h})`),!0;const p=i.attributes.BANDWIDTH,f=e.attributes.BANDWIDTH;if(p<f&&(!o||d<s)){let e=`${c} as next bandwidth < current bandwidth (${p} < ${f})`;return o&&(e+=` and forwardBuffer < bufferHighWaterLine (${d} < ${s})`),l(e),!0}if((!o||p>f)&&d>=r){let e=`${c} as forwardBuffer >= bufferLowWaterLine (${d} >= ${r})`;return o&&(e+=` and next bandwidth > current bandwidth (${p} > ${f})`),l(e),!0}return l(`not ${c} as no switching criteria met`),!1}({buffered:this.tech_.buffered(),currentTime:n,currentPlaylist:t,nextPlaylist:e,bufferLowWaterLine:i,bufferHighWaterLine:r,duration:this.duration(),bufferBasedABR:this.bufferBasedABR,log:this.logger_})}setupSegmentLoaderListeners_(){this.mainSegmentLoader_.on("bandwidthupdate",(()=>{this.checkABR_("bandwidthupdate"),this.tech_.trigger("bandwidthupdate")})),this.mainSegmentLoader_.on("timeout",(()=>{this.bufferBasedABR&&this.mainSegmentLoader_.load()})),this.bufferBasedABR||this.mainSegmentLoader_.on("progress",(()=>{this.trigger("progress")})),this.mainSegmentLoader_.on("error",(()=>{const e=this.mainSegmentLoader_.error();this.excludePlaylist({playlistToExclude:e.playlist,error:e})})),this.mainSegmentLoader_.on("appenderror",(()=>{this.error=this.mainSegmentLoader_.error_,this.trigger("error")})),this.mainSegmentLoader_.on("syncinfoupdate",(()=>{this.onSyncInfoUpdate_()})),this.mainSegmentLoader_.on("timestampoffset",(()=>{this.tech_.trigger({type:"usage",name:"vhs-timestamp-offset"})})),this.audioSegmentLoader_.on("syncinfoupdate",(()=>{this.onSyncInfoUpdate_()})),this.audioSegmentLoader_.on("appenderror",(()=>{this.error=this.audioSegmentLoader_.error_,this.trigger("error")})),this.mainSegmentLoader_.on("ended",(()=>{this.logger_("main segment loader ended"),this.onEndOfStream()})),this.mainSegmentLoader_.on("earlyabort",(e=>{this.bufferBasedABR||(this.delegateLoaders_("all",["abort"]),this.excludePlaylist({error:{message:"Aborted early because there isn't enough bandwidth to complete the request without rebuffering."},playlistExclusionDuration:120}))}));const e=()=>{if(!this.sourceUpdater_.hasCreatedSourceBuffers())return this.tryToCreateSourceBuffers_();const e=this.getCodecsOrExclude_();e&&this.sourceUpdater_.addOrChangeSourceBuffers(e)};this.mainSegmentLoader_.on("trackinfo",e),this.audioSegmentLoader_.on("trackinfo",e),this.mainSegmentLoader_.on("fmp4",(()=>{this.triggeredFmp4Usage||(this.tech_.trigger({type:"usage",name:"vhs-fmp4"}),this.triggeredFmp4Usage=!0)})),this.audioSegmentLoader_.on("fmp4",(()=>{this.triggeredFmp4Usage||(this.tech_.trigger({type:"usage",name:"vhs-fmp4"}),this.triggeredFmp4Usage=!0)})),this.audioSegmentLoader_.on("ended",(()=>{this.logger_("audioSegmentLoader ended"),this.onEndOfStream()}))}mediaSecondsLoaded_(){return Math.max(this.audioSegmentLoader_.mediaSecondsLoaded+this.mainSegmentLoader_.mediaSecondsLoaded)}load(){this.mainSegmentLoader_.load(),this.mediaTypes_.AUDIO.activePlaylistLoader&&this.audioSegmentLoader_.load(),this.mediaTypes_.SUBTITLES.activePlaylistLoader&&this.subtitleSegmentLoader_.load()}fastQualityChange_(e=this.selectPlaylist()){e!==this.mainPlaylistLoader_.media()?(this.switchMedia_(e,"fast-quality"),this.mainSegmentLoader_.resetEverything((()=>{MP.browser.IE_VERSION||MP.browser.IS_EDGE?this.tech_.setCurrentTime(this.tech_.currentTime()+.04):this.tech_.setCurrentTime(this.tech_.currentTime())}))):this.logger_("skipping fastQualityChange because new media is same as old")}play(){if(this.setupFirstPlay())return;this.tech_.ended()&&this.tech_.setCurrentTime(0),this.hasPlayed_&&this.load();const e=this.tech_.seekable();return this.tech_.duration()===1/0&&this.tech_.currentTime()<e.start(0)?this.tech_.setCurrentTime(e.end(e.length-1)):void 0}setupFirstPlay(){const e=this.mainPlaylistLoader_.media();if(!e||this.tech_.paused()||this.hasPlayed_)return!1;if(!e.endList){const e=this.seekable();if(!e.length)return!1;if(MP.browser.IE_VERSION&&0===this.tech_.readyState())return this.tech_.one("loadedmetadata",(()=>{this.trigger("firstplay"),this.tech_.setCurrentTime(e.end(0)),this.hasPlayed_=!0})),!1;this.trigger("firstplay"),this.tech_.setCurrentTime(e.end(0))}return this.hasPlayed_=!0,this.load(),!0}handleSourceOpen_(){if(this.tryToCreateSourceBuffers_(),this.tech_.autoplay()){const e=this.tech_.play();void 0!==e&&"function"==typeof e.then&&e.then(null,(e=>{}))}this.trigger("sourceopen")}handleSourceEnded_(){if(!this.inbandTextTracks_.metadataTrack_)return;const e=this.inbandTextTracks_.metadataTrack_.cues;if(!e||!e.length)return;const t=this.duration();e[e.length-1].endTime=isNaN(t)||Math.abs(t)===1/0?Number.MAX_VALUE:t}handleDurationChange_(){this.tech_.trigger("durationchange")}onEndOfStream(){let e=this.mainSegmentLoader_.ended_;if(this.mediaTypes_.AUDIO.activePlaylistLoader){const t=this.mainSegmentLoader_.getCurrentMediaInfo_();e=!t||t.hasVideo?e&&this.audioSegmentLoader_.ended_:this.audioSegmentLoader_.ended_}e&&(this.stopABRTimer_(),this.sourceUpdater_.endOfStream())}stuckAtPlaylistEnd_(e){if(!this.seekable().length)return!1;const t=this.syncController_.getExpiredTime(e,this.duration());if(null===t)return!1;const n=BD.Playlist.playlistEnd(e,t),i=this.tech_.currentTime(),r=this.tech_.buffered();if(!r.length)return n-i<=KP;const s=r.end(r.length-1);return s-i<=KP&&n-s<=KP}excludePlaylist({playlistToExclude:e=this.mainPlaylistLoader_.media(),error:t={},playlistExclusionDuration:n}){if(e=e||this.mainPlaylistLoader_.media(),n=n||t.playlistExclusionDuration||this.playlistExclusionDuration,!e)return this.error=t,void("open"!==this.mediaSource.readyState?this.trigger("error"):this.sourceUpdater_.endOfStream("network"));e.playlistErrors_++;const i=this.mainPlaylistLoader_.main.playlists,r=i.filter(pL),s=1===r.length&&r[0]===e;if(1===i.length&&n!==1/0)return MP.log.warn(`Problem encountered with playlist ${e.id}. Trying again since it is the only playlist.`),this.tech_.trigger("retryplaylist"),this.mainPlaylistLoader_.load(s);if(s){let t=!1;i.forEach((n=>{if(n===e)return;const i=n.excludeUntil;void 0!==i&&i!==1/0&&(t=!0,delete n.excludeUntil)})),t&&(MP.log.warn("Removing other playlists from the exclusion list because the last rendition is about to be excluded."),this.tech_.trigger("retryplaylist"))}let a;a=e.playlistErrors_>this.maxPlaylistRetries?1/0:Date.now()+1e3*n,e.excludeUntil=a,t.reason&&(e.lastExcludeReason_=t.reason),this.tech_.trigger("excludeplaylist"),this.tech_.trigger({type:"usage",name:"vhs-rendition-excluded"});const o=this.selectPlaylist();if(!o)return this.error="Playback cannot continue. No available working or supported playlists.",void this.trigger("error");const l=t.internal?this.logger_:MP.log.warn,c=t.message?" "+t.message:"";l(`${t.internal?"Internal problem":"Problem"} encountered with playlist ${e.id}.${c} Switching to playlist ${o.id}.`),o.attributes.AUDIO!==e.attributes.AUDIO&&this.delegateLoaders_("audio",["abort","pause"]),o.attributes.SUBTITLES!==e.attributes.SUBTITLES&&this.delegateLoaders_("subtitle",["abort","pause"]),this.delegateLoaders_("main",["abort","pause"]);const u=o.targetDuration/2*1e3||5e3,d="number"==typeof o.lastRequest&&Date.now()-o.lastRequest<=u;return this.switchMedia_(o,"exclude",s||d)}pauseLoading(){this.delegateLoaders_("all",["abort","pause"]),this.stopABRTimer_()}delegateLoaders_(e,t){const n=[],i="all"===e;(i||"main"===e)&&n.push(this.mainPlaylistLoader_);const r=[];(i||"audio"===e)&&r.push("AUDIO"),(i||"subtitle"===e)&&(r.push("CLOSED-CAPTIONS"),r.push("SUBTITLES")),r.forEach((e=>{const t=this.mediaTypes_[e]&&this.mediaTypes_[e].activePlaylistLoader;t&&n.push(t)})),["main","audio","subtitle"].forEach((t=>{const i=this[`${t}SegmentLoader_`];!i||e!==t&&"all"!==e||n.push(i)})),n.forEach((e=>t.forEach((t=>{"function"==typeof e[t]&&e[t]()}))))}setCurrentTime(e){const t=YP(this.tech_.buffered(),e);return this.mainPlaylistLoader_&&this.mainPlaylistLoader_.media()&&this.mainPlaylistLoader_.media().segments?t&&t.length?e:(this.mainSegmentLoader_.resetEverything(),this.mainSegmentLoader_.abort(),this.mediaTypes_.AUDIO.activePlaylistLoader&&(this.audioSegmentLoader_.resetEverything(),this.audioSegmentLoader_.abort()),this.mediaTypes_.SUBTITLES.activePlaylistLoader&&(this.subtitleSegmentLoader_.resetEverything(),this.subtitleSegmentLoader_.abort()),void this.load()):0}duration(){if(!this.mainPlaylistLoader_)return 0;const e=this.mainPlaylistLoader_.media();return e?e.endList?this.mediaSource?this.mediaSource.duration:BD.Playlist.duration(e):1/0:0}seekable(){return this.seekable_}onSyncInfoUpdate_(){let e;if(!this.mainPlaylistLoader_)return;let t=this.mainPlaylistLoader_.media();if(!t)return;let n=this.syncController_.getExpiredTime(t,this.duration());if(null===n)return;const i=this.mainPlaylistLoader_.main,r=BD.Playlist.seekable(t,n,BD.Playlist.liveEdgeDelay(i,t));if(0===r.length)return;if(this.mediaTypes_.AUDIO.activePlaylistLoader){if(t=this.mediaTypes_.AUDIO.activePlaylistLoader.media(),n=this.syncController_.getExpiredTime(t,this.duration()),null===n)return;if(e=BD.Playlist.seekable(t,n,BD.Playlist.liveEdgeDelay(i,t)),0===e.length)return}let s,a;this.seekable_&&this.seekable_.length&&(s=this.seekable_.end(0),a=this.seekable_.start(0)),e?e.start(0)>r.end(0)||r.start(0)>e.end(0)?this.seekable_=r:this.seekable_=zP([[e.start(0)>r.start(0)?e.start(0):r.start(0),e.end(0)<r.end(0)?e.end(0):r.end(0)]]):this.seekable_=r,this.seekable_&&this.seekable_.length&&this.seekable_.end(0)===s&&this.seekable_.start(0)===a||(this.logger_(`seekable updated [${JP(this.seekable_)}]`),this.tech_.trigger("seekablechanged"))}updateDuration(e){if(this.updateDuration_&&(this.mediaSource.removeEventListener("sourceopen",this.updateDuration_),this.updateDuration_=null),"open"!==this.mediaSource.readyState)return this.updateDuration_=this.updateDuration.bind(this,e),void this.mediaSource.addEventListener("sourceopen",this.updateDuration_);if(e){const e=this.seekable();if(!e.length)return;return void((isNaN(this.mediaSource.duration)||this.mediaSource.duration<e.end(e.length-1))&&this.sourceUpdater_.setDuration(e.end(e.length-1)))}const t=this.tech_.buffered();let n=BD.Playlist.duration(this.mainPlaylistLoader_.media());t.length>0&&(n=Math.max(n,t.end(t.length-1))),this.mediaSource.duration!==n&&this.sourceUpdater_.setDuration(n)}dispose(){this.trigger("dispose"),this.decrypter_.terminate(),this.mainPlaylistLoader_.dispose(),this.mainSegmentLoader_.dispose(),this.loadOnPlay_&&this.tech_.off("play",this.loadOnPlay_),["AUDIO","SUBTITLES"].forEach((e=>{const t=this.mediaTypes_[e].groups;for(const n in t)t[n].forEach((e=>{e.playlistLoader&&e.playlistLoader.dispose()}))})),this.audioSegmentLoader_.dispose(),this.subtitleSegmentLoader_.dispose(),this.sourceUpdater_.dispose(),this.timelineChangeController_.dispose(),this.stopABRTimer_(),this.updateDuration_&&this.mediaSource.removeEventListener("sourceopen",this.updateDuration_),this.mediaSource.removeEventListener("durationchange",this.handleDurationChange_),this.mediaSource.removeEventListener("sourceopen",this.handleSourceOpen_),this.mediaSource.removeEventListener("sourceended",this.handleSourceEnded_),this.off()}main(){return this.mainPlaylistLoader_.main}media(){return this.mainPlaylistLoader_.media()||this.initialMedia_}areMediaTypesKnown_(){const e=!!this.mediaTypes_.AUDIO.activePlaylistLoader,t=!!this.mainSegmentLoader_.getCurrentMediaInfo_(),n=!e||!!this.audioSegmentLoader_.getCurrentMediaInfo_();return!(!t||!n)}getCodecsOrExclude_(){const e={main:this.mainSegmentLoader_.getCurrentMediaInfo_()||{},audio:this.audioSegmentLoader_.getCurrentMediaInfo_()||{}},t=this.mainSegmentLoader_.getPendingSegmentPlaylist()||this.media();e.video=e.main;const n=MN(this.main(),t),i={},r=!!this.mediaTypes_.AUDIO.activePlaylistLoader;if(e.main.hasVideo&&(i.video=n.video||e.main.videoCodec||"avc1.4d400d"),e.main.isMuxed&&(i.video+=`,${n.audio||e.main.audioCodec||FE}`),(e.main.hasAudio&&!e.main.isMuxed||e.audio.hasAudio||r)&&(i.audio=n.audio||e.main.audioCodec||e.audio.audioCodec||FE,e.audio.isFmp4=e.main.hasAudio&&!e.main.isMuxed?e.main.isFmp4:e.audio.isFmp4),!i.audio&&!i.video)return void this.excludePlaylist({playlistToExclude:t,error:{message:"Could not determine codecs for playlist."},playlistExclusionDuration:1/0});const s={};let a;if(["video","audio"].forEach((function(t){if(i.hasOwnProperty(t)&&(n=e[t].isFmp4,r=i[t],!(n?RE(r):ME(r)))){const n=e[t].isFmp4?"browser":"muxer";s[n]=s[n]||[],s[n].push(i[t]),"audio"===t&&(a=n)}var n,r})),r&&a&&t.attributes.AUDIO){const e=t.attributes.AUDIO;this.main().playlists.forEach((n=>{(n.attributes&&n.attributes.AUDIO)===e&&n!==t&&(n.excludeUntil=1/0)})),this.logger_(`excluding audio group ${e} as ${a} does not support codec(s): "${i.audio}"`)}if(!Object.keys(s).length){if(this.sourceUpdater_.hasCreatedSourceBuffers()&&!this.sourceUpdater_.canChangeType()){const e=[];if(["video","audio"].forEach((t=>{const n=(LE(this.sourceUpdater_.codecs[t]||"")[0]||{}).type,r=(LE(i[t]||"")[0]||{}).type;n&&r&&n.toLowerCase()!==r.toLowerCase()&&e.push(`"${this.sourceUpdater_.codecs[t]}" -> "${i[t]}"`)})),e.length)return void this.excludePlaylist({playlistToExclude:t,error:{message:`Codec switching not supported: ${e.join(", ")}.`,internal:!0},playlistExclusionDuration:1/0})}return i}{const e=Object.keys(s).reduce(((e,t)=>(e&&(e+=", "),e+=`${t} does not support codec(s): "${s[t].join(",")}"`)),"")+".";this.excludePlaylist({playlistToExclude:t,error:{internal:!0,message:e},playlistExclusionDuration:1/0})}}tryToCreateSourceBuffers_(){if("open"!==this.mediaSource.readyState||this.sourceUpdater_.hasCreatedSourceBuffers())return;if(!this.areMediaTypesKnown_())return;const e=this.getCodecsOrExclude_();if(!e)return;this.sourceUpdater_.createSourceBuffers(e);const t=[e.video,e.audio].filter(Boolean).join(",");this.excludeIncompatibleVariants_(t)}excludeUnsupportedVariants_(){const e=this.main().playlists,t=[];Object.keys(e).forEach((n=>{const i=e[n];if(-1!==t.indexOf(i.id))return;t.push(i.id);const r=MN(this.main,i),s=[];!r.audio||ME(r.audio)||RE(r.audio)||s.push(`audio codec ${r.audio}`),!r.video||ME(r.video)||RE(r.video)||s.push(`video codec ${r.video}`),r.text&&"stpp.ttml.im1t"===r.text&&s.push(`text codec ${r.text}`),s.length&&(i.excludeUntil=1/0,this.logger_(`excluding ${i.id} for unsupported: ${s.join(", ")}`))}))}excludeIncompatibleVariants_(e){const t=[],n=this.main().playlists,i=DN(LE(e)),r=RN(i),s=i.video&&LE(i.video)[0]||null,a=i.audio&&LE(i.audio)[0]||null;Object.keys(n).forEach((e=>{const i=n[e];if(-1!==t.indexOf(i.id)||i.excludeUntil===1/0)return;t.push(i.id);const o=[],l=MN(this.mainPlaylistLoader_.main,i),c=RN(l);if(l.audio||l.video){if(c!==r&&o.push(`codec count "${c}" !== "${r}"`),!this.sourceUpdater_.canChangeType()){const e=l.video&&LE(l.video)[0]||null,t=l.audio&&LE(l.audio)[0]||null;e&&s&&e.type.toLowerCase()!==s.type.toLowerCase()&&o.push(`video codec "${e.type}" !== "${s.type}"`),t&&a&&t.type.toLowerCase()!==a.type.toLowerCase()&&o.push(`audio codec "${t.type}" !== "${a.type}"`)}o.length&&(i.excludeUntil=1/0,this.logger_(`excluding ${i.id}: ${o.join(" && ")}`))}}))}updateAdCues_(e){let t=0;const n=this.seekable();n.length&&(t=n.start(0)),function(e,t,n=0){if(!e.segments)return;let i,r=n;for(let s=0;s<e.segments.length;s++){const n=e.segments[s];if(i||(i=SD(t,r+n.duration/2)),i){if("cueIn"in n){i.endTime=r,i.adEndTime=r,r+=n.duration,i=null;continue}if(r<i.endTime){r+=n.duration;continue}i.endTime+=n.duration}else if("cueOut"in n&&(i=new sT.VTTCue(r,r+n.duration,n.cueOut),i.adStartTime=r,i.adEndTime=r+parseFloat(n.cueOut),t.addCue(i)),"cueOutCont"in n){const[e,s]=n.cueOutCont.split("/").map(parseFloat);i=new sT.VTTCue(r,r+n.duration,""),i.adStartTime=r-e,i.adEndTime=i.adStartTime+s,t.addCue(i)}r+=n.duration}}(e,this.cueTagsTrack_,t)}goalBufferLength(){const e=this.tech_.currentTime(),t=iN.GOAL_BUFFER_LENGTH,n=iN.GOAL_BUFFER_LENGTH_RATE,i=Math.max(t,iN.MAX_GOAL_BUFFER_LENGTH);return Math.min(t+e*n,i)}bufferLowWaterLine(){const e=this.tech_.currentTime(),t=iN.BUFFER_LOW_WATER_LINE,n=iN.BUFFER_LOW_WATER_LINE_RATE,i=Math.max(t,iN.MAX_BUFFER_LOW_WATER_LINE),r=Math.max(t,iN.EXPERIMENTAL_MAX_BUFFER_LOW_WATER_LINE);return Math.min(t+e*n,this.bufferBasedABR?r:i)}bufferHighWaterLine(){return iN.BUFFER_HIGH_WATER_LINE}}class VD{constructor(e,t,n){const{playlistController_:i}=e,r=i.fastQualityChange_.bind(i);if(t.attributes){const e=t.attributes.RESOLUTION;this.width=e&&e.width,this.height=e&&e.height,this.bandwidth=t.attributes.BANDWIDTH,this.frameRate=t.attributes["FRAME-RATE"]}var s,a,o;this.codecs=MN(i.main(),t),this.playlist=t,this.id=n,this.enabled=(s=e.playlists,a=t.id,o=r,e=>{const t=s.main.playlists[a],n=hL(t),i=pL(t);return void 0===e?i:(e?delete t.disabled:t.disabled=!0,e===i||n||(o(),e?s.trigger("renditionenabled"):s.trigger("renditiondisabled")),e)})}}const $D=["seeking","seeked","pause","playing","error"];class WD{constructor(e){this.playlistController_=e.playlistController,this.tech_=e.tech,this.seekable=e.seekable,this.allowSeeksWithinUnsafeLiveWindow=e.allowSeeksWithinUnsafeLiveWindow,this.liveRangeSafeTimeDelta=e.liveRangeSafeTimeDelta,this.media=e.media,this.consecutiveUpdates=0,this.lastRecordedTime=null,this.checkCurrentTimeTimeout_=null,this.logger_=$P("PlaybackWatcher"),this.logger_("initialize");const t=()=>this.monitorCurrentTime_(),n=()=>this.monitorCurrentTime_(),i=()=>this.techWaiting_(),r=()=>this.resetTimeUpdate_(),s=this.playlistController_,a=["main","subtitle","audio"],o={};a.forEach((e=>{o[e]={reset:()=>this.resetSegmentDownloads_(e),updateend:()=>this.checkSegmentDownloads_(e)},s[`${e}SegmentLoader_`].on("appendsdone",o[e].updateend),s[`${e}SegmentLoader_`].on("playlistupdate",o[e].reset),this.tech_.on(["seeked","seeking"],o[e].reset)}));const l=e=>{["main","audio"].forEach((t=>{s[`${t}SegmentLoader_`][e]("appended",this.seekingAppendCheck_)}))};this.seekingAppendCheck_=()=>{this.fixesBadSeeks_()&&(this.consecutiveUpdates=0,this.lastRecordedTime=this.tech_.currentTime(),l("off"))},this.clearSeekingAppendCheck_=()=>l("off"),this.watchForBadSeeking_=()=>{this.clearSeekingAppendCheck_(),l("on")},this.tech_.on("seeked",this.clearSeekingAppendCheck_),this.tech_.on("seeking",this.watchForBadSeeking_),this.tech_.on("waiting",i),this.tech_.on($D,r),this.tech_.on("canplay",n),this.tech_.one("play",t),this.dispose=()=>{this.clearSeekingAppendCheck_(),this.logger_("dispose"),this.tech_.off("waiting",i),this.tech_.off($D,r),this.tech_.off("canplay",n),this.tech_.off("play",t),this.tech_.off("seeking",this.watchForBadSeeking_),this.tech_.off("seeked",this.clearSeekingAppendCheck_),a.forEach((e=>{s[`${e}SegmentLoader_`].off("appendsdone",o[e].updateend),s[`${e}SegmentLoader_`].off("playlistupdate",o[e].reset),this.tech_.off(["seeked","seeking"],o[e].reset)})),this.checkCurrentTimeTimeout_&&sT.clearTimeout(this.checkCurrentTimeTimeout_),this.resetTimeUpdate_()}}monitorCurrentTime_(){this.checkCurrentTime_(),this.checkCurrentTimeTimeout_&&sT.clearTimeout(this.checkCurrentTimeTimeout_),this.checkCurrentTimeTimeout_=sT.setTimeout(this.monitorCurrentTime_.bind(this),250)}resetSegmentDownloads_(e){const t=this.playlistController_[`${e}SegmentLoader_`];this[`${e}StalledDownloads_`]>0&&this.logger_(`resetting possible stalled download count for ${e} loader`),this[`${e}StalledDownloads_`]=0,this[`${e}Buffered_`]=t.buffered_()}checkSegmentDownloads_(e){const t=this.playlistController_,n=t[`${e}SegmentLoader_`],i=n.buffered_(),r=function(e,t){if(e===t)return!1;if(!e&&t||!t&&e)return!0;if(e.length!==t.length)return!0;for(let n=0;n<e.length;n++)if(e.start(n)!==t.start(n)||e.end(n)!==t.end(n))return!0;return!1}(this[`${e}Buffered_`],i);this[`${e}Buffered_`]=i,r?this.resetSegmentDownloads_(e):(this[`${e}StalledDownloads_`]++,this.logger_(`found #${this[`${e}StalledDownloads_`]} ${e} appends that did not increase buffer (possible stalled download)`,{playlistId:n.playlist_&&n.playlist_.id,buffered:ZP(i)}),this[`${e}StalledDownloads_`]<10||(this.logger_(`${e} loader stalled download exclusion`),this.resetSegmentDownloads_(e),this.tech_.trigger({type:"usage",name:`vhs-${e}-download-exclusion`}),"subtitle"!==e&&t.excludePlaylist({error:{message:`Excessive ${e} segment downloading detected.`},playlistExclusionDuration:1/0})))}checkCurrentTime_(){if(this.tech_.paused()||this.tech_.seeking())return;const e=this.tech_.currentTime(),t=this.tech_.buffered();if(this.lastRecordedTime===e&&(!t.length||e+KP>=t.end(t.length-1)))return this.techWaiting_();this.consecutiveUpdates>=5&&e===this.lastRecordedTime?(this.consecutiveUpdates++,this.waiting_()):e===this.lastRecordedTime?this.consecutiveUpdates++:(this.consecutiveUpdates=0,this.lastRecordedTime=e)}resetTimeUpdate_(){this.consecutiveUpdates=0}fixesBadSeeks_(){if(!this.tech_.seeking())return!1;const e=this.seekable(),t=this.tech_.currentTime();let n;if(this.afterSeekableWindow_(e,t,this.media(),this.allowSeeksWithinUnsafeLiveWindow)){n=e.end(e.length-1)}if(this.beforeSeekableWindow_(e,t)){const t=e.start(0);n=t+(t===e.end(0)?0:KP)}if(void 0!==n)return this.logger_(`Trying to seek outside of seekable at time ${t} with seekable range ${JP(e)}. Seeking to ${n}.`),this.tech_.setCurrentTime(n),!0;const i=this.playlistController_.sourceUpdater_,r=this.tech_.buffered(),s=i.audioBuffer?i.audioBuffered():null,a=i.videoBuffer?i.videoBuffered():null,o=this.media(),l=o.partTargetDuration?o.partTargetDuration:2*(o.targetDuration-GP),c=[s,a];for(let d=0;d<c.length;d++){if(!c[d])continue;if(tL(c[d],t)<l)return!1}const u=QP(r,t);return 0!==u.length&&(n=u.start(0)+KP,this.logger_(`Buffered region starts (${u.start(0)})  just beyond seek point (${t}). Seeking to ${n}.`),this.tech_.setCurrentTime(n),!0)}waiting_(){if(this.techWaiting_())return;const e=this.tech_.currentTime(),t=this.tech_.buffered(),n=YP(t,e);return n.length&&e+3<=n.end(0)?(this.resetTimeUpdate_(),this.tech_.setCurrentTime(e),this.logger_(`Stopped at ${e} while inside a buffered region [${n.start(0)} -> ${n.end(0)}]. Attempting to resume playback by seeking to the current time.`),void this.tech_.trigger({type:"usage",name:"vhs-unknown-waiting"})):void 0}techWaiting_(){const e=this.seekable(),t=this.tech_.currentTime();if(this.tech_.seeking())return!0;if(this.beforeSeekableWindow_(e,t)){const n=e.end(e.length-1);return this.logger_(`Fell out of live window at time ${t}. Seeking to live point (seekable end) ${n}`),this.resetTimeUpdate_(),this.tech_.setCurrentTime(n),this.tech_.trigger({type:"usage",name:"vhs-live-resync"}),!0}const n=this.tech_.vhs.playlistController_.sourceUpdater_,i=this.tech_.buffered();if(this.videoUnderflow_({audioBuffered:n.audioBuffered(),videoBuffered:n.videoBuffered(),currentTime:t}))return this.resetTimeUpdate_(),this.tech_.setCurrentTime(t),this.tech_.trigger({type:"usage",name:"vhs-video-underflow"}),!0;const r=QP(i,t);return r.length>0&&(this.logger_(`Stopped at ${t} and seeking to ${r.start(0)}`),this.resetTimeUpdate_(),this.skipTheGap_(t),!0)}afterSeekableWindow_(e,t,n,i=!1){if(!e.length)return!1;let r=e.end(e.length-1)+KP;return!n.endList&&i&&(r=e.end(e.length-1)+3*n.targetDuration),t>r}beforeSeekableWindow_(e,t){return!!(e.length&&e.start(0)>0&&t<e.start(0)-this.liveRangeSafeTimeDelta)}videoUnderflow_({videoBuffered:e,audioBuffered:t,currentTime:n}){if(!e)return;let i;if(e.length&&t.length){const r=YP(e,n-3),s=YP(e,n),a=YP(t,n);a.length&&!s.length&&r.length&&(i={start:r.end(0),end:a.end(0)})}else{QP(e,n).length||(i=this.gapFromVideoUnderflow_(e,n))}return!!i&&(this.logger_(`Encountered a gap in video from ${i.start} to ${i.end}. Seeking to current time ${n}`),!0)}skipTheGap_(e){const t=this.tech_.buffered(),n=this.tech_.currentTime(),i=QP(t,n);this.resetTimeUpdate_(),0!==i.length&&n===e&&(this.logger_("skipTheGap_:","currentTime:",n,"scheduled currentTime:",e,"nextRange start:",i.start(0)),this.tech_.setCurrentTime(i.start(0)+GP),this.tech_.trigger({type:"usage",name:"vhs-gap-skip"}))}gapFromVideoUnderflow_(e,t){const n=function(e){if(e.length<2)return zP();const t=[];for(let n=1;n<e.length;n++){const i=e.end(n-1),r=e.start(n);t.push([i,r])}return zP(t)}(e);for(let i=0;i<n.length;i++){const e=n.start(i),r=n.end(i);if(t-e<4&&t-e>2)return{start:e,end:r}}return null}}const zD={errorInterval:30,getSource(e){return e(this.tech({IWillNotUseThisInPlugins:!0}).currentSource_||this.currentSource())}},GD=function(e,t){let n=0,i=0;const r=WP(zD,t);e.ready((()=>{e.trigger({type:"usage",name:"vhs-error-reload-initialized"})}));const s=function(){i&&e.currentTime(i)},a=function(t){null!=t&&(i=e.duration()!==1/0&&e.currentTime()||0,e.one("loadedmetadata",s),e.src(t),e.trigger({type:"usage",name:"vhs-error-reload"}),e.play())},o=function(){if(Date.now()-n<1e3*r.errorInterval)e.trigger({type:"usage",name:"vhs-error-reload-canceled"});else{if(r.getSource&&"function"==typeof r.getSource)return n=Date.now(),r.getSource.call(e,a);MP.log.error("ERROR: reloadSourceOnError - The option getSource must be a function!")}},l=function(){e.off("loadedmetadata",s),e.off("error",o),e.off("dispose",l)};e.on("error",o),e.on("dispose",l),e.reloadSourceOnError=function(t){l(),GD(e,t)}},KD=function(e){GD(this,e)};var XD="3.0.2";const YD={PlaylistLoader:NL,Playlist:vL,utils:WL,STANDARD_PLAYLIST_SELECTOR:VN,INITIAL_PLAYLIST_SELECTOR:function(){const e=this.playlists.main.playlists.filter(vL.isEnabled);jN(e,((e,t)=>qN(e,t)));return e.filter((e=>!!MN(this.playlists.main,e).video))[0]||null},lastBandwidthSelector:VN,movingAverageBandwidthSelector:function(e){let t=-1,n=-1;if(e<0||e>1)throw new Error("Moving average bandwidth decay must be between 0 and 1.");return function(){const i=this.useDevicePixelRatio&&sT.devicePixelRatio||1;return t<0&&(t=this.systemBandwidth,n=this.systemBandwidth),this.systemBandwidth>0&&this.systemBandwidth!==n&&(t=e*this.systemBandwidth+(1-e)*t,n=this.systemBandwidth),HN(this.playlists.main,t,parseInt(BN(this.tech_.el(),"width"),10)*i,parseInt(BN(this.tech_.el(),"height"),10)*i,this.limitRenditionByPlayerDimensions,this.playlistController_)}},comparePlaylistBandwidth:qN,comparePlaylistResolution:function(e,t){let n,i;return e.attributes.RESOLUTION&&e.attributes.RESOLUTION.width&&(n=e.attributes.RESOLUTION.width),n=n||sT.Number.MAX_VALUE,t.attributes.RESOLUTION&&t.attributes.RESOLUTION.width&&(i=t.attributes.RESOLUTION.width),i=i||sT.Number.MAX_VALUE,n===i&&e.attributes.BANDWIDTH&&t.attributes.BANDWIDTH?e.attributes.BANDWIDTH-t.attributes.BANDWIDTH:n-i},xhr:ML()};Object.keys(iN).forEach((e=>{Object.defineProperty(YD,e,{get:()=>(MP.log.warn(`using Vhs.${e} is UNSAFE be sure you know what you are doing`),iN[e]),set(t){MP.log.warn(`using Vhs.${e} is UNSAFE be sure you know what you are doing`),"number"!=typeof t||t<0?MP.log.warn(`value of Vhs.${e} must be greater than or equal to 0`):iN[e]=t}})}));const QD="videojs-vhs",JD=function(e,t){const n=t.media();let i=-1;for(let r=0;r<e.length;r++)if(e[r].id===n.id){i=r;break}e.selectedIndex_=i,e.trigger({selectedIndex:i,type:"change"})};YD.canPlaySource=function(){return MP.log.warn("VHS is no longer a tech. Please remove it from your player's techOrder.")};const ZD=({player:e,sourceKeySystems:t,audioMedia:n,mainPlaylists:i})=>{if(!e.eme.initializeMediaKeys)return Promise.resolve();const r=((e,t)=>e.reduce(((e,n)=>{if(!n.contentProtection)return e;const i=t.reduce(((e,t)=>{const i=n.contentProtection[t];return i&&i.pssh&&(e[t]={pssh:i.pssh}),e}),{});return Object.keys(i).length&&e.push(i),e}),[]))(n?i.concat([n]):i,Object.keys(t)),s=[],a=[];return r.forEach((t=>{a.push(new Promise(((t,n)=>{e.tech_.one("keysessioncreated",t)}))),s.push(new Promise(((n,i)=>{e.eme.initializeMediaKeys({keySystems:t},(e=>{e?i(e):n()}))})))})),Promise.race([Promise.all(s),Promise.race(a)])},eR=({player:e,sourceKeySystems:t,media:n,audioMedia:i})=>{const r=((e,t,n)=>{if(!e)return e;let i={};t&&t.attributes&&t.attributes.CODECS&&(i=DN(LE(t.attributes.CODECS))),n&&n.attributes&&n.attributes.CODECS&&(i.audio=n.attributes.CODECS);const r=DE(i.video),s=DE(i.audio),a={};for(const o in e)a[o]={},s&&(a[o].audioContentType=s),r&&(a[o].videoContentType=r),t.contentProtection&&t.contentProtection[o]&&t.contentProtection[o].pssh&&(a[o].pssh=t.contentProtection[o].pssh),"string"==typeof e[o]&&(a[o].url=e[o]);return WP(e,a)})(t,n,i);return!!r&&(e.currentSource().keySystems=r,!(r&&!e.eme)||(MP.log.warn("DRM encrypted source cannot be decrypted without a DRM plugin"),!1))},tR=()=>{if(!sT.localStorage)return null;const e=sT.localStorage.getItem(QD);if(!e)return null;try{return JSON.parse(e)}catch(fB){return null}};YD.supportsNativeHls=function(){if(!dT||!dT.createElement)return!1;const e=dT.createElement("video");if(!MP.getTech("Html5").isSupported())return!1;return["application/vnd.apple.mpegurl","audio/mpegurl","audio/x-mpegurl","application/x-mpegurl","video/x-mpegurl","video/mpegurl","application/mpegurl"].some((function(t){return/maybe|probably/i.test(e.canPlayType(t))}))}(),YD.supportsNativeDash=!!(dT&&dT.createElement&&MP.getTech("Html5").isSupported())&&/maybe|probably/i.test(dT.createElement("video").canPlayType("application/dash+xml")),YD.supportsTypeNatively=e=>"hls"===e?YD.supportsNativeHls:"dash"===e&&YD.supportsNativeDash,YD.isSupported=function(){return MP.log.warn("VHS is no longer a tech. Please remove it from your player's techOrder.")};const nR=MP.getComponent("Component");class iR extends nR{constructor(e,t,n){if(super(t,n.vhs),"number"==typeof n.initialBandwidth&&(this.options_.bandwidth=n.initialBandwidth),this.logger_=$P("VhsHandler"),t.options_&&t.options_.playerId){const e=MP.getPlayer(t.options_.playerId);this.player_=e}if(this.tech_=t,this.source_=e,this.stats={},this.ignoreNextSeekingEvent_=!1,this.setOptions_(),this.options_.overrideNative&&t.overrideNativeAudioTracks&&t.overrideNativeVideoTracks)t.overrideNativeAudioTracks(!0),t.overrideNativeVideoTracks(!0);else if(this.options_.overrideNative&&(t.featuresNativeVideoTracks||t.featuresNativeAudioTracks))throw new Error("Overriding native VHS requires emulated tracks. See https://git.io/vMpjB");this.on(dT,["fullscreenchange","webkitfullscreenchange","mozfullscreenchange","MSFullscreenChange"],(e=>{const t=dT.fullscreenElement||dT.webkitFullscreenElement||dT.mozFullScreenElement||dT.msFullscreenElement;t&&t.contains(this.tech_.el())?this.playlistController_.fastQualityChange_():this.playlistController_.checkABR_()})),this.on(this.tech_,"seeking",(function(){this.ignoreNextSeekingEvent_?this.ignoreNextSeekingEvent_=!1:this.setCurrentTime(this.tech_.currentTime())})),this.on(this.tech_,"error",(function(){this.tech_.error()&&this.playlistController_&&this.playlistController_.pauseLoading()})),this.on(this.tech_,"play",this.play)}setOptions_(){if(this.options_.withCredentials=this.options_.withCredentials||!1,this.options_.limitRenditionByPlayerDimensions=!1!==this.options_.limitRenditionByPlayerDimensions,this.options_.useDevicePixelRatio=this.options_.useDevicePixelRatio||!1,this.options_.useBandwidthFromLocalStorage=void 0!==this.source_.useBandwidthFromLocalStorage?this.source_.useBandwidthFromLocalStorage:this.options_.useBandwidthFromLocalStorage||!1,this.options_.useNetworkInformationApi=this.options_.useNetworkInformationApi||!1,this.options_.useDtsForTimestampOffset=this.options_.useDtsForTimestampOffset||!1,this.options_.customTagParsers=this.options_.customTagParsers||[],this.options_.customTagMappers=this.options_.customTagMappers||[],this.options_.cacheEncryptionKeys=this.options_.cacheEncryptionKeys||!1,this.options_.llhls=!1!==this.options_.llhls,this.options_.bufferBasedABR=this.options_.bufferBasedABR||!1,"number"!=typeof this.options_.playlistExclusionDuration&&(this.options_.playlistExclusionDuration=300),"number"!=typeof this.options_.bandwidth&&this.options_.useBandwidthFromLocalStorage){const e=tR();e&&e.bandwidth&&(this.options_.bandwidth=e.bandwidth,this.tech_.trigger({type:"usage",name:"vhs-bandwidth-from-local-storage"})),e&&e.throughput&&(this.options_.throughput=e.throughput,this.tech_.trigger({type:"usage",name:"vhs-throughput-from-local-storage"}))}"number"!=typeof this.options_.bandwidth&&(this.options_.bandwidth=iN.INITIAL_BANDWIDTH),this.options_.enableLowInitialPlaylist=this.options_.enableLowInitialPlaylist&&this.options_.bandwidth===iN.INITIAL_BANDWIDTH,["withCredentials","useDevicePixelRatio","limitRenditionByPlayerDimensions","bandwidth","customTagParsers","customTagMappers","cacheEncryptionKeys","playlistSelector","initialPlaylistSelector","bufferBasedABR","liveRangeSafeTimeDelta","llhls","useNetworkInformationApi","useDtsForTimestampOffset","exactManifestTimings","leastPixelDiffSelector"].forEach((e=>{void 0!==this.source_[e]&&(this.options_[e]=this.source_[e])})),this.limitRenditionByPlayerDimensions=this.options_.limitRenditionByPlayerDimensions,this.useDevicePixelRatio=this.options_.useDevicePixelRatio}src(e,t){if(!e)return;var n;this.setOptions_(),this.options_.src=0===(n=this.source_.src).toLowerCase().indexOf("data:application/vnd.videojs.vhs+json,")?JSON.parse(n.substring(n.indexOf(",")+1)):n,this.options_.tech=this.tech_,this.options_.externVhs=YD,this.options_.sourceType=jE(t),this.options_.seekTo=e=>{this.tech_.setCurrentTime(e)},this.playlistController_=new HD(this.options_);const i=WP({liveRangeSafeTimeDelta:KP},this.options_,{seekable:()=>this.seekable(),media:()=>this.playlistController_.media(),playlistController:this.playlistController_});this.playbackWatcher_=new WD(i),this.playlistController_.on("error",(()=>{const e=MP.players[this.tech_.options_.playerId];let t=this.playlistController_.error;"object"!=typeof t||t.code?"string"==typeof t&&(t={message:t,code:3}):t.code=3,e.error(t)}));const r=this.options_.bufferBasedABR?YD.movingAverageBandwidthSelector(.55):YD.STANDARD_PLAYLIST_SELECTOR;this.playlistController_.selectPlaylist=this.selectPlaylist?this.selectPlaylist.bind(this):r.bind(this),this.playlistController_.selectInitialPlaylist=YD.INITIAL_PLAYLIST_SELECTOR.bind(this),this.playlists=this.playlistController_.mainPlaylistLoader_,this.mediaSource=this.playlistController_.mediaSource,Object.defineProperties(this,{selectPlaylist:{get(){return this.playlistController_.selectPlaylist},set(e){this.playlistController_.selectPlaylist=e.bind(this)}},throughput:{get(){return this.playlistController_.mainSegmentLoader_.throughput.rate},set(e){this.playlistController_.mainSegmentLoader_.throughput.rate=e,this.playlistController_.mainSegmentLoader_.throughput.count=1}},bandwidth:{get(){let e=this.playlistController_.mainSegmentLoader_.bandwidth;const t=sT.navigator.connection||sT.navigator.mozConnection||sT.navigator.webkitConnection,n=1e7;if(this.options_.useNetworkInformationApi&&t){const i=1e3*t.downlink*1e3;e=i>=n&&e>=n?Math.max(e,i):i}return e},set(e){this.playlistController_.mainSegmentLoader_.bandwidth=e,this.playlistController_.mainSegmentLoader_.throughput={rate:0,count:0}}},systemBandwidth:{get(){const e=1/(this.bandwidth||1);let t;t=this.throughput>0?1/this.throughput:0;return Math.floor(1/(e+t))},set(){MP.log.error('The "systemBandwidth" property is read-only')}}}),this.options_.bandwidth&&(this.bandwidth=this.options_.bandwidth),this.options_.throughput&&(this.throughput=this.options_.throughput),Object.defineProperties(this.stats,{bandwidth:{get:()=>this.bandwidth||0,enumerable:!0},mediaRequests:{get:()=>this.playlistController_.mediaRequests_()||0,enumerable:!0},mediaRequestsAborted:{get:()=>this.playlistController_.mediaRequestsAborted_()||0,enumerable:!0},mediaRequestsTimedout:{get:()=>this.playlistController_.mediaRequestsTimedout_()||0,enumerable:!0},mediaRequestsErrored:{get:()=>this.playlistController_.mediaRequestsErrored_()||0,enumerable:!0},mediaTransferDuration:{get:()=>this.playlistController_.mediaTransferDuration_()||0,enumerable:!0},mediaBytesTransferred:{get:()=>this.playlistController_.mediaBytesTransferred_()||0,enumerable:!0},mediaSecondsLoaded:{get:()=>this.playlistController_.mediaSecondsLoaded_()||0,enumerable:!0},mediaAppends:{get:()=>this.playlistController_.mediaAppends_()||0,enumerable:!0},mainAppendsToLoadedData:{get:()=>this.playlistController_.mainAppendsToLoadedData_()||0,enumerable:!0},audioAppendsToLoadedData:{get:()=>this.playlistController_.audioAppendsToLoadedData_()||0,enumerable:!0},appendsToLoadedData:{get:()=>this.playlistController_.appendsToLoadedData_()||0,enumerable:!0},timeToLoadedData:{get:()=>this.playlistController_.timeToLoadedData_()||0,enumerable:!0},buffered:{get:()=>ZP(this.tech_.buffered()),enumerable:!0},currentTime:{get:()=>this.tech_.currentTime(),enumerable:!0},currentSource:{get:()=>this.tech_.currentSource_,enumerable:!0},currentTech:{get:()=>this.tech_.name_,enumerable:!0},duration:{get:()=>this.tech_.duration(),enumerable:!0},main:{get:()=>this.playlists.main,enumerable:!0},playerDimensions:{get:()=>this.tech_.currentDimensions(),enumerable:!0},seekable:{get:()=>ZP(this.tech_.seekable()),enumerable:!0},timestamp:{get:()=>Date.now(),enumerable:!0},videoPlaybackQuality:{get:()=>this.tech_.getVideoPlaybackQuality(),enumerable:!0}}),this.tech_.one("canplay",this.playlistController_.setupFirstPlay.bind(this.playlistController_)),this.tech_.on("bandwidthupdate",(()=>{this.options_.useBandwidthFromLocalStorage&&(e=>{if(!sT.localStorage)return!1;let t=tR();t=t?WP(t,e):e;try{sT.localStorage.setItem(QD,JSON.stringify(t))}catch(fB){return!1}})({bandwidth:this.bandwidth,throughput:Math.round(this.throughput)})})),this.playlistController_.on("selectedinitialmedia",(()=>{var e;(e=this).representations=()=>{const t=e.playlistController_.main(),n=_L(t)?e.playlistController_.getAudioTrackPlaylists_():t.playlists;return n?n.filter((e=>!hL(e))).map(((t,n)=>new VD(e,t,t.id))):[]}})),this.playlistController_.sourceUpdater_.on("createdsourcebuffers",(()=>{this.setupEme_()})),this.on(this.playlistController_,"progress",(function(){this.tech_.trigger("progress")})),this.on(this.playlistController_,"firstplay",(function(){this.ignoreNextSeekingEvent_=!0})),this.setupQualityLevels_(),this.tech_.el()&&(this.mediaSourceUrl_=sT.URL.createObjectURL(this.playlistController_.mediaSource),this.tech_.src(this.mediaSourceUrl_))}createKeySessions_(){const e=this.playlistController_.mediaTypes_.AUDIO.activePlaylistLoader;this.logger_("waiting for EME key session creation"),ZD({player:this.player_,sourceKeySystems:this.source_.keySystems,audioMedia:e&&e.media(),mainPlaylists:this.playlists.main.playlists}).then((()=>{this.logger_("created EME key session"),this.playlistController_.sourceUpdater_.initializedEme()})).catch((e=>{this.logger_("error while creating EME key session",e),this.player_.error({message:"Failed to initialize media keys for EME",code:3})}))}handleWaitingForKey_(){this.logger_("waitingforkey fired, attempting to create any new key sessions"),this.createKeySessions_()}setupEme_(){const e=this.playlistController_.mediaTypes_.AUDIO.activePlaylistLoader,t=eR({player:this.player_,sourceKeySystems:this.source_.keySystems,media:this.playlists.media(),audioMedia:e&&e.media()});this.player_.tech_.on("keystatuschange",(e=>{if("output-restricted"!==e.status)return;const t=this.playlistController_.main();if(!t||!t.playlists)return;const n=[];t.playlists.forEach((e=>{e&&e.attributes&&e.attributes.RESOLUTION&&e.attributes.RESOLUTION.height>=720&&(!e.excludeUntil||e.excludeUntil<1/0)&&(e.excludeUntil=1/0,n.push(e))})),n.length&&(MP.log.warn('DRM keystatus changed to "output-restricted." Removing the following HD playlists that will most likely fail to play and clearing the buffer. This may be due to HDCP restrictions on the stream and the capabilities of the current device.',...n),this.playlistController_.fastQualityChange_())})),this.handleWaitingForKey_=this.handleWaitingForKey_.bind(this),this.player_.tech_.on("waitingforkey",this.handleWaitingForKey_),11!==MP.browser.IE_VERSION&&t?this.createKeySessions_():this.playlistController_.sourceUpdater_.initializedEme()}setupQualityLevels_(){const e=MP.players[this.tech_.options_.playerId];e&&e.qualityLevels&&!this.qualityLevels_&&(this.qualityLevels_=e.qualityLevels(),this.playlistController_.on("selectedinitialmedia",(()=>{!function(e,t){t.representations().forEach((t=>{e.addQualityLevel(t)})),JD(e,t.playlists)}(this.qualityLevels_,this)})),this.playlists.on("mediachange",(()=>{JD(this.qualityLevels_,this.playlists)})))}static version(){return{"@videojs/http-streaming":XD,"mux.js":"6.3.0","mpd-parser":"1.0.1","m3u8-parser":"6.0.0","aes-decrypter":"4.0.1"}}version(){return this.constructor.version()}canChangeType(){return vD.canChangeType()}play(){this.playlistController_.play()}setCurrentTime(e){this.playlistController_.setCurrentTime(e)}duration(){return this.playlistController_.duration()}seekable(){return this.playlistController_.seekable()}dispose(){this.playbackWatcher_&&this.playbackWatcher_.dispose(),this.playlistController_&&this.playlistController_.dispose(),this.qualityLevels_&&this.qualityLevels_.dispose(),this.tech_&&this.tech_.vhs&&delete this.tech_.vhs,this.mediaSourceUrl_&&sT.URL.revokeObjectURL&&(sT.URL.revokeObjectURL(this.mediaSourceUrl_),this.mediaSourceUrl_=null),this.tech_&&this.tech_.off("waitingforkey",this.handleWaitingForKey_),super.dispose()}convertToProgramTime(e,t){return zL({playlist:this.playlistController_.media(),time:e,callback:t})}seekToProgramTime(e,t,n=!0,i=2){return GL({programTime:e,playlist:this.playlistController_.media(),retryCount:i,pauseAfterSeek:n,seekTo:this.options_.seekTo,tech:this.options_.tech,callback:t})}}const rR={name:"videojs-http-streaming",VERSION:XD,canHandleSource(e,t={}){const n=WP(MP.options,t);return rR.canPlayType(e.type,n)},handleSource(e,t,n={}){const i=WP(MP.options,n);return t.vhs=new iR(e,t,i),t.vhs.xhr=ML(),t.vhs.src(e.src,e.type),t.vhs},canPlayType(e,t){const n=jE(e);if(!n)return"";const i=rR.getOverrideNative(t);return!YD.supportsTypeNatively(n)||i?"maybe":""},getOverrideNative(e={}){const{vhs:t={}}=e,n=!(MP.browser.IS_ANY_SAFARI||MP.browser.IS_IOS),{overrideNative:i=n}=t;return i}};RE("avc1.4d400d,mp4a.40.2")&&MP.getTech("Html5").registerSourceHandler(rR,0),MP.VhsHandler=iR,MP.VhsSourceHandler=rR,MP.Vhs=YD,MP.use||MP.registerComponent("Vhs",YD),MP.options.vhs=MP.options.vhs||{},MP.getPlugin&&MP.getPlugin("reloadSourceOnError")||MP.registerPlugin("reloadSourceOnError",KD);let sR=!1,aR=!1,oR=!1;function lR(e,t){return console.log("RELL"),new Promise(((n,i)=>{window.top.postMessage({type:"child2parenthttp",method:e,options:t},"*"),window.addEventListener("message",(e=>{console.log("RECEIVED ON CLIENT "),console.log(e),"parent2childhttp"==e.data.type&&(console.log("RECEIVED ON CLIENT step2"),n(e.data.response))}),{once:!0})}))}async function cR(e){return e.videourl,e.directurl,await nT({url:"https://www.youtube.com/watch?v=xf9ERdBkM5M",request:lR,throwOnError:!0})}function uR(e,t,n){return t.create("div",{style:"  \n  overflow-y: scroll;\n  height: calc(calc(var(--vh, 1vh) * 100) - 85px);\n  margin-top: 10px;\n  ","x-data":Sf((async function(){return await cR(this.selectedvideo),{videodata:await cR(this.selectedvideo)}}))},t.create("video",{autoplay:"true","x-show":"false",id:"backgroundvideo",preload:"auto","x-on:play":Sf((function(){oR||(oR=!0,this.$el.pause())}))},t.create("source",{src:"https://vjs.zencdn.net/v/oceans.mp4",type:"video/mp4"})),t.create("div",{style:"\n        background-color: white;\n        width: calc(calc(100% - 12px) - 12px);\n        margin-left: 12px;\n        margin-right: 12px;\n        height: 30vh;\n      ","x-show":"true"},t.create("video",{controls:!0,class:"video-js","x-init":Sf((function(){if(sR)return;sR=!0;let e=this.$el,t=e.parentElement.getBoundingClientRect(),n=MP(this.$el,{controls:!0,muted:!0,loop:!0,width:t.width,height:t.height,experimentalSvgIcons:!0});MP.getComponent("Button"),console.log(e),e.addEventListener("play",(e=>{document.getElementById("backgroundvideo").play()})),e.addEventListener("pause",(e=>{document.getElementById("backgroundvideo").pause()})),n.getChild("ControlBar").removeChild(n.getChild("ControlBar").getChild("FullscreenToggle")),n.getChild("ControlBar").removeChild(n.getChild("ControlBar").getChild("PictureInPictureToggle")),n.getChild("ControlBar").addChild("button",{controlText:"Enter fullscreen",clickHandler:function(e){MP.log("Clicked")},className:"vjs-visible-text"}),n.isFullscreen(!0)}))},t.create("source",{src:"https://vjs.zencdn.net/v/oceans.mp4",type:"video/mp4"}),t.create("source",{src:"https://vjs.zencdn.net/v/oceans.webm",type:"video/webm"}))),t.create("div",{"x-on:click":Sf((async function(){window.top.postMessage({type:"changeorientation",orientation:"landscape"},"*"),window.onresize=()=>{this.selectedvideo.fullscreen=!0,console.log(window.screen.orientation.angle),window.top.postMessage({type:"managestatusbar",action:"hide"},"*")},90!=window.screen.orientation.angle&&270!=window.screen.orientation.angle||(this.selectedvideo.fullscreen=!0)}))},t.create(Tf,{label:"Go fullscreen",type:"--raised"})),t.create("div",{"x-show":"selectedvideo.fullscreen",style:"\n        position: absolute;\n        top: 0;\n        left: 0;\n        width: 100vw;\n        height: 100vh;\n        z-index: 12;\n        background-color: black;\n      "},t.create("div",{style:"\n          width: 100%;\n          height: calc(100% - 25px);\n        "},t.create("video",{controls:!0,class:"video-js","x-init":Sf((function(){if(aR)return;aR=!0;let e=this.$el.parentElement.getBoundingClientRect();MP(this.$el,{controls:!0,muted:!0,loop:!0,width:e.width,height:e.height,controlBar:{fullscreenToggle:!0}}).isFullscreen(!0)}))},t.create("source",{src:"https://vjs.zencdn.net/v/oceans.mp4",type:"video/mp4"}),t.create("source",{src:"https://vjs.zencdn.net/v/oceans.webm",type:"video/webm"})))))}const dR=e=>e.CapacitorPlatforms=(e=>{const t=new Map;t.set("web",{name:"web"});const n=e.CapacitorPlatforms||{currentPlatform:{name:"web"},platforms:t};return n.addPlatform=(e,t)=>{n.platforms.set(e,t)},n.setPlatform=e=>{n.platforms.has(e)&&(n.currentPlatform=n.platforms.get(e))},n})(e),hR=dR("undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{});var pR;hR.addPlatform,hR.setPlatform,function(e){e.Unimplemented="UNIMPLEMENTED",e.Unavailable="UNAVAILABLE"}(pR||(pR={}));class fR extends Error{constructor(e,t,n){super(e),this.message=e,this.code=t,this.data=n}}const mR=e=>{var t,n,i,r,s;const a=e.CapacitorCustomPlatform||null,o=e.Capacitor||{},l=o.Plugins=o.Plugins||{},c=e.CapacitorPlatforms,u=(null===(t=null==c?void 0:c.currentPlatform)||void 0===t?void 0:t.getPlatform)||(()=>null!==a?a.name:(e=>{var t,n;return(null==e?void 0:e.androidBridge)?"android":(null===(n=null===(t=null==e?void 0:e.webkit)||void 0===t?void 0:t.messageHandlers)||void 0===n?void 0:n.bridge)?"ios":"web"})(e)),d=(null===(n=null==c?void 0:c.currentPlatform)||void 0===n?void 0:n.isNativePlatform)||(()=>"web"!==u()),h=(null===(i=null==c?void 0:c.currentPlatform)||void 0===i?void 0:i.isPluginAvailable)||(e=>{const t=f.get(e);return!!(null==t?void 0:t.platforms.has(u()))||!!p(e)}),p=(null===(r=null==c?void 0:c.currentPlatform)||void 0===r?void 0:r.getPluginHeader)||(e=>{var t;return null===(t=o.PluginHeaders)||void 0===t?void 0:t.find((t=>t.name===e))}),f=new Map,m=(null===(s=null==c?void 0:c.currentPlatform)||void 0===s?void 0:s.registerPlugin)||((e,t={})=>{const n=f.get(e);if(n)return console.warn(`Capacitor plugin "${e}" already registered. Cannot register plugins twice.`),n.proxy;const i=u(),r=p(e);let s;const c=n=>{let l;const c=(...c)=>{const u=(async()=>(!s&&i in t?s=s="function"==typeof t[i]?await t[i]():t[i]:null!==a&&!s&&"web"in t&&(s=s="function"==typeof t.web?await t.web():t.web),s))().then((t=>{const s=((t,n)=>{var s,a;if(!r){if(t)return null===(a=t[n])||void 0===a?void 0:a.bind(t);throw new fR(`"${e}" plugin is not implemented on ${i}`,pR.Unimplemented)}{const i=null==r?void 0:r.methods.find((e=>n===e.name));if(i)return"promise"===i.rtype?t=>o.nativePromise(e,n.toString(),t):(t,i)=>o.nativeCallback(e,n.toString(),t,i);if(t)return null===(s=t[n])||void 0===s?void 0:s.bind(t)}})(t,n);if(s){const e=s(...c);return l=null==e?void 0:e.remove,e}throw new fR(`"${e}.${n}()" is not implemented on ${i}`,pR.Unimplemented)}));return"addListener"===n&&(u.remove=async()=>l()),u};return c.toString=()=>`${n.toString()}() { [capacitor code] }`,Object.defineProperty(c,"name",{value:n,writable:!1,configurable:!1}),c},d=c("addListener"),h=c("removeListener"),m=(e,t)=>{const n=d({eventName:e},t),i=async()=>{const i=await n;h({eventName:e,callbackId:i},t)},r=new Promise((e=>n.then((()=>e({remove:i})))));return r.remove=async()=>{console.warn("Using addListener() without 'await' is deprecated."),await i()},r},g=new Proxy({},{get(e,t){switch(t){case"$$typeof":return;case"toJSON":return()=>({});case"addListener":return r?m:d;case"removeListener":return h;default:return c(t)}}});return l[e]=g,f.set(e,{name:e,proxy:g,platforms:new Set([...Object.keys(t),...r?[i]:[]])}),g});return o.convertFileSrc||(o.convertFileSrc=e=>e),o.getPlatform=u,o.handleError=t=>e.console.error(t),o.isNativePlatform=d,o.isPluginAvailable=h,o.pluginMethodNoop=(e,t,n)=>Promise.reject(`${n} does not have an implementation of "${t}".`),o.registerPlugin=m,o.Exception=fR,o.DEBUG=!!o.DEBUG,o.isLoggingEnabled=!!o.isLoggingEnabled,o.platform=o.getPlatform(),o.isNative=o.isNativePlatform(),o},gR=e=>e.Capacitor=mR(e),yR=gR("undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{}),_R=yR.registerPlugin;yR.Plugins;class vR{constructor(e){this.listeners={},this.windowListeners={},e&&(console.warn(`Capacitor WebPlugin "${e.name}" config object was deprecated in v3 and will be removed in v4.`),this.config=e)}addListener(e,t){this.listeners[e]||(this.listeners[e]=[]),this.listeners[e].push(t);const n=this.windowListeners[e];n&&!n.registered&&this.addWindowListener(n);const i=async()=>this.removeListener(e,t),r=Promise.resolve({remove:i});return Object.defineProperty(r,"remove",{value:async()=>{console.warn("Using addListener() without 'await' is deprecated."),await i()}}),r}async removeAllListeners(){this.listeners={};for(const e in this.windowListeners)this.removeWindowListener(this.windowListeners[e]);this.windowListeners={}}notifyListeners(e,t){const n=this.listeners[e];n&&n.forEach((e=>e(t)))}hasListeners(e){return!!this.listeners[e].length}registerWindowListener(e,t){this.windowListeners[t]={registered:!1,windowEventName:e,pluginEventName:t,handler:e=>{this.notifyListeners(t,e)}}}unimplemented(e="not implemented"){return new yR.Exception(e,pR.Unimplemented)}unavailable(e="not available"){return new yR.Exception(e,pR.Unavailable)}async removeListener(e,t){const n=this.listeners[e];if(!n)return;const i=n.indexOf(t);this.listeners[e].splice(i,1),this.listeners[e].length||this.removeWindowListener(this.windowListeners[e])}addWindowListener(e){window.addEventListener(e.windowEventName,e.handler),e.registered=!0}removeWindowListener(e){e&&(window.removeEventListener(e.windowEventName,e.handler),e.registered=!1)}}const bR=e=>encodeURIComponent(e).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape),TR=e=>e.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent);class ER extends vR{async getCookies(){const e=document.cookie,t={};return e.split(";").forEach((e=>{if(e.length<=0)return;let[n,i]=e.replace(/=/,"CAP_COOKIE").split("CAP_COOKIE");n=TR(n).trim(),i=TR(i).trim(),t[n]=i})),t}async setCookie(e){try{const t=bR(e.key),n=bR(e.value),i=`; expires=${(e.expires||"").replace("expires=","")}`,r=(e.path||"/").replace("path=",""),s=null!=e.url&&e.url.length>0?`domain=${e.url}`:"";document.cookie=`${t}=${n||""}${i}; path=${r}; ${s};`}catch(error){return Promise.reject(error)}}async deleteCookie(e){try{document.cookie=`${e.key}=; Max-Age=0`}catch(error){return Promise.reject(error)}}async clearCookies(){try{const e=document.cookie.split(";")||[];for(const t of e)document.cookie=t.replace(/^ +/,"").replace(/=.*/,`=;expires=${(new Date).toUTCString()};path=/`)}catch(error){return Promise.reject(error)}}async clearAllCookies(){try{await this.clearCookies()}catch(error){return Promise.reject(error)}}}_R("CapacitorCookies",{web:()=>new ER});const wR=(e,t={})=>{const n=Object.assign({method:e.method||"GET",headers:e.headers},t),i=((e={})=>{const t=Object.keys(e),n=Object.keys(e).map((e=>e.toLocaleLowerCase())).reduce(((n,i,r)=>(n[i]=e[t[r]],n)),{});return n})(e.headers),r=i["content-type"]||"";if("string"==typeof e.data)n.body=e.data;else if(r.includes("application/x-www-form-urlencoded")){const t=new URLSearchParams;for(const[n,i]of Object.entries(e.data||{}))t.set(n,i);n.body=t.toString()}else if(r.includes("multipart/form-data")){const t=new FormData;if(e.data instanceof FormData)e.data.forEach(((e,n)=>{t.append(n,e)}));else for(const n of Object.keys(e.data))t.append(n,e.data[n]);n.body=t;const i=new Headers(n.headers);i.delete("content-type"),n.headers=i}else(r.includes("application/json")||"object"==typeof e.data)&&(n.body=JSON.stringify(e.data));return n};class SR extends vR{async request(e){const t=wR(e,e.webFetchExtra),n=((e,t=!0)=>{if(!e)return null;const n=Object.entries(e).reduce(((e,n)=>{const[i,r]=n;let s,a;return Array.isArray(r)?(a="",r.forEach((e=>{s=t?encodeURIComponent(e):e,a+=`${i}=${s}&`})),a.slice(0,-1)):(s=t?encodeURIComponent(r):r,a=`${i}=${s}`),`${e}&${a}`}),"");return n.substr(1)})(e.params,e.shouldEncodeUrlParams),i=n?`${e.url}?${n}`:e.url,r=await fetch(i,t),s=r.headers.get("content-type")||"";let a,o,{responseType:l="text"}=r.ok?e:{};switch(s.includes("application/json")&&(l="json"),l){case"arraybuffer":case"blob":o=await r.blob(),a=await(async e=>new Promise(((t,n)=>{const i=new FileReader;i.onload=()=>{const e=i.result;t(e.indexOf(",")>=0?e.split(",")[1]:e)},i.onerror=e=>n(e),i.readAsDataURL(e)})))(o);break;case"json":a=await r.json();break;default:a=await r.text()}const c={};return r.headers.forEach(((e,t)=>{c[t]=e})),{data:a,headers:c,status:r.status,url:r.url}}async get(e){return this.request(Object.assign(Object.assign({},e),{method:"GET"}))}async post(e){return this.request(Object.assign(Object.assign({},e),{method:"POST"}))}async put(e){return this.request(Object.assign(Object.assign({},e),{method:"PUT"}))}async patch(e){return this.request(Object.assign(Object.assign({},e),{method:"PATCH"}))}async delete(e){return this.request(Object.assign(Object.assign({},e),{method:"DELETE"}))}}const CR=_R("CapacitorHttp",{web:()=>new SR});class IR extends vR{async write(e){if("undefined"==typeof navigator||!navigator.clipboard)throw this.unavailable("Clipboard API not available in this browser");if(void 0!==e.string)await this.writeText(e.string);else if(e.url)await this.writeText(e.url);else{if(!e.image)throw new Error("Nothing to write");if("undefined"==typeof ClipboardItem)throw this.unavailable("Writing images to the clipboard is not supported in this browser");try{const t=await(await fetch(e.image)).blob(),n=new ClipboardItem({[t.type]:t});await navigator.clipboard.write([n])}catch(t){throw new Error("Failed to write image")}}}async read(){if("undefined"==typeof navigator||!navigator.clipboard)throw this.unavailable("Clipboard API not available in this browser");if("undefined"==typeof ClipboardItem)return this.readText();try{const e=await navigator.clipboard.read(),t=e[0].types[0],n=await e[0].getType(t);return{value:await this._getBlobData(n,t),type:t}}catch(e){return this.readText()}}async readText(){if("undefined"==typeof navigator||!navigator.clipboard||!navigator.clipboard.readText)throw this.unavailable("Reading from clipboard not supported in this browser");return{value:await navigator.clipboard.readText(),type:"text/plain"}}async writeText(e){if("undefined"==typeof navigator||!navigator.clipboard||!navigator.clipboard.writeText)throw this.unavailable("Writting to clipboard not supported in this browser");await navigator.clipboard.writeText(e)}_getBlobData(e,t){return new Promise(((n,i)=>{const r=new FileReader;t.includes("image")?r.readAsDataURL(e):r.readAsText(e),r.onloadend=()=>{const e=r.result;n(e)},r.onerror=e=>{i(e)}}))}}const xR=_R("Clipboard",{web:()=>new IR});let kR=null;function AR(){const e=window.location.search;console.log(e);const t=new URLSearchParams(e);return window.location.href.startsWith("https://thatnerd527.github.io/MyTSBCPublic")?"about:blank":t.has("devmodeview")?"https://192.168.1.252:5173":t.has("devmodeviewremote")?"https://tsbchq.com:5173":"https://192.168.1.252:5173"}function OR(e,t,n){return console.log("production"),kR=t.create("iframe",{"x-on:load":Sf((function(){console.log(this.$el),(window.location.href.startsWith("https://localhost")||window.location.href.startsWith("capacitor-electron://"))&&(this.side1=!0,this.side2&&(this.offline.liveversion=!0))})),"x-init":Sf((function(){fetch("https://thatnerd527.github.io/MyTSBCPublic/").then((e=>{this.side2=!0,this.side1&&(window.location.href.startsWith("https://localhost")||window.location.href.startsWith("capacitor-electron://"))&&(this.offline.liveversion=!0)})).catch((e=>{this.offline.isoffline=!0,this.offline.dialogopen=!0,this.offline.liveversion=!1}))})),src:AR(),style:"\n            width: 100vw;\n            height: 100vh;\n          ","x-bind:style":'{\n            "position": "absolute",\n            "z-index": offline.liveversion ? 10 : -10,\n          }',"x-show":"!offline.isoffline",allow:"clipboard-write"}),t.create("div",{style:"\n        overflow: hidden;\n                    width: 100vw;\n            height: 100vh;\n      "},kR)}window.addEventListener("message",(e=>{switch(e.data.type){case"child2parenthttp":CR[e.data.method](e.data.options).then((e=>{console.log("manager received"),console.log("POSTING MESSAGE"),console.log(e.data),kR.contentWindow.postMessage({type:"parent2childhttp",response:e},"*")}));break;case"copytoclipboard":xR.write({string:e.data.text})}}));const PR={apiKey:"AIzaSyASnaeaC-FLvGoHKneasPInl12JC9jX27Q",authDomain:"mytsbc-a2d97.firebaseapp.com",projectId:"mytsbc-a2d97",storageBucket:"mytsbc-a2d97.appspot.com",messagingSenderId:"267158378243",appId:"1:267158378243:web:31d94cda2ae697a0be7b36",measurementId:"G-2RQNS9T3W0",databaseURL:"https://mytsbc-a2d97-default-rtdb.asia-southeast1.firebasedatabase.app/"},LR=new class extends T{constructor(e=window){super(e,(()=>new d),(()=>new h),(()=>new _),(()=>new l),(()=>new o),(()=>new C),(()=>new x),(()=>new I),(()=>new S),(()=>new A))}},NR={"--mdc-theme-primary-rgb":"13,188,196","--mdc-theme-primary":"rgb(var(--mdc-theme-primary-rgb))","--mdc-theme-secondary":"#fff","--mdc-theme-text-primary-on-background":"#fff","--mdc-theme-surface":"#2c2931","--mdc-theme-background":"#2c2931","--navbar":"#332f3a",color:"#ffffff"};window.colors=NR,window.onresize=()=>{var e=.01*window.innerHeight;document.documentElement.style.setProperty("--vh",`${e}px`)},LR.render(LR.create(LR.fragment,null,LR.create("script",null,"\n            async function getembed(url) {\n            return await (await fetch(url)).text()\n            }\n\n            function safeGet(name) {\n            console.log(typeof name)\n            }\n        "),LR.create(Xp,null))).on(document.head),document.addEventListener("alpine:init",(()=>{window.Alpine.data("mainData",(()=>({currentprogram:{},firebaseapp:null,firebasedatabase:null,currentseries:{},currentvideo:{},currentselected:{},selectedvideo:{selected:!1,fullscreen:!1,videourl:"https://www.youtube.com/watch?v=u18be_kRmC0",directurl:"https://www.youtube.com/watch?v=u18be_kRmC0",videotitle:"",description:""},testres:{},offline:{dialogopen:!1,isoffline:!1,liveversion:!1,side1:!1,side2:!1},programmes:{loading:!0,data:{}},serieses:{loading:!1,data:{}},initialized:!1,fontsize:20,auth:{authenticating:!0,dialogopen:!1,loggedIn:!1,email:"",displayName:"",idToken:"",uid:"",firebaseuser:null},actions:{signout:{"@click"(){if(this.auth.authenticating)return;this.auth={authenticating:!1,dialogopen:!1,loggedIn:!1,email:"",displayName:"",idToken:"",uid:"",firebaseuser:null};let e=Wp(this.firebaseapp);e.setPersistence(hh),rh(e)}}},firebasemanager:{"x-init"(){const e=gt(PR);mi(e),Wp(e);const t=Cc(e);return ac(Zl(t,"/programmes"),(e=>{this.programmes.data=e.val()})),this.firebasedatabase=t,this.firebaseapp=e,null}},authmanager:{"x-init"(){let e=Wp(this.firebaseapp);e.setPersistence(hh),e.onAuthStateChanged((e=>{console.log("authManager called"),null==e?this.auth.authenticating=!1:(this.auth.authenticating=!1,this.auth.loggedIn=!0,this.auth.email=e.email,this.auth.displayName=e.displayName,e.getIdToken().then((e=>{this.auth.idToken=e})),this.auth.uid=e.uid,this.auth.firebaseuser=e)}))}}})))})),LR.render(LR.create(LR.fragment,null,LR.create(Qp,{colors:NR,style:"\n            display:inline-block;\n\n            /*set the div in the top-left corner of the screen*/\n            position:absolute;\n            top:0;\n            left:0;\n\n            /*set the width and height to 100% of the screen*/\n            width:100%;\n            height:100%;\n            background-color: var(--mdc-theme-background);\n        "},LR.create("div",{"x-data":"mainData"},LR.create("div",{"x-bind:style":'{\n            "position": "absolute",\n            "z-index": offline.liveversion ? -10 : 10,\n            "width": "100vw",\n            "height": "100vh",\n          }',"x-show":"offline.isoffline || (!offline.liveversion)"},LR.create("div",{"x-bind":"firebasemanager"}),LR.create("div",{"x-bind":"authmanager"}),LR.create(_f,null,LR.create(yf,{page:"home"},LR.create(If,null)),LR.create(yf,{page:"settings"},LR.create(j_,null)),LR.create(yf,{page:"series"},LR.create(Fv,null)),LR.create(yf,{page:"thatnerdlabs"},LR.create(pb,null)),LR.create(yf,{page:"watch"},LR.create(uR,null))),LR.create(ff,null)),LR.create(OR,null),LR.create("div",{style:"\n            position: absolute;\n            z-index: 9999;\n          "},LR.create(Kv,{closeable:Qv("true"),title:Qv("'Not connected'"),dialogopen:Yv("offline.dialogopen"),dialogactions:LR.create("div",null)},LR.create("div",{style:"\r\n              color: var(--mdc-theme-text-primary-on-background);\r\n            "},"You seem to not be connected to the internet. Please check your internet. You may be able to browse, but you may not be able to watch videos."))))))).on(document.body);var DR,RR,MR,FR,UR=!1,BR=!1,jR=[],qR=-1;function HR(e){!function(e){jR.includes(e)||jR.push(e);BR||UR||(UR=!0,queueMicrotask($R))}(e)}function VR(e){let t=jR.indexOf(e);-1!==t&&t>qR&&jR.splice(t,1)}function $R(){UR=!1,BR=!0;for(let e=0;e<jR.length;e++)jR[e](),qR=e;jR.length=0,qR=-1,BR=!1}var WR=!0;function zR(e){RR=e}var GR=[],KR=[],XR=[];function YR(e,t){"function"==typeof t?(e._x_cleanups||(e._x_cleanups=[]),e._x_cleanups.push(t)):(t=e,KR.push(t))}function QR(e,t){e._x_attributeCleanups&&Object.entries(e._x_attributeCleanups).forEach((([n,i])=>{(void 0===t||t.includes(n))&&(i.forEach((e=>e())),delete e._x_attributeCleanups[n])}))}var JR=new MutationObserver(oM),ZR=!1;function eM(){JR.observe(document,{subtree:!0,childList:!0,attributes:!0,attributeOldValue:!0}),ZR=!0}function tM(){(nM=nM.concat(JR.takeRecords())).length&&!iM&&(iM=!0,queueMicrotask((()=>{oM(nM),nM.length=0,iM=!1}))),JR.disconnect(),ZR=!1}var nM=[],iM=!1;function rM(e){if(!ZR)return e();tM();let t=e();return eM(),t}var sM=!1,aM=[];function oM(e){if(sM)return void(aM=aM.concat(e));let t=[],n=[],i=new Map,r=new Map;for(let s=0;s<e.length;s++)if(!e[s].target._x_ignoreMutationObserver&&("childList"===e[s].type&&(e[s].addedNodes.forEach((e=>1===e.nodeType&&t.push(e))),e[s].removedNodes.forEach((e=>1===e.nodeType&&n.push(e)))),"attributes"===e[s].type)){let t=e[s].target,n=e[s].attributeName,a=e[s].oldValue,o=()=>{i.has(t)||i.set(t,[]),i.get(t).push({name:n,value:t.getAttribute(n)})},l=()=>{r.has(t)||r.set(t,[]),r.get(t).push(n)};t.hasAttribute(n)&&null===a?o():t.hasAttribute(n)?(l(),o()):l()}r.forEach(((e,t)=>{QR(t,e)})),i.forEach(((e,t)=>{GR.forEach((n=>n(t,e)))}));for(let s of n)if(!t.includes(s)&&(KR.forEach((e=>e(s))),s._x_cleanups))for(;s._x_cleanups.length;)s._x_cleanups.pop()();t.forEach((e=>{e._x_ignoreSelf=!0,e._x_ignore=!0}));for(let s of t)n.includes(s)||s.isConnected&&(delete s._x_ignoreSelf,delete s._x_ignore,XR.forEach((e=>e(s))),s._x_ignore=!0,s._x_ignoreSelf=!0);t.forEach((e=>{delete e._x_ignoreSelf,delete e._x_ignore})),t=null,n=null,i=null,r=null}function lM(e){return dM(uM(e))}function cM(e,t,n){return e._x_dataStack=[t,...uM(n||e)],()=>{e._x_dataStack=e._x_dataStack.filter((e=>e!==t))}}function uM(e){return e._x_dataStack?e._x_dataStack:"function"==typeof ShadowRoot&&e instanceof ShadowRoot?uM(e.host):e.parentNode?uM(e.parentNode):[]}function dM(e){let t=new Proxy({},{ownKeys:()=>Array.from(new Set(e.flatMap((e=>Object.keys(e))))),has:(t,n)=>e.some((e=>e.hasOwnProperty(n))),get:(n,i)=>(e.find((e=>{if(e.hasOwnProperty(i)){let n=Object.getOwnPropertyDescriptor(e,i);if(n.get&&n.get._x_alreadyBound||n.set&&n.set._x_alreadyBound)return!0;if((n.get||n.set)&&n.enumerable){let r=n.get,s=n.set,a=n;r=r&&r.bind(t),s=s&&s.bind(t),r&&(r._x_alreadyBound=!0),s&&(s._x_alreadyBound=!0),Object.defineProperty(e,i,{...a,get:r,set:s})}return!0}return!1}))||{})[i],set:(t,n,i)=>{let r=e.find((e=>e.hasOwnProperty(n)));return r?r[n]=i:e[e.length-1][n]=i,!0}});return t}function hM(e){let t=(n,i="")=>{Object.entries(Object.getOwnPropertyDescriptors(n)).forEach((([r,{value:s,enumerable:a}])=>{if(!1===a||void 0===s)return;let o=""===i?r:`${i}.${r}`;"object"==typeof s&&null!==s&&s._x_interceptor?n[r]=s.initialize(e,o,r):!(e=>"object"==typeof e&&!Array.isArray(e)&&null!==e)(s)||s===n||s instanceof Element||t(s,o)}))};return t(e)}function pM(e,t=(()=>{})){let n={initialValue:void 0,_x_interceptor:!0,initialize(t,n,i){return e(this.initialValue,(()=>function(e,t){return t.split(".").reduce(((e,t)=>e[t]),e)}(t,n)),(e=>fM(t,n,e)),n,i)}};return t(n),e=>{if("object"==typeof e&&null!==e&&e._x_interceptor){let t=n.initialize.bind(n);n.initialize=(i,r,s)=>{let a=e.initialize(i,r,s);return n.initialValue=a,t(i,r,s)}}else n.initialValue=e;return n}}function fM(e,t,n){if("string"==typeof t&&(t=t.split(".")),1!==t.length){if(0===t.length)throw error;return e[t[0]]||(e[t[0]]={}),fM(e[t[0]],t.slice(1),n)}e[t[0]]=n}var mM={};function gM(e,t){mM[e]=t}function yM(e,t){return Object.entries(mM).forEach((([n,i])=>{let r=null;Object.defineProperty(e,`$${n}`,{get:()=>i(t,function(){if(r)return r;{let[e,n]=MM(t);return r={interceptor:pM,...e},YR(t,n),r}}()),enumerable:!1})})),e}function _M(e,t,n,...i){try{return n(...i)}catch(fB){vM(fB,e,t)}}function vM(e,t,n=void 0){Object.assign(e,{el:t,expression:n}),console.warn(`Alpine Expression Error: ${e.message}\n\n${n?'Expression: "'+n+'"\n\n':""}`,t),setTimeout((()=>{throw e}),0)}var bM=!0;function TM(e,t,n={}){let i;return EM(e,t)((e=>i=e),n),i}function EM(...e){return wM(...e)}var wM=SM;function SM(e,t){let n={};yM(n,e);let i=[n,...uM(e)],r="function"==typeof t?function(e,t){return(n=(()=>{}),{scope:i={},params:r=[]}={})=>{IM(n,t.apply(dM([i,...e]),r))}}(i,t):function(e,t,n){let i=function(e,t){if(CM[e])return CM[e];let n=Object.getPrototypeOf((async function(){})).constructor,i=/^[\n\s]*if.*\(.*\)/.test(e)||/^(let|const)\s/.test(e)?`(async()=>{ ${e} })()`:e;const r=()=>{try{return new n(["__self","scope"],`with (scope) { __self.result = ${i} }; __self.finished = true; return __self.result;`)}catch(r){return vM(r,t,e),Promise.resolve()}};let s=r();return CM[e]=s,s}(t,n);return(r=(()=>{}),{scope:s={},params:a=[]}={})=>{i.result=void 0,i.finished=!1;let o=dM([s,...e]);if("function"==typeof i){let e=i(i,o).catch((e=>vM(e,n,t)));i.finished?(IM(r,i.result,o,a,n),i.result=void 0):e.then((e=>{IM(r,e,o,a,n)})).catch((e=>vM(e,n,t))).finally((()=>i.result=void 0))}}}(i,t,e);return _M.bind(null,e,t,r)}var CM={};function IM(e,t,n,i,r){if(bM&&"function"==typeof t){let s=t.apply(n,i);s instanceof Promise?s.then((t=>IM(e,t,n,i))).catch((e=>vM(e,r,t))):e(s)}else"object"==typeof t&&t instanceof Promise?t.then((t=>e(t))):e(t)}var xM="x-";function kM(e=""){return xM+e}var AM={};function OM(e,t){return AM[e]=t,{before(t){if(!AM[t])return void console.warn("Cannot find directive `${directive}`. `${name}` will use the default order of execution");const n=$M.indexOf(t);$M.splice(n>=0?n:$M.indexOf("DEFAULT"),0,e)}}}function PM(e,t,n){if(t=Array.from(t),e._x_virtualDirectives){let n=Object.entries(e._x_virtualDirectives).map((([e,t])=>({name:e,value:t}))),i=LM(n);n=n.map((e=>i.find((t=>t.name===e.name))?{name:`x-bind:${e.name}`,value:`"${e.value}"`}:e)),t=t.concat(n)}let i={},r=t.map(UM(((e,t)=>i[e]=t))).filter(qM).map(function(e,t){return({name:n,value:i})=>{let r=n.match(HM()),s=n.match(/:([a-zA-Z0-9\-:]+)/),a=n.match(/\.[^.\]]+(?=[^\]]*$)/g)||[],o=t||e[n]||n;return{type:r?r[1]:null,value:s?s[1]:null,modifiers:a.map((e=>e.replace(".",""))),expression:i,original:o}}}(i,n)).sort(WM);return r.map((t=>function(e,t){let n=()=>{},i=AM[t.type]||n,[r,s]=MM(e);!function(e,t,n){e._x_attributeCleanups||(e._x_attributeCleanups={}),e._x_attributeCleanups[t]||(e._x_attributeCleanups[t]=[]),e._x_attributeCleanups[t].push(n)}(e,t.original,s);let a=()=>{e._x_ignore||e._x_ignoreSelf||(i.inline&&i.inline(e,t,r),i=i.bind(i,e,t,r),NM?DM.get(RM).push(i):i())};return a.runCleanups=s,a}(e,t)))}function LM(e){return Array.from(e).map(UM()).filter((e=>!qM(e)))}var NM=!1,DM=new Map,RM=Symbol();function MM(e){let t=[],[n,i]=function(e){let t=()=>{};return[n=>{let i=RR(n);return e._x_effects||(e._x_effects=new Set,e._x_runEffects=()=>{e._x_effects.forEach((e=>e()))}),e._x_effects.add(i),t=()=>{void 0!==i&&(e._x_effects.delete(i),MR(i))},i},()=>{t()}]}(e);t.push(i);let r={Alpine:NF,effect:n,cleanup:e=>t.push(e),evaluateLater:EM.bind(EM,e),evaluate:TM.bind(TM,e)};return[r,()=>t.forEach((e=>e()))]}var FM=(e,t)=>({name:n,value:i})=>(n.startsWith(e)&&(n=n.replace(e,t)),{name:n,value:i});function UM(e=(()=>{})){return({name:t,value:n})=>{let{name:i,value:r}=BM.reduce(((e,t)=>t(e)),{name:t,value:n});return i!==t&&e(i,t),{name:i,value:r}}}var BM=[];function jM(e){BM.push(e)}function qM({name:e}){return HM().test(e)}var HM=()=>new RegExp(`^${xM}([^:^.]+)\\b`);var VM="DEFAULT",$M=["ignore","ref","data","id","bind","init","for","model","modelable","transition","show","if",VM,"teleport"];function WM(e,t){let n=-1===$M.indexOf(e.type)?VM:e.type,i=-1===$M.indexOf(t.type)?VM:t.type;return $M.indexOf(n)-$M.indexOf(i)}function zM(e,t,n={}){e.dispatchEvent(new CustomEvent(t,{detail:n,bubbles:!0,composed:!0,cancelable:!0}))}function GM(e,t){if("function"==typeof ShadowRoot&&e instanceof ShadowRoot)return void Array.from(e.children).forEach((e=>GM(e,t)));let n=!1;if(t(e,(()=>n=!0)),n)return;let i=e.firstElementChild;for(;i;)GM(i,t),i=i.nextElementSibling}function KM(e,...t){console.warn(`Alpine Warning: ${e}`,...t)}var XM=!1;var YM=[],QM=[];function JM(){return YM.map((e=>e()))}function ZM(){return YM.concat(QM).map((e=>e()))}function eF(e){YM.push(e)}function tF(e){QM.push(e)}function nF(e,t=!1){return iF(e,(e=>{if((t?ZM():JM()).some((t=>e.matches(t))))return!0}))}function iF(e,t){if(e){if(t(e))return e;if(e._x_teleportBack&&(e=e._x_teleportBack),e.parentElement)return iF(e.parentElement,t)}}var rF=[];function sF(e,t=GM,n=(()=>{})){!function(e){NM=!0;let t=Symbol();RM=t,DM.set(t,[]);let n=()=>{for(;DM.get(t).length;)DM.get(t).shift()();DM.delete(t)};e(n),NM=!1,n()}((()=>{t(e,((e,t)=>{n(e,t),rF.forEach((n=>n(e,t))),PM(e,e.attributes).forEach((e=>e())),e._x_ignore&&t()}))}))}function aF(e){GM(e,(e=>QR(e)))}var oF=[],lF=!1;function cF(e=(()=>{})){return queueMicrotask((()=>{lF||setTimeout((()=>{uF()}))})),new Promise((t=>{oF.push((()=>{e(),t()}))}))}function uF(){for(lF=!1;oF.length;)oF.shift()()}function dF(e,t){return Array.isArray(t)?hF(e,t.join(" ")):"object"==typeof t&&null!==t?function(e,t){let n=e=>e.split(" ").filter(Boolean),i=Object.entries(t).flatMap((([e,t])=>!!t&&n(e))).filter(Boolean),r=Object.entries(t).flatMap((([e,t])=>!t&&n(e))).filter(Boolean),s=[],a=[];return r.forEach((t=>{e.classList.contains(t)&&(e.classList.remove(t),a.push(t))})),i.forEach((t=>{e.classList.contains(t)||(e.classList.add(t),s.push(t))})),()=>{a.forEach((t=>e.classList.add(t))),s.forEach((t=>e.classList.remove(t)))}}(e,t):"function"==typeof t?dF(e,t()):hF(e,t)}function hF(e,t){return t=!0===t?t="":t||"",n=t.split(" ").filter((t=>!e.classList.contains(t))).filter(Boolean),e.classList.add(...n),()=>{e.classList.remove(...n)};var n}function pF(e,t){return"object"==typeof t&&null!==t?function(e,t){let n={};return Object.entries(t).forEach((([t,i])=>{n[t]=e.style[t],t.startsWith("--")||(t=t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()),e.style.setProperty(t,i)})),setTimeout((()=>{0===e.style.length&&e.removeAttribute("style")})),()=>{pF(e,n)}}(e,t):function(e,t){let n=e.getAttribute("style",t);return e.setAttribute("style",t),()=>{e.setAttribute("style",n||"")}}(e,t)}function fF(e,t=(()=>{})){let n=!1;return function(){n?t.apply(this,arguments):(n=!0,e.apply(this,arguments))}}function mF(e,t,n={}){e._x_transition||(e._x_transition={enter:{during:n,start:n,end:n},leave:{during:n,start:n,end:n},in(n=(()=>{}),i=(()=>{})){yF(e,t,{during:this.enter.during,start:this.enter.start,end:this.enter.end},n,i)},out(n=(()=>{}),i=(()=>{})){yF(e,t,{during:this.leave.during,start:this.leave.start,end:this.leave.end},n,i)}})}function gF(e){let t=e.parentNode;if(t)return t._x_hidePromise?t:gF(t)}function yF(e,t,{during:n,start:i,end:r}={},s=(()=>{}),a=(()=>{})){if(e._x_transitioning&&e._x_transitioning.cancel(),0===Object.keys(n).length&&0===Object.keys(i).length&&0===Object.keys(r).length)return s(),void a();let o,l,c;!function(e,t){let n,i,r,s=fF((()=>{rM((()=>{n=!0,i||t.before(),r||(t.end(),uF()),t.after(),e.isConnected&&t.cleanup(),delete e._x_transitioning}))}));e._x_transitioning={beforeCancels:[],beforeCancel(e){this.beforeCancels.push(e)},cancel:fF((function(){for(;this.beforeCancels.length;)this.beforeCancels.shift()();s()})),finish:s},rM((()=>{t.start(),t.during()})),lF=!0,requestAnimationFrame((()=>{if(n)return;let s=1e3*Number(getComputedStyle(e).transitionDuration.replace(/,.*/,"").replace("s","")),a=1e3*Number(getComputedStyle(e).transitionDelay.replace(/,.*/,"").replace("s",""));0===s&&(s=1e3*Number(getComputedStyle(e).animationDuration.replace("s",""))),rM((()=>{t.before()})),i=!0,requestAnimationFrame((()=>{n||(rM((()=>{t.end()})),uF(),setTimeout(e._x_transitioning.finish,s+a),r=!0)}))}))}(e,{start(){o=t(e,i)},during(){l=t(e,n)},before:s,end(){o(),c=t(e,r)},after:a,cleanup(){l(),c()}})}function _F(e,t,n){if(-1===e.indexOf(t))return n;const i=e[e.indexOf(t)+1];if(!i)return n;if("scale"===t&&isNaN(i))return n;if("duration"===t||"delay"===t){let e=i.match(/([0-9]+)ms/);if(e)return e[1]}return"origin"===t&&["top","right","left","center","bottom"].includes(e[e.indexOf(t)+2])?[i,e[e.indexOf(t)+2]].join(" "):i}OM("transition",((e,{value:t,modifiers:n,expression:i},{evaluate:r})=>{"function"==typeof i&&(i=r(i)),!1!==i&&(i&&"boolean"!=typeof i?function(e,t,n){mF(e,dF,"");let i={enter:t=>{e._x_transition.enter.during=t},"enter-start":t=>{e._x_transition.enter.start=t},"enter-end":t=>{e._x_transition.enter.end=t},leave:t=>{e._x_transition.leave.during=t},"leave-start":t=>{e._x_transition.leave.start=t},"leave-end":t=>{e._x_transition.leave.end=t}};i[n](t)}(e,i,t):function(e,t,n){mF(e,pF);let i=!t.includes("in")&&!t.includes("out")&&!n,r=i||t.includes("in")||["enter"].includes(n),s=i||t.includes("out")||["leave"].includes(n);t.includes("in")&&!i&&(t=t.filter(((e,n)=>n<t.indexOf("out"))));t.includes("out")&&!i&&(t=t.filter(((e,n)=>n>t.indexOf("out"))));let a=!t.includes("opacity")&&!t.includes("scale"),o=a||t.includes("opacity"),l=a||t.includes("scale"),c=o?0:1,u=l?_F(t,"scale",95)/100:1,d=_F(t,"delay",0)/1e3,h=_F(t,"origin","center"),p="opacity, transform",f=_F(t,"duration",150)/1e3,m=_F(t,"duration",75)/1e3,g="cubic-bezier(0.4, 0.0, 0.2, 1)";r&&(e._x_transition.enter.during={transformOrigin:h,transitionDelay:`${d}s`,transitionProperty:p,transitionDuration:`${f}s`,transitionTimingFunction:g},e._x_transition.enter.start={opacity:c,transform:`scale(${u})`},e._x_transition.enter.end={opacity:1,transform:"scale(1)"});s&&(e._x_transition.leave.during={transformOrigin:h,transitionDelay:`${d}s`,transitionProperty:p,transitionDuration:`${m}s`,transitionTimingFunction:g},e._x_transition.leave.start={opacity:1,transform:"scale(1)"},e._x_transition.leave.end={opacity:c,transform:`scale(${u})`})}(e,n,t))})),window.Element.prototype._x_toggleAndCascadeWithTransitions=function(e,t,n,i){const r="visible"===document.visibilityState?requestAnimationFrame:setTimeout;let s=()=>r(n);t?e._x_transition&&(e._x_transition.enter||e._x_transition.leave)?e._x_transition.enter&&(Object.entries(e._x_transition.enter.during).length||Object.entries(e._x_transition.enter.start).length||Object.entries(e._x_transition.enter.end).length)?e._x_transition.in(n):s():e._x_transition?e._x_transition.in(n):s():(e._x_hidePromise=e._x_transition?new Promise(((t,n)=>{e._x_transition.out((()=>{}),(()=>t(i))),e._x_transitioning.beforeCancel((()=>n({isFromCancelledTransition:!0})))})):Promise.resolve(i),queueMicrotask((()=>{let t=gF(e);t?(t._x_hideChildren||(t._x_hideChildren=[]),t._x_hideChildren.push(e)):r((()=>{let t=e=>{let n=Promise.all([e._x_hidePromise,...(e._x_hideChildren||[]).map(t)]).then((([e])=>e()));return delete e._x_hidePromise,delete e._x_hideChildren,n};t(e).catch((e=>{if(!e.isFromCancelledTransition)throw e}))}))})))};var vF=!1;function bF(e,t=(()=>{})){return(...n)=>vF?t(...n):e(...n)}function TF(e,t,n,i=[]){switch(e._x_bindings||(e._x_bindings=DR({})),e._x_bindings[t]=n,t=i.includes("camel")?t.toLowerCase().replace(/-(\w)/g,((e,t)=>t.toUpperCase())):t){case"value":!function(e,t){if("radio"===e.type)void 0===e.attributes.value&&(e.value=t),window.fromModel&&(e.checked=wF(e.value,t));else if("checkbox"===e.type)Number.isInteger(t)?e.value=t:Number.isInteger(t)||Array.isArray(t)||"boolean"==typeof t||[null,void 0].includes(t)?Array.isArray(t)?e.checked=t.some((t=>wF(t,e.value))):e.checked=!!t:e.value=String(t);else if("SELECT"===e.tagName)!function(e,t){const n=[].concat(t).map((e=>e+""));Array.from(e.options).forEach((e=>{e.selected=n.includes(e.value)}))}(e,t);else{if(e.value===t)return;e.value=t}}(e,n);break;case"style":!function(e,t){e._x_undoAddedStyles&&e._x_undoAddedStyles();e._x_undoAddedStyles=pF(e,t)}(e,n);break;case"class":!function(e,t){e._x_undoAddedClasses&&e._x_undoAddedClasses();e._x_undoAddedClasses=dF(e,t)}(e,n);break;case"selected":case"checked":!function(e,t,n){EF(e,t,n),function(e,t,n){e[t]!==n&&(e[t]=n)}(e,t,n)}(e,t,n);break;default:EF(e,t,n)}}function EF(e,t,n){[null,void 0,!1].includes(n)&&function(e){return!["aria-pressed","aria-checked","aria-expanded","aria-selected"].includes(e)}(t)?e.removeAttribute(t):(SF(t)&&(n=t),function(e,t,n){e.getAttribute(t)!=n&&e.setAttribute(t,n)}(e,t,n))}function wF(e,t){return e==t}function SF(e){return["disabled","checked","required","readonly","hidden","open","selected","autofocus","itemscope","multiple","novalidate","allowfullscreen","allowpaymentrequest","formnovalidate","autoplay","controls","loop","muted","playsinline","default","ismap","reversed","async","defer","nomodule"].includes(e)}function CF(e,t){var n;return function(){var i=this,r=arguments;clearTimeout(n),n=setTimeout((function(){n=null,e.apply(i,r)}),t)}}function IF(e,t){let n;return function(){let i=this,r=arguments;n||(e.apply(i,r),n=!0,setTimeout((()=>n=!1),t))}}var xF={},kF=!1;var AF={};function OF(e,t,n){let i=[];for(;i.length;)i.pop()();let r=Object.entries(t).map((([e,t])=>({name:e,value:t}))),s=LM(r);r=r.map((e=>s.find((t=>t.name===e.name))?{name:`x-bind:${e.name}`,value:`"${e.value}"`}:e)),PM(e,r,n).map((e=>{i.push(e.runCleanups),e()}))}var PF={};var LF={get reactive(){return DR},get release(){return MR},get effect(){return RR},get raw(){return FR},version:"3.12.2",flushAndStopDeferringMutations:function(){sM=!1,oM(aM),aM=[]},dontAutoEvaluateFunctions:function(e){let t=bM;bM=!1,e(),bM=t},disableEffectScheduling:function(e){WR=!1,e(),WR=!0},startObservingMutations:eM,stopObservingMutations:tM,setReactivityEngine:function(e){DR=e.reactive,MR=e.release,RR=t=>e.effect(t,{scheduler:e=>{WR?HR(e):e()}}),FR=e.raw},closestDataStack:uM,skipDuringClone:bF,onlyDuringClone:function(e){return(...t)=>vF&&e(...t)},addRootSelector:eF,addInitSelector:tF,addScopeToNode:cM,deferMutations:function(){sM=!0},mapAttributes:jM,evaluateLater:EM,interceptInit:function(e){rF.push(e)},setEvaluator:function(e){wM=e},mergeProxies:dM,findClosest:iF,closestRoot:nF,destroyTree:aF,interceptor:pM,transition:yF,setStyles:pF,mutateDom:rM,directive:OM,throttle:IF,debounce:CF,evaluate:TM,initTree:sF,nextTick:cF,prefixed:kM,prefix:function(e){xM=e},plugin:function(e){(Array.isArray(e)?e:[e]).forEach((e=>e(NF)))},magic:gM,store:function(e,t){if(kF||(xF=DR(xF),kF=!0),void 0===t)return xF[e];xF[e]=t,"object"==typeof t&&null!==t&&t.hasOwnProperty("init")&&"function"==typeof t.init&&xF[e].init(),hM(xF[e])},start:function(){XM&&KM("Alpine has already been initialized on this page. Calling Alpine.start() more than once can cause problems."),XM=!0,document.body||KM("Unable to initialize. Trying to load Alpine before `<body>` is available. Did you forget to add `defer` in Alpine's `<script>` tag?"),zM(document,"alpine:init"),zM(document,"alpine:initializing"),eM(),function(e){XR.push(e)}((e=>sF(e,GM))),YR((e=>aF(e))),function(e){GR.push(e)}(((e,t)=>{PM(e,t).forEach((e=>e()))})),Array.from(document.querySelectorAll(ZM())).filter((e=>!nF(e.parentElement,!0))).forEach((e=>{sF(e)})),zM(document,"alpine:initialized")},clone:function(e,t){t._x_dataStack||(t._x_dataStack=e._x_dataStack),vF=!0,function(e){let t=RR;zR(((e,n)=>{let i=t(e);return MR(i),()=>{}})),e(),zR(t)}((()=>{!function(e){let t=!1,n=(e,n)=>{GM(e,((e,i)=>{if(t&&function(e){return JM().some((t=>e.matches(t)))}(e))return i();t=!0,n(e,i)}))};sF(e,n)}(t)})),vF=!1},bound:function(e,t,n){if(e._x_bindings&&void 0!==e._x_bindings[t])return e._x_bindings[t];let i=e.getAttribute(t);return null===i?"function"==typeof n?n():n:""===i||(SF(t)?!![t,"true"].includes(i):i)},$data:lM,walk:GM,data:function(e,t){PF[e]=t},bind:function(e,t){let n="function"!=typeof t?()=>t:t;e instanceof Element?OF(e,n()):AF[e]=n}},NF=LF;function DF(e,t){const n=Object.create(null),i=e.split(",");for(let r=0;r<i.length;r++)n[i[r]]=!0;return t?e=>!!n[e.toLowerCase()]:e=>!!n[e]}var RF,MF=Object.freeze({}),FF=Object.assign,UF=Object.prototype.hasOwnProperty,BF=(e,t)=>UF.call(e,t),jF=Array.isArray,qF=e=>"[object Map]"===WF(e),HF=e=>"symbol"==typeof e,VF=e=>null!==e&&"object"==typeof e,$F=Object.prototype.toString,WF=e=>$F.call(e),zF=e=>WF(e).slice(8,-1),GF=e=>(e=>"string"==typeof e)(e)&&"NaN"!==e&&"-"!==e[0]&&""+parseInt(e,10)===e,KF=(e=>{const t=Object.create(null);return n=>t[n]||(t[n]=e(n))})((e=>e.charAt(0).toUpperCase()+e.slice(1))),XF=(e,t)=>e!==t&&(e==e||t==t),YF=new WeakMap,QF=[],JF=Symbol("iterate"),ZF=Symbol("Map key iterate");var eU=0;function tU(e){const{deps:t}=e;if(t.length){for(let n=0;n<t.length;n++)t[n].delete(e);t.length=0}}var nU=!0,iU=[];function rU(){const e=iU.pop();nU=void 0===e||e}function sU(e,t,n){if(!nU||void 0===RF)return;let i=YF.get(e);i||YF.set(e,i=new Map);let r=i.get(n);r||i.set(n,r=new Set),r.has(RF)||(r.add(RF),RF.deps.push(r),RF.options.onTrack&&RF.options.onTrack({effect:RF,target:e,type:t,key:n}))}function aU(e,t,n,i,r,s){const a=YF.get(e);if(!a)return;const o=new Set,l=e=>{e&&e.forEach((e=>{(e!==RF||e.allowRecurse)&&o.add(e)}))};if("clear"===t)a.forEach(l);else if("length"===n&&jF(e))a.forEach(((e,t)=>{("length"===t||t>=i)&&l(e)}));else switch(void 0!==n&&l(a.get(n)),t){case"add":jF(e)?GF(n)&&l(a.get("length")):(l(a.get(JF)),qF(e)&&l(a.get(ZF)));break;case"delete":jF(e)||(l(a.get(JF)),qF(e)&&l(a.get(ZF)));break;case"set":qF(e)&&l(a.get(JF))}o.forEach((a=>{a.options.onTrigger&&a.options.onTrigger({effect:a,target:e,key:n,type:t,newValue:i,oldValue:r,oldTarget:s}),a.options.scheduler?a.options.scheduler(a):a()}))}var oU=DF("__proto__,__v_isRef,__isVue"),lU=new Set(Object.getOwnPropertyNames(Symbol).map((e=>Symbol[e])).filter(HF)),cU=fU(),uU=fU(!1,!0),dU=fU(!0),hU=fU(!0,!0),pU={};function fU(e=!1,t=!1){return function(n,i,r){if("__v_isReactive"===i)return!e;if("__v_isReadonly"===i)return e;if("__v_raw"===i&&r===(e?t?VU:HU:t?qU:jU).get(n))return n;const s=jF(n);if(!e&&s&&BF(pU,i))return Reflect.get(pU,i,r);const a=Reflect.get(n,i,r);if(HF(i)?lU.has(i):oU(i))return a;if(e||sU(n,"get",i),t)return a;if(KU(a)){return!s||!GF(i)?a.value:a}return VF(a)?e?WU(a):$U(a):a}}function mU(e=!1){return function(t,n,i,r){let s=t[n];if(!e&&(i=GU(i),s=GU(s),!jF(t)&&KU(s)&&!KU(i)))return s.value=i,!0;const a=jF(t)&&GF(n)?Number(n)<t.length:BF(t,n),o=Reflect.set(t,n,i,r);return t===GU(r)&&(a?XF(i,s)&&aU(t,"set",n,i,s):aU(t,"add",n,i)),o}}["includes","indexOf","lastIndexOf"].forEach((e=>{const t=Array.prototype[e];pU[e]=function(...e){const n=GU(this);for(let t=0,r=this.length;t<r;t++)sU(n,"get",t+"");const i=t.apply(n,e);return-1===i||!1===i?t.apply(n,e.map(GU)):i}})),["push","pop","shift","unshift","splice"].forEach((e=>{const t=Array.prototype[e];pU[e]=function(...e){iU.push(nU),nU=!1;const n=t.apply(this,e);return rU(),n}}));var gU={get:cU,set:mU(),deleteProperty:function(e,t){const n=BF(e,t),i=e[t],r=Reflect.deleteProperty(e,t);return r&&n&&aU(e,"delete",t,void 0,i),r},has:function(e,t){const n=Reflect.has(e,t);return HF(t)&&lU.has(t)||sU(e,"has",t),n},ownKeys:function(e){return sU(e,"iterate",jF(e)?"length":JF),Reflect.ownKeys(e)}},yU={get:dU,set:(e,t)=>(console.warn(`Set operation on key "${String(t)}" failed: target is readonly.`,e),!0),deleteProperty:(e,t)=>(console.warn(`Delete operation on key "${String(t)}" failed: target is readonly.`,e),!0)};FF({},gU,{get:uU,set:mU(!0)}),FF({},yU,{get:hU});var _U=e=>VF(e)?$U(e):e,vU=e=>VF(e)?WU(e):e,bU=e=>e,TU=e=>Reflect.getPrototypeOf(e);function EU(e,t,n=!1,i=!1){const r=GU(e=e.__v_raw),s=GU(t);t!==s&&!n&&sU(r,"get",t),!n&&sU(r,"get",s);const{has:a}=TU(r),o=i?bU:n?vU:_U;return a.call(r,t)?o(e.get(t)):a.call(r,s)?o(e.get(s)):void(e!==r&&e.get(t))}function wU(e,t=!1){const n=this.__v_raw,i=GU(n),r=GU(e);return e!==r&&!t&&sU(i,"has",e),!t&&sU(i,"has",r),e===r?n.has(e):n.has(e)||n.has(r)}function SU(e,t=!1){return e=e.__v_raw,!t&&sU(GU(e),"iterate",JF),Reflect.get(e,"size",e)}function CU(e){e=GU(e);const t=GU(this);return TU(t).has.call(t,e)||(t.add(e),aU(t,"add",e,e)),this}function IU(e,t){t=GU(t);const n=GU(this),{has:i,get:r}=TU(n);let s=i.call(n,e);s?BU(n,i,e):(e=GU(e),s=i.call(n,e));const a=r.call(n,e);return n.set(e,t),s?XF(t,a)&&aU(n,"set",e,t,a):aU(n,"add",e,t),this}function xU(e){const t=GU(this),{has:n,get:i}=TU(t);let r=n.call(t,e);r?BU(t,n,e):(e=GU(e),r=n.call(t,e));const s=i?i.call(t,e):void 0,a=t.delete(e);return r&&aU(t,"delete",e,void 0,s),a}function kU(){const e=GU(this),t=0!==e.size,n=qF(e)?new Map(e):new Set(e),i=e.clear();return t&&aU(e,"clear",void 0,void 0,n),i}function AU(e,t){return function(n,i){const r=this,s=r.__v_raw,a=GU(s),o=t?bU:e?vU:_U;return!e&&sU(a,"iterate",JF),s.forEach(((e,t)=>n.call(i,o(e),o(t),r)))}}function OU(e,t,n){return function(...i){const r=this.__v_raw,s=GU(r),a=qF(s),o="entries"===e||e===Symbol.iterator&&a,l="keys"===e&&a,c=r[e](...i),u=n?bU:t?vU:_U;return!t&&sU(s,"iterate",l?ZF:JF),{next(){const{value:e,done:t}=c.next();return t?{value:e,done:t}:{value:o?[u(e[0]),u(e[1])]:u(e),done:t}},[Symbol.iterator](){return this}}}}function PU(e){return function(...t){{const n=t[0]?`on key "${t[0]}" `:"";console.warn(`${KF(e)} operation ${n}failed: target is readonly.`,GU(this))}return"delete"!==e&&this}}var LU={get(e){return EU(this,e)},get size(){return SU(this)},has:wU,add:CU,set:IU,delete:xU,clear:kU,forEach:AU(!1,!1)},NU={get(e){return EU(this,e,!1,!0)},get size(){return SU(this)},has:wU,add:CU,set:IU,delete:xU,clear:kU,forEach:AU(!1,!0)},DU={get(e){return EU(this,e,!0)},get size(){return SU(this,!0)},has(e){return wU.call(this,e,!0)},add:PU("add"),set:PU("set"),delete:PU("delete"),clear:PU("clear"),forEach:AU(!0,!1)},RU={get(e){return EU(this,e,!0,!0)},get size(){return SU(this,!0)},has(e){return wU.call(this,e,!0)},add:PU("add"),set:PU("set"),delete:PU("delete"),clear:PU("clear"),forEach:AU(!0,!0)};function MU(e,t){const n=t?e?RU:NU:e?DU:LU;return(t,i,r)=>"__v_isReactive"===i?!e:"__v_isReadonly"===i?e:"__v_raw"===i?t:Reflect.get(BF(n,i)&&i in t?n:t,i,r)}["keys","values","entries",Symbol.iterator].forEach((e=>{LU[e]=OU(e,!1,!1),DU[e]=OU(e,!0,!1),NU[e]=OU(e,!1,!0),RU[e]=OU(e,!0,!0)}));var FU={get:MU(!1,!1)},UU={get:MU(!0,!1)};function BU(e,t,n){const i=GU(n);if(i!==n&&t.call(e,i)){const t=zF(e);console.warn(`Reactive ${t} contains both the raw and reactive versions of the same object${"Map"===t?" as keys":""}, which can lead to inconsistencies. Avoid differentiating between the raw and reactive versions of an object and only use the reactive version if possible.`)}}var jU=new WeakMap,qU=new WeakMap,HU=new WeakMap,VU=new WeakMap;function $U(e){return e&&e.__v_isReadonly?e:zU(e,!1,gU,FU,jU)}function WU(e){return zU(e,!0,yU,UU,HU)}function zU(e,t,n,i,r){if(!VF(e))return console.warn(`value cannot be made reactive: ${String(e)}`),e;if(e.__v_raw&&(!t||!e.__v_isReactive))return e;const s=r.get(e);if(s)return s;const a=(o=e).__v_skip||!Object.isExtensible(o)?0:function(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}(zF(o));var o;if(0===a)return e;const l=new Proxy(e,2===a?i:n);return r.set(e,l),l}function GU(e){return e&&GU(e.__v_raw)||e}function KU(e){return Boolean(e&&!0===e.__v_isRef)}gM("nextTick",(()=>cF)),gM("dispatch",(e=>zM.bind(zM,e))),gM("watch",((e,{evaluateLater:t,effect:n})=>(i,r)=>{let s,a=t(i),o=!0,l=n((()=>a((e=>{JSON.stringify(e),o?s=e:queueMicrotask((()=>{r(e,s),s=e})),o=!1}))));e._x_effects.delete(l)})),gM("store",(function(){return xF})),gM("data",(e=>lM(e))),gM("root",(e=>nF(e))),gM("refs",(e=>(e._x_refs_proxy||(e._x_refs_proxy=dM(function(e){let t=[],n=e;for(;n;)n._x_refs&&t.push(n._x_refs),n=n.parentNode;return t}(e))),e._x_refs_proxy)));var XU={};function YU(e){return XU[e]||(XU[e]=0),++XU[e]}function QU(e,t,n){gM(t,(t=>KM(`You can't use [$${directiveName}] without first installing the "${e}" plugin here: https://alpinejs.dev/plugins/${n}`,t)))}gM("id",(e=>(t,n=null)=>{let i=function(e,t){return iF(e,(e=>{if(e._x_ids&&e._x_ids[t])return!0}))}(e,t),r=i?i._x_ids[t]:YU(t);return n?`${t}-${r}-${n}`:`${t}-${r}`})),gM("el",(e=>e)),QU("Focus","focus","focus"),QU("Persist","persist","persist"),OM("modelable",((e,{expression:t},{effect:n,evaluateLater:i,cleanup:r})=>{let s=i(t),a=()=>{let e;return s((t=>e=t)),e},o=i(`${t} = __placeholder`),l=e=>o((()=>{}),{scope:{__placeholder:e}}),c=a();l(c),queueMicrotask((()=>{if(!e._x_model)return;e._x_removeModelListeners.default();let t=e._x_model.get,n=e._x_model.set,i=function({get:e,set:t},{get:n,set:i}){let r,s,a=!0,o=RR((()=>{let o,l;a?(o=e(),i(o),l=n(),a=!1):(o=e(),l=n(),s=JSON.stringify(o),JSON.stringify(l),s!==r?(l=n(),i(o),l=o):(t(l),o=l)),r=JSON.stringify(o),JSON.stringify(l)}));return()=>{MR(o)}}({get:()=>t(),set(e){n(e)}},{get:()=>a(),set(e){l(e)}});r(i)}))}));var JU=document.createElement("div");OM("teleport",((e,{modifiers:t,expression:n},{cleanup:i})=>{"template"!==e.tagName.toLowerCase()&&KM("x-teleport can only be used on a <template> tag",e);let r=bF((()=>document.querySelector(n)),(()=>JU))();r||KM(`Cannot find x-teleport element for selector: "${n}"`);let s=e.content.cloneNode(!0).firstElementChild;e._x_teleport=s,s._x_teleportBack=e,e._x_forwardEvents&&e._x_forwardEvents.forEach((t=>{s.addEventListener(t,(t=>{t.stopPropagation(),e.dispatchEvent(new t.constructor(t.type,t))}))})),cM(s,{},e),rM((()=>{t.includes("prepend")?r.parentNode.insertBefore(s,r):t.includes("append")?r.parentNode.insertBefore(s,r.nextSibling):r.appendChild(s),sF(s),s._x_ignore=!0})),i((()=>s.remove()))}));var ZU=()=>{};function eB(e,t,n,i){let r=e,s=e=>i(e),a={},o=(e,t)=>n=>t(e,n);if(n.includes("dot")&&(t=t.replace(/-/g,".")),n.includes("camel")&&(t=function(e){return e.toLowerCase().replace(/-(\w)/g,((e,t)=>t.toUpperCase()))}(t)),n.includes("passive")&&(a.passive=!0),n.includes("capture")&&(a.capture=!0),n.includes("window")&&(r=window),n.includes("document")&&(r=document),n.includes("debounce")){let e=n[n.indexOf("debounce")+1]||"invalid-wait",t=tB(e.split("ms")[0])?Number(e.split("ms")[0]):250;s=CF(s,t)}if(n.includes("throttle")){let e=n[n.indexOf("throttle")+1]||"invalid-wait",t=tB(e.split("ms")[0])?Number(e.split("ms")[0]):250;s=IF(s,t)}return n.includes("prevent")&&(s=o(s,((e,t)=>{t.preventDefault(),e(t)}))),n.includes("stop")&&(s=o(s,((e,t)=>{t.stopPropagation(),e(t)}))),n.includes("self")&&(s=o(s,((t,n)=>{n.target===e&&t(n)}))),(n.includes("away")||n.includes("outside"))&&(r=document,s=o(s,((t,n)=>{e.contains(n.target)||!1!==n.target.isConnected&&(e.offsetWidth<1&&e.offsetHeight<1||!1!==e._x_isShown&&t(n))}))),n.includes("once")&&(s=o(s,((e,n)=>{e(n),r.removeEventListener(t,s,a)}))),s=o(s,((e,i)=>{(function(e){return["keydown","keyup"].includes(e)})(t)&&function(e,t){let n=t.filter((e=>!["window","document","prevent","stop","once","capture"].includes(e)));if(n.includes("debounce")){let e=n.indexOf("debounce");n.splice(e,tB((n[e+1]||"invalid-wait").split("ms")[0])?2:1)}if(n.includes("throttle")){let e=n.indexOf("throttle");n.splice(e,tB((n[e+1]||"invalid-wait").split("ms")[0])?2:1)}if(0===n.length)return!1;if(1===n.length&&nB(e.key).includes(n[0]))return!1;const i=["ctrl","shift","alt","meta","cmd","super"].filter((e=>n.includes(e)));if(n=n.filter((e=>!i.includes(e))),i.length>0){if(i.filter((t=>("cmd"!==t&&"super"!==t||(t="meta"),e[`${t}Key`]))).length===i.length&&nB(e.key).includes(n[0]))return!1}return!0}(i,n)||e(i)})),r.addEventListener(t,s,a),()=>{r.removeEventListener(t,s,a)}}function tB(e){return!Array.isArray(e)&&!isNaN(e)}function nB(e){if(!e)return[];var t;e=[" ","_"].includes(t=e)?t:t.replace(/([a-z])([A-Z])/g,"$1-$2").replace(/[_\s]/,"-").toLowerCase();let n={ctrl:"control",slash:"/",space:" ",spacebar:" ",cmd:"meta",esc:"escape",up:"arrow-up",down:"arrow-down",left:"arrow-left",right:"arrow-right",period:".",equal:"=",minus:"-",underscore:"_"};return n[e]=e,Object.keys(n).map((t=>{if(n[t]===e)return t})).filter((e=>e))}function iB(e){let t=e?parseFloat(e):null;return n=t,Array.isArray(n)||isNaN(n)?e:t;var n}function rB(e){return null!==e&&"object"==typeof e&&"function"==typeof e.get&&"function"==typeof e.set}function sB(e,t,n,i){let r={};if(/^\[.*\]$/.test(e.item)&&Array.isArray(t)){e.item.replace("[","").replace("]","").split(",").map((e=>e.trim())).forEach(((e,n)=>{r[e]=t[n]}))}else if(/^\{.*\}$/.test(e.item)&&!Array.isArray(t)&&"object"==typeof t){e.item.replace("{","").replace("}","").split(",").map((e=>e.trim())).forEach((e=>{r[e]=t[e]}))}else r[e.item]=t;return e.index&&(r[e.index]=n),e.collection&&(r[e.collection]=i),r}function aB(){}function oB(e,t,n){OM(t,(i=>KM(`You can't use [x-${t}] without first installing the "${e}" plugin here: https://alpinejs.dev/plugins/${n}`,i)))}ZU.inline=(e,{modifiers:t},{cleanup:n})=>{t.includes("self")?e._x_ignoreSelf=!0:e._x_ignore=!0,n((()=>{t.includes("self")?delete e._x_ignoreSelf:delete e._x_ignore}))},OM("ignore",ZU),OM("effect",((e,{expression:t},{effect:n})=>n(EM(e,t)))),OM("model",((e,{modifiers:t,expression:n},{effect:i,cleanup:r})=>{let s=e;t.includes("parent")&&(s=e.parentNode);let a,o=EM(s,n);a="string"==typeof n?EM(s,`${n} = __placeholder`):"function"==typeof n&&"string"==typeof n()?EM(s,`${n()} = __placeholder`):()=>{};let l=()=>{let e;return o((t=>e=t)),rB(e)?e.get():e},c=e=>{let t;o((e=>t=e)),rB(t)?t.set(e):a((()=>{}),{scope:{__placeholder:e}})};"string"==typeof n&&"radio"===e.type&&rM((()=>{e.hasAttribute("name")||e.setAttribute("name",n)}));var u="select"===e.tagName.toLowerCase()||["checkbox","radio"].includes(e.type)||t.includes("lazy")?"change":"input";let d=vF?()=>{}:eB(e,u,t,(n=>{c(function(e,t,n,i){return rM((()=>{if(n instanceof CustomEvent&&void 0!==n.detail)return n.detail??n.target.value;if("checkbox"===e.type){if(Array.isArray(i)){let e=t.includes("number")?iB(n.target.value):n.target.value;return n.target.checked?i.concat([e]):i.filter((t=>!(t==e)))}return n.target.checked}if("select"===e.tagName.toLowerCase()&&e.multiple)return t.includes("number")?Array.from(n.target.selectedOptions).map((e=>iB(e.value||e.text))):Array.from(n.target.selectedOptions).map((e=>e.value||e.text));{let e=n.target.value;return t.includes("number")?iB(e):t.includes("trim")?e.trim():e}}))}(e,t,n,l()))}));if(t.includes("fill")&&[null,""].includes(l())&&e.dispatchEvent(new Event(u,{})),e._x_removeModelListeners||(e._x_removeModelListeners={}),e._x_removeModelListeners.default=d,r((()=>e._x_removeModelListeners.default())),e.form){let t=eB(e.form,"reset",[],(t=>{cF((()=>e._x_model&&e._x_model.set(e.value)))}));r((()=>t()))}e._x_model={get:()=>l(),set(e){c(e)}},e._x_forceModelUpdate=t=>{void 0===(t=void 0===t?l():t)&&"string"==typeof n&&n.match(/\./)&&(t=""),window.fromModel=!0,rM((()=>TF(e,"value",t))),delete window.fromModel},i((()=>{let n=l();t.includes("unintrusive")&&document.activeElement.isSameNode(e)||e._x_forceModelUpdate(n)}))})),OM("cloak",(e=>queueMicrotask((()=>rM((()=>e.removeAttribute(kM("cloak")))))))),tF((()=>`[${kM("init")}]`)),OM("init",bF(((e,{expression:t},{evaluate:n})=>"string"==typeof t?!!t.trim()&&n(t,{},!1):n(t,{},!1)))),OM("text",((e,{expression:t},{effect:n,evaluateLater:i})=>{let r=i(t);n((()=>{r((t=>{rM((()=>{e.textContent=t}))}))}))})),OM("html",((e,{expression:t},{effect:n,evaluateLater:i})=>{let r=i(t);n((()=>{r((t=>{rM((()=>{e.innerHTML=t,e._x_ignoreSelf=!0,sF(e),delete e._x_ignoreSelf}))}))}))})),jM(FM(":",kM("bind:"))),OM("bind",((e,{value:t,modifiers:n,expression:i,original:r},{effect:s})=>{if(!t){let t={};return a=t,Object.entries(AF).forEach((([e,t])=>{Object.defineProperty(a,e,{get:()=>(...e)=>t(...e)})})),void EM(e,i)((t=>{OF(e,t,r)}),{scope:t})}var a;if("key"===t)return function(e,t){e._x_keyExpression=t}(e,i);let o=EM(e,i);s((()=>o((r=>{void 0===r&&"string"==typeof i&&i.match(/\./)&&(r=""),rM((()=>TF(e,t,r,n)))}))))})),eF((()=>`[${kM("data")}]`)),OM("data",bF(((e,{expression:t},{cleanup:n})=>{t=""===t?"{}":t;let i={};yM(i,e);let r={};var s,a;s=r,a=i,Object.entries(PF).forEach((([e,t])=>{Object.defineProperty(s,e,{get:()=>(...e)=>t.bind(a)(...e),enumerable:!1})}));let o=TM(e,t,{scope:r});void 0!==o&&!0!==o||(o={}),yM(o,e);let l=DR(o);hM(l);let c=cM(e,l);l.init&&TM(e,l.init),n((()=>{l.destroy&&TM(e,l.destroy),c()}))}))),OM("show",((e,{modifiers:t,expression:n},{effect:i})=>{let r=EM(e,n);e._x_doHide||(e._x_doHide=()=>{rM((()=>{e.style.setProperty("display","none",t.includes("important")?"important":void 0)}))}),e._x_doShow||(e._x_doShow=()=>{rM((()=>{1===e.style.length&&"none"===e.style.display?e.removeAttribute("style"):e.style.removeProperty("display")}))});let s,a=()=>{e._x_doHide(),e._x_isShown=!1},o=()=>{e._x_doShow(),e._x_isShown=!0},l=()=>setTimeout(o),c=fF((e=>e?o():a()),(t=>{"function"==typeof e._x_toggleAndCascadeWithTransitions?e._x_toggleAndCascadeWithTransitions(e,t,o,a):t?l():a()})),u=!0;i((()=>r((e=>{(u||e!==s)&&(t.includes("immediate")&&(e?l():a()),c(e),s=e,u=!1)}))))})),OM("for",((e,{expression:t},{effect:n,cleanup:i})=>{let r=function(e){let t=/,([^,\}\]]*)(?:,([^,\}\]]*))?$/,n=/^\s*\(|\)\s*$/g,i=/([\s\S]*?)\s+(?:in|of)\s+([\s\S]*)/,r=e.match(i);if(!r)return;let s={};s.items=r[2].trim();let a=r[1].replace(n,"").trim(),o=a.match(t);o?(s.item=a.replace(t,"").trim(),s.index=o[1].trim(),o[2]&&(s.collection=o[2].trim())):s.item=a;return s}(t),s=EM(e,r.items),a=EM(e,e._x_keyExpression||"index");e._x_prevKeys=[],e._x_lookup={},n((()=>function(e,t,n,i){let r=e=>"object"==typeof e&&!Array.isArray(e),s=e;n((n=>{var a;a=n,!Array.isArray(a)&&!isNaN(a)&&n>=0&&(n=Array.from(Array(n).keys(),(e=>e+1))),void 0===n&&(n=[]);let o=e._x_lookup,l=e._x_prevKeys,c=[],u=[];if(r(n))n=Object.entries(n).map((([e,r])=>{let s=sB(t,r,e,n);i((e=>u.push(e)),{scope:{index:e,...s}}),c.push(s)}));else for(let e=0;e<n.length;e++){let r=sB(t,n[e],e,n);i((e=>u.push(e)),{scope:{index:e,...r}}),c.push(r)}let d=[],h=[],p=[],f=[];for(let e=0;e<l.length;e++){let t=l[e];-1===u.indexOf(t)&&p.push(t)}l=l.filter((e=>!p.includes(e)));let m="template";for(let e=0;e<u.length;e++){let t=u[e],n=l.indexOf(t);if(-1===n)l.splice(e,0,t),d.push([m,e]);else if(n!==e){let t=l.splice(e,1)[0],i=l.splice(n-1,1)[0];l.splice(e,0,i),l.splice(n,0,t),h.push([t,i])}else f.push(t);m=t}for(let e=0;e<p.length;e++){let t=p[e];o[t]._x_effects&&o[t]._x_effects.forEach(VR),o[t].remove(),o[t]=null,delete o[t]}for(let e=0;e<h.length;e++){let[t,n]=h[e],i=o[t],r=o[n],a=document.createElement("div");rM((()=>{r||KM('x-for ":key" is undefined or invalid',s),r.after(a),i.after(r),r._x_currentIfEl&&r.after(r._x_currentIfEl),a.before(i),i._x_currentIfEl&&i.after(i._x_currentIfEl),a.remove()})),r._x_refreshXForScope(c[u.indexOf(n)])}for(let e=0;e<d.length;e++){let[t,n]=d[e],i="template"===t?s:o[t];i._x_currentIfEl&&(i=i._x_currentIfEl);let r=c[n],a=u[n],l=document.importNode(s.content,!0).firstElementChild,h=DR(r);cM(l,h,s),l._x_refreshXForScope=e=>{Object.entries(e).forEach((([e,t])=>{h[e]=t}))},rM((()=>{i.after(l),sF(l)})),"object"==typeof a&&KM("x-for key cannot be an object, it must be a string or an integer",s),o[a]=l}for(let e=0;e<f.length;e++)o[f[e]]._x_refreshXForScope(c[u.indexOf(f[e])]);s._x_prevKeys=u}))}(e,r,s,a))),i((()=>{Object.values(e._x_lookup).forEach((e=>e.remove())),delete e._x_prevKeys,delete e._x_lookup}))})),aB.inline=(e,{expression:t},{cleanup:n})=>{let i=nF(e);i._x_refs||(i._x_refs={}),i._x_refs[t]=e,n((()=>delete i._x_refs[t]))},OM("ref",aB),OM("if",((e,{expression:t},{effect:n,cleanup:i})=>{let r=EM(e,t);n((()=>r((t=>{t?(()=>{if(e._x_currentIfEl)return e._x_currentIfEl;let t=e.content.cloneNode(!0).firstElementChild;cM(t,{},e),rM((()=>{e.after(t),sF(t)})),e._x_currentIfEl=t,e._x_undoIf=()=>{GM(t,(e=>{e._x_effects&&e._x_effects.forEach(VR)})),t.remove(),delete e._x_currentIfEl}})():e._x_undoIf&&(e._x_undoIf(),delete e._x_undoIf)})))),i((()=>e._x_undoIf&&e._x_undoIf()))})),OM("id",((e,{expression:t},{evaluate:n})=>{n(t).forEach((t=>function(e,t){e._x_ids||(e._x_ids={}),e._x_ids[t]||(e._x_ids[t]=YU(t))}(e,t)))})),jM(FM("@",kM("on:"))),OM("on",bF(((e,{value:t,modifiers:n,expression:i},{cleanup:r})=>{let s=i?EM(e,i):()=>{};"template"===e.tagName.toLowerCase()&&(e._x_forwardEvents||(e._x_forwardEvents=[]),e._x_forwardEvents.includes(t)||e._x_forwardEvents.push(t));let a=eB(e,t,n,(e=>{s((()=>{}),{scope:{$event:e},params:[e]})}));r((()=>a()))}))),oB("Collapse","collapse","collapse"),oB("Intersect","intersect","intersect"),oB("Focus","trap","focus"),oB("Mask","mask","mask"),NF.setEvaluator(SM),NF.setReactivityEngine({reactive:$U,effect:function(e,t=MF){(function(e){return e&&!0===e._isEffect})(e)&&(e=e.raw);const n=function(e,t){const n=function(){if(!n.active)return e();if(!QF.includes(n)){tU(n);try{return iU.push(nU),nU=!0,QF.push(n),RF=n,e()}finally{QF.pop(),rU(),RF=QF[QF.length-1]}}};return n.id=eU++,n.allowRecurse=!!t.allowRecurse,n._isEffect=!0,n.active=!0,n.raw=e,n.deps=[],n.options=t,n}(e,t);return t.lazy||n(),n},release:function(e){e.active&&(tU(e),e.options.onStop&&e.options.onStop(),e.active=!1)},raw:GU});var lB=NF,cB={exports:{}};!function(e){!function(t,n){e.exports=t.document?n(t,!0):function(e){if(!e.document)throw new Error("jQuery requires a window with a document");return n(e)}}("undefined"!=typeof window?window:fb,(function(e,t){var n=[],i=Object.getPrototypeOf,r=n.slice,s=n.flat?function(e){return n.flat.call(e)}:function(e){return n.concat.apply([],e)},a=n.push,o=n.indexOf,l={},c=l.toString,u=l.hasOwnProperty,d=u.toString,h=d.call(Object),p={},f=function(e){return"function"==typeof e&&"number"!=typeof e.nodeType&&"function"!=typeof e.item},m=function(e){return null!=e&&e===e.window},g=e.document,y={type:!0,src:!0,nonce:!0,noModule:!0};function _(e,t,n){var i,r,s=(n=n||g).createElement("script");if(s.text=e,t)for(i in y)(r=t[i]||t.getAttribute&&t.getAttribute(i))&&s.setAttribute(i,r);n.head.appendChild(s).parentNode.removeChild(s)}function v(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?l[c.call(e)]||"object":typeof e}var b="3.7.0",T=/HTML$/i,E=function(e,t){return new E.fn.init(e,t)};function w(e){var t=!!e&&"length"in e&&e.length,n=v(e);return!f(e)&&!m(e)&&("array"===n||0===t||"number"==typeof t&&t>0&&t-1 in e)}function S(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()}E.fn=E.prototype={jquery:b,constructor:E,length:0,toArray:function(){return r.call(this)},get:function(e){return null==e?r.call(this):e<0?this[e+this.length]:this[e]},pushStack:function(e){var t=E.merge(this.constructor(),e);return t.prevObject=this,t},each:function(e){return E.each(this,e)},map:function(e){return this.pushStack(E.map(this,(function(t,n){return e.call(t,n,t)})))},slice:function(){return this.pushStack(r.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},even:function(){return this.pushStack(E.grep(this,(function(e,t){return(t+1)%2})))},odd:function(){return this.pushStack(E.grep(this,(function(e,t){return t%2})))},eq:function(e){var t=this.length,n=+e+(e<0?t:0);return this.pushStack(n>=0&&n<t?[this[n]]:[])},end:function(){return this.prevObject||this.constructor()},push:a,sort:n.sort,splice:n.splice},E.extend=E.fn.extend=function(){var e,t,n,i,r,s,a=arguments[0]||{},o=1,l=arguments.length,c=!1;for("boolean"==typeof a&&(c=a,a=arguments[o]||{},o++),"object"==typeof a||f(a)||(a={}),o===l&&(a=this,o--);o<l;o++)if(null!=(e=arguments[o]))for(t in e)i=e[t],"__proto__"!==t&&a!==i&&(c&&i&&(E.isPlainObject(i)||(r=Array.isArray(i)))?(n=a[t],s=r&&!Array.isArray(n)?[]:r||E.isPlainObject(n)?n:{},r=!1,a[t]=E.extend(c,s,i)):void 0!==i&&(a[t]=i));return a},E.extend({expando:"jQuery"+(b+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isPlainObject:function(e){var t,n;return!(!e||"[object Object]"!==c.call(e))&&(!(t=i(e))||"function"==typeof(n=u.call(t,"constructor")&&t.constructor)&&d.call(n)===h)},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},globalEval:function(e,t,n){_(e,{nonce:t&&t.nonce},n)},each:function(e,t){var n,i=0;if(w(e))for(n=e.length;i<n&&!1!==t.call(e[i],i,e[i]);i++);else for(i in e)if(!1===t.call(e[i],i,e[i]))break;return e},text:function(e){var t,n="",i=0,r=e.nodeType;if(r){if(1===r||9===r||11===r)return e.textContent;if(3===r||4===r)return e.nodeValue}else for(;t=e[i++];)n+=E.text(t);return n},makeArray:function(e,t){var n=t||[];return null!=e&&(w(Object(e))?E.merge(n,"string"==typeof e?[e]:e):a.call(n,e)),n},inArray:function(e,t,n){return null==t?-1:o.call(t,e,n)},isXMLDoc:function(e){var t=e&&e.namespaceURI,n=e&&(e.ownerDocument||e).documentElement;return!T.test(t||n&&n.nodeName||"HTML")},merge:function(e,t){for(var n=+t.length,i=0,r=e.length;i<n;i++)e[r++]=t[i];return e.length=r,e},grep:function(e,t,n){for(var i=[],r=0,s=e.length,a=!n;r<s;r++)!t(e[r],r)!==a&&i.push(e[r]);return i},map:function(e,t,n){var i,r,a=0,o=[];if(w(e))for(i=e.length;a<i;a++)null!=(r=t(e[a],a,n))&&o.push(r);else for(a in e)null!=(r=t(e[a],a,n))&&o.push(r);return s(o)},guid:1,support:p}),"function"==typeof Symbol&&(E.fn[Symbol.iterator]=n[Symbol.iterator]),E.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),(function(e,t){l["[object "+t+"]"]=t.toLowerCase()}));var C=n.pop,I=n.sort,x=n.splice,k="[\\x20\\t\\r\\n\\f]",A=new RegExp("^"+k+"+|((?:^|[^\\\\])(?:\\\\.)*)"+k+"+$","g");E.contains=function(e,t){var n=t&&t.parentNode;return e===n||!(!n||1!==n.nodeType||!(e.contains?e.contains(n):e.compareDocumentPosition&&16&e.compareDocumentPosition(n)))};var O=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\x80-\uFFFF\w-]/g;function P(e,t){return t?"\0"===e?"�":e.slice(0,-1)+"\\"+e.charCodeAt(e.length-1).toString(16)+" ":"\\"+e}E.escapeSelector=function(e){return(e+"").replace(O,P)};var L=g,N=a;!function(){var t,i,s,a,l,c,d,h,f,m,g=N,y=E.expando,_=0,v=0,b=ee(),T=ee(),w=ee(),O=ee(),P=function(e,t){return e===t&&(l=!0),0},D="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",R="(?:\\\\[\\da-fA-F]{1,6}"+k+"?|\\\\[^\\r\\n\\f]|[\\w-]|[^\0-\\x7f])+",M="\\["+k+"*("+R+")(?:"+k+"*([*^$|!~]?=)"+k+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+R+"))|)"+k+"*\\]",F=":("+R+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+M+")*)|.*)\\)|)",U=new RegExp(k+"+","g"),B=new RegExp("^"+k+"*,"+k+"*"),j=new RegExp("^"+k+"*([>+~]|"+k+")"+k+"*"),q=new RegExp(k+"|>"),H=new RegExp(F),V=new RegExp("^"+R+"$"),$={ID:new RegExp("^#("+R+")"),CLASS:new RegExp("^\\.("+R+")"),TAG:new RegExp("^("+R+"|[*])"),ATTR:new RegExp("^"+M),PSEUDO:new RegExp("^"+F),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+k+"*(even|odd|(([+-]|)(\\d*)n|)"+k+"*(?:([+-]|)"+k+"*(\\d+)|))"+k+"*\\)|)","i"),bool:new RegExp("^(?:"+D+")$","i"),needsContext:new RegExp("^"+k+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+k+"*((?:-\\d)?\\d*)"+k+"*\\)|)(?=[^-]|$)","i")},W=/^(?:input|select|textarea|button)$/i,z=/^h\d$/i,G=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,K=/[+~]/,X=new RegExp("\\\\[\\da-fA-F]{1,6}"+k+"?|\\\\([^\\r\\n\\f])","g"),Y=function(e,t){var n="0x"+e.slice(1)-65536;return t||(n<0?String.fromCharCode(n+65536):String.fromCharCode(n>>10|55296,1023&n|56320))},Q=function(){le()},J=he((function(e){return!0===e.disabled&&S(e,"fieldset")}),{dir:"parentNode",next:"legend"});try{g.apply(n=r.call(L.childNodes),L.childNodes),n[L.childNodes.length].nodeType}catch(fB){g={apply:function(e,t){N.apply(e,r.call(t))},call:function(e){N.apply(e,r.call(arguments,1))}}}function Z(e,t,n,i){var r,s,a,o,l,u,d,m=t&&t.ownerDocument,_=t?t.nodeType:9;if(n=n||[],"string"!=typeof e||!e||1!==_&&9!==_&&11!==_)return n;if(!i&&(le(t),t=t||c,h)){if(11!==_&&(l=G.exec(e)))if(r=l[1]){if(9===_){if(!(a=t.getElementById(r)))return n;if(a.id===r)return g.call(n,a),n}else if(m&&(a=m.getElementById(r))&&Z.contains(t,a)&&a.id===r)return g.call(n,a),n}else{if(l[2])return g.apply(n,t.getElementsByTagName(e)),n;if((r=l[3])&&t.getElementsByClassName)return g.apply(n,t.getElementsByClassName(r)),n}if(!(O[e+" "]||f&&f.test(e))){if(d=e,m=t,1===_&&(q.test(e)||j.test(e))){for((m=K.test(e)&&oe(t.parentNode)||t)==t&&p.scope||((o=t.getAttribute("id"))?o=E.escapeSelector(o):t.setAttribute("id",o=y)),s=(u=ue(e)).length;s--;)u[s]=(o?"#"+o:":scope")+" "+de(u[s]);d=u.join(",")}try{return g.apply(n,m.querySelectorAll(d)),n}catch(v){O(e,!0)}finally{o===y&&t.removeAttribute("id")}}}return _e(e.replace(A,"$1"),t,n,i)}function ee(){var e=[];return function t(n,r){return e.push(n+" ")>i.cacheLength&&delete t[e.shift()],t[n+" "]=r}}function te(e){return e[y]=!0,e}function ne(e){var t=c.createElement("fieldset");try{return!!e(t)}catch(fB){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function ie(e){return function(t){return S(t,"input")&&t.type===e}}function re(e){return function(t){return(S(t,"input")||S(t,"button"))&&t.type===e}}function se(e){return function(t){return"form"in t?t.parentNode&&!1===t.disabled?"label"in t?"label"in t.parentNode?t.parentNode.disabled===e:t.disabled===e:t.isDisabled===e||t.isDisabled!==!e&&J(t)===e:t.disabled===e:"label"in t&&t.disabled===e}}function ae(e){return te((function(t){return t=+t,te((function(n,i){for(var r,s=e([],n.length,t),a=s.length;a--;)n[r=s[a]]&&(n[r]=!(i[r]=n[r]))}))}))}function oe(e){return e&&void 0!==e.getElementsByTagName&&e}function le(e){var t,n=e?e.ownerDocument||e:L;return n!=c&&9===n.nodeType&&n.documentElement?(d=(c=n).documentElement,h=!E.isXMLDoc(c),m=d.matches||d.webkitMatchesSelector||d.msMatchesSelector,L!=c&&(t=c.defaultView)&&t.top!==t&&t.addEventListener("unload",Q),p.getById=ne((function(e){return d.appendChild(e).id=E.expando,!c.getElementsByName||!c.getElementsByName(E.expando).length})),p.disconnectedMatch=ne((function(e){return m.call(e,"*")})),p.scope=ne((function(){return c.querySelectorAll(":scope")})),p.cssHas=ne((function(){try{return c.querySelector(":has(*,:jqfake)"),!1}catch(fB){return!0}})),p.getById?(i.filter.ID=function(e){var t=e.replace(X,Y);return function(e){return e.getAttribute("id")===t}},i.find.ID=function(e,t){if(void 0!==t.getElementById&&h){var n=t.getElementById(e);return n?[n]:[]}}):(i.filter.ID=function(e){var t=e.replace(X,Y);return function(e){var n=void 0!==e.getAttributeNode&&e.getAttributeNode("id");return n&&n.value===t}},i.find.ID=function(e,t){if(void 0!==t.getElementById&&h){var n,i,r,s=t.getElementById(e);if(s){if((n=s.getAttributeNode("id"))&&n.value===e)return[s];for(r=t.getElementsByName(e),i=0;s=r[i++];)if((n=s.getAttributeNode("id"))&&n.value===e)return[s]}return[]}}),i.find.TAG=function(e,t){return void 0!==t.getElementsByTagName?t.getElementsByTagName(e):t.querySelectorAll(e)},i.find.CLASS=function(e,t){if(void 0!==t.getElementsByClassName&&h)return t.getElementsByClassName(e)},f=[],ne((function(e){var t;d.appendChild(e).innerHTML="<a id='"+y+"' href='' disabled='disabled'></a><select id='"+y+"-\r\\' disabled='disabled'><option selected=''></option></select>",e.querySelectorAll("[selected]").length||f.push("\\["+k+"*(?:value|"+D+")"),e.querySelectorAll("[id~="+y+"-]").length||f.push("~="),e.querySelectorAll("a#"+y+"+*").length||f.push(".#.+[+~]"),e.querySelectorAll(":checked").length||f.push(":checked"),(t=c.createElement("input")).setAttribute("type","hidden"),e.appendChild(t).setAttribute("name","D"),d.appendChild(e).disabled=!0,2!==e.querySelectorAll(":disabled").length&&f.push(":enabled",":disabled"),(t=c.createElement("input")).setAttribute("name",""),e.appendChild(t),e.querySelectorAll("[name='']").length||f.push("\\["+k+"*name"+k+"*="+k+"*(?:''|\"\")")})),p.cssHas||f.push(":has"),f=f.length&&new RegExp(f.join("|")),P=function(e,t){if(e===t)return l=!0,0;var n=!e.compareDocumentPosition-!t.compareDocumentPosition;return n||(1&(n=(e.ownerDocument||e)==(t.ownerDocument||t)?e.compareDocumentPosition(t):1)||!p.sortDetached&&t.compareDocumentPosition(e)===n?e===c||e.ownerDocument==L&&Z.contains(L,e)?-1:t===c||t.ownerDocument==L&&Z.contains(L,t)?1:a?o.call(a,e)-o.call(a,t):0:4&n?-1:1)},c):c}for(t in Z.matches=function(e,t){return Z(e,null,null,t)},Z.matchesSelector=function(e,t){if(le(e),h&&!O[t+" "]&&(!f||!f.test(t)))try{var n=m.call(e,t);if(n||p.disconnectedMatch||e.document&&11!==e.document.nodeType)return n}catch(fB){O(t,!0)}return Z(t,c,null,[e]).length>0},Z.contains=function(e,t){return(e.ownerDocument||e)!=c&&le(e),E.contains(e,t)},Z.attr=function(e,t){(e.ownerDocument||e)!=c&&le(e);var n=i.attrHandle[t.toLowerCase()],r=n&&u.call(i.attrHandle,t.toLowerCase())?n(e,t,!h):void 0;return void 0!==r?r:e.getAttribute(t)},Z.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},E.uniqueSort=function(e){var t,n=[],i=0,s=0;if(l=!p.sortStable,a=!p.sortStable&&r.call(e,0),I.call(e,P),l){for(;t=e[s++];)t===e[s]&&(i=n.push(s));for(;i--;)x.call(e,n[i],1)}return a=null,e},E.fn.uniqueSort=function(){return this.pushStack(E.uniqueSort(r.apply(this)))},i=E.expr={cacheLength:50,createPseudo:te,match:$,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(X,Y),e[3]=(e[3]||e[4]||e[5]||"").replace(X,Y),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||Z.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&Z.error(e[0]),e},PSEUDO:function(e){var t,n=!e[6]&&e[2];return $.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":n&&H.test(n)&&(t=ue(n,!0))&&(t=n.indexOf(")",n.length-t)-n.length)&&(e[0]=e[0].slice(0,t),e[2]=n.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(X,Y).toLowerCase();return"*"===e?function(){return!0}:function(e){return S(e,t)}},CLASS:function(e){var t=b[e+" "];return t||(t=new RegExp("(^|"+k+")"+e+"("+k+"|$)"))&&b(e,(function(e){return t.test("string"==typeof e.className&&e.className||void 0!==e.getAttribute&&e.getAttribute("class")||"")}))},ATTR:function(e,t,n){return function(i){var r=Z.attr(i,e);return null==r?"!="===t:!t||(r+="","="===t?r===n:"!="===t?r!==n:"^="===t?n&&0===r.indexOf(n):"*="===t?n&&r.indexOf(n)>-1:"$="===t?n&&r.slice(-n.length)===n:"~="===t?(" "+r.replace(U," ")+" ").indexOf(n)>-1:"|="===t&&(r===n||r.slice(0,n.length+1)===n+"-"))}},CHILD:function(e,t,n,i,r){var s="nth"!==e.slice(0,3),a="last"!==e.slice(-4),o="of-type"===t;return 1===i&&0===r?function(e){return!!e.parentNode}:function(t,n,l){var c,u,d,h,p,f=s!==a?"nextSibling":"previousSibling",m=t.parentNode,g=o&&t.nodeName.toLowerCase(),v=!l&&!o,b=!1;if(m){if(s){for(;f;){for(d=t;d=d[f];)if(o?S(d,g):1===d.nodeType)return!1;p=f="only"===e&&!p&&"nextSibling"}return!0}if(p=[a?m.firstChild:m.lastChild],a&&v){for(b=(h=(c=(u=m[y]||(m[y]={}))[e]||[])[0]===_&&c[1])&&c[2],d=h&&m.childNodes[h];d=++h&&d&&d[f]||(b=h=0)||p.pop();)if(1===d.nodeType&&++b&&d===t){u[e]=[_,h,b];break}}else if(v&&(b=h=(c=(u=t[y]||(t[y]={}))[e]||[])[0]===_&&c[1]),!1===b)for(;(d=++h&&d&&d[f]||(b=h=0)||p.pop())&&(!(o?S(d,g):1===d.nodeType)||!++b||(v&&((u=d[y]||(d[y]={}))[e]=[_,b]),d!==t)););return(b-=r)===i||b%i==0&&b/i>=0}}},PSEUDO:function(e,t){var n,r=i.pseudos[e]||i.setFilters[e.toLowerCase()]||Z.error("unsupported pseudo: "+e);return r[y]?r(t):r.length>1?(n=[e,e,"",t],i.setFilters.hasOwnProperty(e.toLowerCase())?te((function(e,n){for(var i,s=r(e,t),a=s.length;a--;)e[i=o.call(e,s[a])]=!(n[i]=s[a])})):function(e){return r(e,0,n)}):r}},pseudos:{not:te((function(e){var t=[],n=[],i=ye(e.replace(A,"$1"));return i[y]?te((function(e,t,n,r){for(var s,a=i(e,null,r,[]),o=e.length;o--;)(s=a[o])&&(e[o]=!(t[o]=s))})):function(e,r,s){return t[0]=e,i(t,null,s,n),t[0]=null,!n.pop()}})),has:te((function(e){return function(t){return Z(e,t).length>0}})),contains:te((function(e){return e=e.replace(X,Y),function(t){return(t.textContent||E.text(t)).indexOf(e)>-1}})),lang:te((function(e){return V.test(e||"")||Z.error("unsupported lang: "+e),e=e.replace(X,Y).toLowerCase(),function(t){var n;do{if(n=h?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return(n=n.toLowerCase())===e||0===n.indexOf(e+"-")}while((t=t.parentNode)&&1===t.nodeType);return!1}})),target:function(t){var n=e.location&&e.location.hash;return n&&n.slice(1)===t.id},root:function(e){return e===d},focus:function(e){return e===function(){try{return c.activeElement}catch(e){}}()&&c.hasFocus()&&!!(e.type||e.href||~e.tabIndex)},enabled:se(!1),disabled:se(!0),checked:function(e){return S(e,"input")&&!!e.checked||S(e,"option")&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,!0===e.selected},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!i.pseudos.empty(e)},header:function(e){return z.test(e.nodeName)},input:function(e){return W.test(e.nodeName)},button:function(e){return S(e,"input")&&"button"===e.type||S(e,"button")},text:function(e){var t;return S(e,"input")&&"text"===e.type&&(null==(t=e.getAttribute("type"))||"text"===t.toLowerCase())},first:ae((function(){return[0]})),last:ae((function(e,t){return[t-1]})),eq:ae((function(e,t,n){return[n<0?n+t:n]})),even:ae((function(e,t){for(var n=0;n<t;n+=2)e.push(n);return e})),odd:ae((function(e,t){for(var n=1;n<t;n+=2)e.push(n);return e})),lt:ae((function(e,t,n){var i;for(i=n<0?n+t:n>t?t:n;--i>=0;)e.push(i);return e})),gt:ae((function(e,t,n){for(var i=n<0?n+t:n;++i<t;)e.push(i);return e}))}},i.pseudos.nth=i.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})i.pseudos[t]=ie(t);for(t in{submit:!0,reset:!0})i.pseudos[t]=re(t);function ce(){}function ue(e,t){var n,r,s,a,o,l,c,u=T[e+" "];if(u)return t?0:u.slice(0);for(o=e,l=[],c=i.preFilter;o;){for(a in n&&!(r=B.exec(o))||(r&&(o=o.slice(r[0].length)||o),l.push(s=[])),n=!1,(r=j.exec(o))&&(n=r.shift(),s.push({value:n,type:r[0].replace(A," ")}),o=o.slice(n.length)),i.filter)!(r=$[a].exec(o))||c[a]&&!(r=c[a](r))||(n=r.shift(),s.push({value:n,type:a,matches:r}),o=o.slice(n.length));if(!n)break}return t?o.length:o?Z.error(e):T(e,l).slice(0)}function de(e){for(var t=0,n=e.length,i="";t<n;t++)i+=e[t].value;return i}function he(e,t,n){var i=t.dir,r=t.next,s=r||i,a=n&&"parentNode"===s,o=v++;return t.first?function(t,n,r){for(;t=t[i];)if(1===t.nodeType||a)return e(t,n,r);return!1}:function(t,n,l){var c,u,d=[_,o];if(l){for(;t=t[i];)if((1===t.nodeType||a)&&e(t,n,l))return!0}else for(;t=t[i];)if(1===t.nodeType||a)if(u=t[y]||(t[y]={}),r&&S(t,r))t=t[i]||t;else{if((c=u[s])&&c[0]===_&&c[1]===o)return d[2]=c[2];if(u[s]=d,d[2]=e(t,n,l))return!0}return!1}}function pe(e){return e.length>1?function(t,n,i){for(var r=e.length;r--;)if(!e[r](t,n,i))return!1;return!0}:e[0]}function fe(e,t,n,i,r){for(var s,a=[],o=0,l=e.length,c=null!=t;o<l;o++)(s=e[o])&&(n&&!n(s,i,r)||(a.push(s),c&&t.push(o)));return a}function me(e,t,n,i,r,s){return i&&!i[y]&&(i=me(i)),r&&!r[y]&&(r=me(r,s)),te((function(s,a,l,c){var u,d,h,p,f=[],m=[],y=a.length,_=s||function(e,t,n){for(var i=0,r=t.length;i<r;i++)Z(e,t[i],n);return n}(t||"*",l.nodeType?[l]:l,[]),v=!e||!s&&t?_:fe(_,f,e,l,c);if(n?n(v,p=r||(s?e:y||i)?[]:a,l,c):p=v,i)for(u=fe(p,m),i(u,[],l,c),d=u.length;d--;)(h=u[d])&&(p[m[d]]=!(v[m[d]]=h));if(s){if(r||e){if(r){for(u=[],d=p.length;d--;)(h=p[d])&&u.push(v[d]=h);r(null,p=[],u,c)}for(d=p.length;d--;)(h=p[d])&&(u=r?o.call(s,h):f[d])>-1&&(s[u]=!(a[u]=h))}}else p=fe(p===a?p.splice(y,p.length):p),r?r(null,a,p,c):g.apply(a,p)}))}function ge(e){for(var t,n,r,a=e.length,l=i.relative[e[0].type],c=l||i.relative[" "],u=l?1:0,d=he((function(e){return e===t}),c,!0),h=he((function(e){return o.call(t,e)>-1}),c,!0),p=[function(e,n,i){var r=!l&&(i||n!=s)||((t=n).nodeType?d(e,n,i):h(e,n,i));return t=null,r}];u<a;u++)if(n=i.relative[e[u].type])p=[he(pe(p),n)];else{if((n=i.filter[e[u].type].apply(null,e[u].matches))[y]){for(r=++u;r<a&&!i.relative[e[r].type];r++);return me(u>1&&pe(p),u>1&&de(e.slice(0,u-1).concat({value:" "===e[u-2].type?"*":""})).replace(A,"$1"),n,u<r&&ge(e.slice(u,r)),r<a&&ge(e=e.slice(r)),r<a&&de(e))}p.push(n)}return pe(p)}function ye(e,t){var n,r=[],a=[],o=w[e+" "];if(!o){for(t||(t=ue(e)),n=t.length;n--;)(o=ge(t[n]))[y]?r.push(o):a.push(o);o=w(e,function(e,t){var n=t.length>0,r=e.length>0,a=function(a,o,l,u,d){var p,f,m,y=0,v="0",b=a&&[],T=[],w=s,S=a||r&&i.find.TAG("*",d),I=_+=null==w?1:Math.random()||.1,x=S.length;for(d&&(s=o==c||o||d);v!==x&&null!=(p=S[v]);v++){if(r&&p){for(f=0,o||p.ownerDocument==c||(le(p),l=!h);m=e[f++];)if(m(p,o||c,l)){g.call(u,p);break}d&&(_=I)}n&&((p=!m&&p)&&y--,a&&b.push(p))}if(y+=v,n&&v!==y){for(f=0;m=t[f++];)m(b,T,o,l);if(a){if(y>0)for(;v--;)b[v]||T[v]||(T[v]=C.call(u));T=fe(T)}g.apply(u,T),d&&!a&&T.length>0&&y+t.length>1&&E.uniqueSort(u)}return d&&(_=I,s=w),b};return n?te(a):a}(a,r)),o.selector=e}return o}function _e(e,t,n,r){var s,a,o,l,c,u="function"==typeof e&&e,d=!r&&ue(e=u.selector||e);if(n=n||[],1===d.length){if((a=d[0]=d[0].slice(0)).length>2&&"ID"===(o=a[0]).type&&9===t.nodeType&&h&&i.relative[a[1].type]){if(!(t=(i.find.ID(o.matches[0].replace(X,Y),t)||[])[0]))return n;u&&(t=t.parentNode),e=e.slice(a.shift().value.length)}for(s=$.needsContext.test(e)?0:a.length;s--&&(o=a[s],!i.relative[l=o.type]);)if((c=i.find[l])&&(r=c(o.matches[0].replace(X,Y),K.test(a[0].type)&&oe(t.parentNode)||t))){if(a.splice(s,1),!(e=r.length&&de(a)))return g.apply(n,r),n;break}}return(u||ye(e,d))(r,t,!h,n,!t||K.test(e)&&oe(t.parentNode)||t),n}ce.prototype=i.filters=i.pseudos,i.setFilters=new ce,p.sortStable=y.split("").sort(P).join("")===y,le(),p.sortDetached=ne((function(e){return 1&e.compareDocumentPosition(c.createElement("fieldset"))})),E.find=Z,E.expr[":"]=E.expr.pseudos,E.unique=E.uniqueSort,Z.compile=ye,Z.select=_e,Z.setDocument=le,Z.escape=E.escapeSelector,Z.getText=E.text,Z.isXML=E.isXMLDoc,Z.selectors=E.expr,Z.support=E.support,Z.uniqueSort=E.uniqueSort}();var D=function(e,t,n){for(var i=[],r=void 0!==n;(e=e[t])&&9!==e.nodeType;)if(1===e.nodeType){if(r&&E(e).is(n))break;i.push(e)}return i},R=function(e,t){for(var n=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&n.push(e);return n},M=E.expr.match.needsContext,F=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function U(e,t,n){return f(t)?E.grep(e,(function(e,i){return!!t.call(e,i,e)!==n})):t.nodeType?E.grep(e,(function(e){return e===t!==n})):"string"!=typeof t?E.grep(e,(function(e){return o.call(t,e)>-1!==n})):E.filter(t,e,n)}E.filter=function(e,t,n){var i=t[0];return n&&(e=":not("+e+")"),1===t.length&&1===i.nodeType?E.find.matchesSelector(i,e)?[i]:[]:E.find.matches(e,E.grep(t,(function(e){return 1===e.nodeType})))},E.fn.extend({find:function(e){var t,n,i=this.length,r=this;if("string"!=typeof e)return this.pushStack(E(e).filter((function(){for(t=0;t<i;t++)if(E.contains(r[t],this))return!0})));for(n=this.pushStack([]),t=0;t<i;t++)E.find(e,r[t],n);return i>1?E.uniqueSort(n):n},filter:function(e){return this.pushStack(U(this,e||[],!1))},not:function(e){return this.pushStack(U(this,e||[],!0))},is:function(e){return!!U(this,"string"==typeof e&&M.test(e)?E(e):e||[],!1).length}});var B,j=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/,q=E.fn.init=function(e,t,n){var i,r;if(!e)return this;if(n=n||B,"string"==typeof e){if(!(i="<"===e[0]&&">"===e[e.length-1]&&e.length>=3?[null,e,null]:j.exec(e))||!i[1]&&t)return!t||t.jquery?(t||n).find(e):this.constructor(t).find(e);if(i[1]){if(t=t instanceof E?t[0]:t,E.merge(this,E.parseHTML(i[1],t&&t.nodeType?t.ownerDocument||t:g,!0)),F.test(i[1])&&E.isPlainObject(t))for(i in t)f(this[i])?this[i](t[i]):this.attr(i,t[i]);return this}return(r=g.getElementById(i[2]))&&(this[0]=r,this.length=1),this}return e.nodeType?(this[0]=e,this.length=1,this):f(e)?void 0!==n.ready?n.ready(e):e(E):E.makeArray(e,this)};q.prototype=E.fn,B=E(g);var H=/^(?:parents|prev(?:Until|All))/,V={children:!0,contents:!0,next:!0,prev:!0};function $(e,t){for(;(e=e[t])&&1!==e.nodeType;);return e}E.fn.extend({has:function(e){var t=E(e,this),n=t.length;return this.filter((function(){for(var e=0;e<n;e++)if(E.contains(this,t[e]))return!0}))},closest:function(e,t){var n,i=0,r=this.length,s=[],a="string"!=typeof e&&E(e);if(!M.test(e))for(;i<r;i++)for(n=this[i];n&&n!==t;n=n.parentNode)if(n.nodeType<11&&(a?a.index(n)>-1:1===n.nodeType&&E.find.matchesSelector(n,e))){s.push(n);break}return this.pushStack(s.length>1?E.uniqueSort(s):s)},index:function(e){return e?"string"==typeof e?o.call(E(e),this[0]):o.call(this,e.jquery?e[0]:e):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(E.uniqueSort(E.merge(this.get(),E(e,t))))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),E.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return D(e,"parentNode")},parentsUntil:function(e,t,n){return D(e,"parentNode",n)},next:function(e){return $(e,"nextSibling")},prev:function(e){return $(e,"previousSibling")},nextAll:function(e){return D(e,"nextSibling")},prevAll:function(e){return D(e,"previousSibling")},nextUntil:function(e,t,n){return D(e,"nextSibling",n)},prevUntil:function(e,t,n){return D(e,"previousSibling",n)},siblings:function(e){return R((e.parentNode||{}).firstChild,e)},children:function(e){return R(e.firstChild)},contents:function(e){return null!=e.contentDocument&&i(e.contentDocument)?e.contentDocument:(S(e,"template")&&(e=e.content||e),E.merge([],e.childNodes))}},(function(e,t){E.fn[e]=function(n,i){var r=E.map(this,t,n);return"Until"!==e.slice(-5)&&(i=n),i&&"string"==typeof i&&(r=E.filter(i,r)),this.length>1&&(V[e]||E.uniqueSort(r),H.test(e)&&r.reverse()),this.pushStack(r)}}));var W=/[^\x20\t\r\n\f]+/g;function z(e){return e}function G(e){throw e}function K(e,t,n,i){var r;try{e&&f(r=e.promise)?r.call(e).done(t).fail(n):e&&f(r=e.then)?r.call(e,t,n):t.apply(void 0,[e].slice(i))}catch(e){n.apply(void 0,[e])}}E.Callbacks=function(e){e="string"==typeof e?function(e){var t={};return E.each(e.match(W)||[],(function(e,n){t[n]=!0})),t}(e):E.extend({},e);var t,n,i,r,s=[],a=[],o=-1,l=function(){for(r=r||e.once,i=t=!0;a.length;o=-1)for(n=a.shift();++o<s.length;)!1===s[o].apply(n[0],n[1])&&e.stopOnFalse&&(o=s.length,n=!1);e.memory||(n=!1),t=!1,r&&(s=n?[]:"")},c={add:function(){return s&&(n&&!t&&(o=s.length-1,a.push(n)),function t(n){E.each(n,(function(n,i){f(i)?e.unique&&c.has(i)||s.push(i):i&&i.length&&"string"!==v(i)&&t(i)}))}(arguments),n&&!t&&l()),this},remove:function(){return E.each(arguments,(function(e,t){for(var n;(n=E.inArray(t,s,n))>-1;)s.splice(n,1),n<=o&&o--})),this},has:function(e){return e?E.inArray(e,s)>-1:s.length>0},empty:function(){return s&&(s=[]),this},disable:function(){return r=a=[],s=n="",this},disabled:function(){return!s},lock:function(){return r=a=[],n||t||(s=n=""),this},locked:function(){return!!r},fireWith:function(e,n){return r||(n=[e,(n=n||[]).slice?n.slice():n],a.push(n),t||l()),this},fire:function(){return c.fireWith(this,arguments),this},fired:function(){return!!i}};return c},E.extend({Deferred:function(t){var n=[["notify","progress",E.Callbacks("memory"),E.Callbacks("memory"),2],["resolve","done",E.Callbacks("once memory"),E.Callbacks("once memory"),0,"resolved"],["reject","fail",E.Callbacks("once memory"),E.Callbacks("once memory"),1,"rejected"]],i="pending",r={state:function(){return i},always:function(){return s.done(arguments).fail(arguments),this},catch:function(e){return r.then(null,e)},pipe:function(){var e=arguments;return E.Deferred((function(t){E.each(n,(function(n,i){var r=f(e[i[4]])&&e[i[4]];s[i[1]]((function(){var e=r&&r.apply(this,arguments);e&&f(e.promise)?e.promise().progress(t.notify).done(t.resolve).fail(t.reject):t[i[0]+"With"](this,r?[e]:arguments)}))})),e=null})).promise()},then:function(t,i,r){var s=0;function a(t,n,i,r){return function(){var o=this,l=arguments,c=function(){var e,c;if(!(t<s)){if((e=i.apply(o,l))===n.promise())throw new TypeError("Thenable self-resolution");c=e&&("object"==typeof e||"function"==typeof e)&&e.then,f(c)?r?c.call(e,a(s,n,z,r),a(s,n,G,r)):(s++,c.call(e,a(s,n,z,r),a(s,n,G,r),a(s,n,z,n.notifyWith))):(i!==z&&(o=void 0,l=[e]),(r||n.resolveWith)(o,l))}},u=r?c:function(){try{c()}catch(fB){E.Deferred.exceptionHook&&E.Deferred.exceptionHook(fB,u.error),t+1>=s&&(i!==G&&(o=void 0,l=[fB]),n.rejectWith(o,l))}};t?u():(E.Deferred.getErrorHook?u.error=E.Deferred.getErrorHook():E.Deferred.getStackHook&&(u.error=E.Deferred.getStackHook()),e.setTimeout(u))}}return E.Deferred((function(e){n[0][3].add(a(0,e,f(r)?r:z,e.notifyWith)),n[1][3].add(a(0,e,f(t)?t:z)),n[2][3].add(a(0,e,f(i)?i:G))})).promise()},promise:function(e){return null!=e?E.extend(e,r):r}},s={};return E.each(n,(function(e,t){var a=t[2],o=t[5];r[t[1]]=a.add,o&&a.add((function(){i=o}),n[3-e][2].disable,n[3-e][3].disable,n[0][2].lock,n[0][3].lock),a.add(t[3].fire),s[t[0]]=function(){return s[t[0]+"With"](this===s?void 0:this,arguments),this},s[t[0]+"With"]=a.fireWith})),r.promise(s),t&&t.call(s,s),s},when:function(e){var t=arguments.length,n=t,i=Array(n),s=r.call(arguments),a=E.Deferred(),o=function(e){return function(n){i[e]=this,s[e]=arguments.length>1?r.call(arguments):n,--t||a.resolveWith(i,s)}};if(t<=1&&(K(e,a.done(o(n)).resolve,a.reject,!t),"pending"===a.state()||f(s[n]&&s[n].then)))return a.then();for(;n--;)K(s[n],o(n),a.reject);return a.promise()}});var X=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;E.Deferred.exceptionHook=function(t,n){e.console&&e.console.warn&&t&&X.test(t.name)&&e.console.warn("jQuery.Deferred exception: "+t.message,t.stack,n)},E.readyException=function(t){e.setTimeout((function(){throw t}))};var Y=E.Deferred();function Q(){g.removeEventListener("DOMContentLoaded",Q),e.removeEventListener("load",Q),E.ready()}E.fn.ready=function(e){return Y.then(e).catch((function(e){E.readyException(e)})),this},E.extend({isReady:!1,readyWait:1,ready:function(e){(!0===e?--E.readyWait:E.isReady)||(E.isReady=!0,!0!==e&&--E.readyWait>0||Y.resolveWith(g,[E]))}}),E.ready.then=Y.then,"complete"===g.readyState||"loading"!==g.readyState&&!g.documentElement.doScroll?e.setTimeout(E.ready):(g.addEventListener("DOMContentLoaded",Q),e.addEventListener("load",Q));var J=function(e,t,n,i,r,s,a){var o=0,l=e.length,c=null==n;if("object"===v(n))for(o in r=!0,n)J(e,t,o,n[o],!0,s,a);else if(void 0!==i&&(r=!0,f(i)||(a=!0),c&&(a?(t.call(e,i),t=null):(c=t,t=function(e,t,n){return c.call(E(e),n)})),t))for(;o<l;o++)t(e[o],n,a?i:i.call(e[o],o,t(e[o],n)));return r?e:c?t.call(e):l?t(e[0],n):s},Z=/^-ms-/,ee=/-([a-z])/g;function te(e,t){return t.toUpperCase()}function ne(e){return e.replace(Z,"ms-").replace(ee,te)}var ie=function(e){return 1===e.nodeType||9===e.nodeType||!+e.nodeType};function re(){this.expando=E.expando+re.uid++}re.uid=1,re.prototype={cache:function(e){var t=e[this.expando];return t||(t={},ie(e)&&(e.nodeType?e[this.expando]=t:Object.defineProperty(e,this.expando,{value:t,configurable:!0}))),t},set:function(e,t,n){var i,r=this.cache(e);if("string"==typeof t)r[ne(t)]=n;else for(i in t)r[ne(i)]=t[i];return r},get:function(e,t){return void 0===t?this.cache(e):e[this.expando]&&e[this.expando][ne(t)]},access:function(e,t,n){return void 0===t||t&&"string"==typeof t&&void 0===n?this.get(e,t):(this.set(e,t,n),void 0!==n?n:t)},remove:function(e,t){var n,i=e[this.expando];if(void 0!==i){if(void 0!==t){n=(t=Array.isArray(t)?t.map(ne):(t=ne(t))in i?[t]:t.match(W)||[]).length;for(;n--;)delete i[t[n]]}(void 0===t||E.isEmptyObject(i))&&(e.nodeType?e[this.expando]=void 0:delete e[this.expando])}},hasData:function(e){var t=e[this.expando];return void 0!==t&&!E.isEmptyObject(t)}};var se=new re,ae=new re,oe=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,le=/[A-Z]/g;function ce(e,t,n){var i;if(void 0===n&&1===e.nodeType)if(i="data-"+t.replace(le,"-$&").toLowerCase(),"string"==typeof(n=e.getAttribute(i))){try{n=function(e){return"true"===e||"false"!==e&&("null"===e?null:e===+e+""?+e:oe.test(e)?JSON.parse(e):e)}(n)}catch(fB){}ae.set(e,t,n)}else n=void 0;return n}E.extend({hasData:function(e){return ae.hasData(e)||se.hasData(e)},data:function(e,t,n){return ae.access(e,t,n)},removeData:function(e,t){ae.remove(e,t)},_data:function(e,t,n){return se.access(e,t,n)},_removeData:function(e,t){se.remove(e,t)}}),E.fn.extend({data:function(e,t){var n,i,r,s=this[0],a=s&&s.attributes;if(void 0===e){if(this.length&&(r=ae.get(s),1===s.nodeType&&!se.get(s,"hasDataAttrs"))){for(n=a.length;n--;)a[n]&&0===(i=a[n].name).indexOf("data-")&&(i=ne(i.slice(5)),ce(s,i,r[i]));se.set(s,"hasDataAttrs",!0)}return r}return"object"==typeof e?this.each((function(){ae.set(this,e)})):J(this,(function(t){var n;if(s&&void 0===t)return void 0!==(n=ae.get(s,e))||void 0!==(n=ce(s,e))?n:void 0;this.each((function(){ae.set(this,e,t)}))}),null,t,arguments.length>1,null,!0)},removeData:function(e){return this.each((function(){ae.remove(this,e)}))}}),E.extend({queue:function(e,t,n){var i;if(e)return t=(t||"fx")+"queue",i=se.get(e,t),n&&(!i||Array.isArray(n)?i=se.access(e,t,E.makeArray(n)):i.push(n)),i||[]},dequeue:function(e,t){t=t||"fx";var n=E.queue(e,t),i=n.length,r=n.shift(),s=E._queueHooks(e,t);"inprogress"===r&&(r=n.shift(),i--),r&&("fx"===t&&n.unshift("inprogress"),delete s.stop,r.call(e,(function(){E.dequeue(e,t)}),s)),!i&&s&&s.empty.fire()},_queueHooks:function(e,t){var n=t+"queueHooks";return se.get(e,n)||se.access(e,n,{empty:E.Callbacks("once memory").add((function(){se.remove(e,[t+"queue",n])}))})}}),E.fn.extend({queue:function(e,t){var n=2;return"string"!=typeof e&&(t=e,e="fx",n--),arguments.length<n?E.queue(this[0],e):void 0===t?this:this.each((function(){var n=E.queue(this,e,t);E._queueHooks(this,e),"fx"===e&&"inprogress"!==n[0]&&E.dequeue(this,e)}))},dequeue:function(e){return this.each((function(){E.dequeue(this,e)}))},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){var n,i=1,r=E.Deferred(),s=this,a=this.length,o=function(){--i||r.resolveWith(s,[s])};for("string"!=typeof e&&(t=e,e=void 0),e=e||"fx";a--;)(n=se.get(s[a],e+"queueHooks"))&&n.empty&&(i++,n.empty.add(o));return o(),r.promise(t)}});var ue=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,de=new RegExp("^(?:([+-])=|)("+ue+")([a-z%]*)$","i"),he=["Top","Right","Bottom","Left"],pe=g.documentElement,fe=function(e){return E.contains(e.ownerDocument,e)},me={composed:!0};pe.getRootNode&&(fe=function(e){return E.contains(e.ownerDocument,e)||e.getRootNode(me)===e.ownerDocument});var ge=function(e,t){return"none"===(e=t||e).style.display||""===e.style.display&&fe(e)&&"none"===E.css(e,"display")};function ye(e,t,n,i){var r,s,a=20,o=i?function(){return i.cur()}:function(){return E.css(e,t,"")},l=o(),c=n&&n[3]||(E.cssNumber[t]?"":"px"),u=e.nodeType&&(E.cssNumber[t]||"px"!==c&&+l)&&de.exec(E.css(e,t));if(u&&u[3]!==c){for(l/=2,c=c||u[3],u=+l||1;a--;)E.style(e,t,u+c),(1-s)*(1-(s=o()/l||.5))<=0&&(a=0),u/=s;u*=2,E.style(e,t,u+c),n=n||[]}return n&&(u=+u||+l||0,r=n[1]?u+(n[1]+1)*n[2]:+n[2],i&&(i.unit=c,i.start=u,i.end=r)),r}var _e={};function ve(e){var t,n=e.ownerDocument,i=e.nodeName,r=_e[i];return r||(t=n.body.appendChild(n.createElement(i)),r=E.css(t,"display"),t.parentNode.removeChild(t),"none"===r&&(r="block"),_e[i]=r,r)}function be(e,t){for(var n,i,r=[],s=0,a=e.length;s<a;s++)(i=e[s]).style&&(n=i.style.display,t?("none"===n&&(r[s]=se.get(i,"display")||null,r[s]||(i.style.display="")),""===i.style.display&&ge(i)&&(r[s]=ve(i))):"none"!==n&&(r[s]="none",se.set(i,"display",n)));for(s=0;s<a;s++)null!=r[s]&&(e[s].style.display=r[s]);return e}E.fn.extend({show:function(){return be(this,!0)},hide:function(){return be(this)},toggle:function(e){return"boolean"==typeof e?e?this.show():this.hide():this.each((function(){ge(this)?E(this).show():E(this).hide()}))}});var Te,Ee,we=/^(?:checkbox|radio)$/i,Se=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i,Ce=/^$|^module$|\/(?:java|ecma)script/i;Te=g.createDocumentFragment().appendChild(g.createElement("div")),(Ee=g.createElement("input")).setAttribute("type","radio"),Ee.setAttribute("checked","checked"),Ee.setAttribute("name","t"),Te.appendChild(Ee),p.checkClone=Te.cloneNode(!0).cloneNode(!0).lastChild.checked,Te.innerHTML="<textarea>x</textarea>",p.noCloneChecked=!!Te.cloneNode(!0).lastChild.defaultValue,Te.innerHTML="<option></option>",p.option=!!Te.lastChild;var Ie={thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};function xe(e,t){var n;return n=void 0!==e.getElementsByTagName?e.getElementsByTagName(t||"*"):void 0!==e.querySelectorAll?e.querySelectorAll(t||"*"):[],void 0===t||t&&S(e,t)?E.merge([e],n):n}function ke(e,t){for(var n=0,i=e.length;n<i;n++)se.set(e[n],"globalEval",!t||se.get(t[n],"globalEval"))}Ie.tbody=Ie.tfoot=Ie.colgroup=Ie.caption=Ie.thead,Ie.th=Ie.td,p.option||(Ie.optgroup=Ie.option=[1,"<select multiple='multiple'>","</select>"]);var Ae=/<|&#?\w+;/;function Oe(e,t,n,i,r){for(var s,a,o,l,c,u,d=t.createDocumentFragment(),h=[],p=0,f=e.length;p<f;p++)if((s=e[p])||0===s)if("object"===v(s))E.merge(h,s.nodeType?[s]:s);else if(Ae.test(s)){for(a=a||d.appendChild(t.createElement("div")),o=(Se.exec(s)||["",""])[1].toLowerCase(),l=Ie[o]||Ie._default,a.innerHTML=l[1]+E.htmlPrefilter(s)+l[2],u=l[0];u--;)a=a.lastChild;E.merge(h,a.childNodes),(a=d.firstChild).textContent=""}else h.push(t.createTextNode(s));for(d.textContent="",p=0;s=h[p++];)if(i&&E.inArray(s,i)>-1)r&&r.push(s);else if(c=fe(s),a=xe(d.appendChild(s),"script"),c&&ke(a),n)for(u=0;s=a[u++];)Ce.test(s.type||"")&&n.push(s);return d}var Pe=/^([^.]*)(?:\.(.+)|)/;function Le(){return!0}function Ne(){return!1}function De(e,t,n,i,r,s){var a,o;if("object"==typeof t){for(o in"string"!=typeof n&&(i=i||n,n=void 0),t)De(e,o,n,i,t[o],s);return e}if(null==i&&null==r?(r=n,i=n=void 0):null==r&&("string"==typeof n?(r=i,i=void 0):(r=i,i=n,n=void 0)),!1===r)r=Ne;else if(!r)return e;return 1===s&&(a=r,r=function(e){return E().off(e),a.apply(this,arguments)},r.guid=a.guid||(a.guid=E.guid++)),e.each((function(){E.event.add(this,t,r,i,n)}))}function Re(e,t,n){n?(se.set(e,t,!1),E.event.add(e,t,{namespace:!1,handler:function(e){var n,i=se.get(this,t);if(1&e.isTrigger&&this[t]){if(i)(E.event.special[t]||{}).delegateType&&e.stopPropagation();else if(i=r.call(arguments),se.set(this,t,i),this[t](),n=se.get(this,t),se.set(this,t,!1),i!==n)return e.stopImmediatePropagation(),e.preventDefault(),n}else i&&(se.set(this,t,E.event.trigger(i[0],i.slice(1),this)),e.stopPropagation(),e.isImmediatePropagationStopped=Le)}})):void 0===se.get(e,t)&&E.event.add(e,t,Le)}E.event={global:{},add:function(e,t,n,i,r){var s,a,o,l,c,u,d,h,p,f,m,g=se.get(e);if(ie(e))for(n.handler&&(n=(s=n).handler,r=s.selector),r&&E.find.matchesSelector(pe,r),n.guid||(n.guid=E.guid++),(l=g.events)||(l=g.events=Object.create(null)),(a=g.handle)||(a=g.handle=function(t){return void 0!==E&&E.event.triggered!==t.type?E.event.dispatch.apply(e,arguments):void 0}),c=(t=(t||"").match(W)||[""]).length;c--;)p=m=(o=Pe.exec(t[c])||[])[1],f=(o[2]||"").split(".").sort(),p&&(d=E.event.special[p]||{},p=(r?d.delegateType:d.bindType)||p,d=E.event.special[p]||{},u=E.extend({type:p,origType:m,data:i,handler:n,guid:n.guid,selector:r,needsContext:r&&E.expr.match.needsContext.test(r),namespace:f.join(".")},s),(h=l[p])||((h=l[p]=[]).delegateCount=0,d.setup&&!1!==d.setup.call(e,i,f,a)||e.addEventListener&&e.addEventListener(p,a)),d.add&&(d.add.call(e,u),u.handler.guid||(u.handler.guid=n.guid)),r?h.splice(h.delegateCount++,0,u):h.push(u),E.event.global[p]=!0)},remove:function(e,t,n,i,r){var s,a,o,l,c,u,d,h,p,f,m,g=se.hasData(e)&&se.get(e);if(g&&(l=g.events)){for(c=(t=(t||"").match(W)||[""]).length;c--;)if(p=m=(o=Pe.exec(t[c])||[])[1],f=(o[2]||"").split(".").sort(),p){for(d=E.event.special[p]||{},h=l[p=(i?d.delegateType:d.bindType)||p]||[],o=o[2]&&new RegExp("(^|\\.)"+f.join("\\.(?:.*\\.|)")+"(\\.|$)"),a=s=h.length;s--;)u=h[s],!r&&m!==u.origType||n&&n.guid!==u.guid||o&&!o.test(u.namespace)||i&&i!==u.selector&&("**"!==i||!u.selector)||(h.splice(s,1),u.selector&&h.delegateCount--,d.remove&&d.remove.call(e,u));a&&!h.length&&(d.teardown&&!1!==d.teardown.call(e,f,g.handle)||E.removeEvent(e,p,g.handle),delete l[p])}else for(p in l)E.event.remove(e,p+t[c],n,i,!0);E.isEmptyObject(l)&&se.remove(e,"handle events")}},dispatch:function(e){var t,n,i,r,s,a,o=new Array(arguments.length),l=E.event.fix(e),c=(se.get(this,"events")||Object.create(null))[l.type]||[],u=E.event.special[l.type]||{};for(o[0]=l,t=1;t<arguments.length;t++)o[t]=arguments[t];if(l.delegateTarget=this,!u.preDispatch||!1!==u.preDispatch.call(this,l)){for(a=E.event.handlers.call(this,l,c),t=0;(r=a[t++])&&!l.isPropagationStopped();)for(l.currentTarget=r.elem,n=0;(s=r.handlers[n++])&&!l.isImmediatePropagationStopped();)l.rnamespace&&!1!==s.namespace&&!l.rnamespace.test(s.namespace)||(l.handleObj=s,l.data=s.data,void 0!==(i=((E.event.special[s.origType]||{}).handle||s.handler).apply(r.elem,o))&&!1===(l.result=i)&&(l.preventDefault(),l.stopPropagation()));return u.postDispatch&&u.postDispatch.call(this,l),l.result}},handlers:function(e,t){var n,i,r,s,a,o=[],l=t.delegateCount,c=e.target;if(l&&c.nodeType&&!("click"===e.type&&e.button>=1))for(;c!==this;c=c.parentNode||this)if(1===c.nodeType&&("click"!==e.type||!0!==c.disabled)){for(s=[],a={},n=0;n<l;n++)void 0===a[r=(i=t[n]).selector+" "]&&(a[r]=i.needsContext?E(r,this).index(c)>-1:E.find(r,this,null,[c]).length),a[r]&&s.push(i);s.length&&o.push({elem:c,handlers:s})}return c=this,l<t.length&&o.push({elem:c,handlers:t.slice(l)}),o},addProp:function(e,t){Object.defineProperty(E.Event.prototype,e,{enumerable:!0,configurable:!0,get:f(t)?function(){if(this.originalEvent)return t(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[e]},set:function(t){Object.defineProperty(this,e,{enumerable:!0,configurable:!0,writable:!0,value:t})}})},fix:function(e){return e[E.expando]?e:new E.Event(e)},special:{load:{noBubble:!0},click:{setup:function(e){var t=this||e;return we.test(t.type)&&t.click&&S(t,"input")&&Re(t,"click",!0),!1},trigger:function(e){var t=this||e;return we.test(t.type)&&t.click&&S(t,"input")&&Re(t,"click"),!0},_default:function(e){var t=e.target;return we.test(t.type)&&t.click&&S(t,"input")&&se.get(t,"click")||S(t,"a")}},beforeunload:{postDispatch:function(e){void 0!==e.result&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}}},E.removeEvent=function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n)},E.Event=function(e,t){if(!(this instanceof E.Event))return new E.Event(e,t);e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||void 0===e.defaultPrevented&&!1===e.returnValue?Le:Ne,this.target=e.target&&3===e.target.nodeType?e.target.parentNode:e.target,this.currentTarget=e.currentTarget,this.relatedTarget=e.relatedTarget):this.type=e,t&&E.extend(this,t),this.timeStamp=e&&e.timeStamp||Date.now(),this[E.expando]=!0},E.Event.prototype={constructor:E.Event,isDefaultPrevented:Ne,isPropagationStopped:Ne,isImmediatePropagationStopped:Ne,isSimulated:!1,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=Le,e&&!this.isSimulated&&e.preventDefault()},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=Le,e&&!this.isSimulated&&e.stopPropagation()},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=Le,e&&!this.isSimulated&&e.stopImmediatePropagation(),this.stopPropagation()}},E.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:!0},E.event.addProp),E.each({focus:"focusin",blur:"focusout"},(function(e,t){function n(e){if(g.documentMode){var n=se.get(this,"handle"),i=E.event.fix(e);i.type="focusin"===e.type?"focus":"blur",i.isSimulated=!0,n(e),i.target===i.currentTarget&&n(i)}else E.event.simulate(t,e.target,E.event.fix(e))}E.event.special[e]={setup:function(){var i;if(Re(this,e,!0),!g.documentMode)return!1;(i=se.get(this,t))||this.addEventListener(t,n),se.set(this,t,(i||0)+1)},trigger:function(){return Re(this,e),!0},teardown:function(){var e;if(!g.documentMode)return!1;(e=se.get(this,t)-1)?se.set(this,t,e):(this.removeEventListener(t,n),se.remove(this,t))},_default:function(t){return se.get(t.target,e)},delegateType:t},E.event.special[t]={setup:function(){var i=this.ownerDocument||this.document||this,r=g.documentMode?this:i,s=se.get(r,t);s||(g.documentMode?this.addEventListener(t,n):i.addEventListener(e,n,!0)),se.set(r,t,(s||0)+1)},teardown:function(){var i=this.ownerDocument||this.document||this,r=g.documentMode?this:i,s=se.get(r,t)-1;s?se.set(r,t,s):(g.documentMode?this.removeEventListener(t,n):i.removeEventListener(e,n,!0),se.remove(r,t))}}})),E.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},(function(e,t){E.event.special[e]={delegateType:t,bindType:t,handle:function(e){var n,i=e.relatedTarget,r=e.handleObj;return i&&(i===this||E.contains(this,i))||(e.type=r.origType,n=r.handler.apply(this,arguments),e.type=t),n}}})),E.fn.extend({on:function(e,t,n,i){return De(this,e,t,n,i)},one:function(e,t,n,i){return De(this,e,t,n,i,1)},off:function(e,t,n){var i,r;if(e&&e.preventDefault&&e.handleObj)return i=e.handleObj,E(e.delegateTarget).off(i.namespace?i.origType+"."+i.namespace:i.origType,i.selector,i.handler),this;if("object"==typeof e){for(r in e)this.off(r,t,e[r]);return this}return!1!==t&&"function"!=typeof t||(n=t,t=void 0),!1===n&&(n=Ne),this.each((function(){E.event.remove(this,e,n,t)}))}});var Me=/<script|<style|<link/i,Fe=/checked\s*(?:[^=]|=\s*.checked.)/i,Ue=/^\s*<!\[CDATA\[|\]\]>\s*$/g;function Be(e,t){return S(e,"table")&&S(11!==t.nodeType?t:t.firstChild,"tr")&&E(e).children("tbody")[0]||e}function je(e){return e.type=(null!==e.getAttribute("type"))+"/"+e.type,e}function qe(e){return"true/"===(e.type||"").slice(0,5)?e.type=e.type.slice(5):e.removeAttribute("type"),e}function He(e,t){var n,i,r,s,a,o;if(1===t.nodeType){if(se.hasData(e)&&(o=se.get(e).events))for(r in se.remove(t,"handle events"),o)for(n=0,i=o[r].length;n<i;n++)E.event.add(t,r,o[r][n]);ae.hasData(e)&&(s=ae.access(e),a=E.extend({},s),ae.set(t,a))}}function Ve(e,t){var n=t.nodeName.toLowerCase();"input"===n&&we.test(e.type)?t.checked=e.checked:"input"!==n&&"textarea"!==n||(t.defaultValue=e.defaultValue)}function $e(e,t,n,i){t=s(t);var r,a,o,l,c,u,d=0,h=e.length,m=h-1,g=t[0],y=f(g);if(y||h>1&&"string"==typeof g&&!p.checkClone&&Fe.test(g))return e.each((function(r){var s=e.eq(r);y&&(t[0]=g.call(this,r,s.html())),$e(s,t,n,i)}));if(h&&(a=(r=Oe(t,e[0].ownerDocument,!1,e,i)).firstChild,1===r.childNodes.length&&(r=a),a||i)){for(l=(o=E.map(xe(r,"script"),je)).length;d<h;d++)c=r,d!==m&&(c=E.clone(c,!0,!0),l&&E.merge(o,xe(c,"script"))),n.call(e[d],c,d);if(l)for(u=o[o.length-1].ownerDocument,E.map(o,qe),d=0;d<l;d++)c=o[d],Ce.test(c.type||"")&&!se.access(c,"globalEval")&&E.contains(u,c)&&(c.src&&"module"!==(c.type||"").toLowerCase()?E._evalUrl&&!c.noModule&&E._evalUrl(c.src,{nonce:c.nonce||c.getAttribute("nonce")},u):_(c.textContent.replace(Ue,""),c,u))}return e}function We(e,t,n){for(var i,r=t?E.filter(t,e):e,s=0;null!=(i=r[s]);s++)n||1!==i.nodeType||E.cleanData(xe(i)),i.parentNode&&(n&&fe(i)&&ke(xe(i,"script")),i.parentNode.removeChild(i));return e}E.extend({htmlPrefilter:function(e){return e},clone:function(e,t,n){var i,r,s,a,o=e.cloneNode(!0),l=fe(e);if(!(p.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||E.isXMLDoc(e)))for(a=xe(o),i=0,r=(s=xe(e)).length;i<r;i++)Ve(s[i],a[i]);if(t)if(n)for(s=s||xe(e),a=a||xe(o),i=0,r=s.length;i<r;i++)He(s[i],a[i]);else He(e,o);return(a=xe(o,"script")).length>0&&ke(a,!l&&xe(e,"script")),o},cleanData:function(e){for(var t,n,i,r=E.event.special,s=0;void 0!==(n=e[s]);s++)if(ie(n)){if(t=n[se.expando]){if(t.events)for(i in t.events)r[i]?E.event.remove(n,i):E.removeEvent(n,i,t.handle);n[se.expando]=void 0}n[ae.expando]&&(n[ae.expando]=void 0)}}}),E.fn.extend({detach:function(e){return We(this,e,!0)},remove:function(e){return We(this,e)},text:function(e){return J(this,(function(e){return void 0===e?E.text(this):this.empty().each((function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=e)}))}),null,e,arguments.length)},append:function(){return $e(this,arguments,(function(e){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||Be(this,e).appendChild(e)}))},prepend:function(){return $e(this,arguments,(function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=Be(this,e);t.insertBefore(e,t.firstChild)}}))},before:function(){return $e(this,arguments,(function(e){this.parentNode&&this.parentNode.insertBefore(e,this)}))},after:function(){return $e(this,arguments,(function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)}))},empty:function(){for(var e,t=0;null!=(e=this[t]);t++)1===e.nodeType&&(E.cleanData(xe(e,!1)),e.textContent="");return this},clone:function(e,t){return e=null!=e&&e,t=null==t?e:t,this.map((function(){return E.clone(this,e,t)}))},html:function(e){return J(this,(function(e){var t=this[0]||{},n=0,i=this.length;if(void 0===e&&1===t.nodeType)return t.innerHTML;if("string"==typeof e&&!Me.test(e)&&!Ie[(Se.exec(e)||["",""])[1].toLowerCase()]){e=E.htmlPrefilter(e);try{for(;n<i;n++)1===(t=this[n]||{}).nodeType&&(E.cleanData(xe(t,!1)),t.innerHTML=e);t=0}catch(fB){}}t&&this.empty().append(e)}),null,e,arguments.length)},replaceWith:function(){var e=[];return $e(this,arguments,(function(t){var n=this.parentNode;E.inArray(this,e)<0&&(E.cleanData(xe(this)),n&&n.replaceChild(t,this))}),e)}}),E.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},(function(e,t){E.fn[e]=function(e){for(var n,i=[],r=E(e),s=r.length-1,o=0;o<=s;o++)n=o===s?this:this.clone(!0),E(r[o])[t](n),a.apply(i,n.get());return this.pushStack(i)}}));var ze=new RegExp("^("+ue+")(?!px)[a-z%]+$","i"),Ge=/^--/,Ke=function(t){var n=t.ownerDocument.defaultView;return n&&n.opener||(n=e),n.getComputedStyle(t)},Xe=function(e,t,n){var i,r,s={};for(r in t)s[r]=e.style[r],e.style[r]=t[r];for(r in i=n.call(e),t)e.style[r]=s[r];return i},Ye=new RegExp(he.join("|"),"i");function Qe(e,t,n){var i,r,s,a,o=Ge.test(t),l=e.style;return(n=n||Ke(e))&&(a=n.getPropertyValue(t)||n[t],o&&a&&(a=a.replace(A,"$1")||void 0),""!==a||fe(e)||(a=E.style(e,t)),!p.pixelBoxStyles()&&ze.test(a)&&Ye.test(t)&&(i=l.width,r=l.minWidth,s=l.maxWidth,l.minWidth=l.maxWidth=l.width=a,a=n.width,l.width=i,l.minWidth=r,l.maxWidth=s)),void 0!==a?a+"":a}function Je(e,t){return{get:function(){if(!e())return(this.get=t).apply(this,arguments);delete this.get}}}!function(){function t(){if(u){c.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",u.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",pe.appendChild(c).appendChild(u);var t=e.getComputedStyle(u);i="1%"!==t.top,l=12===n(t.marginLeft),u.style.right="60%",a=36===n(t.right),r=36===n(t.width),u.style.position="absolute",s=12===n(u.offsetWidth/3),pe.removeChild(c),u=null}}function n(e){return Math.round(parseFloat(e))}var i,r,s,a,o,l,c=g.createElement("div"),u=g.createElement("div");u.style&&(u.style.backgroundClip="content-box",u.cloneNode(!0).style.backgroundClip="",p.clearCloneStyle="content-box"===u.style.backgroundClip,E.extend(p,{boxSizingReliable:function(){return t(),r},pixelBoxStyles:function(){return t(),a},pixelPosition:function(){return t(),i},reliableMarginLeft:function(){return t(),l},scrollboxSize:function(){return t(),s},reliableTrDimensions:function(){var t,n,i,r;return null==o&&(t=g.createElement("table"),n=g.createElement("tr"),i=g.createElement("div"),t.style.cssText="position:absolute;left:-11111px;border-collapse:separate",n.style.cssText="border:1px solid",n.style.height="1px",i.style.height="9px",i.style.display="block",pe.appendChild(t).appendChild(n).appendChild(i),r=e.getComputedStyle(n),o=parseInt(r.height,10)+parseInt(r.borderTopWidth,10)+parseInt(r.borderBottomWidth,10)===n.offsetHeight,pe.removeChild(t)),o}}))}();var Ze=["Webkit","Moz","ms"],et=g.createElement("div").style,tt={};function nt(e){var t=E.cssProps[e]||tt[e];return t||(e in et?e:tt[e]=function(e){for(var t=e[0].toUpperCase()+e.slice(1),n=Ze.length;n--;)if((e=Ze[n]+t)in et)return e}(e)||e)}var it=/^(none|table(?!-c[ea]).+)/,rt={position:"absolute",visibility:"hidden",display:"block"},st={letterSpacing:"0",fontWeight:"400"};function at(e,t,n){var i=de.exec(t);return i?Math.max(0,i[2]-(n||0))+(i[3]||"px"):t}function ot(e,t,n,i,r,s){var a="width"===t?1:0,o=0,l=0,c=0;if(n===(i?"border":"content"))return 0;for(;a<4;a+=2)"margin"===n&&(c+=E.css(e,n+he[a],!0,r)),i?("content"===n&&(l-=E.css(e,"padding"+he[a],!0,r)),"margin"!==n&&(l-=E.css(e,"border"+he[a]+"Width",!0,r))):(l+=E.css(e,"padding"+he[a],!0,r),"padding"!==n?l+=E.css(e,"border"+he[a]+"Width",!0,r):o+=E.css(e,"border"+he[a]+"Width",!0,r));return!i&&s>=0&&(l+=Math.max(0,Math.ceil(e["offset"+t[0].toUpperCase()+t.slice(1)]-s-l-o-.5))||0),l+c}function lt(e,t,n){var i=Ke(e),r=(!p.boxSizingReliable()||n)&&"border-box"===E.css(e,"boxSizing",!1,i),s=r,a=Qe(e,t,i),o="offset"+t[0].toUpperCase()+t.slice(1);if(ze.test(a)){if(!n)return a;a="auto"}return(!p.boxSizingReliable()&&r||!p.reliableTrDimensions()&&S(e,"tr")||"auto"===a||!parseFloat(a)&&"inline"===E.css(e,"display",!1,i))&&e.getClientRects().length&&(r="border-box"===E.css(e,"boxSizing",!1,i),(s=o in e)&&(a=e[o])),(a=parseFloat(a)||0)+ot(e,t,n||(r?"border":"content"),s,i,a)+"px"}function ct(e,t,n,i,r){return new ct.prototype.init(e,t,n,i,r)}E.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=Qe(e,"opacity");return""===n?"1":n}}}},cssNumber:{animationIterationCount:!0,aspectRatio:!0,borderImageSlice:!0,columnCount:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,scale:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeMiterlimit:!0,strokeOpacity:!0},cssProps:{},style:function(e,t,n,i){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var r,s,a,o=ne(t),l=Ge.test(t),c=e.style;if(l||(t=nt(o)),a=E.cssHooks[t]||E.cssHooks[o],void 0===n)return a&&"get"in a&&void 0!==(r=a.get(e,!1,i))?r:c[t];"string"===(s=typeof n)&&(r=de.exec(n))&&r[1]&&(n=ye(e,t,r),s="number"),null!=n&&n==n&&("number"!==s||l||(n+=r&&r[3]||(E.cssNumber[o]?"":"px")),p.clearCloneStyle||""!==n||0!==t.indexOf("background")||(c[t]="inherit"),a&&"set"in a&&void 0===(n=a.set(e,n,i))||(l?c.setProperty(t,n):c[t]=n))}},css:function(e,t,n,i){var r,s,a,o=ne(t);return Ge.test(t)||(t=nt(o)),(a=E.cssHooks[t]||E.cssHooks[o])&&"get"in a&&(r=a.get(e,!0,n)),void 0===r&&(r=Qe(e,t,i)),"normal"===r&&t in st&&(r=st[t]),""===n||n?(s=parseFloat(r),!0===n||isFinite(s)?s||0:r):r}}),E.each(["height","width"],(function(e,t){E.cssHooks[t]={get:function(e,n,i){if(n)return!it.test(E.css(e,"display"))||e.getClientRects().length&&e.getBoundingClientRect().width?lt(e,t,i):Xe(e,rt,(function(){return lt(e,t,i)}))},set:function(e,n,i){var r,s=Ke(e),a=!p.scrollboxSize()&&"absolute"===s.position,o=(a||i)&&"border-box"===E.css(e,"boxSizing",!1,s),l=i?ot(e,t,i,o,s):0;return o&&a&&(l-=Math.ceil(e["offset"+t[0].toUpperCase()+t.slice(1)]-parseFloat(s[t])-ot(e,t,"border",!1,s)-.5)),l&&(r=de.exec(n))&&"px"!==(r[3]||"px")&&(e.style[t]=n,n=E.css(e,t)),at(0,n,l)}}})),E.cssHooks.marginLeft=Je(p.reliableMarginLeft,(function(e,t){if(t)return(parseFloat(Qe(e,"marginLeft"))||e.getBoundingClientRect().left-Xe(e,{marginLeft:0},(function(){return e.getBoundingClientRect().left})))+"px"})),E.each({margin:"",padding:"",border:"Width"},(function(e,t){E.cssHooks[e+t]={expand:function(n){for(var i=0,r={},s="string"==typeof n?n.split(" "):[n];i<4;i++)r[e+he[i]+t]=s[i]||s[i-2]||s[0];return r}},"margin"!==e&&(E.cssHooks[e+t].set=at)})),E.fn.extend({css:function(e,t){return J(this,(function(e,t,n){var i,r,s={},a=0;if(Array.isArray(t)){for(i=Ke(e),r=t.length;a<r;a++)s[t[a]]=E.css(e,t[a],!1,i);return s}return void 0!==n?E.style(e,t,n):E.css(e,t)}),e,t,arguments.length>1)}}),E.Tween=ct,ct.prototype={constructor:ct,init:function(e,t,n,i,r,s){this.elem=e,this.prop=n,this.easing=r||E.easing._default,this.options=t,this.start=this.now=this.cur(),this.end=i,this.unit=s||(E.cssNumber[n]?"":"px")},cur:function(){var e=ct.propHooks[this.prop];return e&&e.get?e.get(this):ct.propHooks._default.get(this)},run:function(e){var t,n=ct.propHooks[this.prop];return this.options.duration?this.pos=t=E.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):this.pos=t=e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):ct.propHooks._default.set(this),this}},ct.prototype.init.prototype=ct.prototype,ct.propHooks={_default:{get:function(e){var t;return 1!==e.elem.nodeType||null!=e.elem[e.prop]&&null==e.elem.style[e.prop]?e.elem[e.prop]:(t=E.css(e.elem,e.prop,""))&&"auto"!==t?t:0},set:function(e){E.fx.step[e.prop]?E.fx.step[e.prop](e):1!==e.elem.nodeType||!E.cssHooks[e.prop]&&null==e.elem.style[nt(e.prop)]?e.elem[e.prop]=e.now:E.style(e.elem,e.prop,e.now+e.unit)}}},ct.propHooks.scrollTop=ct.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},E.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2},_default:"swing"},E.fx=ct.prototype.init,E.fx.step={};var ut,dt,ht=/^(?:toggle|show|hide)$/,pt=/queueHooks$/;function ft(){dt&&(!1===g.hidden&&e.requestAnimationFrame?e.requestAnimationFrame(ft):e.setTimeout(ft,E.fx.interval),E.fx.tick())}function mt(){return e.setTimeout((function(){ut=void 0})),ut=Date.now()}function gt(e,t){var n,i=0,r={height:e};for(t=t?1:0;i<4;i+=2-t)r["margin"+(n=he[i])]=r["padding"+n]=e;return t&&(r.opacity=r.width=e),r}function yt(e,t,n){for(var i,r=(_t.tweeners[t]||[]).concat(_t.tweeners["*"]),s=0,a=r.length;s<a;s++)if(i=r[s].call(n,t,e))return i}function _t(e,t,n){var i,r,s=0,a=_t.prefilters.length,o=E.Deferred().always((function(){delete l.elem})),l=function(){if(r)return!1;for(var t=ut||mt(),n=Math.max(0,c.startTime+c.duration-t),i=1-(n/c.duration||0),s=0,a=c.tweens.length;s<a;s++)c.tweens[s].run(i);return o.notifyWith(e,[c,i,n]),i<1&&a?n:(a||o.notifyWith(e,[c,1,0]),o.resolveWith(e,[c]),!1)},c=o.promise({elem:e,props:E.extend({},t),opts:E.extend(!0,{specialEasing:{},easing:E.easing._default},n),originalProperties:t,originalOptions:n,startTime:ut||mt(),duration:n.duration,tweens:[],createTween:function(t,n){var i=E.Tween(e,c.opts,t,n,c.opts.specialEasing[t]||c.opts.easing);return c.tweens.push(i),i},stop:function(t){var n=0,i=t?c.tweens.length:0;if(r)return this;for(r=!0;n<i;n++)c.tweens[n].run(1);return t?(o.notifyWith(e,[c,1,0]),o.resolveWith(e,[c,t])):o.rejectWith(e,[c,t]),this}}),u=c.props;for(!function(e,t){var n,i,r,s,a;for(n in e)if(r=t[i=ne(n)],s=e[n],Array.isArray(s)&&(r=s[1],s=e[n]=s[0]),n!==i&&(e[i]=s,delete e[n]),(a=E.cssHooks[i])&&"expand"in a)for(n in s=a.expand(s),delete e[i],s)n in e||(e[n]=s[n],t[n]=r);else t[i]=r}(u,c.opts.specialEasing);s<a;s++)if(i=_t.prefilters[s].call(c,e,u,c.opts))return f(i.stop)&&(E._queueHooks(c.elem,c.opts.queue).stop=i.stop.bind(i)),i;return E.map(u,yt,c),f(c.opts.start)&&c.opts.start.call(e,c),c.progress(c.opts.progress).done(c.opts.done,c.opts.complete).fail(c.opts.fail).always(c.opts.always),E.fx.timer(E.extend(l,{elem:e,anim:c,queue:c.opts.queue})),c}E.Animation=E.extend(_t,{tweeners:{"*":[function(e,t){var n=this.createTween(e,t);return ye(n.elem,e,de.exec(t),n),n}]},tweener:function(e,t){f(e)?(t=e,e=["*"]):e=e.match(W);for(var n,i=0,r=e.length;i<r;i++)n=e[i],_t.tweeners[n]=_t.tweeners[n]||[],_t.tweeners[n].unshift(t)},prefilters:[function(e,t,n){var i,r,s,a,o,l,c,u,d="width"in t||"height"in t,h=this,p={},f=e.style,m=e.nodeType&&ge(e),g=se.get(e,"fxshow");for(i in n.queue||(null==(a=E._queueHooks(e,"fx")).unqueued&&(a.unqueued=0,o=a.empty.fire,a.empty.fire=function(){a.unqueued||o()}),a.unqueued++,h.always((function(){h.always((function(){a.unqueued--,E.queue(e,"fx").length||a.empty.fire()}))}))),t)if(r=t[i],ht.test(r)){if(delete t[i],s=s||"toggle"===r,r===(m?"hide":"show")){if("show"!==r||!g||void 0===g[i])continue;m=!0}p[i]=g&&g[i]||E.style(e,i)}if((l=!E.isEmptyObject(t))||!E.isEmptyObject(p))for(i in d&&1===e.nodeType&&(n.overflow=[f.overflow,f.overflowX,f.overflowY],null==(c=g&&g.display)&&(c=se.get(e,"display")),"none"===(u=E.css(e,"display"))&&(c?u=c:(be([e],!0),c=e.style.display||c,u=E.css(e,"display"),be([e]))),("inline"===u||"inline-block"===u&&null!=c)&&"none"===E.css(e,"float")&&(l||(h.done((function(){f.display=c})),null==c&&(u=f.display,c="none"===u?"":u)),f.display="inline-block")),n.overflow&&(f.overflow="hidden",h.always((function(){f.overflow=n.overflow[0],f.overflowX=n.overflow[1],f.overflowY=n.overflow[2]}))),l=!1,p)l||(g?"hidden"in g&&(m=g.hidden):g=se.access(e,"fxshow",{display:c}),s&&(g.hidden=!m),m&&be([e],!0),h.done((function(){for(i in m||be([e]),se.remove(e,"fxshow"),p)E.style(e,i,p[i])}))),l=yt(m?g[i]:0,i,h),i in g||(g[i]=l.start,m&&(l.end=l.start,l.start=0))}],prefilter:function(e,t){t?_t.prefilters.unshift(e):_t.prefilters.push(e)}}),E.speed=function(e,t,n){var i=e&&"object"==typeof e?E.extend({},e):{complete:n||!n&&t||f(e)&&e,duration:e,easing:n&&t||t&&!f(t)&&t};return E.fx.off?i.duration=0:"number"!=typeof i.duration&&(i.duration in E.fx.speeds?i.duration=E.fx.speeds[i.duration]:i.duration=E.fx.speeds._default),null!=i.queue&&!0!==i.queue||(i.queue="fx"),i.old=i.complete,i.complete=function(){f(i.old)&&i.old.call(this),i.queue&&E.dequeue(this,i.queue)},i},E.fn.extend({fadeTo:function(e,t,n,i){return this.filter(ge).css("opacity",0).show().end().animate({opacity:t},e,n,i)},animate:function(e,t,n,i){var r=E.isEmptyObject(e),s=E.speed(t,n,i),a=function(){var t=_t(this,E.extend({},e),s);(r||se.get(this,"finish"))&&t.stop(!0)};return a.finish=a,r||!1===s.queue?this.each(a):this.queue(s.queue,a)},stop:function(e,t,n){var i=function(e){var t=e.stop;delete e.stop,t(n)};return"string"!=typeof e&&(n=t,t=e,e=void 0),t&&this.queue(e||"fx",[]),this.each((function(){var t=!0,r=null!=e&&e+"queueHooks",s=E.timers,a=se.get(this);if(r)a[r]&&a[r].stop&&i(a[r]);else for(r in a)a[r]&&a[r].stop&&pt.test(r)&&i(a[r]);for(r=s.length;r--;)s[r].elem!==this||null!=e&&s[r].queue!==e||(s[r].anim.stop(n),t=!1,s.splice(r,1));!t&&n||E.dequeue(this,e)}))},finish:function(e){return!1!==e&&(e=e||"fx"),this.each((function(){var t,n=se.get(this),i=n[e+"queue"],r=n[e+"queueHooks"],s=E.timers,a=i?i.length:0;for(n.finish=!0,E.queue(this,e,[]),r&&r.stop&&r.stop.call(this,!0),t=s.length;t--;)s[t].elem===this&&s[t].queue===e&&(s[t].anim.stop(!0),s.splice(t,1));for(t=0;t<a;t++)i[t]&&i[t].finish&&i[t].finish.call(this);delete n.finish}))}}),E.each(["toggle","show","hide"],(function(e,t){var n=E.fn[t];E.fn[t]=function(e,i,r){return null==e||"boolean"==typeof e?n.apply(this,arguments):this.animate(gt(t,!0),e,i,r)}})),E.each({slideDown:gt("show"),slideUp:gt("hide"),slideToggle:gt("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},(function(e,t){E.fn[e]=function(e,n,i){return this.animate(t,e,n,i)}})),E.timers=[],E.fx.tick=function(){var e,t=0,n=E.timers;for(ut=Date.now();t<n.length;t++)(e=n[t])()||n[t]!==e||n.splice(t--,1);n.length||E.fx.stop(),ut=void 0},E.fx.timer=function(e){E.timers.push(e),E.fx.start()},E.fx.interval=13,E.fx.start=function(){dt||(dt=!0,ft())},E.fx.stop=function(){dt=null},E.fx.speeds={slow:600,fast:200,_default:400},E.fn.delay=function(t,n){return t=E.fx&&E.fx.speeds[t]||t,n=n||"fx",this.queue(n,(function(n,i){var r=e.setTimeout(n,t);i.stop=function(){e.clearTimeout(r)}}))},function(){var e=g.createElement("input"),t=g.createElement("select").appendChild(g.createElement("option"));e.type="checkbox",p.checkOn=""!==e.value,p.optSelected=t.selected,(e=g.createElement("input")).value="t",e.type="radio",p.radioValue="t"===e.value}();var vt,bt=E.expr.attrHandle;E.fn.extend({attr:function(e,t){return J(this,E.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each((function(){E.removeAttr(this,e)}))}}),E.extend({attr:function(e,t,n){var i,r,s=e.nodeType;if(3!==s&&8!==s&&2!==s)return void 0===e.getAttribute?E.prop(e,t,n):(1===s&&E.isXMLDoc(e)||(r=E.attrHooks[t.toLowerCase()]||(E.expr.match.bool.test(t)?vt:void 0)),void 0!==n?null===n?void E.removeAttr(e,t):r&&"set"in r&&void 0!==(i=r.set(e,n,t))?i:(e.setAttribute(t,n+""),n):r&&"get"in r&&null!==(i=r.get(e,t))?i:null==(i=E.find.attr(e,t))?void 0:i)},attrHooks:{type:{set:function(e,t){if(!p.radioValue&&"radio"===t&&S(e,"input")){var n=e.value;return e.setAttribute("type",t),n&&(e.value=n),t}}}},removeAttr:function(e,t){var n,i=0,r=t&&t.match(W);if(r&&1===e.nodeType)for(;n=r[i++];)e.removeAttribute(n)}}),vt={set:function(e,t,n){return!1===t?E.removeAttr(e,n):e.setAttribute(n,n),n}},E.each(E.expr.match.bool.source.match(/\w+/g),(function(e,t){var n=bt[t]||E.find.attr;bt[t]=function(e,t,i){var r,s,a=t.toLowerCase();return i||(s=bt[a],bt[a]=r,r=null!=n(e,t,i)?a:null,bt[a]=s),r}}));var Tt=/^(?:input|select|textarea|button)$/i,Et=/^(?:a|area)$/i;function wt(e){return(e.match(W)||[]).join(" ")}function St(e){return e.getAttribute&&e.getAttribute("class")||""}function Ct(e){return Array.isArray(e)?e:"string"==typeof e&&e.match(W)||[]}E.fn.extend({prop:function(e,t){return J(this,E.prop,e,t,arguments.length>1)},removeProp:function(e){return this.each((function(){delete this[E.propFix[e]||e]}))}}),E.extend({prop:function(e,t,n){var i,r,s=e.nodeType;if(3!==s&&8!==s&&2!==s)return 1===s&&E.isXMLDoc(e)||(t=E.propFix[t]||t,r=E.propHooks[t]),void 0!==n?r&&"set"in r&&void 0!==(i=r.set(e,n,t))?i:e[t]=n:r&&"get"in r&&null!==(i=r.get(e,t))?i:e[t]},propHooks:{tabIndex:{get:function(e){var t=E.find.attr(e,"tabindex");return t?parseInt(t,10):Tt.test(e.nodeName)||Et.test(e.nodeName)&&e.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),p.optSelected||(E.propHooks.selected={get:function(e){var t=e.parentNode;return t&&t.parentNode&&t.parentNode.selectedIndex,null},set:function(e){var t=e.parentNode;t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex)}}),E.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],(function(){E.propFix[this.toLowerCase()]=this})),E.fn.extend({addClass:function(e){var t,n,i,r,s,a;return f(e)?this.each((function(t){E(this).addClass(e.call(this,t,St(this)))})):(t=Ct(e)).length?this.each((function(){if(i=St(this),n=1===this.nodeType&&" "+wt(i)+" "){for(s=0;s<t.length;s++)r=t[s],n.indexOf(" "+r+" ")<0&&(n+=r+" ");a=wt(n),i!==a&&this.setAttribute("class",a)}})):this},removeClass:function(e){var t,n,i,r,s,a;return f(e)?this.each((function(t){E(this).removeClass(e.call(this,t,St(this)))})):arguments.length?(t=Ct(e)).length?this.each((function(){if(i=St(this),n=1===this.nodeType&&" "+wt(i)+" "){for(s=0;s<t.length;s++)for(r=t[s];n.indexOf(" "+r+" ")>-1;)n=n.replace(" "+r+" "," ");a=wt(n),i!==a&&this.setAttribute("class",a)}})):this:this.attr("class","")},toggleClass:function(e,t){var n,i,r,s,a=typeof e,o="string"===a||Array.isArray(e);return f(e)?this.each((function(n){E(this).toggleClass(e.call(this,n,St(this),t),t)})):"boolean"==typeof t&&o?t?this.addClass(e):this.removeClass(e):(n=Ct(e),this.each((function(){if(o)for(s=E(this),r=0;r<n.length;r++)i=n[r],s.hasClass(i)?s.removeClass(i):s.addClass(i);else void 0!==e&&"boolean"!==a||((i=St(this))&&se.set(this,"__className__",i),this.setAttribute&&this.setAttribute("class",i||!1===e?"":se.get(this,"__className__")||""))})))},hasClass:function(e){var t,n,i=0;for(t=" "+e+" ";n=this[i++];)if(1===n.nodeType&&(" "+wt(St(n))+" ").indexOf(t)>-1)return!0;return!1}});var It=/\r/g;E.fn.extend({val:function(e){var t,n,i,r=this[0];return arguments.length?(i=f(e),this.each((function(n){var r;1===this.nodeType&&(null==(r=i?e.call(this,n,E(this).val()):e)?r="":"number"==typeof r?r+="":Array.isArray(r)&&(r=E.map(r,(function(e){return null==e?"":e+""}))),(t=E.valHooks[this.type]||E.valHooks[this.nodeName.toLowerCase()])&&"set"in t&&void 0!==t.set(this,r,"value")||(this.value=r))}))):r?(t=E.valHooks[r.type]||E.valHooks[r.nodeName.toLowerCase()])&&"get"in t&&void 0!==(n=t.get(r,"value"))?n:"string"==typeof(n=r.value)?n.replace(It,""):null==n?"":n:void 0}}),E.extend({valHooks:{option:{get:function(e){var t=E.find.attr(e,"value");return null!=t?t:wt(E.text(e))}},select:{get:function(e){var t,n,i,r=e.options,s=e.selectedIndex,a="select-one"===e.type,o=a?null:[],l=a?s+1:r.length;for(i=s<0?l:a?s:0;i<l;i++)if(((n=r[i]).selected||i===s)&&!n.disabled&&(!n.parentNode.disabled||!S(n.parentNode,"optgroup"))){if(t=E(n).val(),a)return t;o.push(t)}return o},set:function(e,t){for(var n,i,r=e.options,s=E.makeArray(t),a=r.length;a--;)((i=r[a]).selected=E.inArray(E.valHooks.option.get(i),s)>-1)&&(n=!0);return n||(e.selectedIndex=-1),s}}}}),E.each(["radio","checkbox"],(function(){E.valHooks[this]={set:function(e,t){if(Array.isArray(t))return e.checked=E.inArray(E(e).val(),t)>-1}},p.checkOn||(E.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})}));var xt=e.location,kt={guid:Date.now()},At=/\?/;E.parseXML=function(t){var n,i;if(!t||"string"!=typeof t)return null;try{n=(new e.DOMParser).parseFromString(t,"text/xml")}catch(fB){}return i=n&&n.getElementsByTagName("parsererror")[0],n&&!i||E.error("Invalid XML: "+(i?E.map(i.childNodes,(function(e){return e.textContent})).join("\n"):t)),n};var Ot=/^(?:focusinfocus|focusoutblur)$/,Pt=function(e){e.stopPropagation()};E.extend(E.event,{trigger:function(t,n,i,r){var s,a,o,l,c,d,h,p,y=[i||g],_=u.call(t,"type")?t.type:t,v=u.call(t,"namespace")?t.namespace.split("."):[];if(a=p=o=i=i||g,3!==i.nodeType&&8!==i.nodeType&&!Ot.test(_+E.event.triggered)&&(_.indexOf(".")>-1&&(v=_.split("."),_=v.shift(),v.sort()),c=_.indexOf(":")<0&&"on"+_,(t=t[E.expando]?t:new E.Event(_,"object"==typeof t&&t)).isTrigger=r?2:3,t.namespace=v.join("."),t.rnamespace=t.namespace?new RegExp("(^|\\.)"+v.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,t.result=void 0,t.target||(t.target=i),n=null==n?[t]:E.makeArray(n,[t]),h=E.event.special[_]||{},r||!h.trigger||!1!==h.trigger.apply(i,n))){if(!r&&!h.noBubble&&!m(i)){for(l=h.delegateType||_,Ot.test(l+_)||(a=a.parentNode);a;a=a.parentNode)y.push(a),o=a;o===(i.ownerDocument||g)&&y.push(o.defaultView||o.parentWindow||e)}for(s=0;(a=y[s++])&&!t.isPropagationStopped();)p=a,t.type=s>1?l:h.bindType||_,(d=(se.get(a,"events")||Object.create(null))[t.type]&&se.get(a,"handle"))&&d.apply(a,n),(d=c&&a[c])&&d.apply&&ie(a)&&(t.result=d.apply(a,n),!1===t.result&&t.preventDefault());return t.type=_,r||t.isDefaultPrevented()||h._default&&!1!==h._default.apply(y.pop(),n)||!ie(i)||c&&f(i[_])&&!m(i)&&((o=i[c])&&(i[c]=null),E.event.triggered=_,t.isPropagationStopped()&&p.addEventListener(_,Pt),i[_](),t.isPropagationStopped()&&p.removeEventListener(_,Pt),E.event.triggered=void 0,o&&(i[c]=o)),t.result}},simulate:function(e,t,n){var i=E.extend(new E.Event,n,{type:e,isSimulated:!0});E.event.trigger(i,null,t)}}),E.fn.extend({trigger:function(e,t){return this.each((function(){E.event.trigger(e,t,this)}))},triggerHandler:function(e,t){var n=this[0];if(n)return E.event.trigger(e,t,n,!0)}});var Lt=/\[\]$/,Nt=/\r?\n/g,Dt=/^(?:submit|button|image|reset|file)$/i,Rt=/^(?:input|select|textarea|keygen)/i;function Mt(e,t,n,i){var r;if(Array.isArray(t))E.each(t,(function(t,r){n||Lt.test(e)?i(e,r):Mt(e+"["+("object"==typeof r&&null!=r?t:"")+"]",r,n,i)}));else if(n||"object"!==v(t))i(e,t);else for(r in t)Mt(e+"["+r+"]",t[r],n,i)}E.param=function(e,t){var n,i=[],r=function(e,t){var n=f(t)?t():t;i[i.length]=encodeURIComponent(e)+"="+encodeURIComponent(null==n?"":n)};if(null==e)return"";if(Array.isArray(e)||e.jquery&&!E.isPlainObject(e))E.each(e,(function(){r(this.name,this.value)}));else for(n in e)Mt(n,e[n],t,r);return i.join("&")},E.fn.extend({serialize:function(){return E.param(this.serializeArray())},serializeArray:function(){return this.map((function(){var e=E.prop(this,"elements");return e?E.makeArray(e):this})).filter((function(){var e=this.type;return this.name&&!E(this).is(":disabled")&&Rt.test(this.nodeName)&&!Dt.test(e)&&(this.checked||!we.test(e))})).map((function(e,t){var n=E(this).val();return null==n?null:Array.isArray(n)?E.map(n,(function(e){return{name:t.name,value:e.replace(Nt,"\r\n")}})):{name:t.name,value:n.replace(Nt,"\r\n")}})).get()}});var Ft=/%20/g,Ut=/#.*$/,Bt=/([?&])_=[^&]*/,jt=/^(.*?):[ \t]*([^\r\n]*)$/gm,qt=/^(?:GET|HEAD)$/,Ht=/^\/\//,Vt={},$t={},Wt="*/".concat("*"),zt=g.createElement("a");function Gt(e){return function(t,n){"string"!=typeof t&&(n=t,t="*");var i,r=0,s=t.toLowerCase().match(W)||[];if(f(n))for(;i=s[r++];)"+"===i[0]?(i=i.slice(1)||"*",(e[i]=e[i]||[]).unshift(n)):(e[i]=e[i]||[]).push(n)}}function Kt(e,t,n,i){var r={},s=e===$t;function a(o){var l;return r[o]=!0,E.each(e[o]||[],(function(e,o){var c=o(t,n,i);return"string"!=typeof c||s||r[c]?s?!(l=c):void 0:(t.dataTypes.unshift(c),a(c),!1)})),l}return a(t.dataTypes[0])||!r["*"]&&a("*")}function Xt(e,t){var n,i,r=E.ajaxSettings.flatOptions||{};for(n in t)void 0!==t[n]&&((r[n]?e:i||(i={}))[n]=t[n]);return i&&E.extend(!0,e,i),e}zt.href=xt.href,E.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:xt.href,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(xt.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Wt,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":E.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?Xt(Xt(e,E.ajaxSettings),t):Xt(E.ajaxSettings,e)},ajaxPrefilter:Gt(Vt),ajaxTransport:Gt($t),ajax:function(t,n){"object"==typeof t&&(n=t,t=void 0),n=n||{};var i,r,s,a,o,l,c,u,d,h,p=E.ajaxSetup({},n),f=p.context||p,m=p.context&&(f.nodeType||f.jquery)?E(f):E.event,y=E.Deferred(),_=E.Callbacks("once memory"),v=p.statusCode||{},b={},T={},w="canceled",S={readyState:0,getResponseHeader:function(e){var t;if(c){if(!a)for(a={};t=jt.exec(s);)a[t[1].toLowerCase()+" "]=(a[t[1].toLowerCase()+" "]||[]).concat(t[2]);t=a[e.toLowerCase()+" "]}return null==t?null:t.join(", ")},getAllResponseHeaders:function(){return c?s:null},setRequestHeader:function(e,t){return null==c&&(e=T[e.toLowerCase()]=T[e.toLowerCase()]||e,b[e]=t),this},overrideMimeType:function(e){return null==c&&(p.mimeType=e),this},statusCode:function(e){var t;if(e)if(c)S.always(e[S.status]);else for(t in e)v[t]=[v[t],e[t]];return this},abort:function(e){var t=e||w;return i&&i.abort(t),C(0,t),this}};if(y.promise(S),p.url=((t||p.url||xt.href)+"").replace(Ht,xt.protocol+"//"),p.type=n.method||n.type||p.method||p.type,p.dataTypes=(p.dataType||"*").toLowerCase().match(W)||[""],null==p.crossDomain){l=g.createElement("a");try{l.href=p.url,l.href=l.href,p.crossDomain=zt.protocol+"//"+zt.host!=l.protocol+"//"+l.host}catch(fB){p.crossDomain=!0}}if(p.data&&p.processData&&"string"!=typeof p.data&&(p.data=E.param(p.data,p.traditional)),Kt(Vt,p,n,S),c)return S;for(d in(u=E.event&&p.global)&&0==E.active++&&E.event.trigger("ajaxStart"),p.type=p.type.toUpperCase(),p.hasContent=!qt.test(p.type),r=p.url.replace(Ut,""),p.hasContent?p.data&&p.processData&&0===(p.contentType||"").indexOf("application/x-www-form-urlencoded")&&(p.data=p.data.replace(Ft,"+")):(h=p.url.slice(r.length),p.data&&(p.processData||"string"==typeof p.data)&&(r+=(At.test(r)?"&":"?")+p.data,delete p.data),!1===p.cache&&(r=r.replace(Bt,"$1"),h=(At.test(r)?"&":"?")+"_="+kt.guid+++h),p.url=r+h),p.ifModified&&(E.lastModified[r]&&S.setRequestHeader("If-Modified-Since",E.lastModified[r]),E.etag[r]&&S.setRequestHeader("If-None-Match",E.etag[r])),(p.data&&p.hasContent&&!1!==p.contentType||n.contentType)&&S.setRequestHeader("Content-Type",p.contentType),S.setRequestHeader("Accept",p.dataTypes[0]&&p.accepts[p.dataTypes[0]]?p.accepts[p.dataTypes[0]]+("*"!==p.dataTypes[0]?", "+Wt+"; q=0.01":""):p.accepts["*"]),p.headers)S.setRequestHeader(d,p.headers[d]);if(p.beforeSend&&(!1===p.beforeSend.call(f,S,p)||c))return S.abort();if(w="abort",_.add(p.complete),S.done(p.success),S.fail(p.error),i=Kt($t,p,n,S)){if(S.readyState=1,u&&m.trigger("ajaxSend",[S,p]),c)return S;p.async&&p.timeout>0&&(o=e.setTimeout((function(){S.abort("timeout")}),p.timeout));try{c=!1,i.send(b,C)}catch(fB){if(c)throw fB;C(-1,fB)}}else C(-1,"No Transport");function C(t,n,a,l){var d,h,g,b,T,w=n;c||(c=!0,o&&e.clearTimeout(o),i=void 0,s=l||"",S.readyState=t>0?4:0,d=t>=200&&t<300||304===t,a&&(b=function(e,t,n){for(var i,r,s,a,o=e.contents,l=e.dataTypes;"*"===l[0];)l.shift(),void 0===i&&(i=e.mimeType||t.getResponseHeader("Content-Type"));if(i)for(r in o)if(o[r]&&o[r].test(i)){l.unshift(r);break}if(l[0]in n)s=l[0];else{for(r in n){if(!l[0]||e.converters[r+" "+l[0]]){s=r;break}a||(a=r)}s=s||a}if(s)return s!==l[0]&&l.unshift(s),n[s]}(p,S,a)),!d&&E.inArray("script",p.dataTypes)>-1&&E.inArray("json",p.dataTypes)<0&&(p.converters["text script"]=function(){}),b=function(e,t,n,i){var r,s,a,o,l,c={},u=e.dataTypes.slice();if(u[1])for(a in e.converters)c[a.toLowerCase()]=e.converters[a];for(s=u.shift();s;)if(e.responseFields[s]&&(n[e.responseFields[s]]=t),!l&&i&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),l=s,s=u.shift())if("*"===s)s=l;else if("*"!==l&&l!==s){if(!(a=c[l+" "+s]||c["* "+s]))for(r in c)if((o=r.split(" "))[1]===s&&(a=c[l+" "+o[0]]||c["* "+o[0]])){!0===a?a=c[r]:!0!==c[r]&&(s=o[0],u.unshift(o[1]));break}if(!0!==a)if(a&&e.throws)t=a(t);else try{t=a(t)}catch(fB){return{state:"parsererror",error:a?fB:"No conversion from "+l+" to "+s}}}return{state:"success",data:t}}(p,b,S,d),d?(p.ifModified&&((T=S.getResponseHeader("Last-Modified"))&&(E.lastModified[r]=T),(T=S.getResponseHeader("etag"))&&(E.etag[r]=T)),204===t||"HEAD"===p.type?w="nocontent":304===t?w="notmodified":(w=b.state,h=b.data,d=!(g=b.error))):(g=w,!t&&w||(w="error",t<0&&(t=0))),S.status=t,S.statusText=(n||w)+"",d?y.resolveWith(f,[h,w,S]):y.rejectWith(f,[S,w,g]),S.statusCode(v),v=void 0,u&&m.trigger(d?"ajaxSuccess":"ajaxError",[S,p,d?h:g]),_.fireWith(f,[S,w]),u&&(m.trigger("ajaxComplete",[S,p]),--E.active||E.event.trigger("ajaxStop")))}return S},getJSON:function(e,t,n){return E.get(e,t,n,"json")},getScript:function(e,t){return E.get(e,void 0,t,"script")}}),E.each(["get","post"],(function(e,t){E[t]=function(e,n,i,r){return f(n)&&(r=r||i,i=n,n=void 0),E.ajax(E.extend({url:e,type:t,dataType:r,data:n,success:i},E.isPlainObject(e)&&e))}})),E.ajaxPrefilter((function(e){var t;for(t in e.headers)"content-type"===t.toLowerCase()&&(e.contentType=e.headers[t]||"")})),E._evalUrl=function(e,t,n){return E.ajax({url:e,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,converters:{"text script":function(){}},dataFilter:function(e){E.globalEval(e,t,n)}})},E.fn.extend({wrapAll:function(e){var t;return this[0]&&(f(e)&&(e=e.call(this[0])),t=E(e,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&t.insertBefore(this[0]),t.map((function(){for(var e=this;e.firstElementChild;)e=e.firstElementChild;return e})).append(this)),this},wrapInner:function(e){return f(e)?this.each((function(t){E(this).wrapInner(e.call(this,t))})):this.each((function(){var t=E(this),n=t.contents();n.length?n.wrapAll(e):t.append(e)}))},wrap:function(e){var t=f(e);return this.each((function(n){E(this).wrapAll(t?e.call(this,n):e)}))},unwrap:function(e){return this.parent(e).not("body").each((function(){E(this).replaceWith(this.childNodes)})),this}}),E.expr.pseudos.hidden=function(e){return!E.expr.pseudos.visible(e)},E.expr.pseudos.visible=function(e){return!!(e.offsetWidth||e.offsetHeight||e.getClientRects().length)},E.ajaxSettings.xhr=function(){try{return new e.XMLHttpRequest}catch(fB){}};var Yt={0:200,1223:204},Qt=E.ajaxSettings.xhr();p.cors=!!Qt&&"withCredentials"in Qt,p.ajax=Qt=!!Qt,E.ajaxTransport((function(t){var n,i;if(p.cors||Qt&&!t.crossDomain)return{send:function(r,s){var a,o=t.xhr();if(o.open(t.type,t.url,t.async,t.username,t.password),t.xhrFields)for(a in t.xhrFields)o[a]=t.xhrFields[a];for(a in t.mimeType&&o.overrideMimeType&&o.overrideMimeType(t.mimeType),t.crossDomain||r["X-Requested-With"]||(r["X-Requested-With"]="XMLHttpRequest"),r)o.setRequestHeader(a,r[a]);n=function(e){return function(){n&&(n=i=o.onload=o.onerror=o.onabort=o.ontimeout=o.onreadystatechange=null,"abort"===e?o.abort():"error"===e?"number"!=typeof o.status?s(0,"error"):s(o.status,o.statusText):s(Yt[o.status]||o.status,o.statusText,"text"!==(o.responseType||"text")||"string"!=typeof o.responseText?{binary:o.response}:{text:o.responseText},o.getAllResponseHeaders()))}},o.onload=n(),i=o.onerror=o.ontimeout=n("error"),void 0!==o.onabort?o.onabort=i:o.onreadystatechange=function(){4===o.readyState&&e.setTimeout((function(){n&&i()}))},n=n("abort");try{o.send(t.hasContent&&t.data||null)}catch(fB){if(n)throw fB}},abort:function(){n&&n()}}})),E.ajaxPrefilter((function(e){e.crossDomain&&(e.contents.script=!1)})),E.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(e){return E.globalEval(e),e}}}),E.ajaxPrefilter("script",(function(e){void 0===e.cache&&(e.cache=!1),e.crossDomain&&(e.type="GET")})),E.ajaxTransport("script",(function(e){var t,n;if(e.crossDomain||e.scriptAttrs)return{send:function(i,r){t=E("<script>").attr(e.scriptAttrs||{}).prop({charset:e.scriptCharset,src:e.url}).on("load error",n=function(e){t.remove(),n=null,e&&r("error"===e.type?404:200,e.type)}),g.head.appendChild(t[0])},abort:function(){n&&n()}}}));var Jt,Zt=[],en=/(=)\?(?=&|$)|\?\?/;E.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=Zt.pop()||E.expando+"_"+kt.guid++;return this[e]=!0,e}}),E.ajaxPrefilter("json jsonp",(function(t,n,i){var r,s,a,o=!1!==t.jsonp&&(en.test(t.url)?"url":"string"==typeof t.data&&0===(t.contentType||"").indexOf("application/x-www-form-urlencoded")&&en.test(t.data)&&"data");if(o||"jsonp"===t.dataTypes[0])return r=t.jsonpCallback=f(t.jsonpCallback)?t.jsonpCallback():t.jsonpCallback,o?t[o]=t[o].replace(en,"$1"+r):!1!==t.jsonp&&(t.url+=(At.test(t.url)?"&":"?")+t.jsonp+"="+r),t.converters["script json"]=function(){return a||E.error(r+" was not called"),a[0]},t.dataTypes[0]="json",s=e[r],e[r]=function(){a=arguments},i.always((function(){void 0===s?E(e).removeProp(r):e[r]=s,t[r]&&(t.jsonpCallback=n.jsonpCallback,Zt.push(r)),a&&f(s)&&s(a[0]),a=s=void 0})),"script"})),p.createHTMLDocument=((Jt=g.implementation.createHTMLDocument("").body).innerHTML="<form></form><form></form>",2===Jt.childNodes.length),E.parseHTML=function(e,t,n){return"string"!=typeof e?[]:("boolean"==typeof t&&(n=t,t=!1),t||(p.createHTMLDocument?((i=(t=g.implementation.createHTMLDocument("")).createElement("base")).href=g.location.href,t.head.appendChild(i)):t=g),s=!n&&[],(r=F.exec(e))?[t.createElement(r[1])]:(r=Oe([e],t,s),s&&s.length&&E(s).remove(),E.merge([],r.childNodes)));var i,r,s},E.fn.load=function(e,t,n){var i,r,s,a=this,o=e.indexOf(" ");return o>-1&&(i=wt(e.slice(o)),e=e.slice(0,o)),f(t)?(n=t,t=void 0):t&&"object"==typeof t&&(r="POST"),a.length>0&&E.ajax({url:e,type:r||"GET",dataType:"html",data:t}).done((function(e){s=arguments,a.html(i?E("<div>").append(E.parseHTML(e)).find(i):e)})).always(n&&function(e,t){a.each((function(){n.apply(this,s||[e.responseText,t,e])}))}),this},E.expr.pseudos.animated=function(e){return E.grep(E.timers,(function(t){return e===t.elem})).length},E.offset={setOffset:function(e,t,n){var i,r,s,a,o,l,c=E.css(e,"position"),u=E(e),d={};"static"===c&&(e.style.position="relative"),o=u.offset(),s=E.css(e,"top"),l=E.css(e,"left"),("absolute"===c||"fixed"===c)&&(s+l).indexOf("auto")>-1?(a=(i=u.position()).top,r=i.left):(a=parseFloat(s)||0,r=parseFloat(l)||0),f(t)&&(t=t.call(e,n,E.extend({},o))),null!=t.top&&(d.top=t.top-o.top+a),null!=t.left&&(d.left=t.left-o.left+r),"using"in t?t.using.call(e,d):u.css(d)}},E.fn.extend({offset:function(e){if(arguments.length)return void 0===e?this:this.each((function(t){E.offset.setOffset(this,e,t)}));var t,n,i=this[0];return i?i.getClientRects().length?(t=i.getBoundingClientRect(),n=i.ownerDocument.defaultView,{top:t.top+n.pageYOffset,left:t.left+n.pageXOffset}):{top:0,left:0}:void 0},position:function(){if(this[0]){var e,t,n,i=this[0],r={top:0,left:0};if("fixed"===E.css(i,"position"))t=i.getBoundingClientRect();else{for(t=this.offset(),n=i.ownerDocument,e=i.offsetParent||n.documentElement;e&&(e===n.body||e===n.documentElement)&&"static"===E.css(e,"position");)e=e.parentNode;e&&e!==i&&1===e.nodeType&&((r=E(e).offset()).top+=E.css(e,"borderTopWidth",!0),r.left+=E.css(e,"borderLeftWidth",!0))}return{top:t.top-r.top-E.css(i,"marginTop",!0),left:t.left-r.left-E.css(i,"marginLeft",!0)}}},offsetParent:function(){return this.map((function(){for(var e=this.offsetParent;e&&"static"===E.css(e,"position");)e=e.offsetParent;return e||pe}))}}),E.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},(function(e,t){var n="pageYOffset"===t;E.fn[e]=function(i){return J(this,(function(e,i,r){var s;if(m(e)?s=e:9===e.nodeType&&(s=e.defaultView),void 0===r)return s?s[t]:e[i];s?s.scrollTo(n?s.pageXOffset:r,n?r:s.pageYOffset):e[i]=r}),e,i,arguments.length)}})),E.each(["top","left"],(function(e,t){E.cssHooks[t]=Je(p.pixelPosition,(function(e,n){if(n)return n=Qe(e,t),ze.test(n)?E(e).position()[t]+"px":n}))})),E.each({Height:"height",Width:"width"},(function(e,t){E.each({padding:"inner"+e,content:t,"":"outer"+e},(function(n,i){E.fn[i]=function(r,s){var a=arguments.length&&(n||"boolean"!=typeof r),o=n||(!0===r||!0===s?"margin":"border");return J(this,(function(t,n,r){var s;return m(t)?0===i.indexOf("outer")?t["inner"+e]:t.document.documentElement["client"+e]:9===t.nodeType?(s=t.documentElement,Math.max(t.body["scroll"+e],s["scroll"+e],t.body["offset"+e],s["offset"+e],s["client"+e])):void 0===r?E.css(t,n,o):E.style(t,n,r,o)}),t,a?r:void 0,a)}}))})),E.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],(function(e,t){E.fn[t]=function(e){return this.on(t,e)}})),E.fn.extend({bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,n,i){return this.on(t,e,n,i)},undelegate:function(e,t,n){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",n)},hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)}}),E.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),(function(e,t){E.fn[t]=function(e,n){return arguments.length>0?this.on(t,null,e,n):this.trigger(t)}}));var tn=/^[\s\uFEFF\xA0]+|([^\s\uFEFF\xA0])[\s\uFEFF\xA0]+$/g;E.proxy=function(e,t){var n,i,s;if("string"==typeof t&&(n=e[t],t=e,e=n),f(e))return i=r.call(arguments,2),s=function(){return e.apply(t||this,i.concat(r.call(arguments)))},s.guid=e.guid=e.guid||E.guid++,s},E.holdReady=function(e){e?E.readyWait++:E.ready(!0)},E.isArray=Array.isArray,E.parseJSON=JSON.parse,E.nodeName=S,E.isFunction=f,E.isWindow=m,E.camelCase=ne,E.type=v,E.now=Date.now,E.isNumeric=function(e){var t=E.type(e);return("number"===t||"string"===t)&&!isNaN(e-parseFloat(e))},E.trim=function(e){return null==e?"":(e+"").replace(tn,"$1")};var nn=e.jQuery,rn=e.$;return E.noConflict=function(t){return e.$===E&&(e.$=rn),t&&e.jQuery===E&&(e.jQuery=nn),E},void 0===t&&(e.jQuery=e.$=E),E}))}(cB);const uB=mb(cB.exports);var dB,hB;!function(e){e.Dark="DARK",e.Light="LIGHT",e.Default="DEFAULT"}(dB||(dB={})),function(e){e.None="NONE",e.Slide="SLIDE",e.Fade="FADE"}(hB||(hB={}));const pB=_R("StatusBar");window.$=uB,window.Alpine=lB,lB.start(),window.addEventListener("message",(e=>{switch(e.data.type){case"changeorientation":window.screen.orientation.lock(e.data.orientation);break;case"unlockorientation":window.screen.orientation.unlock();break;case"managestatusbar":switch(e.data.action){case"setoverlays":pB.setOverlaysWebView({overlay:e.data.data});break;case"settheme":"light"==e.data.data?pB.setStyle({style:dB.Light}):"dark"==e.data.data&&pB.setStyle({style:dB.Dark});break;case"show":pB.show();break;case"hide":pB.hide()}break;case"devwebview":{let e=new URLSearchParams;e.set("devmodeview",1),window.location.href=window.location.href+"?"+e.toString()}break;case"devwebviewremote":{let e=new URLSearchParams;e.set("devmodeviewremote",1),window.location.href=window.location.href+"?"+e.toString()}}}));
